/*! For license information please see 9096.c097851e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9096,410],{1773:function(e,t,n){n.d(t,{a:function(){return f},b:function(){return m},c:function(){return h}});var i,r=n(15671),o=n(43144),a=n(60136),l=n(29388),s=n(23132),c=(n(75610),n(77196)),u=i=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).active=!1,i.className=null,i.disabled=!1,i.id=null,i.indicator=!1,i.title=null,i.type=null,i.visible=!0,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),n}((0,c.s)(s.y));(0,s.e)([(0,s.d)()],u.prototype,"active",void 0),(0,s.e)([(0,s.d)()],u.prototype,"className",void 0),(0,s.e)([(0,s.d)()],u.prototype,"disabled",void 0),(0,s.e)([(0,s.d)()],u.prototype,"id",void 0),(0,s.e)([(0,s.d)()],u.prototype,"indicator",void 0),(0,s.e)([(0,s.d)()],u.prototype,"title",void 0),(0,s.e)([(0,s.d)()],u.prototype,"type",void 0),(0,s.e)([(0,s.d)()],u.prototype,"visible",void 0);var d,h=u=i=(0,s.e)([(0,s.n)("esri.support.actions.ActionBase")],u),v=d=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).image=null,i.type="button",i}return(0,o.Z)(n,[{key:"clone",value:function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),n}(h);(0,s.e)([(0,s.d)()],v.prototype,"image",void 0);var p,f=v=d=(0,s.e)([(0,s.n)("esri.support.Action.ActionButton")],v),g=p=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).image=null,i.type="toggle",i.value=!1,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new p({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),n}(h);(0,s.e)([(0,s.d)()],g.prototype,"image",void 0),(0,s.e)([(0,s.d)()],g.prototype,"value",void 0);var m=g=p=(0,s.e)([(0,s.n)("esri.support.Action.ActionToggle")],g)},97033:function(e,t,n){n.d(t,{a:function(){return f},c:function(){return d},d:function(){return g}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),l=n(23132),s=n(77470),c=n(75610),u=n(36551),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new s.u,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return(0,r.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,u.l)}},{key:"addWhen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,u.f)}},{key:"addOnCollectionChange",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.initial,o=void 0!==r&&r,a=i.final,l=void 0!==a&&a,s=++this.handleId;return this.handles.add([(0,u.a)(e,"after-changes",this._createSyncUpdatingCallback(),u.U),(0,u.a)(e,"change",t,{onListenerAdd:o?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:l?function(e){return t({added:[],removed:e.toArray()})}:void 0})],s),{remove:function(){return n.handles.remove(s)}}}},{key:"addPromise",value:function(e){var t=this;if((0,c.t)(e))return e;var n=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(p)||t._set("updating",!1))}},n),this.pendingPromises.add(e),this._set("updating",!0);var i=function(){return t.handles.remove(n)};return e.then(i,i),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,o);var a=r(e,t,i);return this.handles.add(a,o),{remove:function(){return n.handles.remove(o)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var n=this._createSyncUpdatingCallback(),i=(0,u.l)(e,n,{sync:!0,equals:function(){return!1}});return this.handles.add(i,t),i}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(p),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add((0,l.B)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(p))})),p)}}}]),n}(l.y);(0,l.e)([(0,l.d)({readOnly:!0})],d.prototype,"updating",void 0),d=(0,l.e)([(0,l.n)("esri.core.support.WatchUpdatingTracking")],d);var h,v,p=-42;(v=h||(h={}))[v.NONE=0]="NONE",v[v.SYNC=1]="SYNC",v[v.INIT=2]="INIT";var f=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new s.u}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new d}}]),n}(e);return(0,l.e)([(0,l.d)({readOnly:!0})],t.prototype,"handles",null),(0,l.e)([(0,l.d)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,l.e)([(0,l.n)("esri.core.HandleOwner")],t),t},g=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(f(l.y));g=(0,l.e)([(0,l.n)("esri.core.HandleOwner")],g)},77196:function(e,t,n){n.d(t,{o:function(){return d},s:function(){return u}});var i=n(43144),r=n(15671),o=n(97326),a=n(60136),l=n(29388),s=n(23132),c=0,u=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty((0,o.Z)(e),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+c++}),e}return(0,i.Z)(n)}(e);return t=(0,s.e)([(0,s.n)("esri.core.Identifiable")],t)},d=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}(u(function(){return(0,i.Z)((function e(){(0,r.Z)(this,e)}))}()));d=(0,s.e)([(0,s.n)("esri.core.Identifiable")],d)},59096:function(e,t,n){n.r(t);var i,r=n(93433),o=n(4942),a=n(1413),l=n(97326),s=n(74165),c=n(15861),u=n(15671),d=n(43144),h=n(60136),v=n(29388),p=n(23132),f=n(80175),g=n(77470),m=n(75610),y=n(36551),b=n(77389),_=n(84538),w=n(97033),k=n(77196),I=n(1773),C=n(79042),S=n(42471),E=n(82162),A=(n(21583),n(49580),n(41742),n(57714),n(43920),n(54841),n(33703),n(92870),i=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this,e)).displayValueEnabled=!1,i.max=1,i.min=0,i.step=.1,i.type="slider",i.value=null,i}return(0,d.Z)(n,[{key:"clone",value:function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}}]),n}(I.c));(0,p.e)([(0,p.d)()],A.prototype,"displayValueEnabled",void 0),(0,p.e)([(0,p.d)()],A.prototype,"max",void 0),(0,p.e)([(0,p.d)()],A.prototype,"min",void 0),(0,p.e)([(0,p.d)()],A.prototype,"step",void 0),(0,p.e)([(0,p.d)()],A.prototype,"value",void 0);var T=A=i=(0,p.e)([(0,p.n)("esri.support.Action.ActionSlider")],A),O="hide",D="hide-children";function x(e){if(e)return null!=e.listMode?e.listMode:void 0}function N(e){if(e)return"type"in e?e.listMode!==D&&"wmts"!==e.type?"group"===e.type?"layers":"sublayers":void 0:"sublayers"}function M(e,t){e&&e.sort((function(e,n){var i=t.indexOf(e.uid),r=t.indexOf(n.uid);return i>r?-1:i<r?1:0}))}function L(e){var t=null===e||void 0===e?void 0:e.layer;return t&&"group"===t.type?t.layers:null}function Z(e,t){var n,i=null===(n=e.layer)||void 0===n?void 0:n.uid;return i&&t.find((function(e){var t;return(null===(t=e.layer)||void 0===t?void 0:t.uid)===i}))}function P(e){var t=function(e){return!(null===e||void 0===e||!e.layer)}(e)?e:null,n=null===e||void 0===e?void 0:e.parent,i="map-image"===(null===n||void 0===n?void 0:n.type)&&t.source;return i&&n?{layer:n,title:"",sublayerIds:[i.mapLayerId]}:{layer:e,title:""}}var R="esri-layer-list-panel",F="esri-layer-list-panel__content",B="esri-layer-list-panel__content--legend",V="esri-layer-list-panel__content--string",U="esri-layer-list-panel__content--html-element",X="esri-layer-list-panel__content--widget",Y=function(e){(0,h.Z)(i,e);var t=(0,v.Z)(i);function i(e,n){var r;return(0,u.Z)(this,i),(r=t.call(this,e,n))._legend=null,r._handles=new g.u,r.content=null,r.image=null,r.listItem=null,r.open=!1,r.visible=!0,r}return(0,d.Z)(i,[{key:"initialize",value:function(){var e=this;this.own([(0,y.l)((function(){return e.content}),(function(t){return e._createLegend(t)}),y.h)])}},{key:"destroy",value:function(){var e=this._legend;e&&e.destroy(),this._legend=null}},{key:"className",get:function(){var e=this.image,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""},set:function(e){void 0!==e?this._override("className",e):this._clearOverride("className")}},{key:"title",get:function(){var e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")}},{key:"render",value:function(){return(0,_.n)("div",{class:R},this._renderContents())}},{key:"_renderContent",value:function(e){var t=this._legend,n=this.listItem;return e?"legend"===e?n&&n.view&&n.layer&&t?(0,_.n)("div",{class:this.classes(F,B),key:t},t.render()):null:"string"==typeof e?(0,_.n)("div",{class:this.classes(F,V),key:e,innerHTML:e}):(0,C.e)(e)?(0,_.n)("div",{class:this.classes(F,X),key:e},e.render()):e instanceof HTMLElement?(0,_.n)("div",{class:this.classes(F,U),key:e,bind:e,afterCreate:this._attachToNode}):null:null}},{key:"_renderContents",value:function(){var e=this,t=this.content;return Array.isArray(t)?t.map((function(t){return e._renderContent(t)})):this._renderContent(t)}},{key:"_getLegendOptions",value:function(){var e=this.listItem;if(!e)return{};var t=e.layer,n=e.view;return t&&n?{view:n,layerInfos:[P(t)]}:{}}},{key:"_createLegend",value:function(e){var t=this;this._hasLegend(e)&&!this._legend&&Promise.all([n.e(1340),n.e(1296),n.e(3024),n.e(491),n.e(4980),n.e(1451),n.e(7154),n.e(2329),n.e(407),n.e(709),n.e(6460),n.e(262),n.e(9611),n.e(5431),n.e(424),n.e(406),n.e(7902)]).then(n.bind(n,97902)).then((function(e){var n=e.default,i=t._handles,r=t.listItem,o=new n(t._getLegendOptions());t._legend=o,t.notifyChange("className"),t.notifyChange("title");var a=(0,y.l)((function(){var e,t;return[null===r||void 0===r?void 0:r.view,null===r||void 0===r?void 0:r.layer,null===r||void 0===r||null===(e=r.layer)||void 0===e?void 0:e.source,null===r||void 0===r||null===(t=r.layer)||void 0===t?void 0:t.parent]}),(function(){return t._updateLegend(o)}),y.h);i.add(a,"legends"),t.scheduleRender()}))}},{key:"_hasLegend",value:function(e){var t="legend";return e===t||!!Array.isArray(e)&&e.includes(t)}},{key:"_attachToNode",value:function(e){e.appendChild(this)}},{key:"_updateLegend",value:function(e){e.set(this._getLegendOptions()),this.scheduleRender()}},{key:"_getWidget",value:function(e){return"legend"===e?this._legend:(0,C.e)(e)?e:null}},{key:"_getFirstWidget",value:function(){var e=this,t=this.content;if(Array.isArray(t)){var n=null;return t.some((function(t){var i=e._getWidget(t);return i&&(n=i),!!i})),n}return this._getWidget(t)}}]),i}((0,k.s)(_.O));(0,p.e)([(0,p.d)()],Y.prototype,"className",null),(0,p.e)([(0,p.d)()],Y.prototype,"content",void 0),(0,p.e)([(0,p.d)()],Y.prototype,"image",void 0),(0,p.e)([(0,p.d)()],Y.prototype,"listItem",void 0),(0,p.e)([(0,p.d)()],Y.prototype,"title",null),(0,p.e)([(0,p.d)()],Y.prototype,"open",void 0),(0,p.e)([(0,p.d)()],Y.prototype,"visible",void 0);var H,j=Y=(0,p.e)([(0,p.n)("esri.widgets.LayerList.ListItemPanel")],Y),W=f.j.ofType({key:"type",defaultKeyValue:"button",base:I.c,typeMap:{button:I.a,toggle:I.b,slider:T}}),z=f.j.ofType(W),G="layer",q="child-list-mode",K=H=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this,e)).actionsSections=new z,i.actionsOpen=!1,i.children=new(f.j.ofType(H)),i.childrenSortable=!0,i.error=null,i.hidden=!1,i.layer=null,i.layerView=null,i.listItemCreatedFunction=null,i.open=!1,i.panel=null,i.parent=null,i.sortable=!0,i.view=null,i.visible=null,i}return(0,d.Z)(n,[{key:"initialize",value:function(){var e=this;if(this.handles.add([(0,y.l)((function(){return e.layer}),(function(t){return e._watchLayerProperties(t)}),y.h),(0,y.l)((function(){return e.view}),(function(t){return e._updateChildren(t)}),y.h),(0,y.l)((function(){return e.panel}),(function(t){return e._setListItemOnPanel(t)}),y.h),(0,y.l)((function(){return[e.layer,e.view]}),(function(){return e._getLayerView()}),y.h)]),"function"==typeof this.listItemCreatedFunction){var t={item:this};this.listItemCreatedFunction.call(null,t)}}},{key:"destroy",value:function(){this.view=null}},{key:"connectionStatus",get:function(){var e=this.layerView;if(e&&"connectionStatus"in e)return e.connectionStatus}},{key:"incompatible",get:function(){var e=this.layerView;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}},{key:"castPanel",value:function(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new j(e):null}},{key:"title",get:function(){var e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")}},{key:"updating",get:function(){var e=this.layerView;return!this.connectionStatus&&(e?e.updating:this._isLayerUpdating(this.layer))}},{key:"visibleAtCurrentScale",get:function(){return!function(e,t){if(!e||isNaN(t))return!1;var n=function(e){if(e)return null!=e.minScale?e.minScale:void 0}(e),i=function(e){if(e)return null!=e.maxScale?e.maxScale:void 0}(e),r=!isNaN(n)&&n>0&&t>n,o=!isNaN(i)&&i>0&&t<i;return r||o}(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return function(e){if(!e)return"inherited";var t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";var n=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof n?n?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"}(this.layer)}},{key:"clone",value:function(){return new H({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}},{key:"_setListItemOnPanel",value:function(e){e&&(e.listItem=this)}},{key:"_updateChildren",value:function(e){var t=this.children;t&&t.forEach((function(t){return t.view=e}))}},{key:"_addChildren",value:function(e){var t=this;if(this.handles.remove(q),this.children.removeAll(),e){e.forEach((function(n){t.handles.add((0,y.l)((function(){return n.listMode}),(function(){return t._addChildren(e)})),q)}));var n=e.filter((function(e){return"hide"!==x(e)}));this.children.addMany(this._makeChildren(n))}}},{key:"_watchSublayerChanges",value:function(e){var t=this;e&&this.handles.add(e.on("change",(function(){t._addChildren(e)})),G)}},{key:"_initializeChildLayers",value:function(e){this._addChildren(e),this._watchSublayerChanges(e)}},{key:"_makeChildren",value:function(e){var t=this;return e.map((function(e){return function(e){return x(e)!==O}(e)?new H({layer:e,listItemCreatedFunction:t.listItemCreatedFunction,parent:t,view:t.view}):null})).reverse()}},{key:"_watchLayerProperties",value:function(e){var t=this;if(this.handles&&(this.handles.remove(G),this.handles.remove(q),e))if(this.handles.add((0,y.l)((function(){return e.listMode}),(function(){return t._watchLayerProperties(e)})),G),"hide-children"!==x(e)){var n=N(e);n&&this.handles.add((0,y.l)((function(){return e[n]}),(function(){e.hasOwnProperty(n)&&t._initializeChildLayers(e[n])}),y.h),G)}else this.children.removeAll()}},{key:"_getLayerView",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.layer,n=this.view,!t||!n){e.next=13;break}return e.prev=2,e.next=5,n.whenLayerView(t);case 5:if((i=e.sent).layer===this.layer){e.next=8;break}return e.abrupt("return");case 8:this._set("layerView",i),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"_isLayerUpdating",value:function(e){return e&&"loading"===e.loadStatus}}]),n}((0,k.s)((0,w.a)(p.y)));(0,p.e)([(0,p.d)({type:z})],K.prototype,"actionsSections",void 0),(0,p.e)([(0,p.d)()],K.prototype,"actionsOpen",void 0),(0,p.e)([(0,p.d)({type:f.j})],K.prototype,"children",void 0),(0,p.e)([(0,p.d)()],K.prototype,"childrenSortable",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"connectionStatus",null),(0,p.e)([(0,b.o)("layer.loadError?")],K.prototype,"error",void 0),(0,p.e)([(0,p.d)()],K.prototype,"hidden",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"incompatible",null),(0,p.e)([(0,p.d)()],K.prototype,"layer",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"layerView",void 0),(0,p.e)([(0,p.d)()],K.prototype,"listItemCreatedFunction",void 0),(0,p.e)([(0,p.d)()],K.prototype,"open",void 0),(0,p.e)([(0,p.d)({type:j})],K.prototype,"panel",void 0),(0,p.e)([(0,p.q)("panel")],K.prototype,"castPanel",null),(0,p.e)([(0,p.d)()],K.prototype,"parent",void 0),(0,p.e)([(0,p.d)()],K.prototype,"sortable",void 0),(0,p.e)([(0,p.d)()],K.prototype,"title",null),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"updating",null),(0,p.e)([(0,p.d)({value:null})],K.prototype,"view",void 0),(0,p.e)([(0,b.o)("layer.visible")],K.prototype,"visible",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"visibleAtCurrentScale",null),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"visibilityMode",null);var $=K=H=(0,p.e)([(0,p.n)("esri.widgets.LayerList.ListItem")],K),J="view",Q="view-layers",ee="map-layers",te="layer-views",ne="layer-list-mode",ie="children",re=f.j.ofType($),oe=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this,e))._handles=new g.u,i.listItemCreatedFunction=null,i.operationalItems=new re,i.view=null,i}return(0,d.Z)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([(0,y.l)((function(){var t;return[e.view,null===(t=e.view)||void 0===t?void 0:t.ready]}),(function(){return e._viewHandles()}),y.h),(0,y.l)((function(){return e.listItemCreatedFunction}),(function(){return e._listItemCreatedFunctionChanged()}))],J)}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}},{key:"state",get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}},{key:"triggerAction",value:function(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}},{key:"moveListItem",value:function(e,t,n,i){var r,o,a=null===e||void 0===e?void 0:e.layer;if(a){var l=null===(r=this.view)||void 0===r||null===(o=r.map)||void 0===o?void 0:o.layers,s=t?L(t):l,c=n?L(n):l;if(s&&c){var u=this.operationalItems,d=(null===t||void 0===t?void 0:t.children)||u,h=(null===n||void 0===n?void 0:n.children)||u,v=c.length-i;e.parent=n||null,d.includes(e)&&d.remove(e),s.includes(a)&&s.remove(a),h.includes(e)||h.add(e,v),c.includes(a)||c.add(a,v)}}}},{key:"_createLayerViewHandles",value:function(e){var t=this,n=this._handles;n.remove(te),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),te)}},{key:"_createMapLayerHandles",value:function(e){var t=this,n=this._handles;n.remove(ee),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),ee)}},{key:"_createListItem",value:function(e){var t=this.view,n=this.listItemCreatedFunction;return new $({layer:e,listItemCreatedFunction:n,view:t})}},{key:"_removeAllItems",value:function(){var e=this._handles,t=this.operationalItems;t.forEach((function(t){e.remove("".concat(ie,"-").concat(t.uid))})),t.removeAll()}},{key:"_getViewableLayers",value:function(e){if(e)return e.filter((function(e){return"hide"!==x(e)}))}},{key:"_watchLayersListMode",value:function(e){var t=this,n=this._handles;n.remove(ne),e&&e.forEach((function(e){"listMode"in e&&n.add((0,y.l)((function(){return e.listMode}),(function(){return t._compileList()})),ne)}))}},{key:"_compileList",value:function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);var t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}},{key:"_createNewItems",value:function(e){var t=this,n=this.operationalItems;e.forEach((function(e){n.find((function(t){return t.layer===e}))||n.add(t._createListItem(e))}))}},{key:"_removeItems",value:function(e){var t=this._handles,n=this.operationalItems,i=[];n.forEach((function(n){n&&e&&e.includes(n.layer)||(t.remove("".concat(ie,"-").concat(n.uid)),i.push(n))})),n.removeMany(i)}},{key:"_sortItems",value:function(e){this.operationalItems.sort((function(t,n){var i=e.indexOf(t.layer),r=e.indexOf(n.layer);return i>r?-1:i<r?1:0}))}},{key:"_listItemCreatedFunctionChanged",value:function(){this._removeAllItems(),this._compileList()}},{key:"_viewHandles",value:function(){var e=this,t=this._handles,n=this.view;t.remove([ee,te,Q]),this._compileList(),n&&n.ready&&t.add([(0,y.l)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.allLayers}),(function(t){return e._createMapLayerHandles(t)}),y.h),(0,y.l)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.allLayerViews}),(function(t){return e._createLayerViewHandles(t)}),y.h)],Q)}}]),n}(f.n.EventedAccessor);(0,p.e)([(0,p.d)()],oe.prototype,"listItemCreatedFunction",void 0),(0,p.e)([(0,p.d)({type:re})],oe.prototype,"operationalItems",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],oe.prototype,"state",null),(0,p.e)([(0,p.d)()],oe.prototype,"view",void 0);var ae=oe=(0,p.e)([(0,p.n)("esri.widgets.LayerList.LayerListViewModel")],oe);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e){return ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(){return de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},de.apply(this,arguments)}function he(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ve(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var pe=ve(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fe=ve(/Edge/i),ge=ve(/firefox/i),me=ve(/safari/i)&&!ve(/chrome/i)&&!ve(/android/i),ye=ve(/iP(ad|od|hone)/i),be=ve(/chrome/i)&&ve(/android/i),_e={capture:!1,passive:!1};function we(e,t,n){e.addEventListener(t,n,!pe&&_e)}function ke(e,t,n){e.removeEventListener(t,n,!pe&&_e)}function Ie(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(j){return!1}return!1}}function Ce(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Se(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Ie(e,t):Ie(e,t))||i&&e===n)return e;if(e===n)break}while(e=Ce(e))}return null}var Ee,Ae=/\s+/g;function Te(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(Ae," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(Ae," ")}}function Oe(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"===typeof n?"":"px")}}function De(e,t){var n="";if("string"===typeof e)n=e;else do{var i=Oe(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function xe(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Ne(){var e=document.scrollingElement;return e||document.documentElement}function Me(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var o,a,l,s,c,u,d;if(e!==window&&e.parentNode&&e!==Ne()?(a=(o=e.getBoundingClientRect()).top,l=o.left,s=o.bottom,c=o.right,u=o.height,d=o.width):(a=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!pe))do{if(r&&r.getBoundingClientRect&&("none"!==Oe(r,"transform")||n&&"static"!==Oe(r,"position"))){var h=r.getBoundingClientRect();a-=h.top+parseInt(Oe(r,"border-top-width")),l-=h.left+parseInt(Oe(r,"border-left-width")),s=a+o.height,c=l+o.width;break}}while(r=r.parentNode);if(i&&e!==window){var v=De(r||e),p=v&&v.a,f=v&&v.d;v&&(s=(a/=f)+(u/=f),c=(l/=p)+(d/=p))}return{top:a,left:l,bottom:s,right:c,width:d,height:u}}}function Le(e,t,n){for(var i=Be(e,!0),r=Me(e)[t];i;){var o=Me(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===Ne())break;i=Be(i,!1)}return!1}function Ze(e,t,n,i){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Xt.ghost&&(i||a[o]!==Xt.dragged)&&Se(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function Pe(e,t){for(var n=e.lastElementChild;n&&(n===Xt.ghost||"none"===Oe(n,"display")||t&&!Ie(n,t));)n=n.previousElementSibling;return n||null}function Re(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Xt.clone||t&&!Ie(e,t)||n++;return n}function Fe(e){var t=0,n=0,i=Ne();if(e)do{var r=De(e),o=r.a,a=r.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==i&&(e=e.parentNode));return[t,n]}function Be(e,t){if(!e||!e.getBoundingClientRect)return Ne();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Oe(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Ne();if(i||t)return n;i=!0}}}while(n=n.parentNode);return Ne()}function Ve(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ue(e,t){return function(){if(!Ee){var n=arguments,i=this;1===n.length?e.call(i,n[0]):e.apply(i,n),Ee=setTimeout((function(){Ee=void 0}),t)}}}function Xe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ye(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var He="Sortable"+(new Date).getTime();function je(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Oe(e,"display")&&e!==Xt.ghost){t.push({target:e,rect:Me(e)});var n=se({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=De(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var r=!1,o=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=Me(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=De(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&Ve(s,l)&&!Ve(a,l)&&(u.top-l.top)/(u.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(u,s,c,i.options)),Ve(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=i.options.animation),i.animate(n,u,l,t)),t&&(r=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){Oe(e,"transition",""),Oe(e,"transform","");var r=De(this.el),o=r&&r.a,a=r&&r.d,l=(t.left-n.left)/(o||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,Oe(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Oe(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Oe(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Oe(e,"transition",""),Oe(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var We=[],ze={initializeByDefault:!0},Ge={mount:function(e){for(var t in ze)ze.hasOwnProperty(t)&&!(t in e)&&(e[t]=ze[t]);We.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),We.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";We.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r](se({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](se({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var r in We.forEach((function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var o=new i(e,t,e.options);o.sortable=e,o.options=e.options,e[r]=o,de(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);"undefined"!==typeof o&&(e.options[r]=o)}},getEventProperties:function(e,t){var n={};return We.forEach((function(i){"function"===typeof i.eventProperties&&de(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return We.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"===typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))})),i}};var qe=["evt"],Ke=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=he(n,qe);Ge.pluginEvent.bind(Xt)(e,t,se({dragEl:Je,parentEl:Qe,ghostEl:et,rootEl:tt,nextEl:nt,lastDownEl:it,cloneEl:rt,cloneHidden:ot,dragStarted:yt,putSortable:dt,activeSortable:Xt.active,originalEvent:i,oldIndex:at,oldDraggableIndex:st,newIndex:lt,newDraggableIndex:ct,hideGhostForTarget:Ft,unhideGhostForTarget:Bt,cloneNowHidden:function(){ot=!0},cloneNowShown:function(){ot=!1},dispatchSortableEvent:function(e){$e({sortable:t,name:e,originalEvent:i})}},r))};function $e(e){!function(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,o=e.cloneEl,a=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,v=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[He]){var f,g=t.options,m="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||pe||fe?(f=document.createEvent("Event")).initEvent(i,!0,!0):f=new CustomEvent(i,{bubbles:!0,cancelable:!0}),f.to=a||n,f.from=l||n,f.item=r||n,f.clone=o,f.oldIndex=s,f.newIndex=c,f.oldDraggableIndex=u,f.newDraggableIndex=d,f.originalEvent=h,f.pullMode=v?v.lastPutMode:void 0;var y=se(se({},p),Ge.getEventProperties(i,t));for(var b in y)f[b]=y[b];n&&n.dispatchEvent(f),g[m]&&g[m].call(t,f)}}(se({putSortable:dt,cloneEl:rt,targetEl:Je,rootEl:tt,oldIndex:at,oldDraggableIndex:st,newIndex:lt,newDraggableIndex:ct},e))}var Je,Qe,et,tt,nt,it,rt,ot,at,lt,st,ct,ut,dt,ht,vt,pt,ft,gt,mt,yt,bt,_t,wt,kt,It=!1,Ct=!1,St=[],Et=!1,At=!1,Tt=[],Ot=!1,Dt=[],xt="undefined"!==typeof document,Nt=ye,Mt=fe||pe?"cssFloat":"float",Lt=xt&&!be&&!ye&&"draggable"in document.createElement("div"),Zt=function(){if(xt){if(pe)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Pt=function(e,t){var n=Oe(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Ze(e,0,t),o=Ze(e,1,t),a=r&&Oe(r),l=o&&Oe(o),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Me(r).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Me(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=i&&"none"===n[Mt]||o&&"none"===n[Mt]&&s+c>i)?"vertical":"horizontal"},Rt=function(e){function t(e,n){return function(i,r,o,a){var l=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(i,r,o,a),n)(i,r,o,a);var s=(n?i:r).options.group.name;return!0===e||"string"===typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},i=e.group;i&&"object"==ce(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Ft=function(){!Zt&&et&&Oe(et,"display","none")},Bt=function(){!Zt&&et&&Oe(et,"display","")};xt&&!be&&document.addEventListener("click",(function(e){if(Ct)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ct=!1,!1}),!0);var Vt=function(e){if(Je){var t=function(e,t){var n;return St.some((function(i){var r=i[He].options.emptyInsertThreshold;if(r&&!Pe(i)){var o=Me(i),a=e>=o.left-r&&e<=o.right+r,l=t>=o.top-r&&t<=o.bottom+r;return a&&l?n=i:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[He]._onDragOver(n)}}},Ut=function(e){Je&&Je.parentNode[He]._isOutsideThisEl(e.target)};function Xt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=de({},t),e[He]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Pt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Xt.supportPointer&&"PointerEvent"in window&&!me,emptyInsertThreshold:5};for(var i in Ge.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var r in Rt(t),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Lt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?we(e,"pointerdown",this._onTapStart):(we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),St.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),de(this,je())}function Yt(e,t,n,i,r,o,a,l){var s,c,u=e[He],d=u.options.onMove;return!window.CustomEvent||pe||fe?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=i,s.related=r||t,s.relatedRect=o||Me(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),d&&(c=d.call(u,s,a)),c}function Ht(e){e.draggable=!1}function jt(){Ot=!1}function Wt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function zt(e){return setTimeout(e,0)}function Gt(e){return clearTimeout(e)}Xt.prototype={constructor:Xt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(bt=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,Je):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(function(e){Dt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&Dt.push(i)}}(n),!Je&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!me||!l||"SELECT"!==l.tagName.toUpperCase())&&(!(l=Se(l,i.draggable,n,!1))||!l.animated)&&it!==l){if(at=Re(l),st=Re(l,i.draggable),"function"===typeof c){if(c.call(this,e,l,this))return $e({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ke("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=Se(s,i.trim(),n,!1))return $e({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ke("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!Se(s,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var i,r=this,o=r.el,a=r.options,l=o.ownerDocument;if(n&&!Je&&n.parentNode===o){var s=Me(n);if(tt=o,Qe=(Je=n).parentNode,nt=Je.nextSibling,it=n,ut=a.group,Xt.dragged=Je,ht={target:Je,clientX:(t||e).clientX,clientY:(t||e).clientY},gt=ht.clientX-s.left,mt=ht.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Je.style["will-change"]="all",i=function(){Ke("delayEnded",r,{evt:e}),Xt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!ge&&r.nativeDraggable&&(Je.draggable=!0),r._triggerDragStart(e,t),$e({sortable:r,name:"choose",originalEvent:e}),Te(Je,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){xe(Je,e.trim(),Ht)})),we(l,"dragover",Vt),we(l,"mousemove",Vt),we(l,"touchmove",Vt),we(l,"mouseup",r._onDrop),we(l,"touchend",r._onDrop),we(l,"touchcancel",r._onDrop),ge&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Je.draggable=!0),Ke("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(fe||pe))i();else{if(Xt.eventCanceled)return void this._onDrop();we(l,"mouseup",r._disableDelayedDrag),we(l,"touchend",r._disableDelayedDrag),we(l,"touchcancel",r._disableDelayedDrag),we(l,"mousemove",r._delayedDragTouchMoveHandler),we(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&we(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Je&&Ht(Je),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ke(e,"mouseup",this._disableDelayedDrag),ke(e,"touchend",this._disableDelayedDrag),ke(e,"touchcancel",this._disableDelayedDrag),ke(e,"mousemove",this._delayedDragTouchMoveHandler),ke(e,"touchmove",this._delayedDragTouchMoveHandler),ke(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?we(document,"pointermove",this._onTouchMove):we(document,t?"touchmove":"mousemove",this._onTouchMove):(we(Je,"dragend",this),we(tt,"dragstart",this._onDragStart));try{document.selection?zt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(It=!1,tt&&Je){Ke("dragStarted",this,{evt:t}),this.nativeDraggable&&we(document,"dragover",Ut);var n=this.options;!e&&Te(Je,n.dragClass,!1),Te(Je,n.ghostClass,!0),Xt.active=this,e&&this._appendGhost(),$e({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(vt){this._lastX=vt.clientX,this._lastY=vt.clientY,Ft();for(var e=document.elementFromPoint(vt.clientX,vt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(vt.clientX,vt.clientY))!==t;)t=e;if(Je.parentNode[He]._isOutsideThisEl(e),t)do{if(t[He]){if(t[He]._onDragOver({clientX:vt.clientX,clientY:vt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Bt()}},_onTouchMove:function(e){if(ht){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=et&&De(et,!0),a=et&&o&&o.a,l=et&&o&&o.d,s=Nt&&kt&&Fe(kt),c=(r.clientX-ht.clientX+i.x)/(a||1)+(s?s[0]-Tt[0]:0)/(a||1),u=(r.clientY-ht.clientY+i.y)/(l||1)+(s?s[1]-Tt[1]:0)/(l||1);if(!Xt.active&&!It){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(et){o?(o.e+=c-(pt||0),o.f+=u-(ft||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Oe(et,"webkitTransform",d),Oe(et,"mozTransform",d),Oe(et,"msTransform",d),Oe(et,"transform",d),pt=c,ft=u,vt=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!et){var e=this.options.fallbackOnBody?document.body:tt,t=Me(Je,!0,Nt,!0,e),n=this.options;if(Nt){for(kt=e;"static"===Oe(kt,"position")&&"none"===Oe(kt,"transform")&&kt!==document;)kt=kt.parentNode;kt!==document.body&&kt!==document.documentElement?(kt===document&&(kt=Ne()),t.top+=kt.scrollTop,t.left+=kt.scrollLeft):kt=Ne(),Tt=Fe(kt)}Te(et=Je.cloneNode(!0),n.ghostClass,!1),Te(et,n.fallbackClass,!0),Te(et,n.dragClass,!0),Oe(et,"transition",""),Oe(et,"transform",""),Oe(et,"box-sizing","border-box"),Oe(et,"margin",0),Oe(et,"top",t.top),Oe(et,"left",t.left),Oe(et,"width",t.width),Oe(et,"height",t.height),Oe(et,"opacity","0.8"),Oe(et,"position",Nt?"absolute":"fixed"),Oe(et,"zIndex","100000"),Oe(et,"pointerEvents","none"),Xt.ghost=et,e.appendChild(et),Oe(et,"transform-origin",gt/parseInt(et.style.width)*100+"% "+mt/parseInt(et.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;Ke("dragStart",this,{evt:e}),Xt.eventCanceled?this._onDrop():(Ke("setupClone",this),Xt.eventCanceled||((rt=Ye(Je)).removeAttribute("id"),rt.draggable=!1,rt.style["will-change"]="",this._hideClone(),Te(rt,this.options.chosenClass,!1),Xt.clone=rt),n.cloneId=zt((function(){Ke("clone",n),Xt.eventCanceled||(n.options.removeCloneOnHide||tt.insertBefore(rt,Je),n._hideClone(),$e({sortable:n,name:"clone"}))})),!t&&Te(Je,r.dragClass,!0),t?(Ct=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ke(document,"mouseup",n._onDrop),ke(document,"touchend",n._onDrop),ke(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,Je)),we(document,"drop",n),Oe(Je,"transform","translateZ(0)")),It=!0,n._dragStartId=zt(n._dragStarted.bind(n,t,e)),we(document,"selectstart",n),yt=!0,me&&Oe(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,o=this.el,a=e.target,l=this.options,s=l.group,c=Xt.active,u=ut===s,d=l.sort,h=dt||c,v=this,p=!1;if(!Ot){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Se(a,l.draggable,o,!0),O("dragOver"),Xt.eventCanceled)return p;if(Je.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||v._ignoreWhileAnimating===a)return x(!1);if(Ct=!1,c&&!l.disabled&&(u?d||(i=Qe!==tt):dt===this||(this.lastPutMode=ut.checkPull(this,c,Je,e))&&s.checkPut(this,c,Je,e))){if(r="vertical"===this._getDirection(e,a),t=Me(Je),O("dragOverValid"),Xt.eventCanceled)return p;if(i)return Qe=tt,D(),this._hideClone(),O("revert"),Xt.eventCanceled||(nt?tt.insertBefore(Je,nt):tt.appendChild(Je)),x(!0);var f=Pe(o,l.draggable);if(!f||function(e,t,n){var i=Me(Pe(n.el,n.options.draggable)),r=10;return t?e.clientX>i.right+r||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+r}(e,r,this)&&!f.animated){if(f===Je)return x(!1);if(f&&o===e.target&&(a=f),a&&(n=Me(a)),!1!==Yt(tt,o,Je,t,a,n,e,!!a))return D(),f&&f.nextSibling?o.insertBefore(Je,f.nextSibling):o.appendChild(Je),Qe=o,N(),x(!0)}else if(f&&function(e,t,n){var i=Me(Ze(n.el,0,n.options,!0)),r=10;return t?e.clientX<i.left-r||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-r||e.clientY<i.bottom&&e.clientX<i.left}(e,r,this)){var g=Ze(o,0,l,!0);if(g===Je)return x(!1);if(n=Me(a=g),!1!==Yt(tt,o,Je,t,a,n,e,!1))return D(),o.insertBefore(Je,g),Qe=o,N(),x(!0)}else if(a.parentNode===o){n=Me(a);var m,y,b,_=Je.parentNode!==o,w=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return i===a||r===l||i+o/2===a+s/2}(Je.animated&&Je.toRect||t,a.animated&&a.toRect||n,r),k=r?"top":"left",I=Le(a,"top","top")||Le(Je,"top","top"),C=I?I.scrollTop:void 0;if(bt!==a&&(y=n[k],Et=!1,At=!w&&l.invertSwap||_),m=function(e,t,n,i,r,o,a,l){var s=i?e.clientY:e.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,h=!1;if(!a)if(l&&wt<c*r){if(!Et&&(1===_t?s>u+c*o/2:s<d-c*o/2)&&(Et=!0),Et)h=!0;else if(1===_t?s<u+wt:s>d-wt)return-_t}else if(s>u+c*(1-r)/2&&s<d-c*(1-r)/2)return function(e){return Re(Je)<Re(e)?1:-1}(t);if((h=h||a)&&(s<u+c*o/2||s>d-c*o/2))return s>u+c/2?1:-1;return 0}(e,a,n,r,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,At,bt===a),0!==m){var S=Re(Je);do{S-=m,b=Qe.children[S]}while(b&&("none"===Oe(b,"display")||b===et))}if(0===m||b===a)return x(!1);bt=a,_t=m;var E=a.nextElementSibling,A=!1,T=Yt(tt,o,Je,t,a,n,e,A=1===m);if(!1!==T)return 1!==T&&-1!==T||(A=1===T),Ot=!0,setTimeout(jt,30),D(),A&&!E?o.appendChild(Je):a.parentNode.insertBefore(Je,A?E:a),I&&Xe(I,0,C-I.scrollTop),Qe=Je.parentNode,void 0===y||At||(wt=Math.abs(y-Me(a)[k])),N(),x(!0)}if(o.contains(Je))return x(!1)}return!1}function O(l,s){Ke(l,v,se({evt:e,isOwner:u,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:a,completed:x,onMove:function(n,i){return Yt(tt,o,Je,t,n,Me(n),e,i)},changed:N},s))}function D(){O("dragOverAnimationCapture"),v.captureAnimationState(),v!==h&&h.captureAnimationState()}function x(t){return O("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(v),v!==h&&(Te(Je,dt?dt.options.ghostClass:c.options.ghostClass,!1),Te(Je,l.ghostClass,!0)),dt!==v&&v!==Xt.active?dt=v:v===Xt.active&&dt&&(dt=null),h===v&&(v._ignoreWhileAnimating=a),v.animateAll((function(){O("dragOverAnimationComplete"),v._ignoreWhileAnimating=null})),v!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(a===Je&&!Je.animated||a===o&&!a.animated)&&(bt=null),l.dragoverBubble||e.rootEl||a===document||(Je.parentNode[He]._isOutsideThisEl(e.target),!t&&Vt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function N(){lt=Re(Je),ct=Re(Je,l.draggable),$e({sortable:v,name:"change",toEl:o,newIndex:lt,newDraggableIndex:ct,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ke(document,"mousemove",this._onTouchMove),ke(document,"touchmove",this._onTouchMove),ke(document,"pointermove",this._onTouchMove),ke(document,"dragover",Vt),ke(document,"mousemove",Vt),ke(document,"touchmove",Vt)},_offUpEvents:function(){var e=this.el.ownerDocument;ke(e,"mouseup",this._onDrop),ke(e,"touchend",this._onDrop),ke(e,"pointerup",this._onDrop),ke(e,"touchcancel",this._onDrop),ke(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;lt=Re(Je),ct=Re(Je,n.draggable),Ke("drop",this,{evt:e}),Qe=Je&&Je.parentNode,lt=Re(Je),ct=Re(Je,n.draggable),Xt.eventCanceled||(It=!1,At=!1,Et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(ke(document,"drop",this),ke(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),me&&Oe(document.body,"user-select",""),Oe(Je,"transform",""),e&&(yt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),et&&et.parentNode&&et.parentNode.removeChild(et),(tt===Qe||dt&&"clone"!==dt.lastPutMode)&&rt&&rt.parentNode&&rt.parentNode.removeChild(rt),Je&&(this.nativeDraggable&&ke(Je,"dragend",this),Ht(Je),Je.style["will-change"]="",yt&&!It&&Te(Je,dt?dt.options.ghostClass:this.options.ghostClass,!1),Te(Je,this.options.chosenClass,!1),$e({sortable:this,name:"unchoose",toEl:Qe,newIndex:null,newDraggableIndex:null,originalEvent:e}),tt!==Qe?(lt>=0&&($e({rootEl:Qe,name:"add",toEl:Qe,fromEl:tt,originalEvent:e}),$e({sortable:this,name:"remove",toEl:Qe,originalEvent:e}),$e({rootEl:Qe,name:"sort",toEl:Qe,fromEl:tt,originalEvent:e}),$e({sortable:this,name:"sort",toEl:Qe,originalEvent:e})),dt&&dt.save()):lt!==at&&lt>=0&&($e({sortable:this,name:"update",toEl:Qe,originalEvent:e}),$e({sortable:this,name:"sort",toEl:Qe,originalEvent:e})),Xt.active&&(null!=lt&&-1!==lt||(lt=at,ct=st),$e({sortable:this,name:"end",toEl:Qe,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ke("nulling",this),tt=Je=Qe=et=nt=rt=it=ot=ht=vt=yt=lt=ct=at=st=bt=_t=dt=ut=Xt.dragged=Xt.ghost=Xt.clone=Xt.active=null,Dt.forEach((function(e){e.checked=!0})),Dt.length=pt=ft=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Je&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)Se(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Wt(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var r=i.children[t];Se(r,this.options.draggable,i,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Se(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=Ge.modifyOption(this,e,t);n[e]="undefined"!==typeof i?i:t,"group"===e&&Rt(n)},destroy:function(){Ke("destroy",this);var e=this.el;e[He]=null,ke(e,"mousedown",this._onTapStart),ke(e,"touchstart",this._onTapStart),ke(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ke(e,"dragover",this),ke(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),St.splice(St.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ot){if(Ke("hideClone",this),Xt.eventCanceled)return;Oe(rt,"display","none"),this.options.removeCloneOnHide&&rt.parentNode&&rt.parentNode.removeChild(rt),ot=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ot){if(Ke("showClone",this),Xt.eventCanceled)return;Je.parentNode!=tt||this.options.group.revertClone?nt?tt.insertBefore(rt,nt):tt.appendChild(rt):tt.insertBefore(rt,Je),this.options.group.revertClone&&this.animate(Je,rt),Oe(rt,"display",""),ot=!1}}else this._hideClone()}},xt&&we(document,"touchmove",(function(e){(Xt.active||It)&&e.cancelable&&e.preventDefault()})),Xt.utils={on:we,off:ke,css:Oe,find:xe,is:function(e,t){return!!Se(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ue,closest:Se,toggleClass:Te,clone:Ye,index:Re,nextTick:zt,cancelNextTick:Gt,detectDirection:Pt,getChild:Ze},Xt.get=function(e){return e[He]},Xt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Xt.utils=se(se({},Xt.utils),e.utils)),Ge.mount(e)}))},Xt.create=function(e,t){return new Xt(e,t)},Xt.version="1.15.0";var qt,Kt,$t,Jt,Qt,en,tn=[],nn=!1;function rn(){tn.forEach((function(e){clearInterval(e.pid)})),tn=[]}function on(){clearInterval(en)}var an=Ue((function(e,t,n,i){if(t.scroll){var r,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=Ne(),u=!1;Kt!==n&&(Kt=n,rn(),qt=t.scroll,r=t.scrollFn,!0===qt&&(qt=Be(n,!0)));var d=0,h=qt;do{var v=h,p=Me(v),f=p.top,g=p.bottom,m=p.left,y=p.right,b=p.width,_=p.height,w=void 0,k=void 0,I=v.scrollWidth,C=v.scrollHeight,S=Oe(v),E=v.scrollLeft,A=v.scrollTop;v===c?(w=b<I&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),k=_<C&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=b<I&&("auto"===S.overflowX||"scroll"===S.overflowX),k=_<C&&("auto"===S.overflowY||"scroll"===S.overflowY));var T=w&&(Math.abs(y-o)<=l&&E+b<I)-(Math.abs(m-o)<=l&&!!E),O=k&&(Math.abs(g-a)<=l&&A+_<C)-(Math.abs(f-a)<=l&&!!A);if(!tn[d])for(var D=0;D<=d;D++)tn[D]||(tn[D]={});tn[d].vx==T&&tn[d].vy==O&&tn[d].el===v||(tn[d].el=v,tn[d].vx=T,tn[d].vy=O,clearInterval(tn[d].pid),0==T&&0==O||(u=!0,tn[d].pid=setInterval(function(){i&&0===this.layer&&Xt.active._onTouchMove(Qt);var t=tn[this.layer].vy?tn[this.layer].vy*s:0,n=tn[this.layer].vx?tn[this.layer].vx*s:0;"function"===typeof r&&"continue"!==r.call(Xt.dragged.parentNode[He],n,t,e,Qt,tn[this.layer].el)||Xe(tn[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=Be(h,!1)));nn=u}}),30),ln=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||r;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function sn(){}function cn(){}function un(e,t,n){e.splice(n,0,e.splice(t,1)[0])}sn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Ze(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:ln},de(sn,{pluginName:"revertOnSpill"}),cn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ln},de(cn,{pluginName:"removeOnSpill"}),Xt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?we(document,"dragover",this._handleAutoScroll):this.options.supportPointer?we(document,"pointermove",this._handleFallbackAutoScroll):t.touches?we(document,"touchmove",this._handleFallbackAutoScroll):we(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?ke(document,"dragover",this._handleAutoScroll):(ke(document,"pointermove",this._handleFallbackAutoScroll),ke(document,"touchmove",this._handleFallbackAutoScroll),ke(document,"mousemove",this._handleFallbackAutoScroll)),on(),rn(),clearTimeout(Ee),Ee=void 0},nulling:function(){Qt=Kt=qt=nn=en=$t=Jt=null,tn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(i,r);if(Qt=e,t||this.options.forceAutoScrollFallback||fe||pe||me){an(e,this.options,o,t);var a=Be(o,!0);!nn||en&&i===$t&&r===Jt||(en&&on(),en=setInterval((function(){var o=Be(document.elementFromPoint(i,r),!0);o!==a&&(a=o,rn()),an(e,n.options,o,t)}),10),$t=i,Jt=r)}else{if(!this.options.bubbleScroll||Be(o,!0)===Ne())return void rn();an(e,this.options,Be(o,!1),!1)}}},de(e,{pluginName:"scroll",initializeByDefault:!0})}),Xt.mount(cn,sn);var dn=f.j.ofType($),hn="data-sort-filter",vn="data-layer-uid",pn="esri-layer-list esri-widget esri-widget--panel",fn="esri-layer-list--new-ui",gn="esri-layer-list__no-items",mn="esri-layer-list__list",yn="esri-layer-list__list--root",bn="esri-layer-list__list--exclusive",_n="esri-layer-list__list--inherited",wn="esri-layer-list__list--independent",kn="esri-layer-list__item",In="esri-layer-list__item--has-message",Cn="esri-layer-list__item--invisible",Sn="esri-layer-list__item--invisible-at-scale",En="esri-layer-list__item--updating",An="esri-layer-list__item--has-children",Tn="esri-layer-list__item--selectable",On="esri-layer-list__item-container",Dn="esri-layer-list__item-actions-menu",xn="esri-layer-list__item-actions-menu-item",Nn="esri-layer-list__item-actions-menu-item--active",Mn="esri-layer-list__item-actions",Ln="esri-layer-list__item-actions-list",Zn="esri-layer-list__item-action",Pn="esri-layer-list__item-action-icon",Rn="esri-layer-list__item-action-image",Fn="esri-layer-list__item-action-title",Bn="esri-layer-list__action-toggle",Vn="esri-layer-list__action-toggle--on",Un="esri-layer-list__item-label",Xn="esri-layer-list__item-message",Yn="esri-layer-list__item-title",Hn="esri-layer-list__connection-status",jn="esri-layer-list__connection-status--disconnected",Wn="esri-layer-list__connection-status--connected",zn="esri-layer-list__item-toggle",Gn="esri-layer-list__item-toggle-icon",qn="esri-layer-list__item-toggle-icon",Kn="esri-layer-list__item-radio-icon",$n="esri-layer-list__child-toggle",Jn="esri-layer-list__child-toggle--open",Qn="esri-layer-list__child-toggle-icon--opened",ei="esri-layer-list__child-toggle-icon--closed",ti="esri-layer-list__child-toggle-icon--closed-rtl",ni="esri-layer-list--chosen",ii="esri-disabled",ri="esri-disabled-element",oi="esri-hidden",ai="esri-rotating",li="esri-icon-handle-horizontal",si="esri-icon-visible",ci="esri-icon-non-visible",ui="esri-icon-radio-checked",di="esri-icon-radio-unchecked",hi="esri-icon-notice-triangle",vi="esri-icon-down-arrow",pi="esri-icon-right-triangle-arrow",fi="esri-icon-left-triangle-arrow",gi="esri-icon-loading-indicator",mi="esri-icon-default-action",yi="esri-icon-layers",bi="actions",_i="action-section",wi="items",ki="exclusive",Ii="inherited";function Ci(e){var t=e.actionsOpen,n=e.children;t&&(e.actionsOpen=!1),n.forEach((function(e){return Ci(e)}))}var Si="root",Ei={statusIndicators:!0},Ai=function(e){(0,h.Z)(i,e);var t=(0,v.Z)(i);function i(e,n){var r;return(0,u.Z)(this,i),(r=t.call(this,e,n))._handles=new g.u,r._sortableNodes=new Map,r._sortableMap=new Map,r._focusSortUid=null,r._newUI=(0,m.a)("esri-layerlist-new-ui"),r._tooltipReferenceMap=new Map,r.visibleItems=null,r.iconClass=yi,r.label=void 0,r.listItemCanGiveFunction=null,r.listItemCanReceiveFunction=null,r.listItemCreatedFunction=null,r.messages=null,r.messagesCommon=null,r.multipleSelectionEnabled=!1,r.operationalItems=null,r.selectionEnabled=!1,r.selectedItems=new dn,r.view=null,r.viewModel=new ae,r.visibleElements=(0,a.Z)({},Ei),r._onSortableSort=function(e){var t=e.to,n=e.from,i=e.item,o=e.newIndex;n&&t&&(n===t?r._sortLayers(r._sortableMap.get(n.dataset.group)):r._moveLayerFromChildList({to:t,from:n,item:i,newIndex:o}))},r._sortableCanSort=function(e,t){return!(!e.el.dataset.group||!t.el.dataset.group)},r._sortableCanPull=function(e,t,n){var i=(0,l.Z)(r).listItemCanGiveFunction,o={selected:n["data-item"],from:t.el["data-item"],to:e.el["data-item"]};return!r._sortableCanSort(e,t)||"function"!=typeof i||i.call(null,o)},r._sortableCanPut=function(e,t,n){var i=(0,l.Z)(r).listItemCanReceiveFunction,o={selected:n["data-item"],from:t.el["data-item"],to:e.el["data-item"]};return!r._sortableCanSort(e,t)||"function"!=typeof i||i.call(null,o)},r._onSortableEnd=function(e){var t=e.oldIndex,n=e.from,i=e.to,r=e.item;n!==i&&n.insertBefore(r,n.children[t])},r}return(0,d.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.operationalItems;this._setVisibleItems(t),this.own([(0,y.a)((function(){return e.operationalItems}),"change",(function(){return e._itemsChanged(t)})),(0,y.l)((function(){return e.errorsVisible}),(function(){return e._itemsChanged(t)})),(0,y.l)((function(){return e.selectionEnabled}),(function(){return e._toggleAllSorting()}),y.h)])}},{key:"loadDependencies",value:function(){return Promise.all([n.e(7226).then(n.bind(n,97226))])}},{key:"destroy",value:function(){this._destroySortables(),this._tooltipReferenceMap.clear(),this._handles.destroy(),this._handles=null}},{key:"castVisibleElements",value:function(e){return(0,a.Z)((0,a.Z)({},Ei),e)}},{key:"triggerAction",value:function(e,t){this.viewModel.triggerAction(e,t)}},{key:"render",value:function(){var e,t,n=this.visibleItems,i=this._newUI,r=null===(e=this.viewModel)||void 0===e?void 0:e.state,a=(t={},(0,o.Z)(t,fn,i),(0,o.Z)(t,oi,"loading"===r),(0,o.Z)(t,ii,"disabled"===r),t),l=this.renderItemTooltips(),s=this.renderItems();return(0,_.n)("div",{class:this.classes(pn,a)},null!==n&&void 0!==n&&n.length?[l,s]:this.renderNoItems())}},{key:"renderItemTooltip",value:function(e){var t=this._tooltipReferenceMap,n=this.messages;return e?(0,_.n)("calcite-tooltip",{label:n.layerIncompatible,referenceElement:t.get(e.uid)},n.layerIncompatibleTooltip):null}},{key:"renderItemTooltipNodes",value:function(e){var t=this,n=e.incompatible,i=e.children;return[n?this.renderItemTooltip(e):null].concat((0,r.Z)(n?[]:null===i||void 0===i?void 0:i.toArray().map((function(e){return t.renderItemTooltipNodes(e)}))))}},{key:"renderItemTooltips",value:function(){var e=this;return this.visibleItems.toArray().map((function(t){return e.renderItemTooltipNodes(t)}))}},{key:"renderNoItems",value:function(){return(0,_.n)("div",{class:gn},this.messages.noItemsToDisplay)}},{key:"renderItems",value:function(){var e=this,t=this.visibleItems,n=this.selectionEnabled,i=this.messages;return(0,_.n)("ul",{"aria-label":i.widgetLabel,role:n?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Si,bind:this,class:this.classes(mn,yn,wn)},null===t||void 0===t?void 0:t.map((function(t){return e.renderItem(t,null)})).toArray())}},{key:"renderActionsMenuIcon",value:function(e,t){var n=this.messagesCommon,i=(0,o.Z)({},Nn,e.actionsOpen);return(0,_.n)("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(xn,i),tabindex:"0",role:"button","aria-controls":t,"aria-label":n.options,title:n.options},(0,_.n)("span",{"aria-hidden":"true",class:li}))}},{key:"renderActionsMenu",value:function(e,t,n,i){var r=e.panel,o=r&&r.visible?this.renderPanelButton(r):null,a=1===n&&this._getSingleActionButton(t),l=a?this.renderAction({item:e,action:a,singleAction:!0}):null,s=!a&&n?this.renderActionsMenuIcon(e,i):null;return s||o||a?(0,_.n)("div",{key:"actions-menu",class:Dn},o,l,s):null}},{key:"renderChildList",value:function(e,t){var n,i,r=this,a=this.selectionEnabled,l=e.visibilityMode,s=e.children,c=this._hasChildren(e),u=!c&&a&&"group"===(null===(n=e.layer)||void 0===n?void 0:n.type),d=ki,h=Ii,v=(i={},(0,o.Z)(i,bn,l===d),(0,o.Z)(i,_n,l===h),(0,o.Z)(i,wn,l!==h&&l!==d),i);return c||u?(0,_.n)("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(mn,v),"aria-expanded":e.open?"true":"false",role:a?"listbox":l===d?"radiogroup":"group",hidden:!e.open&&!u||null},null===s||void 0===s?void 0:s.map((function(t){return r.renderItem(t,e)})).toArray()):null}},{key:"renderChildrenToggle",value:function(e,t){var n=this.messagesCommon,i=this._hasChildren(e),r=(0,o.Z)({},Jn,e.open),a=e.open?n.collapse:n.expand;return i?(0,_.n)("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes($n,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":a,title:a},(0,_.n)("span",{"aria-hidden":"true",class:this.classes(ei,pi)}),(0,_.n)("span",{"aria-hidden":"true",class:this.classes(Qn,vi)}),(0,_.n)("span",{"aria-hidden":"true",class:this.classes(ti,fi)})):null}},{key:"renderItemMessage",value:function(e){var t=this;return e.error?(0,_.n)("div",{key:"esri-layer-list__error",class:Xn,role:"alert"},(0,_.n)("span",{"aria-hidden":"true",class:hi}),this.messages.layerError):e.incompatible?(0,_.n)("div",{key:"esri-layer-list__incompatible",class:Xn,role:"alert"},(0,_.n)("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:hi,afterCreate:function(n){return t._setTooltipReference(n,e)}}),this.messages.layerIncompatible):null}},{key:"renderItemContent",value:function(e,t,n){var i=this.id,r="".concat(i,"_").concat(e.uid),o="".concat(r,"_actions"),a="".concat(r,"__list"),l=e.panel,s=this._filterActions(e.actionsSections),c=this._countActions(s);return[(0,_.n)("div",{key:"list-item-container",class:On},this.renderChildrenToggle(e,a),this.renderLabel(e,t,n),this.renderActionsMenu(e,s,c,o)),this.renderItemMessage(e),c?this.renderActionsSections(e,s,o):null,l&&l.open?l.render():null,this.renderChildList(e,a)]}},{key:"renderItem",value:function(e,t){var n,i=this._newUI,r=this.id,l=this.selectionEnabled,s=this.selectedItems,c=this.visibleElements,u="".concat("".concat(r,"_").concat(e.uid),"__title"),d=this._hasMessage(e),h=this._hasChildren(e),v=(n={},(0,o.Z)(n,An,h),(0,o.Z)(n,In,!!d),(0,o.Z)(n,En,e.updating&&!t&&c.statusIndicators),(0,o.Z)(n,Cn,i&&!e.visible),(0,o.Z)(n,Sn,!e.visibleAtCurrentScale),(0,o.Z)(n,Tn,l),n);if(l){var p,f,g=(f={},(0,o.Z)(f,vn,null===(p=e.layer)||void 0===p?void 0:p.uid),(0,o.Z)(f,hn,(!e.sortable).toString()),f);return(0,_.n)("li",(0,a.Z)({key:"item-with-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(kn,v),"aria-labelledby":u,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:Si,tabIndex:0,"aria-selected":Z(e,s)?"true":"false",role:"option"},g),this.renderItemContent(e,t,u))}return(0,_.n)("li",{key:"item-no-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(kn,v),"aria-labelledby":u},this.renderItemContent(e,t,u))}},{key:"renderItemConnectionStatus",value:function(e){var t,n=e.connectionStatus;return n?(0,_.n)("span",{class:this.classes((t={},(0,o.Z)(t,Hn,!0),(0,o.Z)(t,jn,"disconnected"===n),(0,o.Z)(t,Wn,"connected"===n),t)),key:"layer-connection-status"}):null}},{key:"renderItemTitle",value:function(e,t){var n=this.messages;if(!e)return null;var i=e.title||n.untitledLayer,r=e.visibleAtCurrentScale?i:"".concat(i," (").concat(n.layerInvisibleAtScale,")");return(0,_.n)("span",{key:"layer-title-container",id:t,title:r,"aria-label":r,class:Yn},i)}},{key:"renderItemToggleIcon",value:function(e,t){var n,i=this._newUI,r=ki,a=t&&t.visibilityMode,l=(n={},(0,o.Z)(n,Gn,i),(0,o.Z)(n,qn,i&&a!==r),(0,o.Z)(n,Kn,i&&a===r),(0,o.Z)(n,ui,a===r&&e.visible),(0,o.Z)(n,di,a===r&&!e.visible),(0,o.Z)(n,si,a!==r&&e.visible),(0,o.Z)(n,ci,a!==r&&!e.visible),n);return(0,_.n)("span",{key:"item-toggle-icon",class:this.classes(l),"aria-hidden":"true"})}},{key:"renderItemToggle",value:function(e,t,n){var i=this.selectionEnabled,r=this.messages,o=ki,a=t&&t.visibilityMode,l=a===o?"radio":"switch";return(0,_.n)("span",i?{key:"item-toggle-selection-enabled",class:zn,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":a,tabIndex:0,title:e.visible?r.hideLayer:r.showLayer,"aria-checked":e.visible?"true":"false",role:l,"aria-labelledby":n}:{key:"item-toggle",class:zn},this.renderItemToggleIcon(e,t))}},{key:"renderLabel",value:function(e,t,n){var i=this.selectionEnabled,r=this._newUI,o=this.messages,a=Ii,l=ki,s=null===t||void 0===t?void 0:t.visibilityMode,c=s===l?"radio":"switch",u=[this.renderItemToggle(e,t,n),this.renderItemConnectionStatus(e),this.renderItemTitle(e,n)];r&&u.reverse();var d=(0,_.n)("div",i?{key:"item-label-no-selection-".concat(e.uid),class:Un}:{key:"item-label-with-selection-".concat(e.uid),class:Un,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":s,tabIndex:0,"aria-checked":e.visible?"true":"false",title:e.visible?o.hideLayer:o.showLayer,role:c,"aria-labelledby":n},u);return s===a||e.error?(0,_.n)("div",{key:"item-label-container-".concat(e.uid),class:Un},this.renderItemTitle(e,n)):d}},{key:"renderPanelButton",value:function(e){var t=e.className,n=e.open,i=e.title,r=e.image||t?t:mi,a=this._getIconImageStyles(e),l=(0,o.Z)({},Nn,n),s=(0,o.Z)({},Rn,!!a["background-image"]);return r&&(s[r]=!!r),(0,_.n)("div",{key:"panel-".concat(e.uid),bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(xn,l),role:"button",tabindex:"0",title:i,"aria-label":i},(0,_.n)("span",{class:this.classes(s),styles:a}))}},{key:"renderActionsSections",value:function(e,t,n){var i=this,r=t.toArray().map((function(t,n){return(0,_.n)("ul",{key:"".concat(e,"-action-section-").concat(n),class:Ln},i.renderActionSection(e,t))}));return(0,_.n)("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:n,class:Mn,hidden:!e.actionsOpen||null},r)}},{key:"renderActionSection",value:function(e,t){var n=this;return(t&&t.toArray()).map((function(t){return n.renderAction({item:e,action:t})}))}},{key:"renderActionIcon",value:function(e){var t,n=e.active,i=e.className,r=this._getIconImageStyles(e),a="button"!==e.type||e.image||i?i:mi,l=(t={},(0,o.Z)(t,Rn,!n&&!!r["background-image"]),(0,o.Z)(t,gi,n),(0,o.Z)(t,ai,n),t);return a&&!n&&(l[a]=!0),(0,_.n)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Pn,l),styles:r})}},{key:"renderActionTitle",value:function(e,t){return t?null:(0,_.n)("span",{key:"action-title",class:Fn},e)}},{key:"renderAction",value:function(e){var t,n=e.item,i=e.action,r=e.singleAction,a=i.active,l=i.disabled,s=i.title,c=(t={},(0,o.Z)(t,xn,r&&"button"===i.type),(0,o.Z)(t,Zn,a||!r&&"toggle"!==i.type),(0,o.Z)(t,Bn,!a&&"toggle"===i.type),(0,o.Z)(t,Vn,!a&&"toggle"===i.type&&i.value),(0,o.Z)(t,ri,l),t),u=[this.renderActionIcon(i),this.renderActionTitle(s,r)];return r?(0,_.n)("div",{bind:this,"data-item":n,"data-action":i,role:"button",key:"single-action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:c,tabindex:"0",title:s,"aria-label":s},u):(0,_.n)("li",{bind:this,"data-item":n,"data-action":i,key:"action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:c,tabindex:"0",role:"button",title:s,"aria-label":s},u)}},{key:"_setTooltipReference",value:function(e,t){this._tooltipReferenceMap.set(t.uid,e),this.scheduleRender()}},{key:"_hasMessage",value:function(e){return!!e.error||e.incompatible}},{key:"_hasChildren",value:function(e){return!!e.children.length&&!this._hasMessage(e)}},{key:"_sortNodeRemoved",value:function(e){var t=this._sortableMap,n=e.dataset.group,i=t.get(n);i&&i.destroy(),t.delete(n)}},{key:"_destroySortables",value:function(){var e=this._sortableMap,t=this._sortableNodes;e.forEach((function(e){return e&&e.destroy()})),e.clear(),t.clear()}},{key:"_moveLayerFromChildList",value:function(e){var t=e.to,n=e.from,i=e.item,r=e.newIndex,o=i["data-item"],a=t["data-item"],l=n["data-item"];this.viewModel.moveListItem(o,l,a,r)}},{key:"_sortLayers",value:function(e){var t,n;if(e){var i=e.el["data-item"],r=e.toArray();i?function(e,t){var n=null===e||void 0===e?void 0:e.layer;if(n){var i=N(n);i&&M(n.get(i),t)}}(i,r):M(null===(t=this.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers,r)}}},{key:"_toggleSorting",value:function(e,t){var n=this._sortableMap,i=this.selectionEnabled,r=n.get(t),o=e["data-item"],a=(t===Si||o.childrenSortable&&function(e){var t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;var n=t.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"!=typeof n||n}(o))&&i;if(r)r.option("disabled",!a);else if(a){var l=Xt.create(e,{dataIdAttr:vn,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:"[".concat(hn,'="true"]'),fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:ni});n.set(t,l)}}},{key:"_toggleAllSorting",value:function(){var e=this;this._sortableNodes.forEach((function(t,n){return e._toggleSorting(t,n)}))}},{key:"_sortNodeCreated",value:function(e){var t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}},{key:"_setVisibleItems",value:function(e){var t=this;this.visibleItems=null===e||void 0===e?void 0:e.filter((function(e){return!e.hidden&&(t.errorsVisible||!e.error)}))}},{key:"_getSingleActionButton",value:function(e){return e.reduce((function(e){return e})).filter((function(e){return e&&"button"===e.type})).getItemAt(0)}},{key:"_focusListItem",value:function(e){var t,n=this._focusSortUid;e&&n&&(null===(t=e["data-item"].layer)||void 0===t?void 0:t.uid)===n&&(e.focus(),this._focusSortUid=null)}},{key:"_watchActionSectionChanges",value:function(e,t){var n=this,i=_i+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),i),e.forEach((function(e){return n._renderOnActionChanges(e,t)}))}},{key:"_renderOnActionChanges",value:function(e,t){var n=this,i=bi+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add((0,y.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.image,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible]}),(function(){return n.scheduleRender()}),y.h),i):this._handles.add((0,y.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.value,null===e||void 0===e?void 0:e.displayValueEnabled,null===e||void 0===e?void 0:e.max,null===e||void 0===e?void 0:e.min,null===e||void 0===e?void 0:e.step]}),(function(){return n.scheduleRender()}),y.h),i):this._handles.add((0,y.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.image,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.value]}),(function(){return n.scheduleRender()}),y.h),i)}},{key:"_renderOnItemChanges",value:function(e){var t=this,n=e.uid,i=wi+n;this._handles.add([(0,y.l)((function(){var t,n,i;return[null===e||void 0===e?void 0:e.actionsOpen,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.open,null===e||void 0===e?void 0:e.updating,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visibleAtCurrentScale,null===e||void 0===e?void 0:e.error,null===e||void 0===e?void 0:e.visibilityMode,null===e||void 0===e?void 0:e.panel,null===e||void 0===e||null===(t=e.panel)||void 0===t?void 0:t.title,null===e||void 0===e||null===(n=e.panel)||void 0===n?void 0:n.content,null===e||void 0===e||null===(i=e.panel)||void 0===i?void 0:i.className,null===e||void 0===e?void 0:e.sortable,null===e||void 0===e?void 0:e.childrenSortable]}),(function(){return t.scheduleRender()}),y.w),(0,y.l)((function(){return[null===e||void 0===e?void 0:e.hidden,null===e||void 0===e?void 0:e.error]}),(function(){return t._setVisibleItems(t.operationalItems)})),e.actionsSections.on("change",(function(){return t.scheduleRender()})),e.children.on("change",(function(){return t.scheduleRender()}))],i),e.children.forEach((function(e){return t._renderOnItemChanges(e)})),e.actionsSections.forEach((function(e){return t._watchActionSectionChanges(e,n)}))}},{key:"_itemsChanged",value:function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnItemChanges(e)})),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}},{key:"_filterActions",value:function(e){return e.map((function(e){return e.filter((function(e){return e.visible}))}))}},{key:"_countActions",value:function(e){return e.reduce((function(e,t){return e+t.length}),0)}},{key:"_getIconImageStyles",value:function(e){var t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?'url("'.concat(t,'")'):null}}},{key:"_selectionKeydown",value:function(e){var t=(0,p.i)(e);if(["ArrowDown","ArrowUp"].includes(t)){e.stopPropagation();var n=e.currentTarget,i=n["data-item"],r=this._sortableMap,o=this.selectedItems,a=n.dataset.group,l=r.get(a);if(l){var s=Z(i,o),c=l.toArray(),u=e.target,d=c.indexOf(u.dataset.layerUid);if(-1!==d){if("ArrowDown"===t){var h,v,f=d+1;if(f>=c.length)return;s?(un(c,d,f),l.sort(c),this._sortLayers(l),this._focusSortUid=null===(h=i.layer)||void 0===h?void 0:h.uid):(this._focusSortUid=null===(v=i.layer)||void 0===v?void 0:v.uid,this.scheduleRender())}if("ArrowUp"===t){var g,m,y=d-1;if(y<=-1)return;s?(un(c,d,y),l.sort(c),this._sortLayers(l),this._focusSortUid=null===(g=i.layer)||void 0===g?void 0:g.uid):(this._focusSortUid=null===(m=i.layer)||void 0===m?void 0:m.uid,this.scheduleRender())}}}}else this._toggleSelection(e)}},{key:"_toggleActionsOpen",value:function(e){var t=e.currentTarget["data-item"],n=!t.actionsOpen;n&&this.operationalItems.forEach((function(e){return Ci(e)})),t.actionsOpen=n,e.stopPropagation()}},{key:"_triggerPanel",value:function(e){var t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()}},{key:"_triggerAction",value:function(e){var t=e.currentTarget,n=t["data-action"],i=t["data-item"];"toggle"===n.type&&(n.value=!n.value),this.triggerAction(n,i),e.stopPropagation()}},{key:"_toggleVisibility",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-parent-visibility"),i=t["data-item"];n===ki&&i.visible||(i.visible=!i.visible),e.stopPropagation()}},{key:"_toggleChildrenClick",value:function(e){var t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}},{key:"_toggleSelection",value:function(e){var t,n;e.stopPropagation();var i=this.multipleSelectionEnabled,r=this.selectedItems,o=e.currentTarget["data-item"],a=Z(o,r),l=r.length;if(!i)return!l||a&&1===l?void(a?null===(t=r.remove)||void 0===t||t.call(r,a):r.add(o)):(r.removeAll(),void r.add(o));a?null===(n=r.remove)||void 0===n||n.call(r,a):r.add(o)}}]),i}(_.O);(0,p.e)([(0,p.d)()],Ai.prototype,"visibleItems",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"iconClass",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"errorsVisible",void 0),(0,p.e)([(0,p.d)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ai.prototype,"label",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"listItemCanGiveFunction",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"listItemCanReceiveFunction",void 0),(0,p.e)([(0,b.o)("viewModel.listItemCreatedFunction")],Ai.prototype,"listItemCreatedFunction",void 0),(0,p.e)([(0,p.d)(),(0,_.e)("esri/widgets/LayerList/t9n/LayerList")],Ai.prototype,"messages",void 0),(0,p.e)([(0,p.d)(),(0,_.e)("esri/t9n/common")],Ai.prototype,"messagesCommon",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"multipleSelectionEnabled",void 0),(0,p.e)([(0,b.o)("viewModel.operationalItems")],Ai.prototype,"operationalItems",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"selectionEnabled",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"selectedItems",void 0),(0,p.e)([(0,b.o)("viewModel.view")],Ai.prototype,"view",void 0),(0,p.e)([(0,E.t)("trigger-action"),(0,p.d)({type:ae})],Ai.prototype,"viewModel",void 0),(0,p.e)([(0,p.d)()],Ai.prototype,"visibleElements",void 0),(0,p.e)([(0,p.q)("visibleElements")],Ai.prototype,"castVisibleElements",null),(0,p.e)([(0,b.o)("viewModel.triggerAction")],Ai.prototype,"triggerAction",null),(0,p.e)([(0,S.t)()],Ai.prototype,"_toggleActionsOpen",null),(0,p.e)([(0,S.t)()],Ai.prototype,"_triggerPanel",null),(0,p.e)([(0,S.t)()],Ai.prototype,"_triggerAction",null),(0,p.e)([(0,S.t)()],Ai.prototype,"_toggleVisibility",null),(0,p.e)([(0,S.t)()],Ai.prototype,"_toggleChildrenClick",null),(0,p.e)([(0,S.t)()],Ai.prototype,"_toggleSelection",null);var Ti=Ai=(0,p.e)([(0,p.n)("esri.widgets.LayerList")],Ai);t.default=Ti},42471:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(84538);function r(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:a(e[t])}}}function o(e){var t=e.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function a(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];o(t)?(0,i.k)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call.apply(e,[this,t].concat(r))}}},77389:function(e,t,n){n.d(t,{o:function(){return o}});var i=n(1413),r=n(23132);function o(e,t){var n=t?(0,i.Z)((0,i.Z)({},t),{},{source:e}):e;return(0,r.d)({aliasOf:n})}},49580:function(e,t,n){n.d(t,{s:function(){return p}});var i=n(74165),r=n(15671),o=n(43144),a=n(15861),l=n(41742),s=n(23132),c=n(75610),u=(n(43920),n(54841)),d=n(57714),h=n(33703),v=s.s.getLogger("esri.intl");function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.format,r=void 0===i?{}:i;return(0,s.r)(e,(function(e){return f(e,t,r)}))}function f(e,t,n){var i,r,o=e.indexOf(":");if(-1===o?i=e.trim():(i=e.slice(0,o).trim(),r=e.slice(o+1).trim()),!i)return"";var a=(0,c.c)(i,t);if(null==a)return"";var s=n[r]||n[i];return s?function(e,t){switch(t.type){case"date":return(0,l.L)(e,t.intlOptions);case"number":return(0,l.m)(e,t.intlOptions);default:return v.warn("missing format descriptor for key {key}"),g(e)}}(a,s):r?function(e,t){switch(t.toLowerCase()){case"dateformat":return(0,l.L)(e);case"numberformat":return(0,l.m)(e);default:return v.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?(0,l.L)(e):/^numberformat/i.test(t)?(0,l.m)(e):g(e)}}(a,r):g(a)}function g(e){switch(typeof e){case"string":return e;case"number":return(0,l.m)(e);case"boolean":return""+e;default:return e instanceof Date?(0,l.L)(e):""}}function m(){return m=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,l,c,d,h,v,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.exec(r)){e.next=3;break}throw new s.a("esri-intl:invalid-bundle",'Bundle id "'.concat(r,'" is not compatible with the pattern "').concat(n,'"'));case 3:return l=a[1]?"".concat(a[1],"/"):"",c=a[2],d=(0,u.u)(o),h="".concat(l).concat(c,".json"),v=d?"".concat(l).concat(c,"_").concat(d,".json"):h,e.prev=4,e.next=7,y(t(v));case 7:case 17:p=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),v!==h){e.next=14;break}throw new s.a("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,y(t(h));case 20:throw e.prev=20,e.t1=e.catch(14),new s.a("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",p);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),m.apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.r)(k.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",k.fetchBundleAsset(t));case 2:return e.next=4,(0,d.U)(t,{responseType:"text"});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){function e(t){var n,i=t.base,o=void 0===i?"":i,a=t.pattern,l=t.location,s=void 0===l?new URL(window.location.href):l;(0,r.Z)(this,e),n="string"==typeof s?function(e){return new URL(e,new URL(s,window.location.href)).href}:s instanceof URL?function(e){return new URL(e,s).href}:s,this.pattern="string"==typeof a?new RegExp("^".concat(a)):a,this.getAssetUrl=n,o=o?o.endsWith("/")?o:o+"/":"",this.matcher=new RegExp("^".concat(o,"(?:(.*)/)?(.*)$"))}return(0,o.Z)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,n,i){return m.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var w,k={};(0,u.l)((w={pattern:"esri/",location:h.a},new _(w)))},82162:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(93433);function r(e){return function(t){t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var n=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((function(e){return e.trim()}))}(e);n.push.apply(n,(0,i.Z)(r))}}},79042:function(e,t,n){n.d(t,{e:function(){return i},t:function(){return r}});n(84538);function i(e){return e&&"function"==typeof e.render}function r(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=9096.c097851e.chunk.js.map