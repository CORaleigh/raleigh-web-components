{"version":3,"file":"static/js/7717.e42574fb.chunk.js","mappings":"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","sources":["../node_modules/raleigh-map-components/dist/esm/TileLayerView-407b49e2.js","../node_modules/raleigh-map-components/dist/esm/TileLayerView2D-7d10b075.js","../node_modules/raleigh-map-components/dist/esm/clickToleranceUtils-6a0de7dc.js","../node_modules/raleigh-map-components/dist/esm/drapedUtils-44d802c8.js"],"sourcesContent":["import { e, y, n, s, E } from './cast-c3f45b36.js';\nimport { r } from './config-1ffdf45e.js';\nimport { s as s$1 } from './clickToleranceUtils-6a0de7dc.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nconst i=i=>{let c=class extends i{async fetchPopupFeatures(e,s$2){const{layer:a}=this;if(!e)throw new s(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a});if(\"tile\"!==a.type)throw new s(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type});const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return E(c.map((async r$1=>{const o=r$1.createQuery(),a=r(s$2)?s$2.event:null,i=s$1({renderer:r$1.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r$1.popupTemplate.getRequiredFields();return (await r$1.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([y()],c.prototype,\"layer\",void 0),c=e([n(\"esri.layers.mixins.TileLayerView\")],c),c};\n\nexport { i };\n","import { j, a as s, e as e$1, y as y$2, n as n$1 } from './cast-c3f45b36.js';\nimport { l } from './reactiveUtils-f60c7d41.js';\nimport './config-1ffdf45e.js';\nimport { E } from './Point-6cb878d9.js';\nimport { t, o, n } from './imageUtils-694ef1e1.js';\nimport { y } from './LayerView2D-2afdec46.js';\nimport { h } from './TileInfoView-83c82d40.js';\nimport { e } from './TileKey-cf11edbc.js';\nimport { y as y$1, r } from './TileStrategy-23d335df.js';\nimport { u } from './LayerView-2def927c.js';\nimport { i as i$1 } from './RefreshableLayerView-faf61099.js';\nimport { i } from './TileLayerView-407b49e2.js';\nimport { a } from './drapedUtils-44d802c8.js';\nimport './JSONSupport-db08a3d3.js';\nimport './BitmapTileContainer-0a498921.js';\nimport './aaBoundingRect-9f5a81b4.js';\nimport './mathUtils-2bc3dc3d.js';\nimport './Extent-f175f54a.js';\nimport './mat3f32-42811e80.js';\nimport './Bitmap-0be40819.js';\nimport './mat3-8b5f2a3e.js';\nimport './vec2f32-bf50d22f.js';\nimport './DisplayObject-7536b955.js';\nimport './Evented-cb187462.js';\nimport './context-util-2cfc3c15.js';\nimport './enums-39ca0456.js';\nimport './Texture-eb557a77.js';\nimport './TiledDisplayObject-1902681f.js';\nimport './WGLContainer-f08d17e7.js';\nimport './WGLBrushVTLSymbol-9caebd62.js';\nimport './DefaultVertexAttributeLayouts-628c4128.js';\nimport './vec2f64-2b32ef68.js';\nimport './VertexElementDescriptor-26861b4e.js';\nimport './enums-c5b71a5c.js';\nimport './enums-4e89dbf5.js';\nimport './number-de709571.js';\nimport './FramebufferObject-3c39c713.js';\nimport './StyleDefinition-6a097509.js';\nimport './config-9a7f1231.js';\nimport './GeometryUtils-076a114e.js';\nimport './pixelUtils-40f4c842.js';\nimport './Utils-1a809a7a.js';\nimport './ShaderCompiler-c3d24077.js';\nimport './ProgramTemplate-4896e910.js';\nimport './Program-cfc2ac6a.js';\nimport './MaterialKey-22699fef.js';\nimport './alignmentUtils-c331d95e.js';\nimport './utils-659f8fa4.js';\nimport './EffectView-71028bb0.js';\nimport './jsonUtils-455358fc.js';\nimport './colorUtils-a7d54473.js';\nimport './screenUtils-bb784636.js';\nimport './mat4-7a77be1b.js';\nimport './heatmapUtils-aeff2740.js';\nimport './vec4f64-0cbfbafc.js';\nimport './Color-037179a4.js';\nimport './heatmapTextureUtils-d24c7be6.js';\nimport './earcut-d7f8e4d3.js';\nimport './vec2-c45237df.js';\nimport './featureConversionUtils-02732a82.js';\nimport './jsonUtils-470c2f30.js';\nimport './geometry-af7a1990.js';\nimport './jsonMap-ad5a21ba.js';\nimport './OptimizedFeature-be5c501a.js';\nimport './OptimizedFeatureSet-0aa3ab12.js';\nimport './TileContainer-22067bde.js';\nimport './Collection-4ef916ef.js';\nimport './SimpleObservable-8d982b09.js';\nimport './collectionUtils-7fc43c51.js';\nimport './TileStore-fac6ac70.js';\nimport './workers-bf2fb148.js';\nimport './assets-746d5f3f.js';\nimport './intl-bb87b713.js';\nimport './number-4308b0e0.js';\nimport './locale-3aaf7fdb.js';\nimport './messages-27a8a537.js';\nimport './quickselect-92d4264c.js';\nimport './Query-780641ee.js';\nimport './TimeExtent-d95e7159.js';\nimport './enumeration-76da1a7a.js';\nimport './Field-043c648d.js';\nimport './fieldType-9178e8c8.js';\nimport './FullTextSearch-934480e3.js';\nimport './Clonable-79c9df5b.js';\nimport './HandleOwner-f847f884.js';\nimport './Identifiable-8ce6a5f3.js';\nimport './clickToleranceUtils-6a0de7dc.js';\nimport './unitUtils-d3ad6907.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nconst _=[0,0];let I=class extends(i(i$1(t(y(u))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null;}get resampling(){return !(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new h(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new y$1({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new r({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.handles.add(l((()=>this.resampling),(()=>{this.doRefresh();}))),super.attach();}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null;}moveStart(){this.requestUpdate();}viewChange(){this.requestUpdate();}moveEnd(){this.requestUpdate();}supportsSpatialReference(e){return E(this.layer.tileInfo?.spatialReference,e)}createFetchPopupFeaturesQueryGeometry(e,t){return a(e,t,this.view)}async doRefresh(){!this.attached||this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))));}isUpdating(){return this._fetchQueue?.updating??!1}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return [i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate();}async fetchTile(e$1,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)try{return await this._fetchImage(e$1,r)}catch(h){if(!j(h)&&!this.resampling)return o(this._tileInfoView.tileInfo.size);if(a<3){const i=this._tileInfoView.getTileParentId(e$1.id);if(i){const s=new e(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return n(this._tileInfoView,r,s,e$1)}}throw h}const l=new e(0,0,0,0);let o$1;try{if(await s.fetchAvailabilityUpsample(e$1.level,e$1.row,e$1.col,l,{signal:r}),l.level!==e$1.level&&!this.resampling)return o(this._tileInfoView.tileInfo.size);o$1=await this._fetchImage(l,r);}catch(h){if(j(h))throw h;o$1=await this._fetchImage(e$1,r);}return this.resampling?n(this._tileInfoView,o$1,l,e$1):o$1}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()));}catch(s$1){j(s$1)||s.getLogger(this.declaredClass).error(s$1);}this.requestUpdate();}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}};e$1([y$2()],I.prototype,\"_fetchQueue\",void 0),e$1([y$2()],I.prototype,\"resampling\",null),I=e$1([n$1(\"esri.views.2d.layers.TileLayerView2D\")],I);const V=I;\n\nexport default V;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++);}return e/n}function n(t,n){return \"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return (n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos?.forEach((n=>{e=t(e,n.symbol);})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol);})),e}return o}\n\nexport { s };\n","import './geometry-af7a1990.js';\nimport { r } from './config-1ffdf45e.js';\nimport { $ } from './unitUtils-d3ad6907.js';\nimport { w } from './Extent-f175f54a.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction a(t,n,a,o=new w){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=r(o)&&!o.equals(a.spatialReference)?$(o)/$(a.spatialReference):n*i;}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}new w;\n\nexport { a };\n"],"names":["i","c","e","s$2","a","this","layer","s","type","get","allSublayers","toArray","filter","r","minScale","t","maxScale","popupTemplate","popupEnabled","visible","E","map","r$1","o","createQuery","event","s$1","renderer","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","y","prototype","n","_","I","arguments","_tileStrategy","_fetchQueue","resampling","pause","state","update","resume","tileServers","_tileInfoView","h","tileInfo","fullExtent","y$1","tileInfoView","concurrency","length","process","fetchTile","cachePolicy","acquireTile","releaseTile","requestUpdate","handles","add","l","doRefresh","destroy","clear","container","removeAllChildren","spatialReference","view","attached","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","updating","_bitmapView","createTile","bitmap","getTileCoords","key","x","resolution","getTileResolution","size","width","height","addChild","abort","id","removeChild","once","e$1","tilemapCache","signal","resamplingLevel","_fetchImage","j","getTileParentId","fetchAvailabilityUpsample","level","row","col","o$1","has","push","source","declaredClass","error","fetchImageBitmapTile","i$1","u","y$2","V","n$1","xoffset","Math","max","abs","yoffset","stops","maxSize","minSize","f","floor","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","w","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","$","m","p","xmin","min","ymin","xmax","ymax"],"sourceRoot":""}