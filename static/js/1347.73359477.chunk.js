"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[1347],{11347:function(e,t,r){r.r(t);var n=r(74165),i=r(37762),s=r(15671),a=r(43144),u=r(15861),o=r(48848),l=r(93661),c=r(25456),f=r(74384),h=r(78413),p=r(94663),v=r(35237),d=r(4760),y=(r(71802),r(46817),r(82474),r(40114),r(40558),r(56162),r(52559),r(62466),r(62753),r(95249),r(47855),r(15751),r(79557),r(75255),r(65415),r(83948),r(63212),r(39994),r(69717),r(89181),r(20302),r(69641),r(15436),r(69768),r(62610),r(13385),r(37856),r(5430),r(85113),r(46737),r(53586),r(65094),r(52113),r(53921),r(51732),r(65703),r(93209),r(33794),r(93314),r(59984),r(62399),r(44513),r(77755),r(18144),r(66911),r(54233),r(1206),r(93122),r(75833),r(27205),r(33563),o.a.getLogger("esri.views.2d.layers.features.support.whereUtils")),m={getAttribute:function(e,t){return e.field(t)}};function b(e,t){return w.apply(this,arguments)}function w(){return w=(0,u.Z)((0,n.Z)().mark((function e(t,i){var s,a,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2470).then(r.bind(r,62470));case 2:return s=e.sent,e.prev=3,(a=s.WhereClause.create(t,i)).isStandardized||(u=new o.s("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",a),y.error(u)),e.abrupt("return",(function(e){var t=e.readArcadeFeature();return a.testFeature(t,m)}));case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",(y.warn("mapview-bad-where-clause","Encountered an error when evaluating where clause",t),function(e){return!0}));case 12:case"end":return e.stop()}}),e,null,[[3,9]])}))),w.apply(this,arguments)}var g=function(){function e(t){(0,s.Z)(this,e),this._geometryBounds=(0,c.u)(),this._idToVisibility=new Map,this._serviceInfo=t}return(0,a.Z)(e,[{key:"hash",get:function(){return this._hash}},{key:"check",value:function(e){return this._applyFilter(e)}},{key:"clear",value:function(){var e=this._resetAllHiddenIds();return this.update(),{show:e,hide:[]}}},{key:"invalidate",value:function(){var e=this;this._idToVisibility.forEach((function(t,r){e._idToVisibility.set(r,0)}))}},{key:"setKnownIds",value:function(e){var t,r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._idToVisibility.set(n,1)}}catch(s){r.e(s)}finally{r.f()}}},{key:"setTrue",value:function(e){var t=this,r=[],n=[],i=new Set(e);return this._idToVisibility.forEach((function(e,s){var a=!!(1&t._idToVisibility.get(s)),u=i.has(s);!a&&u?r.push(s):a&&!u&&n.push(s),t._idToVisibility.set(s,u?3:0)})),{show:r,hide:n}}},{key:"createQuery",value:function(){var e=this.geometry,t=this.spatialRel,r=this.where,n=this.timeExtent,i=this.objectIds;return v.x.fromJSON({geometry:e,spatialRel:t,where:r,timeExtent:n,objectIds:i})}},{key:"update",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._hash=JSON.stringify(t),e.next=3,(0,p.J)(t,null,r);case 3:return i=e.sent,e.next=6,Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_setAttributeFilter",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.where){e.next=2;break}return e.abrupt("return",(this._clause=null,void(this.where=null)));case 2:return e.next=4,b(t.where,this._serviceInfo.fieldsIndex);case 4:this._clause=e.sent,this.where=t.where;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setIdFilter",value:function(e){this._idsToShow=e&&e.objectIds&&new Set(e.objectIds),this._idsToHide=e&&e.hiddenIds&&new Set(e.hiddenIds),this.objectIds=e&&e.objectIds}},{key:"_setGeometryFilter",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){var r,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.geometry){e.next=2;break}return e.abrupt("return",(this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null)));case 2:return r=t.geometry,i=t.spatialRel||"esriSpatialRelIntersects",e.next=6,(0,h.v)(i,r,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);case 6:s=e.sent,(0,f.e)(this._geometryBounds,r),this._spatialQueryOperator=s,this.geometry=r,this.spatialRel=i;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setTimeFilter",value:function(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=(0,h.n)(this._serviceInfo.timeInfo,e.timeExtent,d.u);else{var t=new o.s("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",e.timeExtent);o.a.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter").error(t)}}},{key:"_applyFilter",value:function(e){return this._filterByGeometry(e)&&this._filterById(e)&&this._filterByTime(e)&&this._filterByExpression(e)}},{key:"_filterByExpression",value:function(e){return!this.where||this._clause(e)}},{key:"_filterById",value:function(e){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(e.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(e.getObjectId()))}},{key:"_filterByGeometry",value:function(e){if(!this.geometry)return!0;var t=e.readHydratedGeometry();return!!t&&this._spatialQueryOperator(t)}},{key:"_filterByTime",value:function(e){return!!(0,l.t)(this._timeOperator)||this._timeOperator(e)}},{key:"_resetAllHiddenIds",value:function(){var e=this,t=[];return this._idToVisibility.forEach((function(r,n){1&r||(e._idToVisibility.set(n,1),t.push(n))})),t}}]),e}();t.default=g},78413:function(e,t,r){r.d(t,{I:function(){return T},P:function(){return k},n:function(){return E},t:function(){return F},v:function(){return I}});var n=r(74165),i=r(15861),s=r(37762),a=r(48848),u=r(46817),o=r(56162),l=r(82474),c=r(52559),f=r(62466),h=r(62753),p=r(94663);function v(e,t){return e?t?4:3:t?3:2}function d(e,t,r,n,i){if(!e)return!1;var a,u=v(t,r),o=e.coords,l=e.lengths,c=!1,f=0,h=(0,s.Z)(l);try{for(h.s();!(a=h.n()).done;){var p=a.value;c=y(c,o,u,f,p,n,i),f+=p*u}}catch(d){h.e(d)}finally{h.f()}return c}function y(e,t,r,n,i,s,a){for(var u=e,o=n,l=n,c=n+i*r;l<c;l+=r){(o=l+r)===c&&(o=n);var f=t[l],h=t[l+1],p=t[o],v=t[o+1];(h<a&&v>=a||v<a&&h>=a)&&f+(a-h)/(v-h)*(p-f)<s&&(u=!u)}return u}var m="feature-store:unsupported-query",b={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},w={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},g={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},_={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function x(e){return null!=e&&!0===w[e]}function R(e){return null!=e&&!0===g[(0,o.c)(e)]}function S(e){return null!=e&&!0===_[e]}function I(e,t,n,i,s){if((0,o.y)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var a=(0,c.J)(new f.t,t,!1,!1);return Promise.resolve((function(e){return function(e,t,r,n){return d(e,t,r,n.coords[0],n.coords[1])}(a,!1,!1,e)}))}if((0,o.y)(t)&&"esriGeometryMultipoint"===n){var l=(0,c.J)(new f.t,t,!1,!1);if("esriSpatialRelContains"===e)return Promise.resolve((function(e){return function(e,t,r,n,i,s){var a=v(i,s),u=n.coords,o=n.lengths;if(!o)return!1;for(var l=0,c=0;l<o.length;l++,c+=a)if(!d(e,t,r,u[c],u[c+1]))return!1;return!0}(l,!1,!1,e,i,s)}))}if((0,o.u)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return Promise.resolve((function(e){return(0,u.r)(t,(0,p.v)(n,i,s,e))}));if((0,o.u)(t)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===e)return Promise.resolve((function(e){return(0,u.i)(t,(0,p.v)(n,i,s,e))}));if((0,o.u)(t)&&"esriSpatialRelIntersects"===e){var h=function(e){return"mesh"===e?u.o:(0,u.Z)(e)}(n);return Promise.resolve((function(e){return h(t,(0,p.v)(n,i,s,e))}))}return Promise.all([r.e(6951),r.e(9009)]).then(r.bind(r,79009)).then((function(r){var a=r[b[e]].bind(null,t.spatialReference,t);return function(e){return a((0,p.v)(n,i,s,e))}}))}function k(e,t,r){return Z.apply(this,arguments)}function Z(){return Z=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.spatialRel,!(u=t.geometry)){e.next=11;break}if(x(s)){e.next=4;break}throw new a.s(m,"Unsupported query spatial relationship",{query:t});case 4:if(!(0,l.I)(u.spatialReference)||!(0,l.I)(i)){e.next=11;break}if(R(u)){e.next=7;break}throw new a.s(m,"Unsupported query geometry type",{query:t});case 7:if(S(r)){e.next=9;break}throw new a.s(m,"Unsupported layer geometry type",{query:t});case 9:if(!t.outSR){e.next=11;break}return e.abrupt("return",(0,h.f)(t.geometry&&t.geometry.spatialReference,t.outSR));case 11:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function T(e){if((0,o.u)(e))return!0;if((0,o.y)(e)){var t,r=(0,s.Z)(e.rings);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(5!==n.length)return!1;if(n[0][0]!==n[1][0]||n[0][0]!==n[4][0]||n[2][0]!==n[3][0]||n[0][1]!==n[3][1]||n[0][1]!==n[4][1]||n[1][1]!==n[2][1])return!1}}catch(i){r.e(i)}finally{r.f()}return!0}return!1}function F(e,t){if(!e)return null;var r=t.featureAdapter,n=e.startTimeField,i=e.endTimeField,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(n&&i)t.forEach((function(e){var t=r.getAttribute(e,n),u=r.getAttribute(e,i);null==t||isNaN(t)||(s=Math.min(s,t)),null==u||isNaN(u)||(a=Math.max(a,u))}));else{var u=n||i;t.forEach((function(e){var t=r.getAttribute(e,u);null==t||isNaN(t)||(s=Math.min(s,t),a=Math.max(a,t))}))}return{start:s,end:a}}function E(e,t,r){if(!t||!e)return null;var n=e.startTimeField,i=e.endTimeField;if(!n&&!i)return null;var s=t.start,a=t.end;return null===s&&null===a?null:void 0===s&&void 0===a?function(){return!1}:n&&i?function(e,t,r,n,i){return null!=n&&null!=i?function(s){var a=e.getAttribute(s,t),u=e.getAttribute(s,r);return(null==a||a<=i)&&(null==u||u>=n)}:null!=n?function(t){var i=e.getAttribute(t,r);return null==i||i>=n}:null!=i?function(r){var n=e.getAttribute(r,t);return null==n||n<=i}:void 0}(r,n,i,s,a):function(e,t,r,n){return null!=r&&null!=n&&r===n?function(n){return e.getAttribute(n,t)===r}:null!=r&&null!=n?function(i){var s=e.getAttribute(i,t);return s>=r&&s<=n}:null!=r?function(n){return e.getAttribute(n,t)>=r}:null!=n?function(r){return e.getAttribute(r,t)<=n}:void 0}(r,n||i,s,a)}},94663:function(e,t,r){r.d(t,{E:function(){return O},F:function(){return m},J:function(){return k},b:function(){return x},v:function(){return R},z:function(){return S}});var n=r(74165),i=r(15861),s=r(40558),a=r(93661),u=r(47855),o=r(95249),l=r(74384),c=r(56162),f=r(63212),h=r(82474),p=r(52559),v=r(62466),d=r(62753),y=new s.s({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),m=Object.freeze({}),b=new v.t,w=new v.t,g=new v.t,_={esriGeometryPoint:p.F,esriGeometryPolyline:p.$,esriGeometryPolygon:p.D,esriGeometryMultipoint:p.O};function x(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.hasZ,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.hasM;if((0,a.t)(t))return null;var s=e.hasZ&&n,u=e.hasM&&i;if(r){var o=(0,p.a)(g,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,i);return(0,p.F)(o,s,u)}return(0,p.F)(t,s,u)}function R(e,t,r,n,i,s){var u,o,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r,f=t&&l,h=r&&c,v=(0,a.r)(n)?"coords"in n?n:n.geometry:null;if((0,a.t)(v))return null;if(i){var d,y,m=(0,p.h)(w,v,t,r,e,i,l,c);return s&&(m=(0,p.a)(g,m,f,h,e,s)),null!==(d=null===(y=_[e])||void 0===y?void 0:y.call(_,m,f,h))&&void 0!==d?d:null}if(s){var x,R,S=(0,p.a)(g,v,t,r,e,s,l,c);return null!==(x=null===(R=_[e])||void 0===R?void 0:R.call(_,S,f,h))&&void 0!==x?x:null}return(0,p.I)(b,v,t,r,l,c),null!==(u=null===(o=_[e])||void 0===o?void 0:o.call(_,b,f,h))&&void 0!==u?u:null}function S(e,t,r){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,a,u,o,l,c,f,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.outFields,a=t.orderByFields,u=t.groupByFieldsForStatistics,o=t.outStatistics,s)for(l=0;l<s.length;l++)s[l]=s[l].trim();if(a)for(c=0;c<a.length;c++)a[c]=a[c].trim();if(u)for(f=0;f<u.length;f++)u[f]=u[f].trim();if(o)for(h=0;h<o.length;h++)o[h].onStatisticField&&(o[h].onStatisticField=o[h].onStatisticField.trim());return e.abrupt("return",(t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),k(t,r,i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,r){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,u,o,h,p,v,y,b,w;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(s=t.where,t.where=s=s&&s.trim(),(!s||/^1 *= *1$/.test(s)||r&&r===s)&&(t.where=null),t.geometry){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,E(t);case 7:if(u=e.sent,t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&(o=t.geometry.spatialReference,(u=(0,l.l)(u)).spatialReference=o),!u){e.next=27;break}return e.next=12,(0,d.f)(u.spatialReference,i);case 12:return u=F(u,i),e.next=15,(0,f.v)((0,c.v)(u));case 15:if(p=e.sent[0],!(0,a.t)(p)){e.next=18;break}throw m;case 18:return v="quantizationParameters"in t&&(null===(h=t.quantizationParameters)||void 0===h?void 0:h.tolerance)||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,y=v&&T(u,i)?{densificationStep:8*v}:void 0,b=p.toJSON(),e.next=23,(0,d.g)(b,b.spatialReference,i,y);case 23:if(w=e.sent){e.next=26;break}throw m;case 26:w.spatialReference=i,t.geometry=w;case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){if(!e)return!1;var r=e.spatialReference;return((0,c.u)(e)||(0,c.y)(e)||(0,c.f)(e))&&!(0,h.E)(r,t)&&!(0,o.A)(r,t)}function F(e,t){var r=e.spatialReference;return T(e,t)&&(0,c.u)(e)?{spatialReference:r,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}function E(e){return G.apply(this,arguments)}function G(){return(G=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,s,a,o,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.distance,i=t.units,s=t.geometry,null!=r&&!("vertexAttributes"in s)){e.next=3;break}return e.abrupt("return",s);case 3:if(a=s.spatialReference,o=i?y.fromJSON(i):(0,u.X)(a),!a||!(0,h.h)(a)&&!(0,h.b)(a)){e.next=9;break}e.t0=s,e.next=12;break;case 9:return e.next=11,(0,d.f)(a,h.n).then((function(){return(0,d.g)(s,h.n)}));case 11:e.t0=e.sent;case 12:return l=e.t0,e.next=15,P();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t1)(l.spatialReference,l,r,o));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(6951),r.e(9009)]).then(r.bind(r,79009));case 2:return e.abrupt("return",e.sent.geodesicBuffer);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return e&&N in e?JSON.parse(JSON.stringify(e,M)):e}var N="_geVersion",M=function(e,t){return e!==N?t:void 0}}}]);
//# sourceMappingURL=1347.73359477.chunk.js.map