"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9219],{59219:function(e,n,t){t.r(n),t.d(n,{registerFunctions:function(){return w}});var a=t(74165),r=t(37762),i=t(15861),s=t(58631),l=t(32455),c=t(39008),u=t(48848),o=t(62470),f=t(98987),d=t(69641);t(74384),t(46817),t(93661),t(82474),t(40114),t(40558),t(59844),t(65094),t(56162),t(52559),t(62466),t(47855),t(93116),t(84186),t(64998),t(25577),t(62610),t(93314),t(37856),t(15751),t(59984),t(20302),t(53586),t(60369),t(92072),t(37944),t(86086),t(21385),t(89794),t(48200),t(71802),t(85253),t(93209),t(25456),t(46337),t(81556),t(51920),t(33795),t(79557),t(89181),t(35237),t(69768),t(2821),t(66577),t(50690),t(33794),t(71147),t(15529),t(70449),t(22603),t(2959),t(56546),t(39926),t(6762),t(8141),t(26151),t(91681),t(12953),t(63393),t(90442),t(64854),t(77755),t(19941),t(39994),t(49871),t(63212),t(69717),t(53409),t(35182),t(51816),t(65415),t(68781),t(15436),t(35865),t(75847),t(95399),t(77880),t(61416),t(21015),t(75255),t(46679),t(85113),t(46737),t(52113),t(99795),t(87753),t(29130),t(82396),t(1685),t(74797),t(45999),t(630),t(72973),t(62710),t(52721),t(61903),t(23444),t(40811),t(24623),t(64264),t(6379),t(59389),t(23341),t(41820),t(20086),t(92982),t(74494),t(71645),t(89311),t(67066);function p(e,n,t,a){if(1===a.length){if((0,s.Y)(a[0]))return(0,s.am)(e,a[0],-1);if((0,s.E)(a[0]))return(0,s.am)(e,a[0].toArray(),-1)}return(0,s.am)(e,a,-1)}function m(e,n,t){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)((0,a.Z)().mark((function e(n,t,r){var i,s,l,c,u,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=n.getVariables()).length>0)){e.next=17;break}s=[],l=0;case 4:if(!(l<i.length)){e.next=14;break}return c={name:i[l]},e.t0=s,e.next=9,t.evaluateIdentifier(r,c);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:l++,e.next=4;break;case 14:for(u={},o=0;o<i.length;o++)u[i[o]]=s[o];return e.abrupt("return",(n.parameters=u,n));case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var a in e)if(a.toLowerCase()===n.toLowerCase())return e[a];return t}function h(e){if(null===e)return null;var n={type:y(e,"type",""),name:y(e,"name","")};if("range"===n.type)n.range=y(e,"range",[]);else{n.codedValues=[];var t,a=(0,r.Z)(y(e,"codedValues",[]));try{for(a.s();!(t=a.n()).done;){var i=t.value;n.codedValues.push({name:y(i,"name",""),code:y(i,"code",null)})}}catch(s){a.e(s)}finally{a.f()}}return n}function x(e){if(null===e)return null;var n={},t=y(e,"wkt",null);null!==t&&(n.wkt=t);var a=y(e,"wkid",null);return null!==a&&(n.wkid=a),n}function v(e){if(null===e)return null;var n={hasZ:y(e,"hasz",!1),hasM:y(e,"hasm",!1)},t=y(e,"spatialreference",null);t&&(n.spatialReference=x(t));var a=y(e,"x",null);if(null!==a)return n.x=a,n.y=y(e,"y",null),n;var r=y(e,"rings",null);if(null!==r)return n.rings=r,n;var i=y(e,"paths",null);if(null!==i)return n.paths=i,n;var s=y(e,"points",null);if(null!==s)return n.points=s,n;for(var l=0,c=["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"];l<c.length;l++){var u=c[l],o=y(e,u,null);null!==o&&(n[u]=o)}return n}function g(e){return!!e.layerDefinition&&!!e.featureSet&&!1!==function(e,n){var t,a=(0,r.Z)(n);try{for(a.s();!(t=a.n()).done;)if(t.value===e)return!0}catch(i){a.e(i)}finally{a.f()}return!1}(e.layerDefinition.geometryType,["","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&null!==e.layerDefinition.objectIdField&&""!==e.layerDefinition.objectIdField&&!1!==(0,s.Y)(e.layerDefinition.fields)&&!1!==(0,s.Y)(e.featureSet.features)}function w(e){"async"===e.mode&&(e.functions.getuser=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,i,c){var u,o,f,d,p,m,b,y,h,x,v,g,w,k,I,F,E;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(c,0,2,n,t),u=(0,s.L)(c[1],""),o=!0===u,u=!0===u||!1===u?"":(0,s.K)(u),!(0===c.length||c[0]instanceof s.ai)){e.next=13;break}return f=null,n.services&&n.services.portal&&(f=n.services.portal),c.length>0&&(f=(0,l.D)(c[0],f)),e.next=7,(0,l.q)(f,u,o);case 7:if(!(d=e.sent)){e.next=12;break}for(p=JSON.parse(JSON.stringify(d)),m=0,b=["lastLogin","created","modified"];m<b.length;m++)void 0!==p[y=b[m]]&&null!==p[y]&&(p[y]=new Date(p[y]));return e.abrupt("return",s.J.convertObjectToArcadeDictionary(p));case 12:case 28:case 38:return e.abrupt("return",null);case 13:if(h=null,(0,s.P)(c[0])&&(h=c[0]),!h){e.next=39;break}if(o=!1,!u){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,h.load();case 19:return e.next=21,h.getOwningSystemUrl();case 21:if(x=e.sent){e.next=29;break}if(u){e.next=28;break}return e.next=26,h.getIdentityUser();case 26:return v=e.sent,e.abrupt("return",v?s.J.convertObjectToArcadeDictionary({username:v}):null);case 29:return g=null,n.services&&n.services.portal&&(g=n.services.portal),g=(0,l.D)(new s.ai(x),g),e.next=33,(0,l.q)(g,u,o);case 33:if(!(w=e.sent)){e.next=38;break}for(k=JSON.parse(JSON.stringify(w)),I=0,F=["lastLogin","created","modified"];I<F.length;I++)void 0!==k[E=F[I]]&&null!==k[E]&&(k[E]=new Date(k[E]));return e.abrupt("return",s.J.convertObjectToArcadeDictionary(k));case 39:throw new s.t(n,s.e.InvalidParameter,t);case 40:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"getuser",min:1,max:2}),e.functions.featuresetbyid=function(n,t){return e.standardFunctionAsync(n,t,(function(e,a,r){if((0,s.V)(r,2,4,n,t),r[0]instanceof l.e){var i=(0,s.K)(r[1]),c=(0,s.L)(r[2],null),u=(0,s.I)((0,s.L)(r[3],!0));if(null===c&&(c=["*"]),!1===(0,s.Y)(c))throw new s.t(n,s.e.InvalidParameter,t);return r[0].featureSetById(i,u,c)}throw new s.t(n,s.e.InvalidParameter,t)}))},e.signatures.push({name:"featuresetbyid",min:2,max:4}),e.functions.getfeatureset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,a,r){if((0,s.V)(r,1,2,n,t),(0,s.b)(r[0])){var i=(0,s.L)(r[1],"datasource");return null===i&&(i="datasource"),i=(0,s.K)(i).toLowerCase(),(0,l.v)(r[0].fullSchema(),i,n.lrucache,n.interceptor,n.spatialReference)}throw new s.t(n,s.e.InvalidParameter,t)}))},e.signatures.push({name:"getfeatureset",min:1,max:2}),e.functions.featuresetbyportalitem=function(n,t){return e.standardFunctionAsync(n,t,(function(e,a,r){if((0,s.V)(r,2,5,n,t),null===r[0])throw new s.t(n,s.e.PortalRequired,t);if(r[0]instanceof s.ai){var i=(0,s.K)(r[1]),c=(0,s.K)(r[2]),u=(0,s.L)(r[3],null),o=(0,s.I)((0,s.L)(r[4],!0));if(null===u&&(u=["*"]),!1===(0,s.Y)(u))throw new s.t(n,s.e.InvalidParameter,t);var f=null;return n.services&&n.services.portal&&(f=n.services.portal),f=(0,l.D)(r[0],f),(0,l.G)(i,c,n.spatialReference,u,o,f,n.lrucache,n.interceptor)}if(!1===(0,s.w)(r[0]))throw new s.t(n,s.e.PortalRequired,t);var d=(0,s.K)(r[0]),p=(0,s.K)(r[1]),m=(0,s.L)(r[2],null),b=(0,s.I)((0,s.L)(r[3],!0));if(null===m&&(m=["*"]),!1===(0,s.Y)(m))throw new s.t(n,s.e.InvalidParameter,t);if(n.services&&n.services.portal)return(0,l.G)(d,p,n.spatialReference,m,b,n.services.portal,n.lrucache,n.interceptor);throw new s.t(n,s.e.PortalRequired,t)}))},e.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),e.functions.featuresetbyname=function(n,t){return e.standardFunctionAsync(n,t,(function(e,a,r){if((0,s.V)(r,2,4,n,t),r[0]instanceof l.e){var i=(0,s.K)(r[1]),c=(0,s.L)(r[2],null),u=(0,s.I)((0,s.L)(r[3],!0));if(null===c&&(c=["*"]),!1===(0,s.Y)(c))throw new s.t(n,s.e.InvalidParameter,t);return r[0].featureSetByName(i,u,c)}throw new s.t(n,s.e.InvalidParameter,t)}))},e.signatures.push({name:"featuresetbyname",min:2,max:4}),e.functions.featureset=function(n,t){return e.standardFunction(n,t,(function(e,a,i){(0,s.V)(i,1,1,n,t);var c=i[0],u={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,s.w)(c))void 0!==(c=JSON.parse(c)).layerDefinition?(u.layerDefinition=c.layerDefinition,u.featureSet=c.featureSet,c.layerDefinition.spatialReference&&(u.layerDefinition.spatialReference=c.layerDefinition.spatialReference)):(u.featureSet.features=c.features,u.featureSet.geometryType=c.geometryType,u.layerDefinition.geometryType=u.featureSet.geometryType,u.layerDefinition.objectIdField=c.objectIdFieldName,u.layerDefinition.typeIdField=c.typeIdFieldName,u.layerDefinition.globalIdField=c.globalIdFieldName,u.layerDefinition.fields=c.fields,c.spatialReference&&(u.layerDefinition.spatialReference=c.spatialReference));else{if(!(i[0]instanceof s.J))throw new s.t(n,s.e.InvalidParameter,t);var o=y(c=JSON.parse(i[0].castToText(!0)),"layerdefinition");if(null!==o){u.layerDefinition.geometryType=y(o,"geometrytype",""),u.featureSet.geometryType=u.layerDefinition.geometryType,u.layerDefinition.globalIdField=y(o,"globalidfield",""),u.layerDefinition.objectIdField=y(o,"objectidfield",""),u.layerDefinition.typeIdField=y(o,"typeidfield","");var f=y(o,"spatialreference",null);f&&(u.layerDefinition.spatialReference=x(f));var d,p=(0,r.Z)(y(o,"fields",[]));try{for(p.s();!(d=p.n()).done;){var m=d.value,b={name:y(m,"name",""),alias:y(m,"alias",""),type:y(m,"type",""),nullable:y(m,"nullable",!0),editable:y(m,"editable",!0),length:y(m,"length",null),domain:h(y(m,"domain"))};u.layerDefinition.fields.push(b)}}catch(G){p.e(G)}finally{p.f()}var w=y(c,"featureset",null);if(w){var k,I={},F=(0,r.Z)(u.layerDefinition.fields);try{for(F.s();!(k=F.n()).done;){var E=k.value;I[E.name.toLowerCase()]=E.name}}catch(G){F.e(G)}finally{F.f()}var D,A=(0,r.Z)(y(w,"features",[]));try{for(A.s();!(D=A.n()).done;){var N=D.value,L={},S=y(N,"attributes",{});for(var Z in S)L[I[Z.toLowerCase()]]=S[Z];u.featureSet.features.push({attributes:L,geometry:v(y(N,"geometry",null))})}}catch(G){A.e(G)}finally{A.f()}}}else{u.layerDefinition.geometryType=y(c,"geometrytype",""),u.featureSet.geometryType=u.layerDefinition.geometryType,u.layerDefinition.objectIdField=y(c,"objectidfieldname",""),u.layerDefinition.typeIdField=y(c,"typeidfieldname","");var C=y(c,"spatialreference",null);C&&(u.layerDefinition.spatialReference=x(C));var P,T=(0,r.Z)(y(c,"fields",[]));try{for(T.s();!(P=T.n()).done;){var R=P.value,O={name:y(R,"name",""),alias:y(R,"alias",""),type:y(R,"type",""),nullable:y(R,"nullable",!0),editable:y(R,"editable",!0),length:y(R,"length",null),domain:h(y(R,"domain"))};u.layerDefinition.fields.push(O)}}catch(G){T.e(G)}finally{T.f()}var W,M={},V=(0,r.Z)(u.layerDefinition.fields);try{for(V.s();!(W=V.n()).done;){var j=W.value;M[j.name.toLowerCase()]=j.name}}catch(G){V.e(G)}finally{V.f()}var J,K=(0,r.Z)(y(c,"features",[]));try{for(K.s();!(J=K.n()).done;){var Y=J.value,H={},_=y(Y,"attributes",{});for(var z in _)H[M[z.toLowerCase()]]=_[z];u.featureSet.features.push({attributes:H,geometry:v(y(Y,"geometry",null))})}}catch(G){K.e(G)}finally{K.f()}}}if(!1===g(u))throw new s.t(n,s.e.InvalidParameter,t);return l.d.create(u,n.spatialReference)}))},e.signatures.push({name:"featureset",min:1,max:1}),e.functions.filter=function(n,t){return e.standardFunctionAsync(n,t,function(){var c=(0,i.Z)((0,a.Z)().mark((function i(c,f,d){var p,m,b,y,h,x,v,g,w,k,I,F,E,D,A;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((0,s.V)(d,2,2,n,t),!(0,s.Y)(d[0])&&!(0,s.E)(d[0])){a.next=36;break}if(p=[],(m=d[0])instanceof s.aj&&(m=m.toArray()),b=null,(0,s.F)(d[1])){a.next=7;break}throw new s.t(n,s.e.InvalidParameter,t);case 7:b=d[1].createFunction(n),y=(0,r.Z)(m),a.prev=9,y.s();case 11:if((h=y.n()).done){a.next=27;break}if(x=h.value,v=b(x),!(0,u.V)(v)){a.next=24;break}return a.t0=!0,a.next=18,v;case 18:if(a.t1=a.sent,a.t2=a.t0===a.t1,!a.t2){a.next=22;break}p.push(x);case 22:a.next=25;break;case 24:!0===v&&p.push(x);case 25:a.next=11;break;case 27:a.next=32;break;case 29:a.prev=29,a.t3=a.catch(9),y.e(a.t3);case 32:return a.prev=32,y.f(),a.finish(32);case 35:return a.abrupt("return",p);case 36:if(!(0,s.P)(d[0])){a.next=59;break}return a.next=39,d[0].load();case 39:if(g=a.sent,w=o.WhereClause.create(d[1],g.getFieldsIndex()),!((k=w.getVariables()).length>0)){a.next=58;break}I=[],F=0;case 45:if(!(F<k.length)){a.next=55;break}return E={name:k[F]},a.t4=I,a.next=50,e.evaluateIdentifier(n,E);case 50:a.t5=a.sent,a.t4.push.call(a.t4,a.t5);case 52:F++,a.next=45;break;case 55:for(D={},A=0;A<k.length;A++)D[k[A]]=I[A];return a.abrupt("return",(w.parameters=D,new l.c({parentfeatureset:d[0],whereclause:w})));case 58:return a.abrupt("return",new l.c({parentfeatureset:d[0],whereclause:w}));case 59:throw new s.t(n,s.e.InvalidParameter,t);case 60:case"end":return a.stop()}}),i,null,[[9,29,32,35]])})));return function(e,n,t){return c.apply(this,arguments)}}())},e.signatures.push({name:"filter",min:2,max:2}),e.functions.orderby=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,i,c){var u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(c,2,2,n,t),!(0,s.P)(c[0])){e.next=3;break}return u=new l.a(c[1]),e.abrupt("return",new l.b({parentfeatureset:c[0],orderbyclause:u}));case 3:throw new s.t(n,s.e.InvalidParameter,t);case 4:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"orderby",min:2,max:2}),e.functions.top=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,i,c){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(c,2,2,n,t),!(0,s.P)(c[0])){e.next=2;break}return e.abrupt("return",new l.f({parentfeatureset:c[0],topnum:c[1]}));case 2:if(!(0,s.Y)(c[0])){e.next=4;break}return e.abrupt("return",(0,s.r)(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,(0,s.r)(c[1])));case 4:if(!(0,s.E)(c[0])){e.next=6;break}return e.abrupt("return",(0,s.r)(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,(0,s.r)(c[1])));case 6:throw new s.t(n,s.e.InvalidParameter,t);case 7:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"top",min:2,max:2}),e.functions.first=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,i,l){var c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(l,1,1,n,t),!(0,s.P)(l[0])){e.next=8;break}return e.next=3,l[0].first(r.abortSignal);case 3:if(null===(c=e.sent)){e.next=7;break}return u=s.g.createFromGraphicLikeObject(c.geometry,c.attributes,l[0]),e.abrupt("return",(u._underlyingGraphic=c,u));case 7:return e.abrupt("return",c);case 8:return e.abrupt("return",(0,s.Y)(l[0])?0===l[0].length?null:l[0][0]:(0,s.E)(l[0])?0===l[0].length()?null:l[0].get(0):null);case 9:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"first",min:1,max:1}),e.functions.attachments=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,i,c){var u,o,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(c,1,2,n,t),u={minsize:-1,maxsize:-1,types:null,returnMetadata:!1},!(c.length>1)){e.next=9;break}if(!(c[1]instanceof s.J)){e.next=7;break}c[1].hasField("minsize")&&(u.minsize=(0,s.r)(c[1].field("minsize"))),c[1].hasField("metadata")&&(u.returnMetadata=(0,s.I)(c[1].field("metadata"))),c[1].hasField("maxsize")&&(u.maxsize=(0,s.r)(c[1].field("maxsize"))),c[1].hasField("types")&&(o=(0,s.ak)(c[1].field("types"),!1)).length>0&&(u.types=o),e.next=9;break;case 7:if(null===c[1]){e.next=9;break}throw new s.t(n,s.e.InvalidParameter,t);case 9:if(!(0,s.b)(c[0])){e.next=25;break}if((d=c[0]._layer)instanceof f.default&&(d=(0,l.F)(d,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==d){e.next=16;break}e.t0=[],e.next=24;break;case 16:if(!1!==(0,s.P)(d)){e.next=20;break}e.t1=[],e.next=23;break;case 20:return e.next=22,d.load();case 22:e.t1=d.queryAttachments(c[0].field(d.objectIdField),u.minsize,u.maxsize,u.types,u.returnMetadata);case 23:e.t0=e.t1;case 24:return e.abrupt("return",e.t0);case 25:if(null!==c[0]){e.next=27;break}return e.abrupt("return",[]);case 27:throw new s.t(n,s.e.InvalidParameter,t);case 28:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"attachments",min:1,max:2}),e.functions.featuresetbyrelationshipname=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(r,i,u){var d,p,m,b,y,h,x,v,g,w,k,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(u,2,4,n,t),d=u[0],p=(0,s.K)(u[1]),m=(0,s.L)(u[2],null),b=(0,s.I)((0,s.L)(u[3],!0)),null===m&&(m=["*"]),!1!==(0,s.Y)(m)){e.next=6;break}throw new s.t(n,s.e.InvalidParameter,t);case 6:if(null!==u[0]){e.next=8;break}return e.abrupt("return",null);case 8:if((0,s.b)(u[0])){e.next=10;break}throw new s.t(n,s.e.InvalidParameter,t);case 10:if((y=d._layer)instanceof f.default&&(y=(0,l.F)(y,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==y){e.next=13;break}return e.abrupt("return",null);case 13:if(!1!==(0,s.P)(y)){e.next=15;break}return e.abrupt("return",null);case 15:return e.next=17,y.load();case 17:if(y=e.sent,0!==(h=y.relationshipMetaData().filter((function(e){return e.name===p}))).length){e.next=21;break}return e.abrupt("return",null);case 21:if(!(void 0!==h[0].relationshipTableId&&null!==h[0].relationshipTableId&&h[0].relationshipTableId>-1)){e.next=23;break}return e.abrupt("return",(0,l.k)(y,h[0],d.field(y.objectIdField),y.spatialReference,m,b,n.lrucache,n.interceptor));case 23:if(x=y.serviceUrl()){e.next=26;break}return e.abrupt("return",null);case 26:return x="/"===x.charAt(x.length-1)?x+h[0].relatedTableId.toString():x+"/"+h[0].relatedTableId.toString(),e.next=29,(0,l.N)(x,y.spatialReference,m,b,n.lrucache,n.interceptor);case 29:return v=e.sent,e.next=32,v.load();case 32:if(g=(g=v.relationshipMetaData()).filter((function(e){return e.id===h[0].id})),!1!==d.hasField(h[0].keyField)&&null!==d.field(h[0].keyField)){e.next=41;break}return e.next=36,y.getFeatureByObjectId(d.field(y.objectIdField),[h[0].keyField]);case 36:if(!(w=e.sent)){e.next=40;break}return k=o.WhereClause.create(g[0].keyField+"= @id",v.getFieldsIndex()),e.abrupt("return",(k.parameters={id:w.attributes[h[0].keyField]},v.filter(k)));case 40:return e.abrupt("return",new c.u({parentfeatureset:v}));case 41:return I=o.WhereClause.create(g[0].keyField+"= @id",v.getFieldsIndex()),e.abrupt("return",(I.parameters={id:d.field(h[0].keyField)},v.filter(I)));case 43:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),e.functions.featuresetbyassociation=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,a.Z)().mark((function e(i,c,u){var p,m,b,y,h,x,v,g,w,k,I,F,E,D,A,N,L,S,Z,C,P,T,R,O,W,M,V,j,J,K,Y,H,_,z,G,B,q,U,Q,X,$;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.V)(u,2,3,n,t),p=u[0],m=(0,s.K)((0,s.L)(u[1],"")).toLowerCase(),b=(0,s.w)(u[2])?(0,s.K)(u[2]):null,null!==u[0]){e.next=4;break}return e.abrupt("return",null);case 4:if((0,s.b)(u[0])){e.next=6;break}throw new s.t(n,s.e.InvalidParameter,t);case 6:if((y=p._layer)instanceof f.default&&(y=(0,l.F)(y,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==y){e.next=9;break}return e.abrupt("return",null);case 9:if(!1!==(0,s.P)(y)){e.next=11;break}return e.abrupt("return",null);case 11:return e.next=13,y.load();case 13:return h=y.serviceUrl(),e.next=16,(0,l.C)(h,n.spatialReference);case 16:if(x=e.sent,v=null,g=null,w=!1,null!==b&&""!==b&&void 0!==b){k=(0,r.Z)(x.terminals);try{for(k.s();!(I=k.n()).done;)(F=I.value).terminalName===b&&(g=F.terminalId)}catch(a){k.e(a)}finally{k.f()}null===g&&(w=!0)}E=x.associations.getFieldsIndex(),D=E.get("TOGLOBALID").name,A=E.get("FROMGLOBALID").name,N=E.get("TOTERMINALID").name,L=E.get("FROMTERMINALID").name,S=E.get("FROMNETWORKSOURCEID").name,Z=E.get("TONETWORKSOURCEID").name,C=E.get("ASSOCIATIONTYPE").name,P=E.get("ISCONTENTVISIBLE").name,T=E.get("OBJECTID").name,R=(0,r.Z)(y.fields),e.prev=21,R.s();case 23:if((O=R.n()).done){e.next=30;break}if("global-id"!==(W=O.value).type){e.next=28;break}return v=p.field(W.name),e.abrupt("break",30);case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),R.e(e.t0);case 35:return e.prev=35,R.f(),e.finish(35);case 38:for(H in M=null,V=new l.x(new d.y({name:"percentalong",alias:"percentalong",type:"double"}),o.WhereClause.create("0",x.associations.getFieldsIndex())),j=new l.x(new d.y({name:"side",alias:"side",type:"string"}),o.WhereClause.create("''",x.associations.getFieldsIndex())),J="globalid",K="globalId",Y={},x.lkp)Y[H]=x.lkp[H].sourceId;_=new l.E(new d.y({name:"classname",alias:"classname",type:"string"}),null,Y),z="",e.t1=m,e.next="midspan"===e.t1?46:"junctionedge"===e.t1?50:"connected"===e.t1?54:"container"===e.t1?59:"content"===e.t1?60:"structure"===e.t1?62:"attached"===e.t1?64:66;break;case 46:return z="((".concat(D,"='").concat(v,"') OR ( ").concat(A,"='").concat(v,"')) AND (").concat(C," IN (5))"),_.codefield=o.WhereClause.create("CASE WHEN (".concat(D,"='").concat(v,"') THEN ").concat(S," ELSE ").concat(Z," END"),x.associations.getFieldsIndex()),(G=(0,s.a1)(l.A.findField(x.associations.fields,A))).name=J,G.alias=J,M=new l.x(G,o.WhereClause.create("CASE WHEN (".concat(A,"='").concat(v,"') THEN ").concat(D," ELSE ").concat(A," END"),x.associations.getFieldsIndex())),V=x.unVersion>=4?new l.g(l.A.findField(x.associations.fields,E.get("PERCENTALONG").name)):new l.x(new d.y({name:"percentalong",alias:"percentalong",type:"double"}),o.WhereClause.create("0",x.associations.getFieldsIndex())),e.abrupt("break",67);case 50:return z="((".concat(D,"='").concat(v,"') OR ( ").concat(A,"='").concat(v,"')) AND (").concat(C," IN (4,6))"),_.codefield=o.WhereClause.create("CASE WHEN (".concat(D,"='").concat(v,"') THEN ").concat(S," ELSE ").concat(Z," END"),x.associations.getFieldsIndex()),(B=(0,s.a1)(l.A.findField(x.associations.fields,A))).name=J,B.alias=J,M=new l.x(B,o.WhereClause.create("CASE WHEN (".concat(A,"='").concat(v,"') THEN ").concat(D," ELSE ").concat(A," END"),x.associations.getFieldsIndex())),j=new l.x(new d.y({name:"side",alias:"side",type:"string"}),o.WhereClause.create("CASE WHEN (".concat(C,"=4) THEN 'from' ELSE 'to' END"),x.associations.getFieldsIndex())),e.abrupt("break",67);case 54:return Q="".concat(D,"='@T'"),X="".concat(A,"='@T'"),null!==g&&(Q+=" AND ".concat(N,"=@A"),X+=" AND ".concat(L,"=@A")),z="(("+Q+") OR ("+X+"))",z=(0,s.al)(z,"@T",null!==(q=v)&&void 0!==q?q:""),Q=(0,s.al)(Q,"@T",null!==(U=v)&&void 0!==U?U:""),null!==g&&(Q=(0,s.al)(Q,"@A",g.toString()),z=(0,s.al)(z,"@A",g.toString())),_.codefield=o.WhereClause.create("CASE WHEN "+Q+" THEN ".concat(S," ELSE ").concat(Z," END"),x.associations.getFieldsIndex()),($=(0,s.a1)(l.A.findField(x.associations.fields,A))).name=J,$.alias=J,M=new l.x($,o.WhereClause.create("CASE WHEN "+Q+" THEN ".concat(A," ELSE ").concat(D," END"),x.associations.getFieldsIndex())),e.abrupt("break",67);case 59:z="".concat(D,"='").concat(v,"' AND ").concat(C," = 2"),null!==g&&(z+=" AND ".concat(N," = ")+g.toString()),_.codefield=S,z="( "+z+" )",M=new l.W(l.A.findField(x.associations.fields,A),J,J);case 60:return z="(".concat(A,"='").concat(v,"' AND ").concat(C," = 2)"),null!==g&&(z+=" AND ".concat(L," = ")+g.toString()),_.codefield=Z,z="( "+z+" )",M=new l.W(l.A.findField(x.associations.fields,D),J,J),e.abrupt("break",67);case 62:return z="(".concat(D,"='").concat(v,"' AND ").concat(C," = 3)"),null!==g&&(z+=" AND ".concat(N," = ")+g.toString()),_.codefield=S,z="( "+z+" )",M=new l.W(l.A.findField(x.associations.fields,A),J,K),e.abrupt("break",67);case 64:return z="(".concat(A,"='").concat(v,"' AND ").concat(C," = 3)"),null!==g&&(z+=" AND ".concat(L," = ")+g.toString()),_.codefield=Z,z="( "+z+" )",M=new l.W(l.A.findField(x.associations.fields,D),J,K),e.abrupt("break",67);case 66:throw new s.t(n,s.e.InvalidParameter,t);case 67:return w&&(z="1 <> 1"),e.abrupt("return",new l.A({parentfeatureset:x.associations,adaptedFields:[new l.g(l.A.findField(x.associations.fields,T)),new l.g(l.A.findField(x.associations.fields,P)),M,j,_,V],extraFilter:z?o.WhereClause.create(z,x.associations.getFieldsIndex()):null}));case 69:case"end":return e.stop()}}),e,null,[[21,32,35,38]])})));return function(n,t,a){return e.apply(this,arguments)}}())},e.signatures.push({name:"featuresetbyassociation",min:2,max:6}),e.functions.groupby=function(n,t){return e.standardFunctionAsync(n,t,function(){var l=(0,i.Z)((0,a.Z)().mark((function i(l,u,f){var d,p,b,y,h,x,v,g,w,k,I,F,E,D,A,N,L,S,Z,C,P,T,R,O,W,M,V,j,J,K,Y,H,_,z,G,B,q,U;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((0,s.V)(f,3,3,n,t),(0,s.P)(f[0])){a.next=2;break}throw new s.t(n,s.e.InvalidParameter,t);case 2:return a.next=4,f[0].load();case 4:if(d=a.sent,p=[],b=[],y=!1,h=[],!(0,s.w)(f[1])){a.next=12;break}h.push(f[1]),a.next=23;break;case 12:if(!(f[1]instanceof s.J)){a.next=16;break}h.push(f[1]),a.next=23;break;case 16:if(!(0,s.Y)(f[1])){a.next=20;break}h=f[1],a.next=23;break;case 20:if((0,s.E)(f[1])){a.next=22;break}throw new s.t(n,s.e.InvalidParameter,t);case 22:h=f[1].toArray();case 23:x=(0,r.Z)(h),a.prev=24,x.s();case 26:if((v=x.n()).done){a.next=41;break}if(g=v.value,!(0,s.w)(g)){a.next=33;break}w=o.WhereClause.create((0,s.K)(g),d.getFieldsIndex()),k=!0===(0,c.w)(w)?(0,s.K)(g):"%%%%FIELDNAME",p.push({name:k,expression:w}),"%%%%FIELDNAME"===k&&(y=!0),a.next=39;break;case 33:if(g instanceof s.J){a.next=35;break}throw new s.t(n,s.e.InvalidParameter,t);case 35:if(I=g.hasField("name")?g.field("name"):"%%%%FIELDNAME",F=g.hasField("expression")?g.field("expression"):"","%%%%FIELDNAME"===I&&(y=!0),I){a.next=38;break}throw new s.t(n,s.e.InvalidParameter,t);case 38:p.push({name:I,expression:o.WhereClause.create(F||I,d.getFieldsIndex())});case 39:a.next=26;break;case 41:a.next=46;break;case 43:a.prev=43,a.t0=a.catch(24),x.e(a.t0);case 46:return a.prev=46,x.f(),a.finish(46);case 49:if(h=[],!(0,s.w)(f[2])){a.next=53;break}h.push(f[2]),a.next=64;break;case 53:if(!(0,s.Y)(f[2])){a.next=57;break}h=f[2],a.next=64;break;case 57:if(!(0,s.E)(f[2])){a.next=61;break}h=f[2].toArray(),a.next=64;break;case 61:if(f[2]instanceof s.J){a.next=63;break}throw new s.t(n,s.e.InvalidParameter,t);case 63:h.push(f[2]);case 64:E=(0,r.Z)(h),a.prev=65,E.s();case 67:if((D=E.n()).done){a.next=77;break}if((A=D.value)instanceof s.J){a.next=71;break}throw new s.t(n,s.e.InvalidParameter,t);case 71:if(N=A.hasField("name")?A.field("name"):"",L=A.hasField("statistic")?A.field("statistic"):"",S=A.hasField("expression")?A.field("expression"):"",N&&L&&S){a.next=74;break}throw new s.t(n,s.e.InvalidParameter,t);case 74:b.push({name:N,statistic:L.toLowerCase(),expression:o.WhereClause.create(S,d.getFieldsIndex())});case 75:a.next=67;break;case 77:a.next=82;break;case 79:a.prev=79,a.t1=a.catch(65),E.e(a.t1);case 82:return a.prev=82,E.f(),a.finish(82);case 85:if(y){Z={},C=(0,r.Z)(d.fields);try{for(C.s();!(P=C.n()).done;)T=P.value,Z[T.name.toLowerCase()]=1}catch(i){C.e(i)}finally{C.f()}R=(0,r.Z)(p);try{for(R.s();!(O=R.n()).done;)"%%%%FIELDNAME"!==(W=O.value).name&&(Z[W.name.toLowerCase()]=1)}catch(i){R.e(i)}finally{R.f()}M=(0,r.Z)(b);try{for(M.s();!(V=M.n()).done;)"%%%%FIELDNAME"!==(j=V.value).name&&(Z[j.name.toLowerCase()]=1)}catch(i){M.e(i)}finally{M.f()}J=0,K=(0,r.Z)(p);try{for(K.s();!(Y=K.n()).done;)if("%%%%FIELDNAME"===(H=Y.value).name){for(;1===Z["field_"+J.toString()];)J++;Z["field_"+J.toString()]=1,H.name="FIELD_"+J.toString()}}catch(i){K.e(i)}finally{K.f()}}_=0,z=p;case 87:if(!(_<z.length)){a.next=94;break}return G=z[_],a.next=91,m(G.expression,e,n);case 91:_++,a.next=87;break;case 94:B=0,q=b;case 95:if(!(B<q.length)){a.next=102;break}return U=q[B],a.next=99,m(U.expression,e,n);case 99:B++,a.next=95;break;case 102:return a.abrupt("return",f[0].groupby(p,b));case 103:case"end":return a.stop()}}),i,null,[[24,43,46,49],[65,79,82,85]])})));return function(e,n,t){return l.apply(this,arguments)}}())},e.signatures.push({name:"groupby",min:3,max:3}),e.functions.distinct=function(n,t){return e.standardFunctionAsync(n,t,function(){var l=(0,i.Z)((0,a.Z)().mark((function i(l,u,f){var d,b,y,h,x,v,g,w,k,I,F,E,D,A,N,L,S,Z,C,P,T,R,O,W,M;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(0,s.P)(f[0])){a.next=59;break}return(0,s.V)(f,2,2,n,t),a.next=4,f[0].load();case 4:if(d=a.sent,b=[],y=[],!(0,s.w)(f[1])){a.next=11;break}y.push(f[1]),a.next=22;break;case 11:if(!(f[1]instanceof s.J)){a.next=15;break}y.push(f[1]),a.next=22;break;case 15:if(!(0,s.Y)(f[1])){a.next=19;break}y=f[1],a.next=22;break;case 19:if((0,s.E)(f[1])){a.next=21;break}throw new s.t(n,s.e.InvalidParameter,t);case 21:y=f[1].toArray();case 22:h=!1,x=(0,r.Z)(y),a.prev=24,x.s();case 26:if((v=x.n()).done){a.next=41;break}if(g=v.value,!(0,s.w)(g)){a.next=33;break}w=o.WhereClause.create((0,s.K)(g),d.getFieldsIndex()),k=!0===(0,c.w)(w)?(0,s.K)(g):"%%%%FIELDNAME",b.push({name:k,expression:w}),"%%%%FIELDNAME"===k&&(h=!0),a.next=39;break;case 33:if(g instanceof s.J){a.next=35;break}throw new s.t(n,s.e.InvalidParameter,t);case 35:if(I=g.hasField("name")?g.field("name"):"%%%%FIELDNAME",F=g.hasField("expression")?g.field("expression"):"","%%%%FIELDNAME"===I&&(h=!0),I){a.next=38;break}throw new s.t(n,s.e.InvalidParameter,t);case 38:b.push({name:I,expression:o.WhereClause.create(F||I,d.getFieldsIndex())});case 39:a.next=26;break;case 41:a.next=46;break;case 43:a.prev=43,a.t0=a.catch(24),x.e(a.t0);case 46:return a.prev=46,x.f(),a.finish(46);case 49:if(h){E={},D=(0,r.Z)(d.fields);try{for(D.s();!(A=D.n()).done;)N=A.value,E[N.name.toLowerCase()]=1}catch(i){D.e(i)}finally{D.f()}L=(0,r.Z)(b);try{for(L.s();!(S=L.n()).done;)"%%%%FIELDNAME"!==(Z=S.value).name&&(E[Z.name.toLowerCase()]=1)}catch(i){L.e(i)}finally{L.f()}C=0,P=(0,r.Z)(b);try{for(P.s();!(T=P.n()).done;)if("%%%%FIELDNAME"===(R=T.value).name){for(;1===E["field_"+C.toString()];)C++;E["field_"+C.toString()]=1,R.name="FIELD_"+C.toString()}}catch(i){P.e(i)}finally{P.f()}}O=0,W=b;case 51:if(!(O<W.length)){a.next=58;break}return M=W[O],a.next=55,m(M.expression,e,n);case 55:O++,a.next=51;break;case 58:return a.abrupt("return",f[0].groupby(b,[]));case 59:return a.abrupt("return",p("distinct",0,0,f));case 60:case"end":return a.stop()}}),i,null,[[24,43,46,49]])})));return function(e,n,t){return l.apply(this,arguments)}}())})}}}]);
//# sourceMappingURL=9219.9717f881.chunk.js.map