"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[6546],{86086:function(e,t,r){r.d(t,{d:function(){return d}});var n,a=r(74165),i=r(15861),s=r(15671),o=r(43144),u=r(60136),l=r(29388),c=r(48848),f=r(93661),p=r(20302),h=r(82474),y=r(59984),m=r(21385),b=n=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,s.Z)(this,r),(n=t.call(this,e)).data=null,n.type="cim",n}return(0,o.Z)(r,[{key:"readData",value:function(e,t){return t}},{key:"writeData",value:function(e,t){if(e)for(var r in e)t[r]=e[r]}},{key:"collectRequiredFields",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CIMSymbolReference"!==(null===(n=this.data)||void 0===n?void 0:n.type)){e.next=6;break}if(!(i=this.data.primitiveOverrides)){e.next=6;break}return s=i.map((function(e){var n=e.valueExpressionInfo;return(0,y.S)(t,r,n.expression)})),e.next=6,Promise.all(s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new n({data:(0,f.y)(this.data)})}},{key:"hash",value:function(){return(0,c.a3)(JSON.stringify(this.data)).toString()}}]),r}(m.a);(0,c.e)([(0,c.y)({json:{write:!1}})],b.prototype,"color",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],b.prototype,"data",void 0),(0,c.e)([(0,h.o)("data",["symbol"])],b.prototype,"readData",null),(0,c.e)([(0,h.r)("data",{})],b.prototype,"writeData",null),(0,c.e)([(0,p.r)({CIMSymbolReference:"cim"},{readOnly:!0})],b.prototype,"type",void 0);var d=b=n=(0,c.e)([(0,c.n)("esri.symbols.CIMSymbol")],b)},56546:function(e,t,r){r.r(t),r.d(t,{DictionaryLoader:function(){return k}});var n=r(93433),a=r(1413),i=r(29439),s=r(74165),o=r(37762),u=r(15861),l=r(15671),c=r(43144),f=r(89794),p=r(40558),h=r(48848),y=r(39926),m=r(93661),b=r(59984),d=r(86086),v=(r(48200),r(71802),r(6762),r(74384),r(46817),r(82474),r(40114),r(20302),r(21385),"esri.renderers.support.DictionaryLoader"),g={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},k=function(){function e(t,r,n){(0,l.Z)(this,e),this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new y.e(100),this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=n}return(0,c.Z)(e,[{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"getSymbolAsync",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r){var n,a,i,u,l,c,p,y,b,d,v,g,k,x,_,Z,w,S,M,C,P,I,R,L,N,T,j,q=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:a=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(0,h.j)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(i={},this.fieldMap){u=(0,o.Z)(this._symbolFields);try{for(u.s();!(l=u.n()).done;)c=l.value,(p=this.fieldMap[c])&&null!=t.attributes[p]?(y=""+t.attributes[p],i[c]=y):i[c]=""}catch(s){u.e(s)}finally{u.f()}}if((b=null===(n=a)||void 0===n?void 0:n(i,r))&&"string"==typeof b){e.next=16;break}return e.abrupt("return",null);case 16:if(d=(0,h.a3)(b).toString(),!(v=this._symbolCache.get(d))){e.next=19;break}return e.abrupt("return",(v.catch((function(){q._symbolCache.pop(d)})),v));case 19:g=b.split(";"),k=[],x=[],_=(0,o.Z)(g),e.prev=21,_.s();case 23:if((Z=_.n()).done){e.next=55;break}if(!(w=Z.value)){e.next=53;break}if(!w.includes("po:")){e.next=31;break}3===(S=w.substr(3).split("|")).length&&(M=S[0],C=S[1],P=S[2],"DashTemplate"===C?P=P.split(" ").map((function(e){return Number(e)})):"Color"===C?(I=new f.l(P).toRgba(),P=[I[0],I[1],I[2],255*I[3]]):P=Number(P),x.push({primitiveName:M,propertyName:C,value:P})),e.next=53;break;case 31:if(!w.includes("|")){e.next=52;break}R=(0,o.Z)(w.split("|")),e.prev=33,R.s();case 35:if((L=R.n()).done){e.next=42;break}if(N=L.value,!this._itemNames.has(N)){e.next=40;break}return k.push(N),e.abrupt("break",42);case 40:e.next=35;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(33),R.e(e.t1);case 47:return e.prev=47,R.f(),e.finish(47);case 50:e.next=53;break;case 52:this._itemNames.has(w)&&k.push(w);case 53:e.next=23;break;case 55:e.next=60;break;case 57:e.prev=57,e.t2=e.catch(21),_.e(e.t2);case 60:return e.prev=60,_.f(),e.finish(60);case 63:return T=!(0,m.r)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,j=this._cimPartsToCIMSymbol(k,x,T,r),e.abrupt("return",(this._symbolCache.put(d,j,1),j));case 65:case"end":return e.stop()}}),e,this,[[1,7],[21,57,60,63],[33,44,47,50]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchResources",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,u,l,c,f,y,d,g,k,x,_,Z,w,S,M,C,P=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void h.a.getLogger(v).error("no valid URL!"));case 4:return r=(0,p.U)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:(0,m.r)(t)?t.signal:null}),e.next=7,Promise.all([r,(0,b.i)()]);case 7:if(n=e.sent,u=(0,i.Z)(n,1),l=u[0].data){e.next=12;break}throw this._dictionaryPromise=null,new h.s("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 12:if(c=l.expression,f=l.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+l.cimRefTemplateUrl,this._itemNames=new Set(l.itemsNames),this._symbolFields=f.symbol,y={},this.config)for(g in d=this.config)y[g]=d[g];if(f.configuration){k=(0,o.Z)(f.configuration);try{for(k.s();!(x=k.n()).done;)_=x.value,y.hasOwnProperty(_.name)||(y[_.name]=_.value)}catch(s){k.e(s)}finally{k.f()}}if(Z=[],(0,m.r)(t)&&t.fields&&this.fieldMap){w=(0,o.Z)(this._symbolFields);try{for(M=function(){var e=S.value,r=P.fieldMap[e],n=t.fields.filter((function(e){return e.name===r}));n.length>0&&Z.push((0,a.Z)((0,a.Z)({},n[0]),{},{name:e}))},w.s();!(S=w.n()).done;)M()}catch(s){w.e(s)}finally{w.f()}}return C=(0,b.u)(c,(0,m.r)(t)?t.spatialReference:null,Z,y).then((function(e){var t={scale:0};return function(r,n){if((0,m.t)(e))return null;var a=e.repurposeFeature({geometry:null,attributes:r});return t.scale=(0,m.r)(n)?n.scale:void 0,e.evaluate({$feature:a,$view:t})}})).catch((function(e){return h.a.getLogger(v).error("Creating dictinoary expression failed:",e),null})),e.abrupt("return",(this._dictionaryPromise=C,C));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_cimPartsToCIMSymbol",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r,n,a){var i,u,l,c,f,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=new Array(t.length),u=0;u<t.length;u++)i[u]=this._getSymbolPart(t[u],a);return e.next=4,Promise.all(i);case 4:if(l=e.sent,c=this.fieldMap){f=(0,o.Z)(l);try{for(f.s();!(p=f.n()).done;)x(p.value,c)}catch(s){f.e(s)}finally{f.f()}}return e.abrupt("return",new d.d({data:this._combineSymbolParts(l,r,n)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_getSymbolPart",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return n=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=(0,p.U)(n,(0,a.Z)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:throw e.prev=10,e.t0=e.catch(4),this._ongoingRequests.delete(t),e.t0;case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var i=(0,a.Z)({},e[0]);if(e.length>1){i.symbolLayers=[];var s,u=(0,o.Z)(e);try{for(u.s();!(s=u.n()).done;){var l,c=s.value;(l=i.symbolLayers).unshift.apply(l,(0,n.Z)(c.symbolLayers))}}catch(f){u.e(f)}finally{u.f()}}return r&&(i.callout=g),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}}]),e}();function x(e,t){if(e){var r=e.symbolLayers;if(r)for(var n=r.length;n--;){var a=r[n];a&&!1!==a.enable&&"CIMVectorMarker"===a.type&&_(a,t)}}}function _(e,t){var r=e.markerGraphics;if(r){var n,a=(0,o.Z)(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i){var s=i.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":x(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}}catch(u){a.e(u)}finally{a.f()}}}}}]);
//# sourceMappingURL=6546.f73cb4f8.chunk.js.map