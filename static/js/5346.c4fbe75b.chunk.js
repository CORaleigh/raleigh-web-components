"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5346],{25346:function(t,e,i){i.d(e,{C:function(){return G},M:function(){return S},U:function(){return I},a:function(){return A},b:function(){return y},f:function(){return w},i:function(){return x},l:function(){return d},o:function(){return v},r:function(){return m},s:function(){return g},u:function(){return c},x:function(){return b}});var r,n=i(29439),a=i(15671),s=i(43144),l=i(60136),h=i(29388),o=i(50165),u=i(32335),f=o.s.getLogger("esri.layers.support.PixelBlock"),p=r=function(t){(0,l.Z)(i,t);var e=(0,h.Z)(i);function i(t){var r;return(0,a.Z)(this,i),(r=e.call(this,t)).width=null,r.height=null,r.pixelType="f32",r.validPixelCount=null,r.mask=null,r.maskIsAlpha=!1,r.pixels=null,r.statistics=null,r}return(0,s.Z)(i,[{key:"castPixelType",value:function(t){if(!t)return"f32";var e=t.toLowerCase();return["u1","u2","u4"].includes(e)?e="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(e)||(e="f32"),e}},{key:"getPlaneCount",value:function(){return this.pixels&&this.pixels.length}},{key:"addData",value:function(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new o.a("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(t.statistics||{minValue:null,maxValue:null})}},{key:"getAsRGBA",value:function(){var t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}},{key:"getAsRGBAFloat",value:function(){var t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}},{key:"updateStatistics",value:function(){var t=this;this.statistics=this.pixels.map((function(e){return t._calculateBandStatistics(e,t.mask)}));var e=this.mask,i=0;if(e)for(var r=0;r<e.length;r++)e[r]&&i++;else i=this.width*this.height;this.validPixelCount=i}},{key:"clamp",value:function(t){if(t&&"f64"!==t&&"f32"!==t){var e;switch(t){case"u8":e=[0,255];break;case"u16":e=[0,65535];break;case"u32":e=[0,4294967295];break;case"s8":e=[-128,127];break;case"s16":e=[-32768,32767];break;case"s32":e=[-2147483648,2147483647];break;default:e=[-34e38,34e38]}for(var i,a,s,l=e,h=(0,n.Z)(l,2),o=h[0],u=h[1],f=this.pixels,p=this.width*this.height,c=f.length,x=[],d=0;d<c;d++){s=r.createEmptyBand(t,p),i=f[d];for(var v=0;v<p;v++)a=i[v],s[v]=a>u?u:a<o?o:a;x.push(s)}this.pixels=x,this.pixelType=t}}},{key:"extractBands",value:function(t){var e=this;if((0,o.t)(t)||0===t.length||null==this.pixels||0===this.pixels.length)return this;var i=this.pixels.length,n=t.some((function(t){return t>=e.pixels.length})),a=i===t.length&&!t.some((function(t,e){return t!==e}));return n||a?this:new r({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:t.map((function(t){return e.pixels[t]})),statistics:this.statistics&&t.map((function(t){return e.statistics[t]}))})}},{key:"clone",value:function(){var t,e=new r({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0));var i=r.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];var n=this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=n?this.pixels[t].slice(0,this.pixels[t].length):new i(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=(0,o.m)(this.statistics[t]);return e}},{key:"_fillFrom8Bit",value:function(t){var e=this.mask,i=this.maskIsAlpha,r=this.pixels;if(t&&r&&r.length){var n,a,s,l;n=a=s=r[0],r.length>=3?(a=r[1],s=r[2]):2===r.length&&(a=r[1]);var h=new Uint32Array(t),o=this.width*this.height;if(n.length===o)if(e&&e.length===o)if(i)for(l=0;l<o;l++)e[l]&&(h[l]=e[l]<<24|s[l]<<16|a[l]<<8|n[l]);else for(l=0;l<o;l++)e[l]&&(h[l]=255<<24|s[l]<<16|a[l]<<8|n[l]);else for(l=0;l<o;l++)h[l]=255<<24|s[l]<<16|a[l]<<8|n[l];else f.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else f.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFromNon8Bit",value:function(t){var e=this.pixels,i=this.mask,r=this.statistics;if(t&&e&&e.length){var n=this.pixelType,a=1,s=0,l=1;if(r&&r.length>0)s=r.map((function(t){return t.minValue})).reduce((function(t,e){return Math.min(t,e)})),l=r.map((function(t){return t.maxValue-t.minValue})).reduce((function(t,e){return Math.max(t,e)})),a=255/l;else{var h=255;"s8"===n?(s=-128,h=127):"u16"===n?h=65535:"s16"===n?(s=-32768,h=32767):"u32"===n?h=4294967295:"s32"===n?(s=-2147483648,h=2147483647):"f32"===n?(s=-34e38,h=34e38):"f64"===n&&(s=-Number.MAX_VALUE,h=Number.MAX_VALUE),a=255/(h-s)}var o,u,p,c,x,d=new Uint32Array(t),v=this.width*this.height;if((o=u=p=e[0]).length!==v)return f.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(e.length>=2)if(u=e[1],e.length>=3&&(p=e[2]),i&&i.length===v)for(c=0;c<v;c++)i[c]&&(d[c]=255<<24|(p[c]-s)*a<<16|(u[c]-s)*a<<8|(o[c]-s)*a);else for(c=0;c<v;c++)d[c]=255<<24|(p[c]-s)*a<<16|(u[c]-s)*a<<8|(o[c]-s)*a;else if(i&&i.length===v)for(c=0;c<v;c++)x=(o[c]-s)*a,i[c]&&(d[c]=255<<24|x<<16|x<<8|x);else for(c=0;c<v;c++)x=(o[c]-s)*a,d[c]=255<<24|x<<16|x<<8|x}else f.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFrom32Bit",value:function(t){var e,i,r,n,a=this.pixels,s=this.mask;if(!t||!a||!a.length)return f.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");e=i=r=a[0],a.length>=3?(i=a[1],r=a[2]):2===a.length&&(i=a[1]);var l=this.width*this.height;if(e.length!==l)return f.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var h=0;if(s&&s.length===l)for(n=0;n<l;n++)t[h++]=e[n],t[h++]=i[n],t[h++]=r[n],t[h++]=1&s[n];else for(n=0;n<l;n++)t[h++]=e[n],t[h++]=i[n],t[h++]=r[n],t[h++]=1}},{key:"_calculateBandStatistics",value:function(t,e){var i,r=1/0,n=-1/0,a=t.length,s=0;if(e)for(i=0;i<a;i++)e[i]&&(r=(s=t[i])<r?s:r,n=s>n?s:n);else for(i=0;i<a;i++)r=(s=t[i])<r?s:r,n=s>n?s:n;return{minValue:r,maxValue:n}}}],[{key:"createEmptyBand",value:function(t,e){return new(r.getPixelArrayConstructor(t))(e)}},{key:"getPixelArrayConstructor",value:function(t){var e;switch(t){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":e=Float32Array;break;case"f64":e=Float64Array}return e}}]),i}(u.l);(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"width",void 0),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"height",void 0),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"pixelType",void 0),(0,o.e)([(0,o.H)("pixelType")],p.prototype,"castPixelType",null),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"validPixelCount",void 0),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"mask",void 0),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"maskIsAlpha",void 0),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"pixels",void 0),(0,o.e)([(0,o.d)({json:{write:!0}})],p.prototype,"statistics",void 0);var c=p=r=(0,o.e)([(0,o.n)("esri.layers.support.PixelBlock")],p);function x(t){return(0,o.r)(t)&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0}function d(t,e){if(null===e||void 0===e||!e.length||!x(t))return t;var i=t.pixels.length;return e&&e.some((function(t){return t>=i}))||1===i&&1===e.length&&0===e[0]?t:i!==e.length||e.some((function(t,e){return t!==e}))?new c({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:e.map((function(e){return t.pixels[e]})),statistics:t.statistics&&e.map((function(e){return t.statistics[e]}))}):t}function v(t){if(t){var e=t.colormap;if(e&&0!==e.length){var i=e.sort((function(t,e){return t[0]-e[0]})),r=0;i[0][0]<0&&(r=i[0][0]);var n,a=Math.max(256,i[i.length-1][0]-r+1),s=new Uint8Array(4*a),l=[],h=0,o=0,u=5===i[0].length;if(a>65536)return i.forEach((function(t){l[t[0]-r]=u?t.slice(1):t.slice(1).concat([255])})),{indexed2DColormap:l,offset:r,alphaSpecified:u};if(t.fillUnspecified)for(h=(n=i[o])[0]-r;h<a;h++)s[4*h]=n[1],s[4*h+1]=n[2],s[4*h+2]=n[3],s[4*h+3]=u?n[4]:255,h===n[0]-r&&(n=o===i.length-1?n:i[++o]);else for(h=0;h<i.length;h++)s[o=4*((n=i[h])[0]-r)]=n[1],s[o+1]=n[2],s[o+2]=n[3],s[o+3]=u?n[4]:255;return{indexedColormap:s,offset:r,alphaSpecified:u}}}}function m(t,e){if(!x(t))return t;if(!e&&(e.indexedColormap||e.indexed2DColormap))return t;var i=t.clone(),r=i.pixels,n=i.mask,a=i.width*i.height;if(1!==r.length)return t;var s,l=e.indexedColormap,h=e.indexed2DColormap,o=e.offset,u=e.alphaSpecified,f=l.length-1,p=0,c=r[0],d=new Uint8Array(c.length),v=new Uint8Array(c.length),m=new Uint8Array(c.length),g=0;if(l)if(n)for(p=0;p<a;p++)n[p]&&((g=4*(c[p]-o))<o||g>f?n[p]=0:(d[p]=l[g],v[p]=l[g+1],m[p]=l[g+2],n[p]=l[g+3]));else{for(n=new Uint8Array(a),p=0;p<a;p++)(g=4*(c[p]-o))<o||g>f?n[p]=0:(d[p]=l[g],v[p]=l[g+1],m[p]=l[g+2],n[p]=l[g+3]);i.mask=n}else if(n)for(p=0;p<a;p++)n[p]&&(s=h[c[p]],d[p]=s[0],v[p]=s[1],m[p]=s[2],n[p]=s[3]);else{for(n=new Uint8Array(a),p=0;p<a;p++)s=h[c[p]],d[p]=s[0],v[p]=s[1],m[p]=s[2],n[p]=s[3];i.mask=n}return i.pixels=[d,v,m],i.statistics=null,i.pixelType="u8",i.maskIsAlpha=u,i}function g(t,e){if(!x(t))return null;var i,r,n=t.pixels,a=t.mask,s=t.width*t.height,l=n.length,h=e.lut,o=e.offset;h&&1===h[0].length&&(h=n.map((function(){return h})));var u,f,p,d=[];if(o)if(null==a)for(i=0;i<l;i++){for(u=n[i],f=h[i],p=new Uint8Array(s),r=0;r<s;r++)p[r]=f[u[r]-o];d.push(p)}else for(i=0;i<l;i++){for(u=n[i],f=h[i],p=new Uint8Array(s),r=0;r<s;r++)a[r]&&(p[r]=f[u[r]-o]);d.push(p)}else if(null==a)for(i=0;i<l;i++){for(u=n[i],f=h[i],p=new Uint8Array(s),r=0;r<s;r++)p[r]=f[u[r]];d.push(p)}else for(i=0;i<l;i++){for(u=n[i],f=h[i],p=new Uint8Array(s),r=0;r<s;r++)a[r]&&(p[r]=f[u[r]]);d.push(p)}var v=new c({width:t.width,height:t.height,pixels:d,mask:a,pixelType:"u8"});return v.updateStatistics(),v}function y(t,e){if(!x(t))return null;var i,r,n,a,s,l,h=t.clone(),o=h.pixels,u=h.width*h.height,f=e.length,p=Math.floor(f/2),c=e[Math.floor(p)],d=o[0],v=!1,m=new Uint8Array(u),g=new Uint8Array(u),y=new Uint8Array(u),w=h.mask,k=4===e[0].mappedColor.length;for(w||((w=new Uint8Array(u)).fill(k?255:1),h.mask=w),s=0;s<u;s++)if(w[s]){for(i=d[s],v=!1,l=p,r=c,n=0,a=f-1;a-n>1;){if(i===r.value){v=!0;break}i>r.value?n=l:a=l,l=Math.floor((n+a)/2),r=e[Math.floor(l)]}v||(i===e[n].value?(r=e[n],v=!0):i===e[a].value?(r=e[a],v=!0):i<e[n].value?(v=!1,r=null):i>e[n].value&&(i<e[a].value?(r=e[n],v=!0):a===f-1?(v=!1,r=null):(r=e[a],v=!0))),v?(m[s]=r.mappedColor[0],g[s]=r.mappedColor[1],y[s]=r.mappedColor[2],w[s]=r.mappedColor[3]):m[s]=g[s]=y[s]=w[s]=0}return h.pixels=[m,g,y],h.mask=w,h.pixelType="u8",h.maskIsAlpha=k,h}function w(t,e){if(!t||0===t.length)return null;var i=t.find((function(t){return t.pixelBlock}));if(!i||(0,o.t)(i.pixelBlock))return null;var r=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,n=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,a=.01*Math.min(r,n),s=t.sort((function(t,e){return Math.abs(t.extent.ymax-e.extent.ymax)>a?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>a?t.extent.xmin-e.extent.xmin:0})),l=Math.min.apply(null,s.map((function(t){return t.extent.xmin}))),h=Math.min.apply(null,s.map((function(t){return t.extent.ymin}))),u=Math.max.apply(null,s.map((function(t){return t.extent.xmax}))),f=Math.max.apply(null,s.map((function(t){return t.extent.ymax}))),p={x:Math.round((e.xmin-l)/r),y:Math.round((f-e.ymax)/n)},c={width:Math.round((u-l)/r),height:Math.round((f-h)/n)},x={width:Math.round((e.xmax-e.xmin)/r),height:Math.round((e.ymax-e.ymin)/n)};return Math.round(c.width/i.pixelBlock.width)*Math.round(c.height/i.pixelBlock.height)!==s.length||p.x<0||p.y<0||c.width<x.width||c.height<x.height?null:{extent:e,pixelBlock:A(s.map((function(t){return t.pixelBlock})),c,{clipOffset:p,clipSize:x})}}function k(t,e,i,r,n,a){var s=i.block,l=s.width,h=s.height,o=i.offset,u=o.x,f=o.y,p=i.mosaic,c=p.width,x=function(t,e,i,r,n,a,s,l){return{xmin:n<=i*t?0:n<i*t+t?n-i*t:t,ymin:a<=r*e?0:a<r*e+e?a-r*e:e,xmax:n+s<=i*t?0:n+s<i*t+t?n+s-i*t:t,ymax:a+l<=r*e?0:a+l<r*e+e?a+l-r*e:e}}(l,h,r,n,u,f,c,p.height),d=0,v=0;if(a){var m=a.hasGCSSShiftTransform?360:a.halfWorldWidth,g=l*a.resolutionX,y=a.startX+r*g;y<m&&y+g>m?v=a.rightPadding:y>=m&&(d=a.leftMargin-a.rightPadding,v=0)}if(x.xmax-=v,"number"!=typeof e)for(var w=x.ymin;w<x.ymax;w++)for(var k=(n*h+w-f)*c+(r*l-u)+d,A=w*l,M=x.xmin;M<x.xmax;M++)t[k+M]=e[A+M];else for(var b=x.ymin;b<x.ymax;b++)for(var U=(n*h+b-f)*c+(r*l-u)+d,B=x.xmin;B<x.xmax;B++)t[U+B]=e}function A(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.clipOffset,n=i.clipSize,a=i.alignmentInfo,s=i.blockWidths;if(s)return M(t,e,{blockWidths:s});var l=t.find((function(t){return x(t)}));if((0,o.t)(l))return null;for(var h,u,f=n?n.width:e.width,p=n?n.height:e.height,d=l.width,v=l.height,m=e.width/d,g=e.height/v,y={offset:r||{x:0,y:0},mosaic:n||e,block:{width:d,height:v}},w=l.pixelType,A=c.getPixelArrayConstructor(w),b=l.pixels.length,U=[],B=0;B<b;B++){h=new A(f*p);for(var T=0;T<g;T++)for(var C=0;C<m;C++){var P=t[T*m+C];x(P)&&k(h,P.pixels[B],y,C,T,a)}U.push(h)}if(t.some((function(t){return(0,o.t)(t)||t.mask&&t.mask.length>0}))){u=new Uint8Array(f*p);for(var _=0;_<g;_++)for(var S=0;S<m;S++){var F=t[_*m+S],I=(0,o.r)(F)?F.mask:null;k(u,I||(F?1:0),y,S,_,a)}}var G=new c({width:f,height:p,pixels:U,pixelType:w,mask:u});return G.updateStatistics(),G}function M(t,e,i){var r=t.find((function(t){return(0,o.r)(t)}));if((0,o.t)(r))return null;var n=t.some((function(t){return!(0,o.r)(t)||!!t.mask})),a=e.width,s=e.height,l=n?new Uint8Array(a*s):null,h=i.blockWidths,u=[],f=r.getPlaneCount(),p=c.getPixelArrayConstructor(r.pixelType);if(n)for(var d=0,v=0;d<t.length;v+=h[d],d++){var m=t[d];if(x(m))for(var g=m.mask,y=0;y<s;y++)for(var w=0;w<h[d];w++)l[y*a+w+v]=null==g?255:g[y*m.width+w]}for(var k=0;k<f;k++){for(var A=new p(a*s),M=0,b=0;M<t.length;b+=h[M],M++){var U=t[M];if(x(U)){var B=U.pixels[k];if(null!=B)for(var T=0;T<s;T++)for(var C=0;C<h[M];C++)A[T*a+C+b]=B[T*U.width+C]}}u.push(A)}var P=new c({width:a,height:s,mask:l,pixels:u,pixelType:r.pixelType});return P.updateStatistics(),P}function b(t,e,i){if(!x(t))return null;var r=t.width,n=t.height,a=e.x,s=e.y,l=i.width+a,h=i.height+s;if(a<0||s<0||l>r||h>n)return t;if(0===a&&0===s&&l===r&&h===n)return t;t.mask||(t.mask=new Uint8Array(r*n));for(var o=t.mask,u=0;u<n;u++)for(var f=u*r,p=0;p<r;p++)o[f+p]=u<s||u>=h||p<a||p>=l?0:1;return t.updateStatistics(),t}function U(t){if(!x(t))return null;for(var e=t.clone(),i=t.width,r=t.height,n=t.pixels,a=t.mask,s=n[0],l=e.pixels[0],h=2;h<r-1;h++){for(var o=new Map,u=h-2;u<h+2;u++)for(var f=0;f<4;f++){var p=u*i+f;C(o,s[p],a?a[p]:1)}l[h*i]=B(o),l[h*i+1]=l[h*i+2]=l[h*i];for(var c=3;c<i-1;c++){var d=(h-2)*i+c+1;C(o,s[d],a?a[d]:1),C(o,s[d=(h-1)*i+c+1],a?a[d]:1),C(o,s[d=h*i+c+1],a?a[d]:1),C(o,s[d=(h+1)*i+c+1],a?a[d]:1),T(o,s[d=(h-2)*i+c-3],a?a[d]:1),T(o,s[d=(h-1)*i+c-3],a?a[d]:1),T(o,s[d=h*i+c-3],a?a[d]:1),T(o,s[d=(h+1)*i+c-3],a?a[d]:1),l[h*i+c]=B(o)}l[h*i+c+1]=l[h*i+c]}for(var v=0;v<i;v++)l[v]=l[i+v]=l[2*i+v],l[(r-1)*i+v]=l[(r-2)*i+v];return e.updateStatistics(),e}function B(t){if(0===t.size)return 0;for(var e=0,i=-1,r=0,n=t.keys(),a=n.next();!a.done;)(r=t.get(a.value))>e&&(i=a.value,e=r),a=n.next();return i}function T(t,e,i){if(0!==i){var r=t.get(e);1===r?t.delete(e):t.set(e,r-1)}}function C(t,e,i){0!==i&&t.set(e,t.has(e)?t.get(e)+1:1)}function P(t,e,i){var r=e.x,n=e.y,a=i.width,s=i.height;if(0===r&&0===n&&s===t.height&&a===t.width)return t;var l=t.width,h=t.height,o=Math.max(0,n),u=Math.max(0,r),f=Math.min(r+a,l),p=Math.min(n+s,h);if(f<0||p<0||!x(t))return null;r=Math.max(0,-r),n=Math.max(0,-n);for(var d=t.pixels,v=t.mask,m=a*s,g=d.length,y=[],w=0;w<g;w++){for(var k=d[w],A=c.createEmptyBand(t.pixelType,m),M=o;M<p;M++)for(var b=M*l,U=(M+n-o)*a+r,B=u;B<f;B++)A[U++]=k[b+B];y.push(A)}for(var T=new Uint8Array(m),C=o;C<p;C++)for(var P=C*l,_=(C+n-o)*a+r,S=u;S<f;S++)T[_++]=v?v[P+S]:1;var F=new c({width:i.width,height:i.height,pixelType:t.pixelType,pixels:y,mask:T});return F.updateStatistics(),F}function _(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!x(t))return null;for(var i=t.pixels,r=t.width,n=t.height,a=t.mask,s=t.pixelType,l=[],h=Math.round(r/2),o=Math.round(n/2),u=n-1,f=r-1,p=0;p<i.length;p++){for(var d=i[p],v=c.createEmptyBand(s,h*o),m=0,g=0;g<n;g+=2)for(var y=0;y<r;y+=2){var w=d[g*r+y];if(e){var k=y===f?w:d[g*r+y+1],A=g===u?w:d[g*r+y+r],M=y===f?A:g===u?k:d[g*r+y+r+1];v[m++]=(w+k+A+M)/4}else v[m++]=w}l.push(v)}var b=null;if(a){b=new Uint8Array(h*o);for(var U=0,B=0;B<n;B+=2)for(var T=0;T<r;T+=2){var C=a[B*r+T];if(e){var P=T===f?C:a[B*r+T+1],_=B===u?C:a[B*r+T+r],S=T===f?_:B===u?P:a[B*r+T+r+1];b[U++]=C*P*_*S?1:0}else b[U++]=C}}return new c({width:h,height:o,pixelType:s,pixels:l,mask:b})}function S(t,e,i){if(!x(t))return null;for(var r=e.width,n=e.height,a=t.width,s=t.height,l=new Map,h={x:0,y:0},o=null==i?1:1+i,u=t,f=0;f<o;f++){for(var p=Math.ceil(a/r),c=Math.ceil(s/n),d=0;d<c;d++){h.y=d*n;for(var v=0;v<p;v++){h.x=v*r;var m=P(u,h,e);l.set("".concat(f,"/").concat(d,"/").concat(v),m)}}f<o-1&&(u=_(u)),a=Math.round(a/2),s=Math.round(s/2)}return l}function F(t,e,i,r){for(var n,a,s,l,h,o,u,f,p,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,x=t.width,d=t.height,v=e.width,m=e.height,g=r.cols,y=r.rows,w=Math.ceil(v/g-.1/g),k=Math.ceil(m/y-.1/y),A=w*g,M=A*k*y,b=new Float32Array(M),U=new Float32Array(M),B=new Uint32Array(M),T=new Uint32Array(M),C=0,P=0;P<k;P++)for(var _=0;_<w;_++){a=i[n=12*(P*w+_)],s=i[n+1],l=i[n+2],h=i[n+3],o=i[n+4],u=i[n+5];for(var S=0;S<y;S++){C=(P*y+S)*A+_*g,p=(S+.5)/y;for(var F=0;F<S;F++)f=(F+.5)/g,b[C+F]=(a*f+s*p+l)*x-c,U[C+F]=(h*f+o*p+u)*d-c,B[C+F]=Math.round(b[C+F]),T[C+F]=Math.round(U[C+F])}a=i[n+=6],s=i[n+1],l=i[n+2],h=i[n+3],o=i[n+4],u=i[n+5];for(var I=0;I<y;I++){C=(P*y+I)*A+_*g,p=(I+.5)/y;for(var G=I;G<g;G++)f=(G+.5)/g,b[C+G]=(a*f+s*p+l)*x-c,U[C+G]=(h*f+o*p+u)*d-c,B[C+G]=Math.round(b[C+G]),T[C+G]=Math.round(U[C+G])}}return{offsets_x:b,offsets_y:U,offsets_xi:B,offsets_yi:T,gridWidth:A}}function I(t,e){for(var i=e.coefficients,r=e.spacing,n=F(t,t,i,{rows:r[0],cols:r[1]},.5),a=n.offsets_x,s=n.offsets_y,l=n.gridWidth,h=t.width,o=t.height,u=new Float32Array(h*o),f=180/Math.PI,p=0;p<o;p++)for(var c=0;c<h;c++){var x=p*l+c,d=0===p?x:x-l,v=p===o-1?x:x+l,m=a[d]-a[v],g=s[v]-s[d];if(isNaN(m)||isNaN(g))u[p*h+c]=90;else{var y=Math.atan2(g,m)*f;y=(360+y)%360,u[p*h+c]=y}}return u}function G(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nearest";if(!x(t))return null;"majority"===n&&(t=U(t));for(var a=t,s=a.pixels,l=a.mask,h=a.pixelType,o=t.width,u=t.height,f=c.getPixelArrayConstructor(h),p=s.length,d=e.width,v=e.height,m=!1,g=0;g<i.length;g+=3)-1===i[g]&&-1===i[g+1]&&-1===i[g+2]&&(m=!0);var y,w,k=F({width:o,height:u},e,i,r,"majority"===n?0:.5),A=k.offsets_x,M=k.offsets_y,b=k.offsets_xi,B=k.offsets_yi,T=k.gridWidth,C=function(t,e,i){for(var r=t instanceof Float32Array||t instanceof Float64Array?0:.5,n=0;n<v;n++){y=n*T;for(var a=0;a<d;a++){if(A[y]<0||M[y]<0)t[n*d+a]=0;else if(i)t[n*d+a]=e[b[y]+B[y]*o];else{var s=Math.floor(A[y]),h=Math.floor(M[y]),u=Math.ceil(A[y]),f=Math.ceil(M[y]),p=A[y]-s,c=M[y]-h;if(!l||l[s+h*o]&&l[s+h*o]&&l[s+f*o]&&l[u+f*o]){var x=(1-p)*e[s+h*o]+p*e[u+h*o],m=(1-p)*e[s+f*o]+p*e[u+f*o];t[n*d+a]=(1-c)*x+c*m+r}else t[n*d+a]=e[b[y]+B[y]*o]}y++}}},P=[];for(g=0;g<p;g++)C(w=new f(d*v),s[g],"nearest"===n||"majority"===n),P.push(w);var _=new c({width:d,height:v,pixelType:h,pixels:P});if(l)_.mask=new Uint8Array(d*v),C(_.mask,l,!0);else if(m){_.mask=new Uint8Array(d*v);for(var S=0;S<d*v;S++)_.mask[S]=A[S]<0||M[S]<0?0:1}return _.updateStatistics(),_}}}]);
//# sourceMappingURL=5346.c4fbe75b.chunk.js.map