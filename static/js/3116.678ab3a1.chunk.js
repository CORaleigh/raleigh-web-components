"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[3116],{93116:function(e,t,r){r.r(t),r.d(t,{P:function(){return V},d:function(){return I},j:function(){return H},m:function(){return G},p:function(){return F}});var o,n=r(74165),l=r(15861),u=r(37762),a=r(1413),i=r(15671),s=r(43144),p=r(97326),y=r(60136),d=r(29388),c=r(48848),v=r(93661),h=r(40558),f=r(40114),m=r(65094),g=r(82474),S=r(46817),_="not-loaded",O="loading",P="failed",k="loaded",b=function(e){var t=function(e){(0,y.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n)))._loadController=null,e.loadError=null,e.loadStatus="not-loaded",e._set("loadWarnings",[]),e.addResolvingPromise(new Promise((function(t){var r=e.load.bind((0,p.Z)(e));e.load=function(o){var n=new Promise((function(t,r){var n=(0,c.o)(o,r);e.destroyed&&r(new c.s("load:instance-destroyed","Instance of '".concat(e.declaredClass||e.constructor.name,"' is already destroyed"),{instance:(0,p.Z)(e)})),e._promiseProps.when(t,r).finally((function(){n&&n.remove()}))}));if(e.loadStatus===_){e._set("loadStatus",O);var l=e._loadController=new AbortController;r({signal:l.signal}),(0,c.v)(l.signal,(function(){e._promiseProps.abort()}))}return t(),n}}))),e.when((function(){e._set("loadStatus",k),e._loadController=null}),(function(t){e._set("loadStatus",P),e._set("loadError",t),e._loadController=null})),e}return(0,s.Z)(r,[{key:"loaded",get:function(){return this.loadStatus===k}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}},{key:"load",value:function(){return null}},{key:"cancelLoad",value:function(){var e;return this.isFulfilled()||(this._set("loadError",new c.s("load:cancelled","Cancelled")),null!==(e=this._loadController)&&void 0!==e&&e.abort()),this}}]),r}(e);return(0,c.e)([(0,c.y)({readOnly:!0})],t.prototype,"loaded",null),(0,c.e)([(0,c.y)({readOnly:!0})],t.prototype,"loadError",void 0),(0,c.e)([(0,c.y)({clonable:!1})],t.prototype,"loadStatus",void 0),(0,c.e)([(0,c.y)({type:[c.l],readOnly:!0})],t.prototype,"loadWarnings",null),t=(0,c.e)([(0,c.n)("esri.core.Loadable")],t)},w=function(e){(0,y.Z)(r,e);var t=(0,d.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}(b(m._));w=(0,c.e)([(0,c.n)("esri.core.Loadable")],w),(o=w||(w={})).LoadableMixin=b,o.isLoadable=function(e){return!(!e||!e.load)};var q,G=w,U=new h.s({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"}),C=q=function(e){(0,y.Z)(r,e);var t=(0,d.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).categories=null,o.disableExtraQuery=!1,o.extent=null,o.filter=null,o.num=10,o.query=null,o.sortField=null,o.start=1,o}return(0,s.Z)(r,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}},{key:"clone",value:function(){return new q({categories:this.categories?(0,v.y)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}},{key:"toRequestOptions",value:function(e,t){var r,o;if(this.categories&&(r=this.categories.map((function(e){return Array.isArray(e)?JSON.stringify(e):e}))),this.extent){var n=(0,g.M)(this.extent,g.k.WGS84);(0,v.r)(n)&&(o="".concat(n.xmin,",").concat(n.ymin,",").concat(n.xmax,",").concat(n.ymax))}var l=this.query;!this.disableExtraQuery&&e.extraQuery&&(l="("+l+")"+e.extraQuery);var u={categories:r,bbox:o,q:l,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(u.sortField=this.sortField.split(",").map((function(e){return U.toJSON(e.trim())})).join(","),u.sortOrder=this.sortOrder),{query:(0,a.Z)((0,a.Z)({},t),u)}}}]),r}(c.m);(0,c.e)([(0,c.y)()],C.prototype,"categories",void 0),(0,c.e)([(0,c.y)()],C.prototype,"disableExtraQuery",void 0),(0,c.e)([(0,c.y)({type:S.w})],C.prototype,"extent",void 0),(0,c.e)([(0,c.y)()],C.prototype,"filter",void 0),(0,c.e)([(0,c.y)()],C.prototype,"num",void 0),(0,c.e)([(0,c.y)()],C.prototype,"query",void 0),(0,c.e)([(0,c.y)()],C.prototype,"sortField",void 0),(0,c.e)([(0,c.y)()],C.prototype,"sortOrder",null),(0,c.e)([(0,c.y)()],C.prototype,"start",void 0);var I=C=q=(0,c.e)([(0,c.n)("esri.portal.PortalQueryParams")],C),Q=function(e){(0,y.Z)(r,e);var t=(0,d.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).nextQueryParams=null,o.queryParams=null,o.results=null,o.total=null,o}return(0,s.Z)(r)}(c.m);(0,c.e)([(0,c.y)()],Q.prototype,"nextQueryParams",void 0),(0,c.e)([(0,c.y)()],Q.prototype,"queryParams",void 0),(0,c.e)([(0,c.y)()],Q.prototype,"results",void 0),(0,c.e)([(0,c.y)()],Q.prototype,"total",void 0);var Z=Q=(0,c.e)([(0,c.n)("esri.portal.PortalQueryResult")],Q),x=function(e){(0,y.Z)(r,e);var t=(0,d.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).created=null,o.id=null,o.portal=null,o.title=null,o.username=null,o}return(0,s.Z)(r,[{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username,"/").concat(this.id):null}},{key:"toJSON",value:function(){throw new c.s("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}}]),r}(f.l);(0,c.e)([(0,c.y)({type:Date})],x.prototype,"created",void 0),(0,c.e)([(0,c.y)()],x.prototype,"id",void 0),(0,c.e)([(0,c.y)()],x.prototype,"portal",void 0),(0,c.e)([(0,c.y)()],x.prototype,"title",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],x.prototype,"url",null),(0,c.e)([(0,c.y)()],x.prototype,"username",void 0);var D=x=(0,c.e)([(0,c.n)("esri.portal.PortalFolder")],x),N=function(e){(0,y.Z)(r,e);var t=(0,d.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).access=null,o.created=null,o.description=null,o.id=null,o.isInvitationOnly=!1,o.modified=null,o.owner=null,o.portal=null,o.snippet=null,o.sortField=null,o.sortOrder=null,o.tags=null,o.title=null,o}return(0,s.Z)(r,[{key:"thumbnailUrl",get:function(){var e,t=this.url,r=this.thumbnail;return t&&r&&this.portal?null===(e=this.portal)||void 0===e?void 0:e._normalizeUrl("".concat(t,"/info/").concat(r,"?f=json")):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}},{key:"fetchCategorySchema",value:function(e){var t=this;return(0,v.i)(this.portal)._request(this.url+"/categorySchema",e).then((function(r){var o=r.categorySchema||[];return o.some((function(e){return"contentCategorySetsGroupQuery.LivingAtlas"===e.source}))?t._fetchCategorySchemaSet("LivingAtlas",e):o}))}},{key:"fetchMembers",value:function(e){return(0,v.i)(this.portal)._request(this.url+"/users",e)}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"toJSON",value:function(){throw new c.s("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}},{key:"queryItems",value:function(e,t){var r=(0,c.b)(I,e),o=(0,v.i)(this.portal);return parseFloat(o.currentVersion)>5?(r=r||new I,o._queryPortal("/content/groups/".concat(this.id,"/search"),r,"PortalItem",t)):((r=r?r.clone():new I).query="group:"+this.id+(r.query?" "+r.query:""),o.queryItems(r,t))}},{key:"_fetchCategorySchemaSet",value:function(e,t){var r=(0,v.i)(this.portal);return r._fetchSelf(r.authMode,!0,t).then((function(e){var o=e.contentCategorySetsGroupQuery;if(o){var n=new I;return n.disableExtraQuery=!0,n.num=1,n.query=o,r.queryGroups(n,t)}throw new c.s("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((function(r){if(r.total){var o=r.results[0],n=new I;return n.num=1,n.query='typekeywords:"'.concat(e,'"'),o.queryItems(n,t)}throw new c.s("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((function(e){return e.total?e.results[0].fetchData("json",t).then((function(e){var t=e&&e.categorySchema;return t&&t.length?t:[]})):[]}))}}]),r}(f.l);(0,c.e)([(0,c.y)()],N.prototype,"access",void 0),(0,c.e)([(0,c.y)({type:Date})],N.prototype,"created",void 0),(0,c.e)([(0,c.y)()],N.prototype,"description",void 0),(0,c.e)([(0,c.y)()],N.prototype,"id",void 0),(0,c.e)([(0,c.y)()],N.prototype,"isInvitationOnly",void 0),(0,c.e)([(0,c.y)({type:Date})],N.prototype,"modified",void 0),(0,c.e)([(0,c.y)()],N.prototype,"owner",void 0),(0,c.e)([(0,c.y)()],N.prototype,"portal",void 0),(0,c.e)([(0,c.y)()],N.prototype,"snippet",void 0),(0,c.e)([(0,c.y)()],N.prototype,"sortField",void 0),(0,c.e)([(0,c.y)()],N.prototype,"sortOrder",void 0),(0,c.e)([(0,c.y)()],N.prototype,"tags",void 0),(0,c.e)([(0,c.y)()],N.prototype,"thumbnail",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],N.prototype,"thumbnailUrl",null),(0,c.e)([(0,c.y)()],N.prototype,"title",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],N.prototype,"url",null);var B,M=N=(0,c.e)([(0,c.n)("esri.portal.PortalGroup")],N),A=Object.freeze({__proto__:null,default:M}),E=B=function(e){(0,y.Z)(o,e);var t=(0,d.Z)(o);function o(){var e;(0,i.Z)(this,o);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).access=null,e.created=null,e.culture=null,e.description=null,e.email=null,e.fullName=null,e.modified=null,e.orgId=null,e.portal=null,e.preferredView=null,e.privileges=null,e.region=null,e.role=null,e.roleId=null,e.sourceJSON=null,e.units=null,e.username=null,e.userType=null,e}return(0,s.Z)(o,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"userContentUrl",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/community/users/").concat(this.username):null}},{key:"addItem",value:function(e){var t=this,r=e&&e.item,o=e&&e.data,n=e&&e.folder,l={method:"post"};r&&(l.query=r.createPostQuery(),null!=o&&("string"==typeof o?l.query.text=o:"object"==typeof o&&(l.query.text=JSON.stringify(o))));var u=this.userContentUrl;return n&&(u+="/"+("string"==typeof n?n:n.id)),this.portal._request(u+"/addItem",l).then((function(e){return r.id=e.id,r.portal=t.portal,r.loaded?r.reload():r.load()}))}},{key:"deleteItem",value:function(e){var t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+"/items/".concat(e.id,"/delete"),{method:"post"}).then((function(){e.id=null,e.portal=null}))}},{key:"deleteItems",value:function(e){var t=this.userContentUrl+"/deleteItems",r=e.map((function(e){return e.id}));if(r.length){var o={method:"post",query:{items:r.join(",")}};return this.portal._request(t,o).then((function(){e.forEach((function(e){e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}},{key:"fetchFolders",value:function(){var e,t=this;return this.portal._request(null!==(e=this.userContentUrl)&&void 0!==e?e:"",{query:{num:1}}).then((function(e){return e&&e.folders?e.folders.map((function(e){var r=D.fromJSON(e);return r.portal=t.portal,r})):[]}))}},{key:"fetchGroups",value:function(){var e,t=this;return this.portal._request(null!==(e=this.url)&&void 0!==e?e:"").then((function(e){return e&&e.groups?e.groups.map((function(e){var r=M.fromJSON(e);return r.portal=t.portal,r})):[]}))}},{key:"fetchItems",value:function(e){var t,o,n=this,l=null!==e&&void 0!==e?e:{},u=null!==(t=this.userContentUrl)&&void 0!==t?t:"";return l.folder&&(u+="/"+l.folder.id),Promise.all([r.e(1015),r.e(5255)]).then(r.bind(r,21015)).then((function(e){var t=e.default;o=t;var r={folders:!1,num:l.num||10,start:l.start||1,sortField:l.sortField||"created",sortOrder:l.sortOrder||"asc"};return n.portal._request(u,{query:r})})).then((function(e){var t;return e&&e.items?(t=e.items.map((function(e){var t=o.fromJSON(e);return t.portal=n.portal,t})),Promise.all(t.map((function(e){return e.load()}))).catch((function(e){return e})).then((function(){return{items:t,nextStart:e.nextStart,total:e.total}}))):{items:[],nextStart:-1,total:0}}))}},{key:"fetchTags",value:function(){return this.portal._request(this.url+"/tags").then((function(e){return e.tags}))}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"queryFavorites",value:function(e){return this.favGroupId?(this._favGroup||(this._favGroup=new M({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new c.s("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}},{key:"toJSON",value:function(){throw new c.s("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}}],[{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var t=new B;return t.sourceJSON=e,t.read(e),t}}]),o}(f.l);(0,c.e)([(0,c.y)()],E.prototype,"access",void 0),(0,c.e)([(0,c.y)({type:Date})],E.prototype,"created",void 0),(0,c.e)([(0,c.y)()],E.prototype,"culture",void 0),(0,c.e)([(0,c.y)()],E.prototype,"description",void 0),(0,c.e)([(0,c.y)()],E.prototype,"email",void 0),(0,c.e)([(0,c.y)()],E.prototype,"favGroupId",void 0),(0,c.e)([(0,c.y)()],E.prototype,"fullName",void 0),(0,c.e)([(0,c.y)({type:Date})],E.prototype,"modified",void 0),(0,c.e)([(0,c.y)()],E.prototype,"orgId",void 0),(0,c.e)([(0,c.y)()],E.prototype,"portal",void 0),(0,c.e)([(0,c.y)()],E.prototype,"preferredView",void 0),(0,c.e)([(0,c.y)()],E.prototype,"privileges",void 0),(0,c.e)([(0,c.y)()],E.prototype,"region",void 0),(0,c.e)([(0,c.y)()],E.prototype,"role",void 0),(0,c.e)([(0,c.y)()],E.prototype,"roleId",void 0),(0,c.e)([(0,c.y)()],E.prototype,"sourceJSON",void 0),(0,c.e)([(0,c.y)()],E.prototype,"thumbnail",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],E.prototype,"thumbnailUrl",null),(0,c.e)([(0,c.y)()],E.prototype,"units",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],E.prototype,"userContentUrl",null),(0,c.e)([(0,c.y)({readOnly:!0})],E.prototype,"url",null),(0,c.e)([(0,c.y)()],E.prototype,"username",void 0),(0,c.e)([(0,c.y)()],E.prototype,"userType",void 0);var T,J,F=E=B=(0,c.e)([(0,c.n)("esri.portal.PortalUser")],E),j=Object.freeze({__proto__:null,default:F}),L={PortalGroup:function(){return Promise.resolve().then((function(){return A}))},PortalItem:function(){return Promise.all([r.e(1015),r.e(5255)]).then(r.bind(r,21015))},PortalUser:function(){return Promise.resolve().then((function(){return j}))}},z=T=function(e){(0,y.Z)(o,e);var t=(0,d.Z)(o);function o(e){var r;return(0,i.Z)(this,o),(r=t.call(this,e))._esriIdCredentialCreateHandle=null,r.access=null,r.allSSL=!1,r.authMode="auto",r.authorizedCrossOriginDomains=null,r.basemapGalleryGroupQuery=null,r.bingKey=null,r.canListApps=!1,r.canListData=!1,r.canListPreProvisionedItems=!1,r.canProvisionDirectPurchase=!1,r.canSearchPublic=!0,r.canShareBingPublic=!1,r.canSharePublic=!1,r.canSignInArcGIS=!1,r.canSignInIDP=!1,r.colorSetsGroupQuery=null,r.commentsEnabled=!1,r.created=null,r.culture=null,r.customBaseUrl=null,r.defaultBasemap=null,r.defaultDevBasemap=null,r.defaultExtent=null,r.defaultVectorBasemap=null,r.description=null,r.devBasemapGalleryGroupQuery=null,r.eueiEnabled=null,r.featuredGroups=null,r.featuredItemsGroupQuery=null,r.galleryTemplatesGroupQuery=null,r.livingAtlasGroupQuery=null,r.hasCategorySchema=!1,r.helperServices=null,r.homePageFeaturedContent=null,r.homePageFeaturedContentCount=null,r.httpPort=null,r.httpsPort=null,r.id=null,r.ipCntryCode=null,r.isPortal=!1,r.isReadOnly=!1,r.layerTemplatesGroupQuery=null,r.maxTokenExpirationMinutes=null,r.modified=null,r.name=null,r.portalHostname=null,r.portalMode=null,r.portalProperties=null,r.region=null,r.rotatorPanels=null,r.showHomePageDescription=!1,r.sourceJSON=null,r.supportsHostedServices=!1,r.symbolSetsGroupQuery=null,r.templatesGroupQuery=null,r.units=null,r.url=v.s.portalUrl,r.urlKey=null,r.user=null,r.useStandardizedQuery=!1,r.useVectorBasemaps=!1,r.vectorBasemapGalleryGroupQuery=null,r}return(0,s.Z)(o,[{key:"normalizeCtorArgs",value:function(e){return"string"==typeof e?{url:e}:e}},{key:"destroy",value:function(){this._esriIdCredentialCreateHandle=(0,v.f)(this._esriIdCredentialCreateHandle)}},{key:"readAuthorizedCrossOriginDomains",value:function(e){if(e){var t,r=(0,u.Z)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;v.s.request.trustedServers.includes(o)||v.s.request.trustedServers.push(o)}}catch(n){r.e(n)}finally{r.f()}}return e}},{key:"readDefaultBasemap",value:function(e){return this._readBasemap(e)}},{key:"readDefaultDevBasemap",value:function(e){return this._readBasemap(e)}},{key:"readDefaultVectorBasemap",value:function(e){return this._readBasemap(e)}},{key:"extraQuery",get:function(){var e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?" AND orgid:".concat(this.id):null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"itemPageUrl",get:function(){return this.url?"".concat(this.url,"/home/item.html"):null}},{key:"restUrl",get:function(){var e=this.url;if(e){var t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}},{key:"thumbnailUrl",get:function(){var e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}},{key:"readUrlKey",value:function(e){return e?e.toLowerCase():e}},{key:"readUser",value:function(e){var t=null;return e&&((t=F.fromJSON(e)).portal=this),t}},{key:"load",value:function(e){var t=this,o=Promise.all([r.e(3314),r.e(1015),r.e(7686),r.e(5940)]).then(r.bind(r,37686)).then((function(e){return e.B})).then((function(t){var r=t.default;(0,c.f)(e),J=r})).then((function(){return t.sourceJSON?t.sourceJSON:t._fetchSelf(t.authMode,!1,e)})).then((function(e){if(h.b){var r=h.b;t.credential=r.findCredential(t.restUrl),t.credential||t.authMode!==T.AUTH_MODE_AUTO||(t._esriIdCredentialCreateHandle=r.on("credential-create",(function(){r.findCredential(t.restUrl)&&t._signIn().catch((function(){}))})))}t.sourceJSON=e,t.read(e)}));return this.addResolvingPromise(o),Promise.resolve(this)}},{key:"createElevationLayers",value:function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperService("defaultElevationLayers"),e.next=5,Promise.all([r.e(4662),r.e(630),r.e(5113),r.e(4384),r.e(1015),r.e(496),r.e(8705),r.e(9681)]).then(r.bind(r,18705));case 5:return o=e.sent.default,e.abrupt("return",t?t.map((function(e){return new o({id:e.id,url:e.url})})):[]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBasemaps",value:function(e,t){var r=new I;return r.query=e||(v.s.apiKey&&(0,h.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then((function(e){if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',e.total){var o=e.results[0];return r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc",o.queryItems(r,t)}return null})).then((function(e){return e&&e.total?e.results.filter((function(e){return"Web Map"===e.type})).map((function(e){return new J({portalItem:e})})):[]}))}},{key:"fetchCategorySchema",value:function(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((function(e){return e.categorySchema})):(0,c.p)(e)?Promise.reject((0,c.d)()):Promise.resolve([])}},{key:"fetchFeaturedGroups",value:function(e){var t=this.featuredGroups,r=new I;if(r.num=100,r.sortField="title",t&&t.length){var o,n=[],l=(0,u.Z)(t);try{for(l.s();!(o=l.n()).done;){var a=o.value;n.push('(title:"'.concat(a.title,'" AND owner:').concat(a.owner,")"))}}catch(i){l.e(i)}finally{l.f()}return r.query=n.join(" OR "),this.queryGroups(r,e).then((function(e){return e.results}))}return(0,c.p)(e)?Promise.reject((0,c.d)()):Promise.resolve([])}},{key:"fetchRegions",value:function(e){var t,r=(null===(t=this.user)||void 0===t?void 0:t.culture)||this.culture||(0,m.l)();return this._request(this.restUrl+"/portals/regions",(0,a.Z)((0,a.Z)({},e),{},{query:{culture:r}}))}},{key:"fetchSettings",value:function(e){var t,r=(null===(t=this.user)||void 0===t?void 0:t.culture)||this.culture||(0,m.l)();return this._request(this.restUrl+"/portals/self/settings",(0,a.Z)((0,a.Z)({},e),{},{query:{culture:r}}))}},{key:"queryGroups",value:function(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}},{key:"queryItems",value:function(e,t){return this._queryPortal("/search",e,"PortalItem",t)}},{key:"queryUsers",value:function(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}},{key:"toJSON",value:function(){throw new c.s("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}},{key:"_getHelperService",value:function(e){var t=this.helperServices&&this.helperServices[e];if(!t)throw new c.s("portal:service-not-found",'The `helperServices` do not include an entry named "'.concat(e,'"'));return t}},{key:"_getHelperServiceUrl",value:function(e){var t=this._getHelperService(e);if(null===t||void 0===t||!t.url)throw new c.s("portal:service-url-not-found",'The `helperServices` entry "'.concat(e,'" does not include a `url` value'));return t.url}},{key:"_fetchSelf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.authMode,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=this.restUrl+"/portals/self",n=(0,a.Z)({authMode:e,query:{culture:(0,m.l)().toLowerCase()}},r);return"auto"===n.authMode&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(o,n)}},{key:"_queryPortal",value:function(e,t,r,o){var n=this,l=(0,c.b)(I,t),u=function(t){return n._request(n.restUrl+e,(0,a.Z)((0,a.Z)({},l.toRequestOptions(n)),o)).then((function(e){var r=l.clone();return r.start=e.nextStart,new Z({nextQueryParams:r,queryParams:l,total:e.total,results:T._resultsToTypedArray(t,{portal:n},e,o)})})).then((function(e){return Promise.all(e.results.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return e}),(function(t){return(0,c.w)(t),e}))}))};return r&&L[r]?L[r]().then((function(e){var t=e.default;return(0,c.f)(o),u(t)})):u()}},{key:"_signIn",value:function(){var e=this;if(this.authMode===T.AUTH_MODE_ANONYMOUS)return Promise.reject(new c.s("portal:invalid-auth-mode",'Current "authMode"\' is "'.concat(this.authMode,'"')));if("failed"===this.loadStatus)return Promise.reject(this.loadError);var t=function(t){return Promise.resolve().then((function(){return"not-loaded"===e.loadStatus?(t||(e.authMode="immediate"),e.load().then((function(){return null}))):"loading"===e.loadStatus?e.load().then((function(){return e.credential?null:(e.credential=t,e._fetchSelf("immediate"))})):e.user&&e.credential===t?null:(e.credential=t,e._fetchSelf("immediate"))})).then((function(t){t&&(e.sourceJSON=t,e.read(t))}))};return h.b?h.b.getCredential(this.restUrl).then((function(e){return t(e)})):t(this.credential)}},{key:"_normalizeSSL",value:function(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}},{key:"_normalizeUrl",value:function(e){var t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}},{key:"_requestToTypedArray",value:function(e,t,r){var o=this;return this._request(e,t).then((function(e){var t=T._resultsToTypedArray(r,{portal:o},e);return Promise.all(t.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return t}),(function(){return t}))}))}},{key:"_readBasemap",value:function(e){if(e){var t=J.fromJSON(e);return t.portalItem={portal:this},t}return null}},{key:"_request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,a.Z)({f:"json"},t.query),o=t.authMode,n=void 0===o?this.authMode===T.AUTH_MODE_ANONYMOUS?"anonymous":"auto":o,l=t.body,u=void 0===l?null:l,i=t.cacheBust,s=void 0!==i&&i,p=t.method,y=void 0===p?"auto":p,d=t.responseType,c=void 0===d?"json":d,v=t.signal,f={authMode:n,body:u,cacheBust:s,method:y,query:r,responseType:c,timeout:0,signal:v};return(0,h.U)(this._normalizeSSL(e),f).then((function(e){return e.data}))}}],[{key:"getDefault",value:function(){return T._default&&!T._default.destroyed||(T._default=new T),T._default}},{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new T({sourceJSON:e})}},{key:"_resultsToTypedArray",value:function(e,t,r,o){var n;if(r){var l=(0,v.r)(o)?o.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map((function(r){var o=Object.assign(e?e.fromJSON(r):r,t);return"function"==typeof o.load&&o.load(l),o})))}else n=[];return n}}]),o}((0,f.u)(G));z.AUTH_MODE_ANONYMOUS="anonymous",z.AUTH_MODE_AUTO="auto",z.AUTH_MODE_IMMEDIATE="immediate",(0,c.e)([(0,c.y)()],z.prototype,"access",void 0),(0,c.e)([(0,c.y)()],z.prototype,"allSSL",void 0),(0,c.e)([(0,c.y)()],z.prototype,"authMode",void 0),(0,c.e)([(0,c.y)()],z.prototype,"authorizedCrossOriginDomains",void 0),(0,c.e)([(0,g.o)("authorizedCrossOriginDomains")],z.prototype,"readAuthorizedCrossOriginDomains",null),(0,c.e)([(0,c.y)()],z.prototype,"basemapGalleryGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"bingKey",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canListApps",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canListData",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canListPreProvisionedItems",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canProvisionDirectPurchase",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canSearchPublic",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canShareBingPublic",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canSharePublic",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canSignInArcGIS",void 0),(0,c.e)([(0,c.y)()],z.prototype,"canSignInIDP",void 0),(0,c.e)([(0,c.y)()],z.prototype,"colorSetsGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"commentsEnabled",void 0),(0,c.e)([(0,c.y)({type:Date})],z.prototype,"created",void 0),(0,c.e)([(0,c.y)()],z.prototype,"credential",void 0),(0,c.e)([(0,c.y)()],z.prototype,"culture",void 0),(0,c.e)([(0,c.y)()],z.prototype,"currentVersion",void 0),(0,c.e)([(0,c.y)()],z.prototype,"customBaseUrl",void 0),(0,c.e)([(0,c.y)()],z.prototype,"defaultBasemap",void 0),(0,c.e)([(0,g.o)("defaultBasemap")],z.prototype,"readDefaultBasemap",null),(0,c.e)([(0,c.y)()],z.prototype,"defaultDevBasemap",void 0),(0,c.e)([(0,g.o)("defaultDevBasemap")],z.prototype,"readDefaultDevBasemap",null),(0,c.e)([(0,c.y)({type:S.w})],z.prototype,"defaultExtent",void 0),(0,c.e)([(0,c.y)()],z.prototype,"defaultVectorBasemap",void 0),(0,c.e)([(0,g.o)("defaultVectorBasemap")],z.prototype,"readDefaultVectorBasemap",null),(0,c.e)([(0,c.y)()],z.prototype,"description",void 0),(0,c.e)([(0,c.y)()],z.prototype,"devBasemapGalleryGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"eueiEnabled",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],z.prototype,"extraQuery",null),(0,c.e)([(0,c.y)()],z.prototype,"featuredGroups",void 0),(0,c.e)([(0,c.y)()],z.prototype,"featuredItemsGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"galleryTemplatesGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"livingAtlasGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"hasCategorySchema",void 0),(0,c.e)([(0,c.y)()],z.prototype,"helpBase",void 0),(0,c.e)([(0,c.y)()],z.prototype,"helperServices",void 0),(0,c.e)([(0,c.y)()],z.prototype,"helpMap",void 0),(0,c.e)([(0,c.y)()],z.prototype,"homePageFeaturedContent",void 0),(0,c.e)([(0,c.y)()],z.prototype,"homePageFeaturedContentCount",void 0),(0,c.e)([(0,c.y)()],z.prototype,"httpPort",void 0),(0,c.e)([(0,c.y)()],z.prototype,"httpsPort",void 0),(0,c.e)([(0,c.y)()],z.prototype,"id",void 0),(0,c.e)([(0,c.y)()],z.prototype,"ipCntryCode",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],z.prototype,"isOrganization",null),(0,c.e)([(0,c.y)()],z.prototype,"isPortal",void 0),(0,c.e)([(0,c.y)()],z.prototype,"isReadOnly",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],z.prototype,"itemPageUrl",null),(0,c.e)([(0,c.y)()],z.prototype,"layerTemplatesGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"maxTokenExpirationMinutes",void 0),(0,c.e)([(0,c.y)({type:Date})],z.prototype,"modified",void 0),(0,c.e)([(0,c.y)()],z.prototype,"name",void 0),(0,c.e)([(0,c.y)()],z.prototype,"portalHostname",void 0),(0,c.e)([(0,c.y)()],z.prototype,"portalMode",void 0),(0,c.e)([(0,c.y)()],z.prototype,"portalProperties",void 0),(0,c.e)([(0,c.y)()],z.prototype,"region",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],z.prototype,"restUrl",null),(0,c.e)([(0,c.y)()],z.prototype,"rotatorPanels",void 0),(0,c.e)([(0,c.y)()],z.prototype,"showHomePageDescription",void 0),(0,c.e)([(0,c.y)()],z.prototype,"sourceJSON",void 0),(0,c.e)([(0,c.y)()],z.prototype,"staticImagesUrl",void 0),(0,c.e)([(0,c.y)({json:{name:"2DStylesGroupQuery"}})],z.prototype,"stylesGroupQuery2d",void 0),(0,c.e)([(0,c.y)({json:{name:"stylesGroupQuery"}})],z.prototype,"stylesGroupQuery3d",void 0),(0,c.e)([(0,c.y)()],z.prototype,"supportsHostedServices",void 0),(0,c.e)([(0,c.y)()],z.prototype,"symbolSetsGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"templatesGroupQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"thumbnail",void 0),(0,c.e)([(0,c.y)({readOnly:!0})],z.prototype,"thumbnailUrl",null),(0,c.e)([(0,c.y)()],z.prototype,"units",void 0),(0,c.e)([(0,c.y)()],z.prototype,"url",void 0),(0,c.e)([(0,c.y)()],z.prototype,"urlKey",void 0),(0,c.e)([(0,g.o)("urlKey")],z.prototype,"readUrlKey",null),(0,c.e)([(0,c.y)()],z.prototype,"user",void 0),(0,c.e)([(0,g.o)("user")],z.prototype,"readUser",null),(0,c.e)([(0,c.y)()],z.prototype,"useStandardizedQuery",void 0),(0,c.e)([(0,c.y)()],z.prototype,"useVectorBasemaps",void 0),(0,c.e)([(0,c.y)()],z.prototype,"vectorBasemapGalleryGroupQuery",void 0);var H=z=T=(0,c.e)([(0,c.n)("esri.portal.Portal")],z),V=Object.freeze({__proto__:null,default:H})}}]);
//# sourceMappingURL=3116.678ab3a1.chunk.js.map