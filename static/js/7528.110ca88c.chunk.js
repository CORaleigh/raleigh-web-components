"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[7528],{52195:function(e,t,n){n.d(t,{u:function(){return v}});var i=n(15671),r=n(43144),a=n(60136),s=n(29388),o=n(48848),u=n(37856),l=n(630),c=n(92072),h=n(93661),p=n(65094),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).layer=null,r.parent=null,r}return(0,r.Z)(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var n=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";o.a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(i,"', id: '").concat(n,"')"),t)}}))}},{key:"fullOpacity",get:function(){return(0,h.v)(this.get("layer.opacity"),1)*(0,h.v)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"canResume",value:function(){var e,t,n;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(n=this.view)||void 0===n?void 0:n.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),n}((0,l.a)((0,c.s)((0,p.m)(u.n.EventedMixin(o.m)))));(0,o.e)([(0,o.y)()],d.prototype,"fullOpacity",null),(0,o.e)([(0,o.y)()],d.prototype,"layer",void 0),(0,o.e)([(0,o.y)()],d.prototype,"parent",void 0),(0,o.e)([(0,o.y)({readOnly:!0})],d.prototype,"suspended",null),(0,o.e)([(0,o.y)({readOnly:!0})],d.prototype,"suspendInfo",null),(0,o.e)([(0,o.y)({readOnly:!0})],d.prototype,"legendEnabled",null),(0,o.e)([(0,o.y)({type:Boolean,readOnly:!0})],d.prototype,"updating",null),(0,o.e)([(0,o.y)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,o.e)([(0,o.y)()],d.prototype,"visible",null),(0,o.e)([(0,o.y)()],d.prototype,"view",void 0);var v=d=(0,o.e)([(0,o.n)("esri.views.layers.LayerView")],d)},91502:function(e,t,n){n.d(t,{y:function(){return T}});var i=n(11752),r=n(61120),a=n(15671),s=n(43144),o=n(60136),u=n(29388),l=n(48848),c=n(93314),h=n(81556),p=n(50690),d=(n(93661),n(84234)),v=n(40114),y=n(74384),f=n(82474),m=n(56162),_=n(46817),g=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"version",get:function(){return this.commitVersionProperties(),(this._get("version")||0)+1}}]),n}(v.l);(0,l.e)([(0,l.y)({readOnly:!0})],g.prototype,"version",null);var w,x=g=(0,l.e)([(0,l.n)("esri.views.layers.support.ClipArea")],g),k=w=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).type="rect",i.left=null,i.right=null,i.top=null,i.bottom=null,i}return(0,s.Z)(n,[{key:"clone",value:function(){return new w({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}},{key:"commitVersionProperties",value:function(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}}]),n}(x);(0,l.e)([(0,l.y)({type:[Number,String],json:{write:!0}})],k.prototype,"left",void 0),(0,l.e)([(0,l.y)({type:[Number,String],json:{write:!0}})],k.prototype,"right",void 0),(0,l.e)([(0,l.y)({type:[Number,String],json:{write:!0}})],k.prototype,"top",void 0),(0,l.e)([(0,l.y)({type:[Number,String],json:{write:!0}})],k.prototype,"bottom",void 0);var Z,R=k=w=(0,l.e)([(0,l.n)("esri.views.layers.support.ClipRect")],k),b={base:f.p,key:"type",typeMap:{extent:_.w,polygon:y.v}},S=Z=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).type="geometry",i.geometry=null,i}return(0,s.Z)(n,[{key:"clone",value:function(){var e,t;return new Z({geometry:null!==(e=null===(t=this.geometry)||void 0===t?void 0:t.clone())&&void 0!==e?e:null})}},{key:"commitVersionProperties",value:function(){this.commitProperty("geometry")}}]),n}(x);(0,l.e)([(0,l.y)({types:b,json:{read:m.v,write:!0}})],S.prototype,"geometry",void 0);var C=S=Z=(0,l.e)([(0,l.n)("esri.views.layers.support.Geometry")],S),P=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).type="path",i.path=[],i}return(0,s.Z)(n,[{key:"commitVersionProperties",value:function(){this.commitProperty("path")}}]),n}(x);(0,l.e)([(0,l.y)({type:[[[Number]]],json:{write:!0}})],P.prototype,"path",void 0);var O=P=(0,l.e)([(0,l.n)("esri.views.layers.support.Path")],P),I=c.j.ofType({key:"type",base:null,typeMap:{rect:R,path:O,geometry:C}}),T=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).attached=!1,e.clips=new I,e.lastUpdateId=-1,e.moving=!1,e.updateRequested=!1,e.visibleAtCurrentScale=!1,e}return(0,s.Z)(n,[{key:"initialize",value:function(){var e,t,n,i,r=this,a=null===(e=null===(t=this.view)||void 0===t?void 0:t.spatialReferenceLocked)||void 0===e||e;(null===(n=this.view)||void 0===n?void 0:n.spatialReference)&&a&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new l.s("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new d.i),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.handles.add([(0,p.l)((function(){return r.suspended}),(function(e){r.container&&(r.container.visible=!e),r.view&&!e&&r.updateRequested&&r.view.requestUpdate()}),p.w),(0,p.l)((function(){var e,t;return null!==(e=null===(t=r.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1}),(function(e){r.container&&(r.container.opacity=e)}),p.w),(0,p.l)((function(){return r.layer&&"blendMode"in r.layer?r.layer.blendMode:"normal"}),(function(e){r.container&&(r.container.blendMode=e)}),p.w),(0,p.l)((function(){return r.layer&&"effect"in r.layer?r.layer.effect:null}),(function(e){r.container&&(r.container.effect=e)}),p.w),(0,p.a)((function(){return r.clips}),"change",(function(){r.container&&(r.container.clips=r.clips)}),p.w),(0,p.l)((function(){var e;return{scale:null===(e=r.view)||void 0===e?void 0:e.scale,scaleRange:r.layer&&"effectiveScaleRange"in r.layer?r.layer.effectiveScaleRange:null}}),(function(e){var t=e.scale,n=t&&r.isVisibleAtScale(t);n!==r.visibleAtCurrentScale&&r._set("visibleAtCurrentScale",n)}),p.w)]),null!==(i=this.view)&&void 0!==i&&i.whenLayerView?this.view.whenLayerView(this.layer).then((function(e){e===r&&r.processAttach()}),(function(){})):this.when().then((function(){r.processAttach()}),(function(){})))}},{key:"destroy",value:function(){this.processDetach(),this.updateRequested=!1}},{key:"spatialReferenceSupported",get:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.spatialReference;return null==t||this.supportsSpatialReference(t)}},{key:"updating",get:function(){var e;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null===(e=this.updatingHandles)||void 0===e||!e.updating))}},{key:"processAttach",value:function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}},{key:"processDetach",value:function(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)}},{key:"isVisibleAtScale",value:function(e){var t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;var n=t.minScale,i=t.maxScale;return(0===n||e<=n)&&(0===i||e>=i)}},{key:"requestUpdate",value:function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}},{key:"processUpdate",value:function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}},{key:"hitTest",value:function(e,t){return Promise.resolve(null)}},{key:"supportsSpatialReference",value:function(e){return!0}},{key:"canResume",value:function(){return!!this.spatialReferenceSupported&&!!(0,i.Z)((0,r.Z)(n.prototype),"canResume",this).call(this)&&this.visibleAtCurrentScale}},{key:"getSuspendInfo",value:function(){var e=(0,i.Z)((0,r.Z)(n.prototype),"getSuspendInfo",this).call(this),t=!this.spatialReferenceSupported,a=this.visibleAtCurrentScale;return t&&(e.spatialReferenceNotSupported=t),a&&(e.outsideScaleRange=a),e}}]),n}(e);return(0,l.e)([(0,l.y)()],t.prototype,"attached",void 0),(0,l.e)([(0,l.y)({type:I,set:function(e){var t=(0,h.n)(e,this._get("clips"),I);this._set("clips",t)}})],t.prototype,"clips",void 0),(0,l.e)([(0,l.y)()],t.prototype,"container",void 0),(0,l.e)([(0,l.y)()],t.prototype,"moving",void 0),(0,l.e)([(0,l.y)({readOnly:!0})],t.prototype,"spatialReferenceSupported",null),(0,l.e)([(0,l.y)({readOnly:!0})],t.prototype,"updateParameters",void 0),(0,l.e)([(0,l.y)()],t.prototype,"updateRequested",void 0),(0,l.e)([(0,l.y)()],t.prototype,"updating",null),(0,l.e)([(0,l.y)()],t.prototype,"view",void 0),(0,l.e)([(0,l.y)({readOnly:!0})],t.prototype,"visibleAtCurrentScale",void 0),t=(0,l.e)([(0,l.n)("esri.views.2d.layers.LayerView2D")],t)}},97528:function(e,t,n){n.r(t);var i=n(74165),r=n(15861),a=n(93433),s=n(37762),o=n(15671),u=n(43144),l=n(11752),c=n(61120),h=n(60136),p=n(29388),d=n(29439),v=n(48848),y=(n(74384),n(93314)),f=n(93661),m=n(50690),_=n(25456),g=n(46817),w=n(66653),x=n(97880),k=(n(65703),n(51732),n(71802)),Z=n(26313),R=n(37077),b=n(29048),S=n(13239),C=n(64095),P=n(31698),O=n(93122),I=n(75833),T=n(77956),M=n(43066),A=n(68136),V=n(87424),q=n(63212),E=n(82474),L=n(32043),U=n(6994),D=n(1206),N=n(91502),j=n(52195),z=(n(40558),n(37856),n(15751),n(95249),n(47855),n(79557),n(75255),n(65415),n(23075),n(56162),n(5430),n(85113),n(46737),n(53586),n(65094),n(52113),n(53921),n(35237),n(89181),n(40114),n(20302),n(69641),n(15436),n(69768),n(62610),n(27205),n(39994),n(69717),n(42467),n(42667),n(61118),n(630),n(98598),n(43955),n(1500),n(64998),n(25577),n(59984),n(60369),n(92072),n(37944),n(86086),n(21385),n(89794),n(48200),n(85253),n(93209),n(46337),n(81556),n(93116),n(19941),n(49871),n(53409),n(35182),n(62466),n(51816),n(68781),n(35865),n(51219),n(66577),n(95643),n(59389),n(33795),n(43976),n(6762),n(2959),n(2821),n(33794),n(71147),n(84186),n(15529),n(70449),n(22603),n(56546),n(39926),n(8141),n(26151),n(91681),n(90429),n(52559),n(95399),n(98987),n(99795),n(87753),n(29130),n(82396),n(1685),n(12953),n(74797),n(45999),n(72973),n(62710),n(52721),n(61903),n(23444),n(40811),n(51920),n(63393),n(90442),n(64854),n(24623),n(64264),n(6379),n(21015),n(23341),n(41820),n(20086),n(92982),n(61416),n(77880),n(74494),n(77755),n(71645),n(89311),n(67066),n(39769),n(70607),n(85700),n(3719),n(32161),n(37686),n(16641),n(62642),n(90316),n(19891),n(23585),n(47748),n(70522),n(17332),n(17455),n(50253),n(7131),n(1797),n(18144),n(92739),n(74337),n(44954),n(54233),n(4679),n(62312),n(5650),n(35602),n(84234),n(18030),n(60491),n(87917),(0,k.n)()),F=(0,R.e)(),W=(0,R.e)(),B=(0,R.e)();function G(e,t,n){return H(W,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),H(B,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]),(0,Z.i)(e,(0,Z.c)(W,W),B)}function H(e,t,n,i,r,a,s,o,u){(0,Z.s)(e,t,i,a,n,r,s,1,1,1),(0,k.o)(z,o,u,1),(0,Z.c)(F,e);var l=(0,k.S)(z,z,(0,Z.o)(F,F)),c=(0,d.Z)(l,3),h=c[0],p=c[1],v=c[2];return(0,Z.s)(F,h,0,0,0,p,0,0,0,v),(0,Z.i)(e,F,e)}var Q=(0,R.e)(),X=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this)).elementView=e,i.isWrapAround=!1,i.perspectiveTransform=(0,S.n)(),i._vertices=new Float32Array(20),i._handles=[],i._handles.push((0,m.l)((function(){return i.elementView.element.opacity}),(function(e){return i.opacity=e}),m.h),(0,m.l)((function(){return[i.elementView.coords]}),(function(){i.requestRender()}),m.h),(0,m.f)((function(){return i.elementView.element.loaded}),(function(){var e=i.elementView.element;i.ready(),"video"===e.type&&(0,f.r)(e.content)&&i._handles.push((0,v.C)(e.content,"play",(function(){return i.requestRender()})))}),m.h)),e.element.load().catch((function(t){v.a.getLogger("esri.views.2d.layers.MediaLayerView2D").error(new v.s("element-load-error","Element cannot be displayed",{element:e,error:t}))})),i}return(0,u.Z)(n,[{key:"destroy",value:function(){var e;this._handles.forEach((function(e){return e.remove()})),null!==(e=this.texture)&&void 0!==e&&e.dispose(),this.texture=null}},{key:"dvsMat3",get:function(){return this.parent.dvsMat3}},{key:"beforeRender",value:function(e){var t=e.context,i=this.elementView.element.content;if((0,f.r)(i)){var r=i instanceof HTMLImageElement,a=i instanceof HTMLVideoElement,s=r?i.naturalWidth:a?i.videoWidth:i.width,o=r?i.naturalHeight:a?i.videoHeight:i.height;this._updatePerspectiveTransform(s,o),this.texture?a&&!i.paused&&(this.texture.setData(i),this.requestRender(),((0,I.n)(t.gl)||(0,k.ad)(s)&&(0,k.ad)(o))&&this.texture.generateMipmap()):(this.texture=new I.E(t,{pixelFormat:O.P.RGBA,dataType:O.G.UNSIGNED_BYTE,samplingMode:O.L.LINEAR,wrapMode:O.D.CLAMP_TO_EDGE,width:s,height:o,preMultiplyAlpha:!0},i),((0,I.n)(t.gl)||(0,k.ad)(s)&&(0,k.ad)(o))&&this.texture.generateMipmap(),a&&!i.paused&&this.requestRender())}(0,l.Z)((0,c.Z)(n.prototype),"beforeRender",this).call(this,e)}},{key:"_createTransforms",value:function(){return null}},{key:"updateDrawCoords",value:function(e,t){var n=this.elementView.coords;if(!(0,f.t)(n)){var i=(0,d.Z)(n.rings[0],4),r=i[0],a=i[1],s=i[2],o=i[3],u=this._vertices,l=e.x,c=e.y,h=0!==t;h?u.set([a[0]-l,a[1]-c,r[0]-l,r[1]-c,s[0]-l,s[1]-c,o[0]-l,o[1]-c,o[0]-l,o[1]-c,a[0]+t-l,a[1]-c,a[0]+t-l,a[1]-c,r[0]+t-l,r[1]-c,s[0]+t-l,s[1]-c,o[0]+t-l,o[1]-c]):u.set([a[0]-l,a[1]-c,r[0]-l,r[1]-c,s[0]-l,s[1]-c,o[0]-l,o[1]-c]),this.isWrapAround=h}}},{key:"getVAO",value:function(e,t,n){if((0,f.t)(this.elementView.coords))return null;var i=this._vertices;if(this._vao)this._geometryVbo.setData(i);else{this._geometryVbo=P.E.createVertex(e,O.F.DYNAMIC_DRAW,i);var r=P.E.createVertex(e,O.F.STATIC_DRAW,new Uint16Array([0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,1,1,0,1,1]));this._vao=new P.b(e,n,t,{geometry:this._geometryVbo,tex:r})}return this._vao}},{key:"_updatePerspectiveTransform",value:function(e,t){var n=this._vertices;G(Q,[0,0,e,0,0,t,e,t],[n[0],n[1],n[4],n[5],n[2],n[3],n[6],n[7]]),(0,b.r)(this.perspectiveTransform,Q[6]/Q[8]*e,Q[7]/Q[8]*t)}}]),n}(C.r),Y=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments))._localOrigin=(0,T.c)(0,0),e._viewStateId=-1,e._dvsMat3=(0,M.e)(),e.requiresDedicatedFBO=!1,e}return(0,u.Z)(n,[{key:"dvsMat3",get:function(){return this._dvsMat3}},{key:"beforeRender",value:function(e){this._updateMatrices(e),this._updateOverlays(e,this.children);var t,n=(0,s.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.beforeRender(e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"prepareRenderPasses",value:function(e){var t=this,i=e.registerRenderPass({name:"overlay",brushes:[U.b.overlay],target:function(){return t.children},drawPhase:D.I.MAP});return[].concat((0,a.Z)((0,l.Z)((0,c.Z)(n.prototype),"prepareRenderPasses",this).call(this,e)),[i])}},{key:"_updateMatrices",value:function(e){var t=e.state,n=t.id,i=t.size,r=t.pixelRatio,a=t.resolution,s=t.rotation,o=t.viewpoint,u=t.displayMat3;if(this._viewStateId!==n){var l=Math.PI/180*s,c=r*i[0],h=r*i[1],p=o.targetGeometry,d=p.x,v=p.y,y=(0,q.U)(d,t.spatialReference);this._localOrigin.x=y,this._localOrigin.y=v;var f=a*c,m=a*h,_=(0,Z.r)(this._dvsMat3);(0,Z.i)(_,_,u),(0,Z.M)(_,_,(0,A.t)(c/2,h/2)),(0,Z.f)(_,_,(0,V.r)(c/f,-h/m,1)),(0,Z.h)(_,_,-l),this._viewStateId=n}}},{key:"_updateOverlays",value:function(e,t){var n=e.state,i=n.rotation,r=n.spatialReference,a=n.worldScreenWidth,o=n.size,u=n.viewpoint,l=this._localOrigin,c=0;if(r.isWrappable){var h=o[0],p=o[1],v=180/Math.PI*i,y=Math.abs(Math.cos(v)),m=Math.abs(Math.sin(v)),_=Math.round(h*y+p*m),g=(0,d.Z)((0,E.a)(r).valid,2),w=g[0],x=g[1],k=(0,L.a2)(r),Z=u.targetGeometry,R=Z.x,b=[R,Z.y],S=[0,0];n.toScreen(S,b);var C,P=[0,0];C=_>a?.5*a:.5*_;var O=Math.floor((R+.5*k)/k),I=w+O*k,T=x+O*k,M=[S[0]+C,0];n.toMap(P,M),P[0]>T&&(c=k),M[0]=S[0]-C,n.toMap(P,M),P[0]<I&&(c=-k);var A,V=(0,s.Z)(t);try{for(V.s();!(A=V.n()).done;){var q=A.value,U=q.elementView.bounds;if(!(0,f.t)(U)){var D=(0,d.Z)(U,3),N=D[0],j=D[2];N<w&&j>w?q.updateDrawCoords(l,k):j>x&&N<x?q.updateDrawCoords(l,-k):q.updateDrawCoords(l,c)}}}catch(W){V.e(W)}finally{V.f()}}else{var z,F=(0,s.Z)(t);try{for(F.s();!(z=F.n()).done;){z.value.updateDrawCoords(l,c)}}catch(W){F.e(W)}finally{F.f()}}}}]),n}(U.o),J=function(e){(0,h.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments))._overlayContainer=null,e._fetchQueue=null,e._tileStrategy=null,e._elementReferences=new Map,e.layer=null,e.elements=new y.j,e}return(0,u.Z)(n,[{key:"attach",value:function(){var e=this;this.handles.add((0,m.a)((function(){return e.layer.source}),"refresh",(function(){var t,n=(0,s.Z)(e._tileStrategy.tiles);try{for(n.s();!(t=n.n()).done;){var i=t.value;e._updateTile(i)}}catch(r){n.e(r)}finally{n.f()}e.requestUpdate()}))),this._overlayContainer=new Y,this.container.addChild(this._overlayContainer),this._fetchQueue=new x.y({tileInfoView:this.view.featuresTilingScheme,concurrency:10,process:function(t,n){return e._queryElements(t,n)}}),this._tileStrategy=new x.r({cachePolicy:"purge",resampling:!0,acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme}),this.requestUpdate()}},{key:"detach",value:function(){this.handles.removeAll(),this.elements.removeAll(),this._tileStrategy.destroy(),this._fetchQueue.destroy(),this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this._elementReferences.clear()}},{key:"supportsSpatialReference",value:function(e){return!0}},{key:"moveStart",value:function(){this.requestUpdate()}},{key:"viewChange",value:function(){this.requestUpdate()}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"update",value:function(e){this._tileStrategy.update(e)}},{key:"hitTest",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,u,l,c,h,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=t.normalize(),o=[a.x,a.y],u=(0,s.Z)(this._elementReferences.values());try{for(u.s();!(l=u.n()).done;)c=l.value.projectedElement,h=c.normalizedCoords,p=c.element,(0,f.r)(h)&&(0,g.s)(h.rings,o)&&r.push({type:"media",element:p,layer:this.layer,mapPoint:t})}catch(n){u.e(n)}finally{u.f()}return e.abrupt("return",r.reverse());case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){return null!=this.layer.source&&(0,l.Z)((0,c.Z)(n.prototype),"canResume",this).call(this)}},{key:"doRefresh",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_acquireTile",value:function(e){var t=new $(e.clone());return this._updateTile(t),t}},{key:"_updateTile",value:function(e){var t=this;this.updatingHandles.addPromise(this._fetchQueue.push(e.key).then((function(n){var i=e.setElements(n),r=(0,d.Z)(i,2),a=r[0],s=r[1];t._acquireElements(e,a),t._releaseElements(e,s),t.requestUpdate()}),(function(e){(0,v.j)(e)||v.a.getLogger(t.declaredClass).error(e)})))}},{key:"_releaseTile",value:function(e){this._fetchQueue.abort(e.key.id),e.elements&&this._releaseElements(e,e.elements),this.requestUpdate()}},{key:"_queryElements",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.layer.source,!(0,f.t)(r)){e.next=3;break}return e.abrupt("return",[]);case 3:return this.view.featuresTilingScheme.getTileBounds(K,t,!0),a=new g.w({xmin:K[0],ymin:K[1],xmax:K[2],ymax:K[3],spatialReference:this.view.spatialReference}),e.abrupt("return",r.queryElements(a,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_acquireElements",value:function(e,t){var n=this,i=this.layer.source,r=this.view.spatialReference;if(!(0,f.t)(i)){var a,o=(0,s.Z)(t);try{var u=function(){var t=a.value;(0,v.am)(n._elementReferences,t.uid,(function(){var e=new w.a({element:t,spatialReference:r}),i=new X(e);return n._overlayContainer.addChild(i),n.elements.add(t),{tiles:new Set,projectedElement:e,overlay:i}})).tiles.add(e)};for(o.s();!(a=o.n()).done;)u()}catch(l){o.e(l)}finally{o.f()}}}},{key:"_releaseElements",value:function(e,t){var n,i=(0,s.Z)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this._elementReferences.get(r.uid);a.tiles.delete(e),a.tiles.size||(this._overlayContainer.removeChild(a.overlay),a.overlay.destroy(),a.projectedElement.destroy(),this._elementReferences.delete(r.uid),this.elements.remove(r))}}catch(o){i.e(o)}finally{i.f()}}}]),n}((0,N.y)(j.u));(0,v.e)([(0,v.y)()],J.prototype,"_fetchQueue",void 0),(0,v.e)([(0,v.y)()],J.prototype,"layer",void 0),(0,v.e)([(0,v.y)({readOnly:!0})],J.prototype,"elements",void 0),J=(0,v.e)([(0,v.n)("esri.views.2d.layers.MediaLayerView2D")],J);var K=(0,_.u)(),$=function(){function e(t){(0,o.Z)(this,e),this.key=t,this.elements=null,this.isReady=!1,this.visible=!0}return(0,u.Z)(e,[{key:"setElements",value:function(e){var t=[],n=new Set(this.elements);this.elements=e;var i,r=(0,s.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;n.has(a)?n.delete(a):t.push(a)}}catch(o){r.e(o)}finally{r.f()}return this.isReady=!0,[t,Array.from(n)]}}]),e}(),ee=J;t.default=ee},37077:function(e,t,n){function i(){return[1,0,0,0,1,0,0,0,1]}function r(e,t){return new Float64Array(e,t,9)}n.d(t,{e:function(){return i},n:function(){return r}}),Object.freeze(Object.defineProperty({__proto__:null,create:i,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,i,r,a,s,o,u){return[e,t,n,i,r,a,s,o,u]},createView:r},Symbol.toStringTag,{value:"Module"}))},66653:function(e,t,n){n.d(t,{a:function(){return d}});var i=n(15671),r=n(43144),a=n(60136),s=n(29388),o=n(48848),u=n(93661),l=n(74384),c=n(95249),h=n(25456),p=n(23075),d=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,e)}return(0,r.Z)(n,[{key:"bounds",get:function(){var e=this.coords;return(0,u.t)(e)||(0,u.t)(e.extent)?null:(0,h.c)(e.extent)}},{key:"coords",get:function(){var e,t=null===(e=(0,u.e)(this.element.georeference))||void 0===e?void 0:e.coords;return(0,c.u)(t,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return l.v.fromJSON((0,p.a)(this.coords))}},{key:"normalizedBounds",get:function(){var e=(0,u.r)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,u.r)(e)?(0,h.c)(e):null}}]),n}(o.m);(0,o.e)([(0,o.y)()],d.prototype,"spatialReference",void 0),(0,o.e)([(0,o.y)()],d.prototype,"element",void 0),(0,o.e)([(0,o.y)()],d.prototype,"bounds",null),(0,o.e)([(0,o.y)()],d.prototype,"coords",null),(0,o.e)([(0,o.y)()],d.prototype,"normalizedCoords",null),(0,o.e)([(0,o.y)()],d.prototype,"normalizedBounds",null),d=(0,o.e)([(0,o.n)("esri.layers.support.media.MediaElementView")],d)},23075:function(e,t,n){n.d(t,{a:function(){return d},p:function(){return v}});var i=n(43144),r=n(15671),a=n(37762),s=n(29439),o=n(93661),u=n(25456),l=n(74384),c=n(56162),h=n(63212),p=n(82474);function d(e){return y(e,!0)}function v(e){return y(e,!1)}function y(e,t){if((0,o.t)(e))return null;var n=e.spatialReference,i=(0,p.a)(n),r="toJSON"in e?e.toJSON():e;if(!i)return r;var a=(0,p.b)(n)?102100:4326,s=h.r[a].maxX,u=h.r[a].minX;if((0,c.s)(r))return m(r,s,u);if((0,c.l)(r))return r.points=r.points.map((function(e){return m(e,s,u)})),r;if((0,c.u)(r))return f(r,i);if((0,c.y)(r)||(0,c.f)(r)){var d=(0,l.e)(Z,r),v={xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3]},y=(0,h.i)(v.xmin,u)*(2*s),_=0===y?r:(0,h.s)(r,y);return v.xmin+=y,v.xmax+=y,v.xmax>s?x(_,s,t):v.xmin<u?x(_,u,t):_}return r}function f(e,t){if(!t)return e;var n=function(e,t){var n=[],i=e.ymin,r=e.ymax,a=e.xmin,o=e.xmax,u=e.xmax-e.xmin,l=(0,s.Z)(t.valid,2),c=l[0],h=l[1],p=_(e.xmin,t),d=p.x,v=p.frameId,y=_(e.xmax,t),f=y.x,m=y.frameId,w=d===f&&u>0;if(u>2*h){var x={xmin:a<o?d:f,ymin:i,xmax:h,ymax:r},Z={xmin:c,ymin:i,xmax:a<o?f:d,ymax:r},R={xmin:0,ymin:i,xmax:h,ymax:r},b={xmin:c,ymin:i,xmax:0,ymax:r},S=[],C=[];g(x,R)&&S.push(v),g(x,b)&&C.push(v),g(Z,R)&&S.push(m),g(Z,b)&&C.push(m);for(var P=v+1;P<m;P++)S.push(P),C.push(P);n.push(new k(x,[v]),new k(Z,[m]),new k(R,S),new k(b,C))}else d>f||w?n.push(new k({xmin:d,ymin:i,xmax:h,ymax:r},[v]),new k({xmin:c,ymin:i,xmax:f,ymax:r},[m])):n.push(new k({xmin:d,ymin:i,xmax:f,ymax:r},[v]));return n}(e,t).map((function(e){return e.extent}));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}function m(e,t,n){if(Array.isArray(e)){var i=e[0];if(i>t){var r=(0,h.i)(i,t);e[0]=i+r*(-2*t)}else if(i<n){var a=(0,h.i)(i,n);e[0]=i+a*(-2*n)}}else{var s=e.x;if(s>t){var o=(0,h.i)(s,t);e.x+=o*(-2*t)}else if(s<n){var u=(0,h.i)(s,n);e.x+=u*(-2*n)}}return e}function _(e,t){var n,i=(0,s.Z)(t.valid,2),r=i[0],a=i[1],o=2*a,u=0;return e>a?(e-=(n=Math.ceil(Math.abs(e-a)/o))*o,u=n):e<r&&(e+=(n=Math.ceil(Math.abs(e-r)/o))*o,u=-n),{x:e,frameId:u}}function g(e,t){var n=t.xmin,i=t.ymin,r=t.xmax,a=t.ymax;return w(e,n,i)&&w(e,n,a)&&w(e,r,a)&&w(e,r,i)}function w(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}function x(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(0,c.f)(e);if(i&&(0,l.q)(e),n)return(new R).cut(e,t);for(var r=i?e.rings:e.paths,s=i?4:2,o=r.length,u=-2*t,h=0;h<o;h++){var p=r[h];if(p&&p.length>=s){var d,v=[],y=(0,a.Z)(p);try{for(y.s();!(d=y.n()).done;){var f=d.value;v.push([f[0]+u,f[1]])}}catch(m){y.e(m)}finally{y.f()}r.push(v)}}return i?e.rings=r:e.paths=r,e}var k=(0,i.Z)((function e(t,n){(0,r.Z)(this,e),this.extent=t,this.frameIds=n})),Z=(0,u.u)(),R=function(){function e(){(0,r.Z)(this,e),this._linesIn=[],this._linesOut=[]}return(0,i.Z)(e,[{key:"cut",value:function(e,t){var n;if(this._xCut=t,e.rings)this._closed=!0,n=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,n=e.paths,this._minPts=2}var i,r=(0,a.Z)(n);try{for(r.s();!(i=r.n()).done;){var s=i.value;if(s&&!(s.length<this._minPts)){var o,u=!0,l=(0,a.Z)(s);try{for(l.s();!(o=l.n()).done;){var c=o.value;u?(this.moveTo(c),u=!1):this.lineTo(c)}}catch(w){l.e(w)}finally{l.f()}this._closed&&this.close()}}}catch(w){r.e(w)}finally{r.f()}this._pushLineIn(),this._pushLineOut(),n=[];var h,p=(0,a.Z)(this._linesIn);try{for(p.s();!(h=p.n()).done;){var d=h.value;d&&d.length>=this._minPts&&n.push(d)}}catch(w){p.e(w)}finally{p.f()}var v,y=-2*this._xCut,f=(0,a.Z)(this._linesOut);try{for(f.s();!(v=f.n()).done;){var m=v.value;if(m&&m.length>=this._minPts){var _,g=(0,a.Z)(m);try{for(g.s();!(_=g.n()).done;){_.value[0]+=y}}catch(w){g.e(w)}finally{g.f()}n.push(m)}}}catch(w){f.e(w)}finally{f.f()}return this._closed?e.rings=n:e.paths=n,e}},{key:"moveTo",value:function(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}},{key:"lineTo",value:function(e){var t=this._side(e[0]);if(t*this._prevSide==-1){var n=this._intersect(this._prevPt,e);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}},{key:"close",value:function(){var e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}},{key:"_moveTo",value:function(e,t,n){this._closed?(this._lineIn.push([n<=0?e:this._xCut,t]),this._lineOut.push([n>=0?e:this._xCut,t])):(n<=0&&this._lineIn.push([e,t]),n>=0&&this._lineOut.push([e,t]))}},{key:"_lineTo",value:function(e,t,n){this._closed?(this._addPolyVertex(this._lineIn,n<=0?e:this._xCut,t),this._addPolyVertex(this._lineOut,n>=0?e:this._xCut,t)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}},{key:"_addPolyVertex",value:function(e,t,n){var i=e.length;i>1&&e[i-1][0]===t&&e[i-2][0]===t?e[i-1][1]=n:e.push([t,n])}},{key:"_checkClosingPt",value:function(e){var t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}},{key:"_side",value:function(e){return e<this._xCut?-1:e>this._xCut?1:0}},{key:"_intersect",value:function(e,t){var n=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+n*(t[1]-e[1])}},{key:"_pushLineIn",value:function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}},{key:"_pushLineOut",value:function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}]),e}()},87424:function(e,t,n){function i(){return new Float32Array(3)}function r(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,n){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=n,i}function s(e,t){return new Float32Array(e,t,3)}function o(){return i()}function u(){return a(1,1,1)}function l(){return a(1,0,0)}function c(){return a(0,1,0)}function h(){return a(0,0,1)}n.d(t,{a:function(){return o},e:function(){return s},n:function(){return i},r:function(){return a},t:function(){return r}});var p=o(),d=u(),v=l(),y=c(),f=h();Object.freeze(Object.defineProperty({__proto__:null,create:i,clone:r,fromValues:a,createView:s,zeros:o,ones:u,unitX:l,unitY:c,unitZ:h,ZEROS:p,ONES:d,UNIT_X:v,UNIT_Y:y,UNIT_Z:f},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=7528.110ca88c.chunk.js.map