"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[8210],{3114:function(e,t,r){r.d(t,{d:function(){return d}});var n,a=r(74165),i=r(15861),s=r(15671),o=r(43144),u=r(60136),l=r(29388),c=r(23132),f=r(75610),p=r(50448),h=r(30709),y=r(50526),m=r(22144),b=n=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,s.Z)(this,r),(n=t.call(this,e)).data=null,n.type="cim",n}return(0,o.Z)(r,[{key:"readData",value:function(e,t){return t}},{key:"writeData",value:function(e,t){if(e)for(var r in e)t[r]=e[r]}},{key:"collectRequiredFields",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CIMSymbolReference"!==this.data.type){e.next=6;break}if(!(n=this.data.primitiveOverrides)){e.next=6;break}return i=n.map((function(e){var n=e.valueExpressionInfo;return(0,y.b)(t,r,n.expression)})),e.next=6,Promise.all(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new n({data:(0,f.m)(this.data)})}},{key:"hash",value:function(){return(0,c.$)(JSON.stringify(this.data)).toString()}}]),r}(m.a);(0,c.e)([(0,c.d)({json:{write:!1}})],b.prototype,"color",void 0),(0,c.e)([(0,c.d)({json:{write:!0}})],b.prototype,"data",void 0),(0,c.e)([(0,h.o)("data",["symbol"])],b.prototype,"readData",null),(0,c.e)([(0,h.r)("data",{})],b.prototype,"writeData",null),(0,c.e)([(0,p.r)({CIMSymbolReference:"cim"},{readOnly:!0})],b.prototype,"type",void 0);var d=b=n=(0,c.e)([(0,c.n)("esri.symbols.CIMSymbol")],b)},28210:function(e,t,r){r.r(t),r.d(t,{DictionaryLoader:function(){return k}});var n=r(93433),a=r(1413),i=r(29439),s=r(74165),o=r(37762),u=r(15861),l=r(15671),c=r(43144),f=r(78674),p=r(57714),h=r(23132),y=r(17436),m=r(75610),b=r(50526),d=r(3114),v=(r(66307),r(2760),r(25316),r(21583),r(91204),r(80262),r(30709),r(70441),r(36460),r(50448),r(22144),h.s.getLogger("esri.renderers.support.DictionaryLoader")),g={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}},k=function(){function e(t,r,n){(0,l.Z)(this,e),this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new y.e(100),this.url=t,this.config=r,this.fieldMap=n}return(0,c.Z)(e,[{key:"getSymbolFields",value:function(){return this._symbolFields}},{key:"getSymbolAsync",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r){var n,a,i,u,l,c,p,y,b,d,v,g,k,x,_,Z,w,S,M,C,P,I,R,L,N,T,q=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r)),e.prev=1,e.next=4,this._dictionaryPromise;case 4:n=e.sent,e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(1),!(0,h.u)(e.t0)){e.next=11;break}return e.abrupt("return",(this._dictionaryPromise=null,null));case 11:if(a={},this.fieldMap){i=(0,o.Z)(this._symbolFields);try{for(i.s();!(u=i.n()).done;)l=u.value,(c=this.fieldMap[l])&&null!=t.attributes[c]?(p=""+t.attributes[c],a[l]=p):a[l]=""}catch(s){i.e(s)}finally{i.f()}}if((y=n(a,r))&&"string"==typeof y){e.next=16;break}return e.abrupt("return",null);case 16:if(b=(0,h.$)(y).toString(),!(d=this._symbolCache.get(b))){e.next=19;break}return e.abrupt("return",(d.catch((function(){q._symbolCache.pop(b)})),d));case 19:v=y.split(";"),g=[],k=[],x=(0,o.Z)(v),e.prev=21,x.s();case 23:if((_=x.n()).done){e.next=55;break}if(!(Z=_.value)){e.next=53;break}if(!Z.includes("po:")){e.next=31;break}3===(w=Z.substr(3).split("|")).length&&(S=w[0],M=w[1],C=w[2],"DashTemplate"===M?C=C.split(" ").map((function(e){return Number(e)})):"Color"===M?(P=new f.l(C).toRgba(),C=[P[0],P[1],P[2],255*P[3]]):C=Number(C),k.push({primitiveName:S,propertyName:M,value:C})),e.next=53;break;case 31:if(!Z.includes("|")){e.next=52;break}I=(0,o.Z)(Z.split("|")),e.prev=33,I.s();case 35:if((R=I.n()).done){e.next=42;break}if(L=R.value,!this._itemNames.has(L)){e.next=40;break}return g.push(L),e.abrupt("break",42);case 40:e.next=35;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(33),I.e(e.t1);case 47:return e.prev=47,I.f(),e.finish(47);case 50:e.next=53;break;case 52:this._itemNames.has(Z)&&g.push(Z);case 53:e.next=23;break;case 55:e.next=60;break;case 57:e.prev=57,e.t2=e.catch(21),x.e(e.t2);case 60:return e.prev=60,x.f(),e.finish(60);case 63:return N=!(0,m.r)(t.geometry)||!t.geometry.hasZ&&"point"===t.geometry.type,T=this._cimPartsToCIMSymbol(g,k,N,r),e.abrupt("return",(this._symbolCache.put(b,T,1),T));case 65:case"end":return e.stop()}}),e,this,[[1,7],[21,57,60,63],[33,44,47,50]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchResources",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,u,l,c,f,y,d,g,k,x,_,Z,w,S,M,C=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dictionaryPromise){e.next=2;break}return e.abrupt("return",this._dictionaryPromise);case 2:if(this.url){e.next=4;break}return e.abrupt("return",void v.error("no valid URL!"));case 4:return r=(0,p.U)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:(0,m.r)(t)?t.signal:null}),e.next=7,Promise.all([r,(0,b.a)()]);case 7:if(n=e.sent,u=(0,i.Z)(n,1),l=u[0].data){e.next=12;break}throw this._dictionaryPromise=null,new h.a("esri.renderers.DictionaryRenderer","Bad dictionary data!");case 12:if(c=l.expression,f=l.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+l.cimRefTemplateUrl,this._itemNames=new Set(l.itemsNames),this._symbolFields=f.symbol,y={},this.config)for(g in d=this.config)y[g]=d[g];if(f.configuration){k=(0,o.Z)(f.configuration);try{for(k.s();!(x=k.n()).done;)_=x.value,y.hasOwnProperty(_.name)||(y[_.name]=_.value)}catch(s){k.e(s)}finally{k.f()}}if(Z=[],(0,m.r)(t)&&t.fields&&this.fieldMap){w=(0,o.Z)(this._symbolFields);try{for(M=function(){var e=S.value,r=C.fieldMap[e],n=t.fields.filter((function(e){return e.name===r}));n.length>0&&Z.push((0,a.Z)((0,a.Z)({},n[0]),{},{name:e}))},w.s();!(S=w.n()).done;)M()}catch(s){w.e(s)}finally{w.f()}}return e.abrupt("return",(this._dictionaryPromise=(0,b.n)(c,(0,m.r)(t)?t.spatialReference:null,Z,y).then((function(e){var t={scale:0};return function(r,n){var a=e.repurposeFeature({geometry:null,attributes:r});return t.scale=(0,m.r)(n)?n.scale:void 0,e.evaluate({$feature:a,$view:t})}})).catch((function(e){return v.error("Creating dictinoary expression failed:",e),null})),this._dictionaryPromise));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_cimPartsToCIMSymbol",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r,n,a){var i,u,l,c,f,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=new Array(t.length),u=0;u<t.length;u++)i[u]=this._getSymbolPart(t[u],a);return e.next=4,Promise.all(i);case 4:l=e.sent,c=this.fieldMap,f=(0,o.Z)(l);try{for(f.s();!(p=f.n()).done;)x(p.value,c)}catch(s){f.e(s)}finally{f.f()}return e.abrupt("return",new d.d({data:this._combineSymbolParts(l,r,n)}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_getSymbolPart",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ongoingRequests.has(t)){e.next=2;break}return e.abrupt("return",this._ongoingRequests.get(t).then((function(e){return e.data})));case 2:return n=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),i=(0,p.U)(n,(0,a.Z)({responseType:"json",query:{f:"json"}},r)),this._ongoingRequests.set(t,i),e.prev=4,e.next=7,i;case 7:return e.abrupt("return",e.sent.data);case 10:throw e.prev=10,e.t0=e.catch(4),this._ongoingRequests.delete(t),e.t0;case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_combineSymbolParts",value:function(e,t,r){if(!e||0===e.length)return null;var i=(0,a.Z)({},e[0]);if(e.length>1){i.symbolLayers=[];var s,u=(0,o.Z)(e);try{for(u.s();!(s=u.n()).done;){var l,c=s.value;(l=i.symbolLayers).unshift.apply(l,(0,n.Z)(c.symbolLayers))}}catch(f){u.e(f)}finally{u.f()}}return r&&(i.callout=g),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}}]),e}();function x(e,t){if(e){var r=e.symbolLayers;if(r)for(var n=r.length;n--;){var a=r[n];a&&!1!==a.enable&&"CIMVectorMarker"===a.type&&_(a,t)}}}function _(e,t){var r=e.markerGraphics;if(r){var n,a=(0,o.Z)(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i){var s=i.symbol;if(s)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":x(s,t);break;case"CIMTextSymbol":s.fieldMap=t}}}}catch(u){a.e(u)}finally{a.f()}}}}}]);
//# sourceMappingURL=8210.9f87228d.chunk.js.map