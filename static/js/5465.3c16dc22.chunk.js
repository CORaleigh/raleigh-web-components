/*! For license information please see 5465.3c16dc22.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5465,1805],{60369:function(e,t,n){n.d(t,{a:function(){return p},b:function(){return y},c:function(){return h}});var i,r=n(15671),o=n(43144),a=n(60136),l=n(29388),s=n(48848),u=(n(93661),n(92072)),c=i=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).active=!1,i.className=null,i.disabled=!1,i.id=null,i.indicator=!1,i.title=null,i.type=null,i.visible=!0,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),n}((0,u.s)(s.m));(0,s.e)([(0,s.y)()],c.prototype,"active",void 0),(0,s.e)([(0,s.y)()],c.prototype,"className",void 0),(0,s.e)([(0,s.y)()],c.prototype,"disabled",void 0),(0,s.e)([(0,s.y)()],c.prototype,"id",void 0),(0,s.e)([(0,s.y)()],c.prototype,"indicator",void 0),(0,s.e)([(0,s.y)()],c.prototype,"title",void 0),(0,s.e)([(0,s.y)()],c.prototype,"type",void 0),(0,s.e)([(0,s.y)()],c.prototype,"visible",void 0);var d,h=c=i=(0,s.e)([(0,s.n)("esri.support.actions.ActionBase")],c),v=d=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).image=null,i.type="button",i}return(0,o.Z)(n,[{key:"clone",value:function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),n}(h);(0,s.e)([(0,s.y)()],v.prototype,"image",void 0);var f,p=v=d=(0,s.e)([(0,s.n)("esri.support.Action.ActionButton")],v),g=f=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).image=null,i.type="toggle",i.value=!1,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new f({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),n}(h);(0,s.e)([(0,s.y)()],g.prototype,"image",void 0),(0,s.e)([(0,s.y)()],g.prototype,"value",void 0);var y=g=f=(0,s.e)([(0,s.n)("esri.support.Action.ActionToggle")],g)},630:function(e,t,n){n.d(t,{a:function(){return h},c:function(){return c},d:function(){return v}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),l=n(48848),s=n(93661),u=n(50690),c=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._handles=new l.X,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,r.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this._handles.destroy()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,u.l)}},{key:"addWhen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,u.f)}},{key:"addOnCollectionChange",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.initial,o=void 0!==r&&r,a=i.final,l=void 0!==a&&a,s=++this._handleId;return this._handles.add([(0,u.a)(e,"after-changes",this._createSyncUpdatingCallback(),u.U),(0,u.a)(e,"change",t,{onListenerAdd:o?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:l?function(e){return t({added:[],removed:e.toArray()})}:void 0})],s),{remove:function(){return n._handles.remove(s)}}}},{key:"addPromise",value:function(e){var t=this;if((0,s.t)(e))return e;var n=++this._handleId;this._handles.add({remove:function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t._handles.has(d)||t._set("updating",!1))}},n),this._pendingPromises.add(e),this._set("updating",!0);var i=function(){return t._handles.remove(n)};return e.then(i,i),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,o);var a=r(e,t,i);return this._handles.add(a,o),{remove:function(){return n._handles.remove(o)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var n=this._createSyncUpdatingCallback(),i=(0,u.l)(e,n,{sync:!0,equals:function(){return!1}});return this._handles.add(i,t),i}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e._handles.remove(d),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e._handles.add((0,l.k)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e._handles.remove(d))})),d)}}}]),n}(l.m);(0,l.e)([(0,l.y)({readOnly:!0})],c.prototype,"updating",void 0),c=(0,l.e)([(0,l.n)("esri.core.support.WatchUpdatingTracking")],c);var d=-42,h=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new l.X}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new c}}]),n}(e);return(0,l.e)([(0,l.y)({readOnly:!0})],t.prototype,"handles",null),(0,l.e)([(0,l.y)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,l.e)([(0,l.n)("esri.core.HandleOwner")],t),t},v=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(h(l.m));v=(0,l.e)([(0,l.n)("esri.core.HandleOwner")],v)},92072:function(e,t,n){n.d(t,{i:function(){return d},o:function(){return h},s:function(){return c}});var i=n(43144),r=n(15671),o=n(97326),a=n(60136),l=n(29388),s=n(48848),u=0,c=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty((0,o.Z)(e),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+u++}),e}return(0,i.Z)(n)}(e);return t=(0,s.e)([(0,s.n)("esri.core.Identifiable")],t)},d=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty((0,o.Z)(e),"uid",{writable:!1,configurable:!1,value:u++}),e}return(0,i.Z)(n)}(e);return t=(0,s.e)([(0,s.n)("esri.core.NumericIdentifiable")],t),t},h=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}(c(function(){return(0,i.Z)((function e(){(0,r.Z)(this,e)}))}()));h=(0,s.e)([(0,s.n)("esri.core.Identifiable")],h)},95465:function(e,t,n){n.r(t);var i,r=n(93433),o=n(4942),a=n(1413),l=n(97326),s=n(74165),u=n(15861),c=n(15671),d=n(43144),h=n(60136),v=n(29388),f=n(48848),p=n(93314),g=n(93661),y=n(50690),m=n(42467),b=n(37856),_=n(630),w=n(92072),k=n(60369),S=n(90429),I=n(3719),C=n(60530),E=(n(15751),n(46737),n(53586),n(40558),n(65094),n(52113),n(75255),n(42667),n(61118),i=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).displayValueEnabled=!1,i.max=1,i.min=0,i.step=.1,i.type="slider",i.value=null,i}return(0,d.Z)(n,[{key:"clone",value:function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}}]),n}(k.c));(0,f.e)([(0,f.y)()],E.prototype,"displayValueEnabled",void 0),(0,f.e)([(0,f.y)()],E.prototype,"max",void 0),(0,f.e)([(0,f.y)()],E.prototype,"min",void 0),(0,f.e)([(0,f.y)()],E.prototype,"step",void 0),(0,f.e)([(0,f.y)()],E.prototype,"value",void 0);var A=E=i=(0,f.e)([(0,f.n)("esri.support.Action.ActionSlider")],E),T="hide",D="hide-children";function M(e){if(e)return null!=e.listMode?e.listMode:void 0}function O(e){if(e)return"type"in e?e.listMode!==D&&"wmts"!==e.type?"group"===e.type?"layers":"sublayers":void 0:"sublayers"}function x(e,t){e&&e.sort((function(e,n){var i=t.indexOf(e.uid),r=t.indexOf(n.uid);return i>r?-1:i<r?1:0}))}function L(e){var t=null===e||void 0===e?void 0:e.layer;return t&&"group"===t.type?t.layers:null}function P(e,t){var n,i=null===(n=e.layer)||void 0===n?void 0:n.uid;return i&&t.find((function(e){var t;return(null===(t=e.layer)||void 0===t?void 0:t.uid)===i}))}function N(e){var t=function(e){return!(null===e||void 0===e||!e.layer)}(e)?e:null,n=null===e||void 0===e?void 0:e.parent,i="map-image"===(null===n||void 0===n?void 0:n.type)&&t.source;return i&&n?{layer:n,title:"",sublayerIds:[i.mapLayerId]}:{layer:e,title:""}}var Z="esri-layer-list-panel",R="esri-layer-list-panel__content",F="esri-layer-list-panel__content--legend",X="esri-layer-list-panel__content--string",B="esri-layer-list-panel__content--html-element",H="esri-layer-list-panel__content--widget",V=function(e){(0,h.Z)(i,e);var t=(0,v.Z)(i);function i(e,n){var r;return(0,c.Z)(this,i),(r=t.call(this,e,n))._legend=null,r._handles=new f.X,r.content=null,r.image=null,r.listItem=null,r.open=!1,r.visible=!0,r}return(0,d.Z)(i,[{key:"initialize",value:function(){var e=this;this.addHandles((0,y.l)((function(){return e.content}),(function(t){return e._createLegend(t)}),y.h))}},{key:"destroy",value:function(){var e=this._legend;e&&e.destroy(),this._legend=null}},{key:"className",get:function(){var e=this.image,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""},set:function(e){this._override("className",e)}},{key:"disabled",get:function(){var e,t=this.listItem,n=this._legend,i=this.content;return!t||!(Array.isArray(i)&&i.length>1)&&!!n&&(!(null!==(e=n.activeLayerInfos)&&void 0!==e&&e.length)||!t.visibleAtCurrentScale)},set:function(e){this._overrideIfSome("disabled",e)}},{key:"title",get:function(){var e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){this._override("title",e)}},{key:"render",value:function(){return(0,m.n)("div",{class:Z},this._renderContents())}},{key:"_renderContent",value:function(e){var t=this._legend,n=this.disabled;return!e||n?null:"legend"===e&&t?(0,m.n)("div",{class:this.classes(R,F),key:t},t.render()):"string"==typeof e?(0,m.n)("div",{class:this.classes(R,X),key:e,innerHTML:e}):(0,S.e)(e)?(0,m.n)("div",{class:this.classes(R,H),key:e},e.render()):e instanceof HTMLElement?(0,m.n)("div",{class:this.classes(R,B),key:e,bind:e,afterCreate:this._attachToNode}):null}},{key:"_renderContents",value:function(){var e=this,t=this.content;return Array.isArray(t)?t.map((function(t){return e._renderContent(t)})):this._renderContent(t)}},{key:"_getLegendOptions",value:function(){var e=this.listItem;if(!e)return{};var t=e.layer,n=e.view;return t&&n?{view:n,layerInfos:[N(t)]}:{}}},{key:"_createLegend",value:function(e){var t=this;this._hasLegend(e)&&!this._legend&&Promise.all([n.e(9557),n.e(4662),n.e(3103),n.e(7944),n.e(5577),n.e(2821),n.e(642),n.e(2959),n.e(2474),n.e(4384),n.e(6817),n.e(3116),n.e(7997),n.e(9769),n.e(6910),n.e(6032)]).then(n.bind(n,56032)).then((function(e){var n=e.default,i=t._handles,r=t.listItem,o=new n(t._getLegendOptions());t._legend=o,t.notifyChange("className"),t.notifyChange("title");var a=(0,y.l)((function(){var e,t;return[null===r||void 0===r?void 0:r.view,null===r||void 0===r?void 0:r.layer,null===r||void 0===r||null===(e=r.layer)||void 0===e?void 0:e.source,null===r||void 0===r||null===(t=r.layer)||void 0===t?void 0:t.parent]}),(function(){return t._updateLegend(o)}),y.h);i.add(a,"legends"),t.scheduleRender()}))}},{key:"_hasLegend",value:function(e){var t="legend";return e===t||!!Array.isArray(e)&&e.includes(t)}},{key:"_attachToNode",value:function(e){e.appendChild(this)}},{key:"_updateLegend",value:function(e){e.set(this._getLegendOptions()),this.scheduleRender()}},{key:"_getWidget",value:function(e){return"legend"===e?this._legend:(0,S.e)(e)?e:null}},{key:"_getFirstWidget",value:function(){var e=this,t=this.content;if(Array.isArray(t)){var n=null;return t.some((function(t){var i=e._getWidget(t);return i&&(n=i),!!i})),n}return this._getWidget(t)}}]),i}((0,w.s)(m.M));(0,f.e)([(0,f.y)()],V.prototype,"_legend",void 0),(0,f.e)([(0,f.y)()],V.prototype,"className",null),(0,f.e)([(0,f.y)()],V.prototype,"content",void 0),(0,f.e)([(0,f.y)()],V.prototype,"disabled",null),(0,f.e)([(0,f.y)()],V.prototype,"image",void 0),(0,f.e)([(0,f.y)()],V.prototype,"listItem",void 0),(0,f.e)([(0,f.y)()],V.prototype,"title",null),(0,f.e)([(0,f.y)()],V.prototype,"open",void 0),(0,f.e)([(0,f.y)()],V.prototype,"visible",void 0);var U,Y=V=(0,f.e)([(0,f.n)("esri.widgets.LayerList.ListItemPanel")],V),j=p.j.ofType({key:"type",defaultKeyValue:"button",base:k.c,typeMap:{button:k.a,toggle:k.b,slider:A}}),W=p.j.ofType(j),z="layer",G="child-list-mode",q=U=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).actionsSections=new W,i.actionsOpen=!1,i.checkPublishStatusEnabled=!1,i.children=new(p.j.ofType(U)),i.childrenSortable=!0,i.hidden=!1,i.layer=null,i.layerView=null,i.listItemCreatedFunction=null,i.open=!1,i.panel=null,i.parent=null,i.sortable=!0,i.view=null,i}return(0,d.Z)(n,[{key:"initialize",value:function(){var e=this;if(this.handles.add([(0,y.l)((function(){return e.layer}),(function(t){return e._watchLayerProperties(t)}),y.h),(0,y.l)((function(){return e.checkPublishStatusEnabled}),(function(t){return e._updateChildrenPublishing(t)}),y.h),(0,y.l)((function(){return e.view}),(function(t){return e._updateChildrenView(t)}),y.h),(0,y.l)((function(){return e.panel}),(function(t){return e._setListItemOnPanel(t)}),y.h),(0,y.l)((function(){return[e.layer,e.view]}),(function(){return e._getLayerView()}),y.h)]),"function"==typeof this.listItemCreatedFunction){var t={item:this};this.listItemCreatedFunction.call(null,t)}}},{key:"destroy",value:function(){this.view=null}},{key:"connectionStatus",get:function(){var e=this.layerView;if(!this.publishing&&e&&"connectionStatus"in e)return e.connectionStatus}},{key:"error",get:function(){var e;return null===(e=this.layer)||void 0===e?void 0:e.loadError}},{key:"incompatible",get:function(){var e=this.layerView;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}},{key:"castPanel",value:function(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Y(e):null}},{key:"title",get:function(){var e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(e){this._override("title",e)}},{key:"publishing",get:function(){var e=this.layer;return this.checkPublishStatusEnabled&&e&&"publishingInfo"in e&&"publishing"===e.publishingInfo.status}},{key:"updating",get:function(){var e=this.layerView,t=this.connectionStatus,n=this.layer;return!this.publishing&&!t&&(e?e.updating:"loading"===(null===n||void 0===n?void 0:n.loadStatus)||!1)}},{key:"visible",get:function(){var e;return null===(e=this.layer)||void 0===e?void 0:e.visible},set:function(e){var t=this.layer;t&&(t.visible=e)}},{key:"visibleAtCurrentScale",get:function(){return!function(e,t){if(!e||isNaN(t))return!1;var n=function(e){if(e)return null!=e.minScale?e.minScale:void 0}(e),i=function(e){if(e)return null!=e.maxScale?e.maxScale:void 0}(e),r=!isNaN(n)&&n>0&&t>n,o=!isNaN(i)&&i>0&&t<i;return r||o}(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return function(e){if(!e)return"inherited";var t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";var n=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof n?n?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"}(this.layer)}},{key:"clone",value:function(){return new U({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}},{key:"_setListItemOnPanel",value:function(e){e&&(e.listItem=this)}},{key:"_updateChildrenPublishing",value:function(e){var t=this.children;t&&t.forEach((function(t){return t.checkPublishStatusEnabled=e}))}},{key:"_updateChildrenView",value:function(e){var t=this.children;t&&t.forEach((function(t){return t.view=e}))}},{key:"_addChildren",value:function(e){var t=this;if(this.handles.remove(G),this.children.removeAll(),e){e.forEach((function(n){t.handles.add((0,y.l)((function(){return n.listMode}),(function(){return t._addChildren(e)})),G)}));var n=e.filter((function(e){return"hide"!==M(e)}));this.children.addMany(this._makeChildren(n))}}},{key:"_watchSublayerChanges",value:function(e){var t=this;e&&this.handles.add(e.on("change",(function(){t._addChildren(e)})),z)}},{key:"_initializeChildLayers",value:function(e){this._addChildren(e),this._watchSublayerChanges(e)}},{key:"_makeChildren",value:function(e){var t=this;return e.map((function(e){return function(e){return M(e)!==T}(e)?new U({layer:e,checkPublishStatusEnabled:t.checkPublishStatusEnabled,listItemCreatedFunction:t.listItemCreatedFunction,parent:t,view:t.view}):null})).reverse()}},{key:"_watchLayerProperties",value:function(e){var t=this;if(this.handles&&(this.handles.remove(z),this.handles.remove(G),e))if(this.handles.add((0,y.l)((function(){return e.listMode}),(function(){return t._watchLayerProperties(e)})),z),"hide-children"!==M(e)){var n=O(e);n&&this.handles.add((0,y.l)((function(){return e[n]}),(function(){e.hasOwnProperty(n)&&t._initializeChildLayers(e[n])}),y.h),z)}else this.children.removeAll()}},{key:"_getLayerView",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var t,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.layer,n=this.view,!t||!n){e.next=13;break}return e.prev=2,e.next=5,n.whenLayerView(t);case 5:if((i=e.sent).layer===this.layer){e.next=8;break}return e.abrupt("return");case 8:this._set("layerView",i),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()}]),n}((0,w.s)((0,_.a)(f.m)));(0,f.e)([(0,f.y)({type:W})],q.prototype,"actionsSections",void 0),(0,f.e)([(0,f.y)()],q.prototype,"actionsOpen",void 0),(0,f.e)([(0,f.y)()],q.prototype,"checkPublishStatusEnabled",void 0),(0,f.e)([(0,f.y)({type:p.j})],q.prototype,"children",void 0),(0,f.e)([(0,f.y)()],q.prototype,"childrenSortable",void 0),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"connectionStatus",null),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"error",null),(0,f.e)([(0,f.y)()],q.prototype,"hidden",void 0),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"incompatible",null),(0,f.e)([(0,f.y)()],q.prototype,"layer",void 0),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"layerView",void 0),(0,f.e)([(0,f.y)()],q.prototype,"listItemCreatedFunction",void 0),(0,f.e)([(0,f.y)()],q.prototype,"open",void 0),(0,f.e)([(0,f.y)({type:Y})],q.prototype,"panel",void 0),(0,f.e)([(0,f.c)("panel")],q.prototype,"castPanel",null),(0,f.e)([(0,f.y)()],q.prototype,"parent",void 0),(0,f.e)([(0,f.y)()],q.prototype,"sortable",void 0),(0,f.e)([(0,f.y)()],q.prototype,"title",null),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"publishing",null),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"updating",null),(0,f.e)([(0,f.y)()],q.prototype,"view",void 0),(0,f.e)([(0,f.y)()],q.prototype,"visible",null),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"visibleAtCurrentScale",null),(0,f.e)([(0,f.y)({readOnly:!0})],q.prototype,"visibilityMode",null);var K=q=U=(0,f.e)([(0,f.n)("esri.widgets.LayerList.ListItem")],q),$="view",J="view-layers",Q="map-layers",ee="layer-views",te="layer-list-mode",ne="children",ie=p.j.ofType(K),re=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e))._handles=new f.X,i.checkPublishStatusEnabled=!1,i.listItemCreatedFunction=null,i.operationalItems=new ie,i.view=null,i}return(0,d.Z)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([(0,y.l)((function(){var t;return[e.view,null===(t=e.view)||void 0===t?void 0:t.ready]}),(function(){return e._viewHandles()}),y.h),(0,y.l)((function(){return[e.listItemCreatedFunction,e.checkPublishStatusEnabled]}),(function(){return e._recompileList()}))],$)}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}},{key:"state",get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}},{key:"triggerAction",value:function(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}},{key:"moveListItem",value:function(e,t,n,i){var r,o,a=null===e||void 0===e?void 0:e.layer;if(a){var l=null===(r=this.view)||void 0===r||null===(o=r.map)||void 0===o?void 0:o.layers,s=t?L(t):l,u=n?L(n):l;if(s&&u){var c=this.operationalItems,d=(null===t||void 0===t?void 0:t.children)||c,h=(null===n||void 0===n?void 0:n.children)||c,v=u.length-i;e.parent=n||null,d.includes(e)&&d.remove(e),s.includes(a)&&s.remove(a),h.includes(e)||h.add(e,v),u.includes(a)||u.add(a,v)}}}},{key:"_createLayerViewHandles",value:function(e){var t=this,n=this._handles;n.remove(ee),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),ee)}},{key:"_createMapLayerHandles",value:function(e){var t=this,n=this._handles;n.remove(Q),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),Q)}},{key:"_createListItem",value:function(e){var t=this.view,n=this.listItemCreatedFunction,i=this.checkPublishStatusEnabled;return new K({checkPublishStatusEnabled:i,layer:e,listItemCreatedFunction:n,view:t})}},{key:"_removeAllItems",value:function(){var e=this._handles,t=this.operationalItems;t.forEach((function(t){e.remove("".concat(ne,"-").concat(t.uid))})),t.removeAll()}},{key:"_getViewableLayers",value:function(e){if(e)return e.filter((function(e){return"hide"!==M(e)}))}},{key:"_watchLayersListMode",value:function(e){var t=this,n=this._handles;n.remove(te),e&&e.forEach((function(e){"listMode"in e&&n.add((0,y.l)((function(){return e.listMode}),(function(){return t._compileList()})),te)}))}},{key:"_compileList",value:function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);var t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}},{key:"_createNewItems",value:function(e){var t=this,n=this.operationalItems;e.forEach((function(e){n.find((function(t){return t.layer===e}))||n.add(t._createListItem(e))}))}},{key:"_removeItems",value:function(e){var t=this._handles,n=this.operationalItems,i=[];n.forEach((function(n){n&&e&&e.includes(n.layer)||(t.remove("".concat(ne,"-").concat(n.uid)),i.push(n))})),n.removeMany(i)}},{key:"_sortItems",value:function(e){this.operationalItems.sort((function(t,n){var i=e.indexOf(t.layer),r=e.indexOf(n.layer);return i>r?-1:i<r?1:0}))}},{key:"_recompileList",value:function(){this._removeAllItems(),this._compileList()}},{key:"_viewHandles",value:function(){var e=this,t=this._handles,n=this.view;t.remove([Q,ee,J]),this._compileList(),n&&n.ready&&t.add([(0,y.l)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.allLayers}),(function(t){return e._createMapLayerHandles(t)}),y.h),(0,y.l)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.allLayerViews}),(function(t){return e._createLayerViewHandles(t)}),y.h)],J)}}]),n}(b.n.EventedAccessor);(0,f.e)([(0,f.y)()],re.prototype,"checkPublishStatusEnabled",void 0),(0,f.e)([(0,f.y)()],re.prototype,"listItemCreatedFunction",void 0),(0,f.e)([(0,f.y)({type:ie})],re.prototype,"operationalItems",void 0),(0,f.e)([(0,f.y)({readOnly:!0})],re.prototype,"state",null),(0,f.e)([(0,f.y)()],re.prototype,"view",void 0);var oe=re=(0,f.e)([(0,f.n)("esri.widgets.LayerList.LayerListViewModel")],re);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){return se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(){return ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ce.apply(this,arguments)}function de(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function he(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var ve=he(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fe=he(/Edge/i),pe=he(/firefox/i),ge=he(/safari/i)&&!he(/chrome/i)&&!he(/android/i),ye=he(/iP(ad|od|hone)/i),me=he(/chrome/i)&&he(/android/i),be={capture:!1,passive:!1};function _e(e,t,n){e.addEventListener(t,n,!ve&&be)}function we(e,t,n){e.removeEventListener(t,n,!ve&&be)}function ke(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(z){return!1}return!1}}function Se(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ie(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ke(e,t):ke(e,t))||i&&e===n)return e;if(e===n)break}while(e=Se(e))}return null}var Ce,Ee=/\s+/g;function Ae(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(Ee," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(Ee," ")}}function Te(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"===typeof n?"":"px")}}function De(e,t){var n="";if("string"===typeof e)n=e;else do{var i=Te(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Me(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Oe(){var e=document.scrollingElement;return e||document.documentElement}function xe(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var o,a,l,s,u,c,d;if(e!==window&&e.parentNode&&e!==Oe()?(a=(o=e.getBoundingClientRect()).top,l=o.left,s=o.bottom,u=o.right,c=o.height,d=o.width):(a=0,l=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!ve))do{if(r&&r.getBoundingClientRect&&("none"!==Te(r,"transform")||n&&"static"!==Te(r,"position"))){var h=r.getBoundingClientRect();a-=h.top+parseInt(Te(r,"border-top-width")),l-=h.left+parseInt(Te(r,"border-left-width")),s=a+o.height,u=l+o.width;break}}while(r=r.parentNode);if(i&&e!==window){var v=De(r||e),f=v&&v.a,p=v&&v.d;v&&(s=(a/=p)+(c/=p),u=(l/=f)+(d/=f))}return{top:a,left:l,bottom:s,right:u,width:d,height:c}}}function Le(e,t,n){for(var i=Fe(e,!0),r=xe(e)[t];i;){var o=xe(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===Oe())break;i=Fe(i,!1)}return!1}function Pe(e,t,n,i){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Ht.ghost&&(i||a[o]!==Ht.dragged)&&Ie(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function Ne(e,t){for(var n=e.lastElementChild;n&&(n===Ht.ghost||"none"===Te(n,"display")||t&&!ke(n,t));)n=n.previousElementSibling;return n||null}function Ze(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ht.clone||t&&!ke(e,t)||n++;return n}function Re(e){var t=0,n=0,i=Oe();if(e)do{var r=De(e),o=r.a,a=r.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==i&&(e=e.parentNode));return[t,n]}function Fe(e,t){if(!e||!e.getBoundingClientRect)return Oe();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Te(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Oe();if(i||t)return n;i=!0}}}while(n=n.parentNode);return Oe()}function Xe(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Be(e,t){return function(){if(!Ce){var n=arguments,i=this;1===n.length?e.call(i,n[0]):e.apply(i,n),Ce=setTimeout((function(){Ce=void 0}),t)}}}function He(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ve(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var Ue="Sortable"+(new Date).getTime();function Ye(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Te(e,"display")&&e!==Ht.ghost){t.push({target:e,rect:xe(e)});var n=le({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=De(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var r=!1,o=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=xe(n),s=n.prevFromRect,u=n.prevToRect,c=e.rect,d=De(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&Xe(s,l)&&!Xe(a,l)&&(c.top-l.top)/(c.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(c,s,u,i.options)),Xe(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=i.options.animation),i.animate(n,c,l,t)),t&&(r=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){Te(e,"transition",""),Te(e,"transform","");var r=De(this.el),o=r&&r.a,a=r&&r.d,l=(t.left-n.left)/(o||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,Te(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Te(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Te(e,"transition",""),Te(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var je=[],We={initializeByDefault:!0},ze={mount:function(e){for(var t in We)We.hasOwnProperty(t)&&!(t in e)&&(e[t]=We[t]);je.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),je.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";je.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r](le({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](le({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var r in je.forEach((function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var o=new i(e,t,e.options);o.sortable=e,o.options=e.options,e[r]=o,ce(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);"undefined"!==typeof o&&(e.options[r]=o)}},getEventProperties:function(e,t){var n={};return je.forEach((function(i){"function"===typeof i.eventProperties&&ce(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return je.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"===typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))})),i}};var Ge=["evt"],qe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=de(n,Ge);ze.pluginEvent.bind(Ht)(e,t,le({dragEl:$e,parentEl:Je,ghostEl:Qe,rootEl:et,nextEl:tt,lastDownEl:nt,cloneEl:it,cloneHidden:rt,dragStarted:yt,putSortable:ct,activeSortable:Ht.active,originalEvent:i,oldIndex:ot,oldDraggableIndex:lt,newIndex:at,newDraggableIndex:st,hideGhostForTarget:Rt,unhideGhostForTarget:Ft,cloneNowHidden:function(){rt=!0},cloneNowShown:function(){rt=!1},dispatchSortableEvent:function(e){Ke({sortable:t,name:e,originalEvent:i})}},r))};function Ke(e){!function(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,o=e.cloneEl,a=e.toEl,l=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,v=e.putSortable,f=e.extraEventProperties;if(t=t||n&&n[Ue]){var p,g=t.options,y="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||ve||fe?(p=document.createEvent("Event")).initEvent(i,!0,!0):p=new CustomEvent(i,{bubbles:!0,cancelable:!0}),p.to=a||n,p.from=l||n,p.item=r||n,p.clone=o,p.oldIndex=s,p.newIndex=u,p.oldDraggableIndex=c,p.newDraggableIndex=d,p.originalEvent=h,p.pullMode=v?v.lastPutMode:void 0;var m=le(le({},f),ze.getEventProperties(i,t));for(var b in m)p[b]=m[b];n&&n.dispatchEvent(p),g[y]&&g[y].call(t,p)}}(le({putSortable:ct,cloneEl:it,targetEl:$e,rootEl:et,oldIndex:ot,oldDraggableIndex:lt,newIndex:at,newDraggableIndex:st},e))}var $e,Je,Qe,et,tt,nt,it,rt,ot,at,lt,st,ut,ct,dt,ht,vt,ft,pt,gt,yt,mt,bt,_t,wt,kt=!1,St=!1,It=[],Ct=!1,Et=!1,At=[],Tt=!1,Dt=[],Mt="undefined"!==typeof document,Ot=ye,xt=fe||ve?"cssFloat":"float",Lt=Mt&&!me&&!ye&&"draggable"in document.createElement("div"),Pt=function(){if(Mt){if(ve)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Nt=function(e,t){var n=Te(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Pe(e,0,t),o=Pe(e,1,t),a=r&&Te(r),l=o&&Te(o),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+xe(r).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+xe(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=i&&"none"===n[xt]||o&&"none"===n[xt]&&s+u>i)?"vertical":"horizontal"},Zt=function(e){function t(e,n){return function(i,r,o,a){var l=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(i,r,o,a),n)(i,r,o,a);var s=(n?i:r).options.group.name;return!0===e||"string"===typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},i=e.group;i&&"object"==se(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Rt=function(){!Pt&&Qe&&Te(Qe,"display","none")},Ft=function(){!Pt&&Qe&&Te(Qe,"display","")};Mt&&!me&&document.addEventListener("click",(function(e){if(St)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),St=!1,!1}),!0);var Xt=function(e){if($e){var t=function(e,t){var n;return It.some((function(i){var r=i[Ue].options.emptyInsertThreshold;if(r&&!Ne(i)){var o=xe(i),a=e>=o.left-r&&e<=o.right+r,l=t>=o.top-r&&t<=o.bottom+r;return a&&l?n=i:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Ue]._onDragOver(n)}}},Bt=function(e){$e&&$e.parentNode[Ue]._isOutsideThisEl(e.target)};function Ht(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ce({},t),e[Ue]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Nt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ht.supportPointer&&"PointerEvent"in window&&!ge,emptyInsertThreshold:5};for(var i in ze.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var r in Zt(t),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Lt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_e(e,"pointerdown",this._onTapStart):(_e(e,"mousedown",this._onTapStart),_e(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_e(e,"dragover",this),_e(e,"dragenter",this)),It.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ce(this,Ye())}function Vt(e,t,n,i,r,o,a,l){var s,u,c=e[Ue],d=c.options.onMove;return!window.CustomEvent||ve||fe?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=i,s.related=r||t,s.relatedRect=o||xe(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),d&&(u=d.call(c,s,a)),u}function Ut(e){e.draggable=!1}function Yt(){Tt=!1}function jt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Wt(e){return setTimeout(e,0)}function zt(e){return clearTimeout(e)}Ht.prototype={constructor:Ht,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(mt=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,$e):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(function(e){Dt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&Dt.push(i)}}(n),!$e&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!ge||!l||"SELECT"!==l.tagName.toUpperCase())&&(!(l=Ie(l,i.draggable,n,!1))||!l.animated)&&nt!==l){if(ot=Ze(l),lt=Ze(l,i.draggable),"function"===typeof u){if(u.call(this,e,l,this))return Ke({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),qe("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(i){if(i=Ie(s,i.trim(),n,!1))return Ke({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:n,toEl:n}),qe("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!Ie(s,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var i,r=this,o=r.el,a=r.options,l=o.ownerDocument;if(n&&!$e&&n.parentNode===o){var s=xe(n);if(et=o,Je=($e=n).parentNode,tt=$e.nextSibling,nt=n,ut=a.group,Ht.dragged=$e,dt={target:$e,clientX:(t||e).clientX,clientY:(t||e).clientY},pt=dt.clientX-s.left,gt=dt.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,$e.style["will-change"]="all",i=function(){qe("delayEnded",r,{evt:e}),Ht.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!pe&&r.nativeDraggable&&($e.draggable=!0),r._triggerDragStart(e,t),Ke({sortable:r,name:"choose",originalEvent:e}),Ae($e,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){Me($e,e.trim(),Ut)})),_e(l,"dragover",Xt),_e(l,"mousemove",Xt),_e(l,"touchmove",Xt),_e(l,"mouseup",r._onDrop),_e(l,"touchend",r._onDrop),_e(l,"touchcancel",r._onDrop),pe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$e.draggable=!0),qe("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(fe||ve))i();else{if(Ht.eventCanceled)return void this._onDrop();_e(l,"mouseup",r._disableDelayedDrag),_e(l,"touchend",r._disableDelayedDrag),_e(l,"touchcancel",r._disableDelayedDrag),_e(l,"mousemove",r._delayedDragTouchMoveHandler),_e(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&_e(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$e&&Ut($e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?_e(document,"pointermove",this._onTouchMove):_e(document,t?"touchmove":"mousemove",this._onTouchMove):(_e($e,"dragend",this),_e(et,"dragstart",this._onDragStart));try{document.selection?Wt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(kt=!1,et&&$e){qe("dragStarted",this,{evt:t}),this.nativeDraggable&&_e(document,"dragover",Bt);var n=this.options;!e&&Ae($e,n.dragClass,!1),Ae($e,n.ghostClass,!0),Ht.active=this,e&&this._appendGhost(),Ke({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ht){this._lastX=ht.clientX,this._lastY=ht.clientY,Rt();for(var e=document.elementFromPoint(ht.clientX,ht.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ht.clientX,ht.clientY))!==t;)t=e;if($e.parentNode[Ue]._isOutsideThisEl(e),t)do{if(t[Ue]){if(t[Ue]._onDragOver({clientX:ht.clientX,clientY:ht.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ft()}},_onTouchMove:function(e){if(dt){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=Qe&&De(Qe,!0),a=Qe&&o&&o.a,l=Qe&&o&&o.d,s=Ot&&wt&&Re(wt),u=(r.clientX-dt.clientX+i.x)/(a||1)+(s?s[0]-At[0]:0)/(a||1),c=(r.clientY-dt.clientY+i.y)/(l||1)+(s?s[1]-At[1]:0)/(l||1);if(!Ht.active&&!kt){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Qe){o?(o.e+=u-(vt||0),o.f+=c-(ft||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Te(Qe,"webkitTransform",d),Te(Qe,"mozTransform",d),Te(Qe,"msTransform",d),Te(Qe,"transform",d),vt=u,ft=c,ht=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Qe){var e=this.options.fallbackOnBody?document.body:et,t=xe($e,!0,Ot,!0,e),n=this.options;if(Ot){for(wt=e;"static"===Te(wt,"position")&&"none"===Te(wt,"transform")&&wt!==document;)wt=wt.parentNode;wt!==document.body&&wt!==document.documentElement?(wt===document&&(wt=Oe()),t.top+=wt.scrollTop,t.left+=wt.scrollLeft):wt=Oe(),At=Re(wt)}Ae(Qe=$e.cloneNode(!0),n.ghostClass,!1),Ae(Qe,n.fallbackClass,!0),Ae(Qe,n.dragClass,!0),Te(Qe,"transition",""),Te(Qe,"transform",""),Te(Qe,"box-sizing","border-box"),Te(Qe,"margin",0),Te(Qe,"top",t.top),Te(Qe,"left",t.left),Te(Qe,"width",t.width),Te(Qe,"height",t.height),Te(Qe,"opacity","0.8"),Te(Qe,"position",Ot?"absolute":"fixed"),Te(Qe,"zIndex","100000"),Te(Qe,"pointerEvents","none"),Ht.ghost=Qe,e.appendChild(Qe),Te(Qe,"transform-origin",pt/parseInt(Qe.style.width)*100+"% "+gt/parseInt(Qe.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;qe("dragStart",this,{evt:e}),Ht.eventCanceled?this._onDrop():(qe("setupClone",this),Ht.eventCanceled||((it=Ve($e)).removeAttribute("id"),it.draggable=!1,it.style["will-change"]="",this._hideClone(),Ae(it,this.options.chosenClass,!1),Ht.clone=it),n.cloneId=Wt((function(){qe("clone",n),Ht.eventCanceled||(n.options.removeCloneOnHide||et.insertBefore(it,$e),n._hideClone(),Ke({sortable:n,name:"clone"}))})),!t&&Ae($e,r.dragClass,!0),t?(St=!0,n._loopId=setInterval(n._emulateDragOver,50)):(we(document,"mouseup",n._onDrop),we(document,"touchend",n._onDrop),we(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,$e)),_e(document,"drop",n),Te($e,"transform","translateZ(0)")),kt=!0,n._dragStartId=Wt(n._dragStarted.bind(n,t,e)),_e(document,"selectstart",n),yt=!0,ge&&Te(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,o=this.el,a=e.target,l=this.options,s=l.group,u=Ht.active,c=ut===s,d=l.sort,h=ct||u,v=this,f=!1;if(!Tt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Ie(a,l.draggable,o,!0),D("dragOver"),Ht.eventCanceled)return f;if($e.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||v._ignoreWhileAnimating===a)return O(!1);if(St=!1,u&&!l.disabled&&(c?d||(i=Je!==et):ct===this||(this.lastPutMode=ut.checkPull(this,u,$e,e))&&s.checkPut(this,u,$e,e))){if(r="vertical"===this._getDirection(e,a),t=xe($e),D("dragOverValid"),Ht.eventCanceled)return f;if(i)return Je=et,M(),this._hideClone(),D("revert"),Ht.eventCanceled||(tt?et.insertBefore($e,tt):et.appendChild($e)),O(!0);var p=Ne(o,l.draggable);if(!p||function(e,t,n){var i=xe(Ne(n.el,n.options.draggable)),r=10;return t?e.clientX>i.right+r||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+r}(e,r,this)&&!p.animated){if(p===$e)return O(!1);if(p&&o===e.target&&(a=p),a&&(n=xe(a)),!1!==Vt(et,o,$e,t,a,n,e,!!a))return M(),p&&p.nextSibling?o.insertBefore($e,p.nextSibling):o.appendChild($e),Je=o,x(),O(!0)}else if(p&&function(e,t,n){var i=xe(Pe(n.el,0,n.options,!0)),r=10;return t?e.clientX<i.left-r||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-r||e.clientY<i.bottom&&e.clientX<i.left}(e,r,this)){var g=Pe(o,0,l,!0);if(g===$e)return O(!1);if(n=xe(a=g),!1!==Vt(et,o,$e,t,a,n,e,!1))return M(),o.insertBefore($e,g),Je=o,x(),O(!0)}else if(a.parentNode===o){n=xe(a);var y,m,b,_=$e.parentNode!==o,w=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return i===a||r===l||i+o/2===a+s/2}($e.animated&&$e.toRect||t,a.animated&&a.toRect||n,r),k=r?"top":"left",S=Le(a,"top","top")||Le($e,"top","top"),I=S?S.scrollTop:void 0;if(mt!==a&&(m=n[k],Ct=!1,Et=!w&&l.invertSwap||_),y=function(e,t,n,i,r,o,a,l){var s=i?e.clientY:e.clientX,u=i?n.height:n.width,c=i?n.top:n.left,d=i?n.bottom:n.right,h=!1;if(!a)if(l&&_t<u*r){if(!Ct&&(1===bt?s>c+u*o/2:s<d-u*o/2)&&(Ct=!0),Ct)h=!0;else if(1===bt?s<c+_t:s>d-_t)return-bt}else if(s>c+u*(1-r)/2&&s<d-u*(1-r)/2)return function(e){return Ze($e)<Ze(e)?1:-1}(t);if((h=h||a)&&(s<c+u*o/2||s>d-u*o/2))return s>c+u/2?1:-1;return 0}(e,a,n,r,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Et,mt===a),0!==y){var C=Ze($e);do{C-=y,b=Je.children[C]}while(b&&("none"===Te(b,"display")||b===Qe))}if(0===y||b===a)return O(!1);mt=a,bt=y;var E=a.nextElementSibling,A=!1,T=Vt(et,o,$e,t,a,n,e,A=1===y);if(!1!==T)return 1!==T&&-1!==T||(A=1===T),Tt=!0,setTimeout(Yt,30),M(),A&&!E?o.appendChild($e):a.parentNode.insertBefore($e,A?E:a),S&&He(S,0,I-S.scrollTop),Je=$e.parentNode,void 0===m||Et||(_t=Math.abs(m-xe(a)[k])),x(),O(!0)}if(o.contains($e))return O(!1)}return!1}function D(l,s){qe(l,v,le({evt:e,isOwner:c,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:a,completed:O,onMove:function(n,i){return Vt(et,o,$e,t,n,xe(n),e,i)},changed:x},s))}function M(){D("dragOverAnimationCapture"),v.captureAnimationState(),v!==h&&h.captureAnimationState()}function O(t){return D("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(v),v!==h&&(Ae($e,ct?ct.options.ghostClass:u.options.ghostClass,!1),Ae($e,l.ghostClass,!0)),ct!==v&&v!==Ht.active?ct=v:v===Ht.active&&ct&&(ct=null),h===v&&(v._ignoreWhileAnimating=a),v.animateAll((function(){D("dragOverAnimationComplete"),v._ignoreWhileAnimating=null})),v!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(a===$e&&!$e.animated||a===o&&!a.animated)&&(mt=null),l.dragoverBubble||e.rootEl||a===document||($e.parentNode[Ue]._isOutsideThisEl(e.target),!t&&Xt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function x(){at=Ze($e),st=Ze($e,l.draggable),Ke({sortable:v,name:"change",toEl:o,newIndex:at,newDraggableIndex:st,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){we(document,"mousemove",this._onTouchMove),we(document,"touchmove",this._onTouchMove),we(document,"pointermove",this._onTouchMove),we(document,"dragover",Xt),we(document,"mousemove",Xt),we(document,"touchmove",Xt)},_offUpEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;at=Ze($e),st=Ze($e,n.draggable),qe("drop",this,{evt:e}),Je=$e&&$e.parentNode,at=Ze($e),st=Ze($e,n.draggable),Ht.eventCanceled||(kt=!1,Et=!1,Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),zt(this.cloneId),zt(this._dragStartId),this.nativeDraggable&&(we(document,"drop",this),we(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ge&&Te(document.body,"user-select",""),Te($e,"transform",""),e&&(yt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Qe&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),(et===Je||ct&&"clone"!==ct.lastPutMode)&&it&&it.parentNode&&it.parentNode.removeChild(it),$e&&(this.nativeDraggable&&we($e,"dragend",this),Ut($e),$e.style["will-change"]="",yt&&!kt&&Ae($e,ct?ct.options.ghostClass:this.options.ghostClass,!1),Ae($e,this.options.chosenClass,!1),Ke({sortable:this,name:"unchoose",toEl:Je,newIndex:null,newDraggableIndex:null,originalEvent:e}),et!==Je?(at>=0&&(Ke({rootEl:Je,name:"add",toEl:Je,fromEl:et,originalEvent:e}),Ke({sortable:this,name:"remove",toEl:Je,originalEvent:e}),Ke({rootEl:Je,name:"sort",toEl:Je,fromEl:et,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:Je,originalEvent:e})),ct&&ct.save()):at!==ot&&at>=0&&(Ke({sortable:this,name:"update",toEl:Je,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:Je,originalEvent:e})),Ht.active&&(null!=at&&-1!==at||(at=ot,st=lt),Ke({sortable:this,name:"end",toEl:Je,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){qe("nulling",this),et=$e=Je=Qe=tt=it=nt=rt=dt=ht=yt=at=st=ot=lt=mt=bt=ct=ut=Ht.dragged=Ht.ghost=Ht.clone=Ht.active=null,Dt.forEach((function(e){e.checked=!0})),Dt.length=vt=ft=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":$e&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)Ie(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||jt(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var r=i.children[t];Ie(r,this.options.draggable,i,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ie(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=ze.modifyOption(this,e,t);n[e]="undefined"!==typeof i?i:t,"group"===e&&Zt(n)},destroy:function(){qe("destroy",this);var e=this.el;e[Ue]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),It.splice(It.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!rt){if(qe("hideClone",this),Ht.eventCanceled)return;Te(it,"display","none"),this.options.removeCloneOnHide&&it.parentNode&&it.parentNode.removeChild(it),rt=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(rt){if(qe("showClone",this),Ht.eventCanceled)return;$e.parentNode!=et||this.options.group.revertClone?tt?et.insertBefore(it,tt):et.appendChild(it):et.insertBefore(it,$e),this.options.group.revertClone&&this.animate($e,it),Te(it,"display",""),rt=!1}}else this._hideClone()}},Mt&&_e(document,"touchmove",(function(e){(Ht.active||kt)&&e.cancelable&&e.preventDefault()})),Ht.utils={on:_e,off:we,css:Te,find:Me,is:function(e,t){return!!Ie(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Be,closest:Ie,toggleClass:Ae,clone:Ve,index:Ze,nextTick:Wt,cancelNextTick:zt,detectDirection:Nt,getChild:Pe},Ht.get=function(e){return e[Ue]},Ht.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ht.utils=le(le({},Ht.utils),e.utils)),ze.mount(e)}))},Ht.create=function(e,t){return new Ht(e,t)},Ht.version="1.15.0";var Gt,qt,Kt,$t,Jt,Qt,en=[],tn=!1;function nn(){en.forEach((function(e){clearInterval(e.pid)})),en=[]}function rn(){clearInterval(Qt)}var on=Be((function(e,t,n,i){if(t.scroll){var r,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,u=Oe(),c=!1;qt!==n&&(qt=n,nn(),Gt=t.scroll,r=t.scrollFn,!0===Gt&&(Gt=Fe(n,!0)));var d=0,h=Gt;do{var v=h,f=xe(v),p=f.top,g=f.bottom,y=f.left,m=f.right,b=f.width,_=f.height,w=void 0,k=void 0,S=v.scrollWidth,I=v.scrollHeight,C=Te(v),E=v.scrollLeft,A=v.scrollTop;v===u?(w=b<S&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),k=_<I&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(w=b<S&&("auto"===C.overflowX||"scroll"===C.overflowX),k=_<I&&("auto"===C.overflowY||"scroll"===C.overflowY));var T=w&&(Math.abs(m-o)<=l&&E+b<S)-(Math.abs(y-o)<=l&&!!E),D=k&&(Math.abs(g-a)<=l&&A+_<I)-(Math.abs(p-a)<=l&&!!A);if(!en[d])for(var M=0;M<=d;M++)en[M]||(en[M]={});en[d].vx==T&&en[d].vy==D&&en[d].el===v||(en[d].el=v,en[d].vx=T,en[d].vy=D,clearInterval(en[d].pid),0==T&&0==D||(c=!0,en[d].pid=setInterval(function(){i&&0===this.layer&&Ht.active._onTouchMove(Jt);var t=en[this.layer].vy?en[this.layer].vy*s:0,n=en[this.layer].vx?en[this.layer].vx*s:0;"function"===typeof r&&"continue"!==r.call(Ht.dragged.parentNode[Ue],n,t,e,Jt,en[this.layer].el)||He(en[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==u&&(h=Fe(h,!1)));tn=c}}),30),an=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||r;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ln(){}function sn(){}function un(e,t,n){e.splice(n,0,e.splice(t,1)[0])}ln.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Pe(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:an},ce(ln,{pluginName:"revertOnSpill"}),sn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:an},ce(sn,{pluginName:"removeOnSpill"}),Ht.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?_e(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_e(document,"pointermove",this._handleFallbackAutoScroll):t.touches?_e(document,"touchmove",this._handleFallbackAutoScroll):_e(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?we(document,"dragover",this._handleAutoScroll):(we(document,"pointermove",this._handleFallbackAutoScroll),we(document,"touchmove",this._handleFallbackAutoScroll),we(document,"mousemove",this._handleFallbackAutoScroll)),rn(),nn(),clearTimeout(Ce),Ce=void 0},nulling:function(){Jt=qt=Gt=tn=Qt=Kt=$t=null,en.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(i,r);if(Jt=e,t||this.options.forceAutoScrollFallback||fe||ve||ge){on(e,this.options,o,t);var a=Fe(o,!0);!tn||Qt&&i===Kt&&r===$t||(Qt&&rn(),Qt=setInterval((function(){var o=Fe(document.elementFromPoint(i,r),!0);o!==a&&(a=o,nn()),on(e,n.options,o,t)}),10),Kt=i,$t=r)}else{if(!this.options.bubbleScroll||Fe(o,!0)===Oe())return void nn();on(e,this.options,Fe(o,!1),!1)}}},ce(e,{pluginName:"scroll",initializeByDefault:!0})}),Ht.mount(sn,ln);var cn=p.j.ofType(K),dn="data-sort-filter",hn="data-layer-uid",vn="esri-layer-list esri-widget esri-widget--panel",fn="esri-layer-list--new-ui",pn="esri-layer-list__no-items",gn="esri-layer-list__list",yn="esri-layer-list__list--root",mn="esri-layer-list__list--exclusive",bn="esri-layer-list__list--inherited",_n="esri-layer-list__list--independent",wn="esri-layer-list__item",kn="esri-layer-list__item--has-message",Sn="esri-layer-list__item--invisible",In="esri-layer-list__item--invisible-at-scale",Cn="esri-layer-list__item--has-children",En="esri-layer-list__item--selectable",An="esri-layer-list__item-container",Tn="esri-layer-list__item-actions-menu",Dn="esri-layer-list__item-actions-menu-item",Mn="esri-layer-list__item-actions-menu-item--active",On="esri-layer-list__item-actions",xn="esri-layer-list__item-actions-list",Ln="esri-layer-list__item-action",Pn="esri-layer-list__item-action-icon",Nn="esri-layer-list__item-action-image",Zn="esri-layer-list__item-action-title",Rn="esri-layer-list__action-toggle",Fn="esri-layer-list__action-toggle--on",Xn="esri-layer-list__item-label",Bn="esri-layer-list__item-message",Hn="esri-layer-list__item-title",Vn="esri-layer-list__status-indicator",Un="esri-layer-list__publishing",Yn="esri-layer-list__updating",jn="esri-layer-list__connection-status",Wn="esri-layer-list__connection-status--connected",zn="esri-layer-list__item-toggle",Gn="esri-layer-list__item-toggle-icon",qn="esri-layer-list__item-toggle-icon",Kn="esri-layer-list__item-radio-icon",$n="esri-layer-list__child-toggle",Jn="esri-layer-list__child-toggle--open",Qn="esri-layer-list__child-toggle-icon--opened",ei="esri-layer-list__child-toggle-icon--closed",ti="esri-layer-list__child-toggle-icon--closed-rtl",ni="esri-layer-list--chosen",ii="esri-disabled",ri="esri-disabled-element",oi="esri-hidden",ai="esri-rotating",li="esri-icon-handle-horizontal",si="esri-icon-visible",ui="esri-icon-non-visible",ci="esri-icon-radio-checked",di="esri-icon-radio-unchecked",hi="esri-icon-notice-triangle",vi="esri-icon-down-arrow",fi="esri-icon-right-triangle-arrow",pi="esri-icon-left-triangle-arrow",gi="esri-icon-loading-indicator",yi="esri-icon-default-action",mi="esri-icon-layers",bi="actions",_i="action-section",wi="items",ki="exclusive",Si="inherited";function Ii(e){var t=e.actionsOpen,n=e.children;t&&(e.actionsOpen=!1),n.forEach((function(e){return Ii(e)}))}var Ci="root",Ei={statusIndicators:!0,errors:!1},Ai=function(e){(0,h.Z)(i,e);var t=(0,v.Z)(i);function i(e,n){var r;return(0,c.Z)(this,i),(r=t.call(this,e,n))._handles=new f.X,r._sortableNodes=new Map,r._sortableMap=new Map,r._focusSortUid=null,r._newUI=(0,g.h)("esri-layerlist-new-ui"),r._tooltipReferenceMap=new Map,r.visibleItems=null,r.iconClass=mi,r.listItemCanGiveFunction=null,r.listItemCanReceiveFunction=null,r.messages=null,r.messagesCommon=null,r.multipleSelectionEnabled=!1,r.selectionEnabled=!1,r.selectedItems=new cn,r.viewModel=new oe,r.visibleElements=(0,a.Z)({},Ei),r._onSortableSort=function(e){var t=e.to,n=e.from,i=e.item,o=e.newIndex;n&&t&&(n===t?r._sortLayers(r._sortableMap.get(n.dataset.group)):r._moveLayerFromChildList({to:t,from:n,item:i,newIndex:o}))},r._sortableCanSort=function(e,t){return!(!e.el.dataset.group||!t.el.dataset.group)},r._sortableCanPull=function(e,t,n){var i=(0,l.Z)(r).listItemCanGiveFunction,o={selected:n["data-item"],from:t.el["data-item"],to:e.el["data-item"]};return!r._sortableCanSort(e,t)||"function"!=typeof i||i.call(null,o)},r._sortableCanPut=function(e,t,n){var i=(0,l.Z)(r).listItemCanReceiveFunction,o={selected:n["data-item"],from:t.el["data-item"],to:e.el["data-item"]};return!r._sortableCanSort(e,t)||"function"!=typeof i||i.call(null,o)},r._onSortableEnd=function(e){var t=e.oldIndex,n=e.from,i=e.to,r=e.item;n!==i&&n.insertBefore(r,n.children[t])},r}return(0,d.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.operationalItems;this._setVisibleItems(t),this.addHandles([(0,y.a)((function(){return e.operationalItems}),"change",(function(){return e._itemsChanged(t)})),(0,y.l)((function(){return e.visibleElements}),(function(){return e._itemsChanged(t)})),(0,y.l)((function(){return e.selectionEnabled}),(function(){return e._toggleAllSorting()}),y.h)])}},{key:"loadDependencies",value:function(){return Promise.all([n.e(1903).then(n.bind(n,1903)),Promise.all([n.e(7701),n.e(774)]).then(n.bind(n,20774))])}},{key:"destroy",value:function(){this._destroySortables(),this._tooltipReferenceMap.clear(),this._handles.destroy(),this._handles=null}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"listItemCreatedFunction",get:function(){return this.viewModel.listItemCreatedFunction},set:function(e){this.viewModel.listItemCreatedFunction=e}},{key:"operationalItems",get:function(){return this.viewModel.operationalItems},set:function(e){this.viewModel.operationalItems=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"castVisibleElements",value:function(e){return(0,a.Z)((0,a.Z)({},Ei),e)}},{key:"triggerAction",value:function(e,t){return this.viewModel.triggerAction(e,t)}},{key:"render",value:function(){var e,t,n=this.visibleItems,i=this._newUI,r=null===(e=this.viewModel)||void 0===e?void 0:e.state,a=(t={},(0,o.Z)(t,fn,i),(0,o.Z)(t,oi,"loading"===r),(0,o.Z)(t,ii,"disabled"===r),t),l=this.renderItemTooltips(),s=this.renderItems();return(0,m.n)("div",{class:this.classes(vn,a)},null!==n&&void 0!==n&&n.length?[l,s]:this.renderNoItems())}},{key:"renderItemTooltip",value:function(e){var t=this._tooltipReferenceMap,n=this.messages;return e?(0,m.n)("calcite-tooltip",{label:n.layerIncompatible,referenceElement:t.get(e.uid)},n.layerIncompatibleTooltip):null}},{key:"renderItemTooltipNodes",value:function(e){var t=this,n=e.incompatible,i=e.children;return[n?this.renderItemTooltip(e):null].concat((0,r.Z)(n?[]:null===i||void 0===i?void 0:i.toArray().map((function(e){return t.renderItemTooltipNodes(e)}))))}},{key:"renderItemTooltips",value:function(){var e=this;return this.visibleItems.toArray().map((function(t){return e.renderItemTooltipNodes(t)}))}},{key:"renderNoItems",value:function(){return(0,m.n)("div",{class:pn},this.messages.noItemsToDisplay)}},{key:"renderItems",value:function(){var e=this,t=this.visibleItems,n=this.selectionEnabled,i=this.messages;return(0,m.n)("ul",{"aria-label":i.widgetLabel,role:n?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Ci,bind:this,class:this.classes(gn,yn,_n)},null===t||void 0===t?void 0:t.map((function(t){return e.renderItem(t,null)})).toArray())}},{key:"renderActionsMenuIcon",value:function(e,t){var n=this.messagesCommon,i=(0,o.Z)({},Mn,e.actionsOpen);return(0,m.n)("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Dn,i),tabindex:"0",role:"button","aria-controls":t,"aria-label":n.options,title:n.options},(0,m.n)("span",{"aria-hidden":"true",class:li}))}},{key:"renderActionsMenu",value:function(e,t,n,i){var r=e.panel,o=r&&r.visible?this.renderPanelButton(r):null,a=1===n&&this._getSingleActionButton(t),l=a?this.renderAction({item:e,action:a,singleAction:!0}):null,s=!a&&n?this.renderActionsMenuIcon(e,i):null;return s||o||a?(0,m.n)("div",{key:"actions-menu",class:Tn},o,l,s):null}},{key:"renderChildList",value:function(e,t){var n,i,r=this,a=this.selectionEnabled,l=e.visibilityMode,s=e.children,u=this._hasChildren(e),c=!u&&a&&"group"===(null===(n=e.layer)||void 0===n?void 0:n.type),d=ki,h=Si,v=(i={},(0,o.Z)(i,mn,l===d),(0,o.Z)(i,bn,l===h),(0,o.Z)(i,_n,l!==h&&l!==d),i);return u||c?(0,m.n)("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(gn,v),"aria-expanded":e.open?"true":"false",role:a?"listbox":l===d?"radiogroup":"group",hidden:!e.open&&!c||null},null===s||void 0===s?void 0:s.map((function(t){return r.renderItem(t,e)})).toArray()):null}},{key:"renderChildrenToggle",value:function(e,t){var n=this.messagesCommon,i=this._hasChildren(e),r=(0,o.Z)({},Jn,e.open),a=e.open?n.collapse:n.expand;return i?(0,m.n)("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes($n,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":a,title:a},(0,m.n)("span",{"aria-hidden":"true",class:this.classes(ei,fi)}),(0,m.n)("span",{"aria-hidden":"true",class:this.classes(Qn,vi)}),(0,m.n)("span",{"aria-hidden":"true",class:this.classes(ti,pi)})):null}},{key:"renderItemMessage",value:function(e){var t=this;return e.error?(0,m.n)("div",{key:"esri-layer-list__error",class:Bn,role:"alert"},(0,m.n)("span",{"aria-hidden":"true",class:hi}),this.messages.layerError):e.incompatible?(0,m.n)("div",{key:"esri-layer-list__incompatible",class:Bn,role:"alert"},(0,m.n)("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:hi,afterCreate:function(n){return t._setTooltipReference(n,e)}}),this.messages.layerIncompatible):null}},{key:"renderItemContent",value:function(e,t,n){var i=this.id,r="".concat(i,"_").concat(e.uid),o="".concat(r,"_actions"),a="".concat(r,"__list"),l=e.panel,s=this._filterActions(e.actionsSections),u=this._countActions(s);return[(0,m.n)("div",{key:"list-item-container",class:An},this.renderChildrenToggle(e,a),this.renderLabel(e,t,n),this.renderActionsMenu(e,s,u,o)),this.renderItemMessage(e),u?this.renderActionsSections(e,s,o):null,l&&l.open&&!l.disabled?l.render():null,this.renderChildList(e,a)]}},{key:"renderItem",value:function(e,t){var n,i=this._newUI,r=this.id,l=this.selectionEnabled,s=this.selectedItems,u="".concat("".concat(r,"_").concat(e.uid),"__title"),c=this._hasMessage(e),d=this._hasChildren(e),h=(n={},(0,o.Z)(n,Cn,d),(0,o.Z)(n,kn,!!c),(0,o.Z)(n,Sn,i&&!e.visible),(0,o.Z)(n,In,!e.visibleAtCurrentScale),(0,o.Z)(n,En,l),n);if(l){var v,f,p=(f={},(0,o.Z)(f,hn,null===(v=e.layer)||void 0===v?void 0:v.uid),(0,o.Z)(f,dn,(!e.sortable).toString()),f);return(0,m.n)("li",(0,a.Z)({key:"item-with-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(wn,h),"aria-labelledby":u,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:Ci,tabIndex:0,"aria-selected":P(e,s)?"true":"false",role:"option"},p),this.renderItemContent(e,t,u))}return(0,m.n)("li",{key:"item-no-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(wn,h),"aria-labelledby":u},this.renderItemContent(e,t,u))}},{key:"renderConnectionIcon",value:function(e){var t=e.connectionStatus;return(0,g.r)(t)?(0,m.n)("calcite-icon",{icon:"connected"===t?"check-circle":"offline",scale:"s"}):null}},{key:"renderItemStatus",value:function(e,t){var n;if(!this.visibleElements.statusIndicators)return null;var i=e.connectionStatus,r=e.publishing,a=e.updating&&!t,l=!!i;return(0,m.n)("span",{class:this.classes((n={},(0,o.Z)(n,Vn,!0),(0,o.Z)(n,Un,r),(0,o.Z)(n,Yn,a),(0,o.Z)(n,jn,l),(0,o.Z)(n,Wn,l&&"connected"===i),n)),key:"layer-item-status"},this.renderConnectionIcon(e))}},{key:"renderItemTitle",value:function(e,t){var n=this.messages;if(!e)return null;var i=e.title||n.untitledLayer,r=e.visibleAtCurrentScale?i:"".concat(i," (").concat(n.layerInvisibleAtScale,")");return(0,m.n)("span",{key:"layer-title-container",id:t,title:r,"aria-label":r,class:Hn},i)}},{key:"renderItemToggleIcon",value:function(e,t){var n,i=this._newUI,r=ki,a=t&&t.visibilityMode,l=(n={},(0,o.Z)(n,Gn,i),(0,o.Z)(n,qn,i&&a!==r),(0,o.Z)(n,Kn,i&&a===r),(0,o.Z)(n,ci,a===r&&e.visible),(0,o.Z)(n,di,a===r&&!e.visible),(0,o.Z)(n,si,a!==r&&e.visible),(0,o.Z)(n,ui,a!==r&&!e.visible),n);return(0,m.n)("span",{key:"item-toggle-icon",class:this.classes(l),"aria-hidden":"true"})}},{key:"renderItemToggle",value:function(e,t,n){var i=this.selectionEnabled,r=this.messages,o=ki,a=t&&t.visibilityMode,l=a===o?"radio":"switch";return(0,m.n)("span",i?{key:"item-toggle-selection-enabled",class:zn,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":a,tabIndex:0,title:e.visible?r.hideLayer:r.showLayer,"aria-checked":e.visible?"true":"false",role:l,"aria-labelledby":n}:{key:"item-toggle",class:zn},this.renderItemToggleIcon(e,t))}},{key:"renderLabel",value:function(e,t,n){var i=this.selectionEnabled,r=this._newUI,o=this.messages,a=Si,l=ki,s=null===t||void 0===t?void 0:t.visibilityMode,u=s===l?"radio":"switch",c=r?[this.renderItemTitle(e,n),this.renderItemStatus(e,t),this.renderItemToggle(e,t,n)]:[this.renderItemToggle(e,t,n),this.renderItemTitle(e,n),this.renderItemStatus(e,t)],d=(0,m.n)("div",i?{key:"item-label-no-selection-".concat(e.uid),class:Xn}:{key:"item-label-with-selection-".concat(e.uid),class:Xn,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":s,tabIndex:0,"aria-checked":e.visible?"true":"false",title:e.visible?o.hideLayer:o.showLayer,role:u,"aria-labelledby":n},c);return s===a||e.error?(0,m.n)("div",{key:"item-label-container-".concat(e.uid),class:Xn},this.renderItemTitle(e,n),this.renderItemStatus(e,t)):d}},{key:"renderPanelButton",value:function(e){var t,n=e.className,i=e.open,r=e.title,a=e.image||n?n:yi,l=this._getIconImageStyles(e),s=(0,o.Z)({},Mn,i),u=(t={},(0,o.Z)(t,Nn,!!l["background-image"]),(0,o.Z)(t,ri,e.disabled),t);return a&&(u[a]=!!a),(0,m.n)("div",{"aria-disabled":e.disabled.toString(),key:"panel-".concat(e.uid),bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Dn,s),role:"button",tabindex:e.disabled?null:0,title:r,"aria-label":r},(0,m.n)("span",{class:this.classes(u),styles:l}))}},{key:"renderActionsSections",value:function(e,t,n){var i=this,r=t.toArray().map((function(t,n){return(0,m.n)("ul",{key:"".concat(e,"-action-section-").concat(n),class:xn},i.renderActionSection(e,t))}));return(0,m.n)("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:n,class:On,hidden:!e.actionsOpen||null},r)}},{key:"renderActionSection",value:function(e,t){var n=this;return(t&&t.toArray()).map((function(t){return n.renderAction({item:e,action:t})}))}},{key:"renderActionIcon",value:function(e){var t,n=e.active,i=e.className,r=this._getIconImageStyles(e),a="button"!==e.type||e.image||i?i:yi,l=(t={},(0,o.Z)(t,Nn,!n&&!!r["background-image"]),(0,o.Z)(t,gi,n),(0,o.Z)(t,ai,n),t);return a&&!n&&(l[a]=!0),(0,m.n)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Pn,l),styles:r})}},{key:"renderActionTitle",value:function(e,t){return t?null:(0,m.n)("span",{key:"action-title",class:Zn},e)}},{key:"renderAction",value:function(e){var t,n=e.item,i=e.action,r=e.singleAction,a=i.active,l=i.disabled,s=i.title,u=(t={},(0,o.Z)(t,Dn,r&&"button"===i.type),(0,o.Z)(t,Ln,a||!r&&"toggle"!==i.type),(0,o.Z)(t,Rn,!a&&"toggle"===i.type),(0,o.Z)(t,Fn,!a&&"toggle"===i.type&&i.value),(0,o.Z)(t,ri,l),t),c=[this.renderActionIcon(i),this.renderActionTitle(s,r)];return r?(0,m.n)("div",{bind:this,"data-item":n,"data-action":i,role:"button",key:"single-action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:u,tabindex:"0",title:s,"aria-label":s},c):(0,m.n)("li",{bind:this,"data-item":n,"data-action":i,key:"action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:u,tabindex:"0",role:"button",title:s,"aria-label":s},c)}},{key:"_setTooltipReference",value:function(e,t){this._tooltipReferenceMap.set(t.uid,e),this.scheduleRender()}},{key:"_hasMessage",value:function(e){return!!e.error||e.incompatible}},{key:"_hasChildren",value:function(e){return!!e.children.length&&!this._hasMessage(e)}},{key:"_sortNodeRemoved",value:function(e){var t=this._sortableMap,n=e.dataset.group,i=t.get(n);i&&i.destroy(),t.delete(n)}},{key:"_destroySortables",value:function(){var e=this._sortableMap,t=this._sortableNodes;e.forEach((function(e){return e&&e.destroy()})),e.clear(),t.clear()}},{key:"_moveLayerFromChildList",value:function(e){var t=e.to,n=e.from,i=e.item,r=e.newIndex,o=i["data-item"],a=t["data-item"],l=n["data-item"];this.viewModel.moveListItem(o,l,a,r)}},{key:"_sortLayers",value:function(e){var t,n;if(e){var i=e.el["data-item"],r=e.toArray();i?function(e,t){var n=null===e||void 0===e?void 0:e.layer;if(n){var i=O(n);i&&x(n.get(i),t)}}(i,r):x(null===(t=this.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers,r)}}},{key:"_toggleSorting",value:function(e,t){var n=this._sortableMap,i=this.selectionEnabled,r=n.get(t),o=e["data-item"],a=(t===Ci||o.childrenSortable&&function(e){var t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;var n=t.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"!=typeof n||n}(o))&&i;if(r)r.option("disabled",!a);else if(a){var l=Ht.create(e,{dataIdAttr:hn,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:"[".concat(dn,'="true"]'),fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:ni});n.set(t,l)}}},{key:"_toggleAllSorting",value:function(){var e=this;this._sortableNodes.forEach((function(t,n){return e._toggleSorting(t,n)}))}},{key:"_sortNodeCreated",value:function(e){var t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}},{key:"_setVisibleItems",value:function(e){var t=this;this.visibleItems=null===e||void 0===e?void 0:e.filter((function(e){return!e.hidden&&(t.visibleElements.errors||!e.error)}))}},{key:"_getSingleActionButton",value:function(e){return e.reduce((function(e){return e})).filter((function(e){return e&&"button"===e.type})).getItemAt(0)}},{key:"_focusListItem",value:function(e){var t,n=this._focusSortUid;e&&n&&(null===(t=e["data-item"].layer)||void 0===t?void 0:t.uid)===n&&(e.focus(),this._focusSortUid=null)}},{key:"_watchActionSectionChanges",value:function(e,t){var n=this,i=_i+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),i),e.forEach((function(e){return n._renderOnActionChanges(e,t)}))}},{key:"_renderOnActionChanges",value:function(e,t){var n=this,i=bi+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add((0,y.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.image,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible]}),(function(){return n.scheduleRender()}),y.h),i):this._handles.add((0,y.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.value,null===e||void 0===e?void 0:e.displayValueEnabled,null===e||void 0===e?void 0:e.max,null===e||void 0===e?void 0:e.min,null===e||void 0===e?void 0:e.step]}),(function(){return n.scheduleRender()}),y.h),i):this._handles.add((0,y.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.image,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.value]}),(function(){return n.scheduleRender()}),y.h),i)}},{key:"_renderOnItemChanges",value:function(e){var t=this,n=e.uid,i=wi+n;this._handles.add([(0,y.l)((function(){var t,n,i;return[null===e||void 0===e?void 0:e.actionsOpen,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.open,null===e||void 0===e?void 0:e.updating,null===e||void 0===e?void 0:e.connectionStatus,null===e||void 0===e?void 0:e.publishing,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visibleAtCurrentScale,null===e||void 0===e?void 0:e.error,null===e||void 0===e?void 0:e.visibilityMode,null===e||void 0===e?void 0:e.panel,null===e||void 0===e||null===(t=e.panel)||void 0===t?void 0:t.title,null===e||void 0===e||null===(n=e.panel)||void 0===n?void 0:n.content,null===e||void 0===e||null===(i=e.panel)||void 0===i?void 0:i.className,null===e||void 0===e?void 0:e.sortable,null===e||void 0===e?void 0:e.childrenSortable]}),(function(){return t.scheduleRender()}),y.w),(0,y.l)((function(){return[null===e||void 0===e?void 0:e.hidden,null===e||void 0===e?void 0:e.error]}),(function(){return t._setVisibleItems(t.operationalItems)})),e.actionsSections.on("change",(function(){return t.scheduleRender()})),e.children.on("change",(function(){return t.scheduleRender()}))],i),e.children.forEach((function(e){return t._renderOnItemChanges(e)})),e.actionsSections.forEach((function(e){return t._watchActionSectionChanges(e,n)}))}},{key:"_itemsChanged",value:function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnItemChanges(e)})),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}},{key:"_filterActions",value:function(e){return e.map((function(e){return e.filter((function(e){return e.visible}))}))}},{key:"_countActions",value:function(e){return e.reduce((function(e,t){return e+t.length}),0)}},{key:"_getIconImageStyles",value:function(e){var t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?'url("'.concat(t,'")'):null}}},{key:"_selectionKeydown",value:function(e){var t=(0,f.af)(e);if(["ArrowDown","ArrowUp"].includes(t)){e.stopPropagation();var n=e.currentTarget,i=n["data-item"],r=this._sortableMap,o=this.selectedItems,a=n.dataset.group,l=r.get(a);if(l){var s=P(i,o),u=l.toArray(),c=e.target,d=u.indexOf(c.dataset.layerUid);if(-1!==d){if("ArrowDown"===t){var h,v,p=d+1;if(p>=u.length)return;s?(un(u,d,p),l.sort(u),this._sortLayers(l),this._focusSortUid=null===(h=i.layer)||void 0===h?void 0:h.uid):(this._focusSortUid=null===(v=i.layer)||void 0===v?void 0:v.uid,this.scheduleRender())}if("ArrowUp"===t){var g,y,m=d-1;if(m<=-1)return;s?(un(u,d,m),l.sort(u),this._sortLayers(l),this._focusSortUid=null===(g=i.layer)||void 0===g?void 0:g.uid):(this._focusSortUid=null===(y=i.layer)||void 0===y?void 0:y.uid,this.scheduleRender())}}}}else this._toggleSelection(e)}},{key:"_toggleActionsOpen",value:function(e){var t=e.currentTarget["data-item"],n=!t.actionsOpen;n&&this.operationalItems.forEach((function(e){return Ii(e)})),t.actionsOpen=n,e.stopPropagation()}},{key:"_triggerPanel",value:function(e){var t=e.currentTarget["data-panel"];e.stopPropagation(),t&&!t.disabled&&(t.open=!t.open)}},{key:"_triggerAction",value:function(e){var t=e.currentTarget,n=t["data-action"],i=t["data-item"];"toggle"===n.type&&(n.value=!n.value),this.triggerAction(n,i),e.stopPropagation()}},{key:"_toggleVisibility",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-parent-visibility"),i=t["data-item"];n===ki&&i.visible||(i.visible=!i.visible),e.stopPropagation()}},{key:"_toggleChildrenClick",value:function(e){var t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}},{key:"_toggleSelection",value:function(e){var t,n;e.stopPropagation();var i=this.multipleSelectionEnabled,r=this.selectedItems,o=e.currentTarget["data-item"],a=P(o,r),l=r.length;if(!i)return!l||a&&1===l?void(a?null===(t=r.remove)||void 0===t||t.call(r,a):r.add(o)):(r.removeAll(),void r.add(o));a?null===(n=r.remove)||void 0===n||n.call(r,a):r.add(o)}}]),i}(m.M);(0,f.e)([(0,f.y)()],Ai.prototype,"visibleItems",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"iconClass",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"label",null),(0,f.e)([(0,f.y)()],Ai.prototype,"listItemCanGiveFunction",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"listItemCanReceiveFunction",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"listItemCreatedFunction",null),(0,f.e)([(0,f.y)(),(0,m.e)("esri/widgets/LayerList/t9n/LayerList")],Ai.prototype,"messages",void 0),(0,f.e)([(0,f.y)(),(0,m.e)("esri/t9n/common")],Ai.prototype,"messagesCommon",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"multipleSelectionEnabled",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"operationalItems",null),(0,f.e)([(0,f.y)()],Ai.prototype,"selectionEnabled",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"selectedItems",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"view",null),(0,f.e)([(0,C.e)("trigger-action"),(0,f.y)({type:oe})],Ai.prototype,"viewModel",void 0),(0,f.e)([(0,f.y)()],Ai.prototype,"visibleElements",void 0),(0,f.e)([(0,f.c)("visibleElements")],Ai.prototype,"castVisibleElements",null),(0,f.e)([(0,I.t)()],Ai.prototype,"_toggleActionsOpen",null),(0,f.e)([(0,I.t)()],Ai.prototype,"_triggerPanel",null),(0,f.e)([(0,I.t)()],Ai.prototype,"_triggerAction",null),(0,f.e)([(0,I.t)()],Ai.prototype,"_toggleVisibility",null),(0,f.e)([(0,I.t)()],Ai.prototype,"_toggleChildrenClick",null),(0,f.e)([(0,I.t)()],Ai.prototype,"_toggleSelection",null);var Ti=Ai=(0,f.e)([(0,f.n)("esri.widgets.LayerList")],Ai);t.default=Ti},3719:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(42467);function r(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:a(e[t])}}}function o(e){var t=e.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function a(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];o(t)?(0,i.k)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call.apply(e,[this,t].concat(r))}}},46737:function(e,t,n){n.d(t,{s:function(){return f}});var i=n(74165),r=n(15671),o=n(43144),a=n(15861),l=n(53586),s=n(48848),u=n(93661),c=(n(65094),n(52113)),d=n(40558),h=n(75255),v=s.a.getLogger("esri.intl.substitute");function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.format,r=void 0===i?{}:i;return(0,s.H)(e,(function(e){return p(e,t,r)}))}function p(e,t,n){var i,r,o,a=e.indexOf(":");if(-1===a?r=e.trim():(r=e.slice(0,a).trim(),o=e.slice(a+1).trim()),!r)return"";var s=(0,u.a)(r,t);if(null==s)return"";var c=null!==(i=o?null===n||void 0===n?void 0:n[o]:null)&&void 0!==i?i:null===n||void 0===n?void 0:n[r];return c?function(e,t){switch(t.type){case"date":return(0,l.L)(e,t.intlOptions);case"number":return(0,l.m)(e,t.intlOptions);default:return v.warn("missing format descriptor for key {key}"),g(e)}}(s,c):o?function(e,t){switch(t.toLowerCase()){case"dateformat":return(0,l.L)(e);case"numberformat":return(0,l.m)(e);default:return v.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?(0,l.L)(e):/^numberformat/i.test(t)?(0,l.m)(e):g(e)}}(s,o):g(s)}function g(e){switch(typeof e){case"string":return e;case"number":return(0,l.m)(e);case"boolean":return""+e;default:return e instanceof Date?(0,l.L)(e):""}}function y(){return y=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,l,u,d,h,v,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.exec(r)){e.next=3;break}throw new s.s("esri-intl:invalid-bundle",'Bundle id "'.concat(r,'" is not compatible with the pattern "').concat(n,'"'));case 3:return l=a[1]?"".concat(a[1],"/"):"",u=a[2],d=(0,c.h)(o),h="".concat(l).concat(u,".json"),v=d?"".concat(l).concat(u,"_").concat(d,".json"):h,e.prev=4,e.next=7,m(t(v));case 7:case 17:f=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),v!==h){e.next=14;break}throw new s.s("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,m(t(h));case 20:throw e.prev=20,e.t1=e.catch(14),new s.s("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",f);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),y.apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,u.r)(k.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",k.fetchBundleAsset(t));case 2:return e.next=4,(0,d.U)(t,{responseType:"text"});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){function e(t){var n,i=t.base,o=void 0===i?"":i,a=t.pattern,l=t.location,s=void 0===l?new URL(window.location.href):l;(0,r.Z)(this,e),n="string"==typeof s?function(e){return new URL(e,new URL(s,window.location.href)).href}:s instanceof URL?function(e){return new URL(e,s).href}:s,this.pattern="string"==typeof a?new RegExp("^".concat(a)):a,this.getAssetUrl=n,o=o?o.endsWith("/")?o:o+"/":"",this.matcher=new RegExp("^".concat(o,"(?:(.*)/)?(.*)$"))}return(0,o.Z)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,n,i){return y.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var w,k={};(0,c.l)((w={pattern:"esri/",location:h.a},new _(w)))},50690:function(e,t,n){n.d(t,{P:function(){return h},U:function(){return v},a:function(){return s},f:function(){return a},h:function(){return f},j:function(){return u},l:function(){return o},w:function(){return p}});var i=n(48848),r=n(93661);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(e,t,n,c)}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(e,t,n,d)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=null,l=n.once?function(e,n){o(e)&&((0,r.f)(a),t(e,n))}:function(e,n){o(e)&&t(e,n)};if(a=(0,i.P)(e,l,n.sync,n.equals),n.initial){var s=e();l(s,s)}return a}function s(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=null,s=null,u=null;function c(){var e;l&&s&&(s.remove(),null!==(e=a.onListenerRemove)&&void 0!==e&&e.call(a,l),l=null,s=null)}function d(e){a.once&&a.once&&(0,r.f)(u),n(e)}var h=o(e,(function(e,n){var r;c(),(0,i.B)(e)&&(l=e,s=(0,i.C)(e,t,d),null===(r=a.onListenerAdd)||void 0===r||r.call(a,e))}),{sync:a.sync,initial:!0});return u=(0,i.D)((function(){h.remove(),c()}))}function u(e,t){return function(e,t,n){if((0,i.p)(n))return Promise.reject((0,i.d)());var o=e();if(null!==t&&void 0!==t&&t(o))return Promise.resolve(o);var a=null;function s(){a=(0,r.f)(a)}return new Promise((function(r,o){a=(0,i.F)([(0,i.v)(n,(function(){s(),o((0,i.d)())})),l(e,(function(e){s(),r(e)}),{sync:!1,once:!0},null!==t&&void 0!==t?t:c)])}))}(e,d,t)}function c(e){return!0}function d(e){return!!e}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!1,r=o(e,(function(e,n){i||t(e,n)}),n);return{remove:function(){r.remove()},pause:function(){i=!0},resume:function(){i=!1}}}var v={sync:!0},f={initial:!0},p={sync:!0,initial:!0}},60530:function(e,t,n){n.d(t,{e:function(){return r}});var i=n(93433);function r(e){return function(t){t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var n=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((function(e){return e.trim()}))}(e);n.push.apply(n,(0,i.Z)(r))}}},90429:function(e,t,n){n.d(t,{e:function(){return i},t:function(){return r}});n(42467);function i(e){return e&&"function"==typeof e.render}function r(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=5465.3c16dc22.chunk.js.map