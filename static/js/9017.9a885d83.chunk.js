/*! For license information please see 9017.9a885d83.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9017,356],{75662:function(e,t,n){n.d(t,{a:function(){return f},b:function(){return m},c:function(){return h}});var i,r=n(15671),o=n(43144),a=n(60136),l=n(29388),s=n(50165),c=n(17493),u=i=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).active=!1,i.className=null,i.disabled=!1,i.id=null,i.indicator=!1,i.title=null,i.type=null,i.visible=!0,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),n}((0,c.s)(s.y));(0,s.e)([(0,s.d)()],u.prototype,"active",void 0),(0,s.e)([(0,s.d)()],u.prototype,"className",void 0),(0,s.e)([(0,s.d)()],u.prototype,"disabled",void 0),(0,s.e)([(0,s.d)()],u.prototype,"id",void 0),(0,s.e)([(0,s.d)()],u.prototype,"indicator",void 0),(0,s.e)([(0,s.d)()],u.prototype,"title",void 0),(0,s.e)([(0,s.d)()],u.prototype,"type",void 0),(0,s.e)([(0,s.d)()],u.prototype,"visible",void 0);var d,h=u=i=(0,s.e)([(0,s.n)("esri.support.actions.ActionBase")],u),v=d=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).image=null,i.type="button",i}return(0,o.Z)(n,[{key:"clone",value:function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),n}(h);(0,s.e)([(0,s.d)()],v.prototype,"image",void 0);var p,f=v=d=(0,s.e)([(0,s.n)("esri.support.Action.ActionButton")],v),g=p=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).image=null,i.type="toggle",i.value=!1,i}return(0,o.Z)(n,[{key:"clone",value:function(){return new p({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),n}(h);(0,s.e)([(0,s.d)()],g.prototype,"image",void 0),(0,s.e)([(0,s.d)()],g.prototype,"value",void 0);var m=g=p=(0,s.e)([(0,s.n)("esri.support.Action.ActionToggle")],g)},22984:function(e,t,n){n.d(t,{a:function(){return p},c:function(){return u},d:function(){return f}});var i=n(15671),r=n(43144),o=n(60136),a=n(29388),l=n(50165),s=n(69738),c=n(73627),u=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).updating=!1,e.handleId=0,e.handles=new s.u,e.scheduleHandleId=0,e.pendingPromises=new Set,e}return(0,r.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this.handles.destroy()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,c.l)}},{key:"addWhen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,c.f)}},{key:"addOnCollectionChange",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.initial,o=void 0!==r&&r,a=i.final,l=void 0!==a&&a,s=++this.handleId;return this.handles.add([(0,c.a)(e,"after-changes",this._createSyncUpdatingCallback(),c.U),(0,c.a)(e,"change",t,{onListenerAdd:o?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:l?function(e){return t({added:[],removed:e.toArray()})}:void 0})],s),{remove:function(){return n.handles.remove(s)}}}},{key:"addPromise",value:function(e){var t=this;if((0,l.t)(e))return e;var n=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(v)||t._set("updating",!1))}},n),this.pendingPromises.add(e),this._set("updating",!0);var i=function(){return t.handles.remove(n)};return e.then(i,i),e}},{key:"removeAll",value:function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,o);var a=r(e,t,i);return this.handles.add(a,o),{remove:function(){return n.handles.remove(o)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var n=this._createSyncUpdatingCallback(),i=(0,c.l)(e,n,{sync:!0,equals:function(){return!1}});return this.handles.add(i,t),i}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e.handles.remove(v),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add((0,l.O)((function(){t===e.scheduleHandleId&&(e._set("updating",e.pendingPromises.size>0),e.handles.remove(v))})),v)}}}]),n}(l.y);(0,l.e)([(0,l.d)({readOnly:!0})],u.prototype,"updating",void 0),u=(0,l.e)([(0,l.n)("esri.core.support.WatchUpdatingTracking")],u);var d,h,v=-42;(h=d||(d={}))[h.NONE=0]="NONE",h[h.SYNC=1]="SYNC",h[h.INIT=2]="INIT";var p=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new s.u}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new u}}]),n}(e);return(0,l.e)([(0,l.d)({readOnly:!0})],t.prototype,"handles",null),(0,l.e)([(0,l.d)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,l.e)([(0,l.n)("esri.core.HandleOwner")],t),t},f=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(p(l.y));f=(0,l.e)([(0,l.n)("esri.core.HandleOwner")],f)},17493:function(e,t,n){n.d(t,{o:function(){return d},s:function(){return u}});var i=n(43144),r=n(15671),o=n(97326),a=n(60136),l=n(29388),s=n(50165),c=0,u=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty((0,o.Z)(e),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+c++}),e}return(0,i.Z)(n)}(e);return t=(0,s.e)([(0,s.n)("esri.core.Identifiable")],t)},d=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n)}(u(function(){return(0,i.Z)((function e(){(0,r.Z)(this,e)}))}()));d=(0,s.e)([(0,s.n)("esri.core.Identifiable")],d)},29017:function(e,t,n){n.r(t);var i,r=n(93433),o=n(4942),a=n(1413),l=n(97326),s=n(74165),c=n(15861),u=n(15671),d=n(43144),h=n(60136),v=n(29388),p=n(50165),f=n(40133),g=n(69738),m=n(73627),y=n(17691),b=n(73393),_=n(22984),w=n(17493),k=n(75662),I=n(43895),C=n(4197),S=n(82162),E=(n(87110),n(42),n(13994),n(52155),n(72577),n(61772),n(92870),n(26079),i=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this,e)).displayValueEnabled=!1,i.max=1,i.min=0,i.step=.1,i.type="slider",i.value=null,i}return(0,d.Z)(n,[{key:"clone",value:function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}}]),n}(k.c));(0,p.e)([(0,p.d)()],E.prototype,"displayValueEnabled",void 0),(0,p.e)([(0,p.d)()],E.prototype,"max",void 0),(0,p.e)([(0,p.d)()],E.prototype,"min",void 0),(0,p.e)([(0,p.d)()],E.prototype,"step",void 0),(0,p.e)([(0,p.d)()],E.prototype,"value",void 0);var A=E=i=(0,p.e)([(0,p.n)("esri.support.Action.ActionSlider")],E),T="hide",O="hide-children";function D(e){if(e)return null!=e.listMode?e.listMode:void 0}function x(e){if(e)return"type"in e?e.listMode!==O&&"wmts"!==e.type?"group"===e.type?"layers":"sublayers":void 0:"sublayers"}function N(e,t){e&&e.sort((function(e,n){var i=t.indexOf(e.uid),r=t.indexOf(n.uid);return i>r?-1:i<r?1:0}))}function M(e){var t=null===e||void 0===e?void 0:e.layer;return t&&"group"===t.type?t.layers:null}function L(e,t){var n,i=null===(n=e.layer)||void 0===n?void 0:n.uid;return i&&t.find((function(e){var t;return(null===(t=e.layer)||void 0===t?void 0:t.uid)===i}))}function Z(e){var t=function(e){return!(null===e||void 0===e||!e.layer)}(e)?e:null,n=null===e||void 0===e?void 0:e.parent,i="map-image"===(null===n||void 0===n?void 0:n.type)&&t.source;return i&&n?{layer:n,title:"",sublayerIds:[i.mapLayerId]}:{layer:e,title:""}}var P="esri-layer-list-panel",R="esri-layer-list-panel__content",F="esri-layer-list-panel__content--legend",B="esri-layer-list-panel__content--string",V="esri-layer-list-panel__content--html-element",U="esri-layer-list-panel__content--widget",H=function(e){(0,h.Z)(i,e);var t=(0,v.Z)(i);function i(e,n){var r;return(0,u.Z)(this,i),(r=t.call(this,e,n))._legend=null,r._handles=new g.u,r.content=null,r.image=null,r.listItem=null,r.open=!1,r.visible=!0,r}return(0,d.Z)(i,[{key:"initialize",value:function(){var e=this;this.own([(0,m.l)((function(){return e.content}),(function(t){return e._createLegend(t)}),m.h)])}},{key:"destroy",value:function(){var e=this._legend;e&&e.destroy(),this._legend=null}},{key:"className",get:function(){var e=this.image,t=this._getFirstWidget();return this._get("className")||!e&&t?t.iconClass:""},set:function(e){void 0!==e?this._override("className",e):this._clearOverride("className")}},{key:"title",get:function(){var e=this._getFirstWidget();return this._get("title")||e?e.label:""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")}},{key:"render",value:function(){return(0,b.n)("div",{class:P},this._renderContents())}},{key:"_renderContent",value:function(e){var t=this._legend,n=this.listItem;return e?"legend"===e?n&&n.view&&n.layer&&t?(0,b.n)("div",{class:this.classes(R,F),key:t},t.render()):null:"string"==typeof e?(0,b.n)("div",{class:this.classes(R,B),key:e,innerHTML:e}):(0,I.e)(e)?(0,b.n)("div",{class:this.classes(R,U),key:e},e.render()):e instanceof HTMLElement?(0,b.n)("div",{class:this.classes(R,V),key:e,bind:e,afterCreate:this._attachToNode}):null:null}},{key:"_renderContents",value:function(){var e=this,t=this.content;return Array.isArray(t)?t.map((function(t){return e._renderContent(t)})):this._renderContent(t)}},{key:"_getLegendOptions",value:function(){var e=this.listItem;if(!e)return{};var t=e.layer,n=e.view;return t&&n?{view:n,layerInfos:[Z(t)]}:{}}},{key:"_createLegend",value:function(e){var t=this;this._hasLegend(e)&&!this._legend&&Promise.all([n.e(1340),n.e(6626),n.e(6235),n.e(2980),n.e(8496),n.e(9350),n.e(6275),n.e(7823),n.e(7322),n.e(1278),n.e(6263),n.e(8330),n.e(911),n.e(4620),n.e(35),n.e(548)]).then(n.bind(n,60548)).then((function(e){var n=e.default,i=t._handles,r=t.listItem,o=new n(t._getLegendOptions());t._legend=o,t.notifyChange("className"),t.notifyChange("title");var a=(0,m.l)((function(){var e,t;return[null===r||void 0===r?void 0:r.view,null===r||void 0===r?void 0:r.layer,null===r||void 0===r||null===(e=r.layer)||void 0===e?void 0:e.source,null===r||void 0===r||null===(t=r.layer)||void 0===t?void 0:t.parent]}),(function(){return t._updateLegend(o)}),m.h);i.add(a,"legends"),t.scheduleRender()}))}},{key:"_hasLegend",value:function(e){var t="legend";return e===t||!!Array.isArray(e)&&e.includes(t)}},{key:"_attachToNode",value:function(e){e.appendChild(this)}},{key:"_updateLegend",value:function(e){e.set(this._getLegendOptions()),this.scheduleRender()}},{key:"_getWidget",value:function(e){return"legend"===e?this._legend:(0,I.e)(e)?e:null}},{key:"_getFirstWidget",value:function(){var e=this,t=this.content;if(Array.isArray(t)){var n=null;return t.some((function(t){var i=e._getWidget(t);return i&&(n=i),!!i})),n}return this._getWidget(t)}}]),i}((0,w.s)(b.O));(0,p.e)([(0,p.d)()],H.prototype,"className",null),(0,p.e)([(0,p.d)()],H.prototype,"content",void 0),(0,p.e)([(0,p.d)()],H.prototype,"image",void 0),(0,p.e)([(0,p.d)()],H.prototype,"listItem",void 0),(0,p.e)([(0,p.d)()],H.prototype,"title",null),(0,p.e)([(0,p.d)()],H.prototype,"open",void 0),(0,p.e)([(0,p.d)()],H.prototype,"visible",void 0);var X,Y=H=(0,p.e)([(0,p.n)("esri.widgets.LayerList.ListItemPanel")],H),j=f.j.ofType({key:"type",defaultKeyValue:"button",base:k.c,typeMap:{button:k.a,toggle:k.b,slider:A}}),W=f.j.ofType(j),z="layer",G="child-list-mode",K=X=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this,e)).actionsSections=new W,i.actionsOpen=!1,i.children=new(f.j.ofType(X)),i.childrenSortable=!0,i.error=null,i.hidden=!1,i.layer=null,i.layerView=null,i.listItemCreatedFunction=null,i.open=!1,i.panel=null,i.parent=null,i.sortable=!0,i.view=null,i.visible=null,i}return(0,d.Z)(n,[{key:"initialize",value:function(){var e=this;if(this.handles.add([(0,m.l)((function(){return e.layer}),(function(t){return e._watchLayerProperties(t)}),m.h),(0,m.l)((function(){return e.view}),(function(t){return e._updateChildren(t)}),m.h),(0,m.l)((function(){return e.panel}),(function(t){return e._setListItemOnPanel(t)}),m.h),(0,m.l)((function(){return[e.layer,e.view]}),(function(){return e._getLayerView()}),m.h)]),"function"==typeof this.listItemCreatedFunction){var t={item:this};this.listItemCreatedFunction.call(null,t)}}},{key:"destroy",value:function(){this.view=null}},{key:"connectionStatus",get:function(){var e=this.layerView;if(e&&"connectionStatus"in e)return e.connectionStatus}},{key:"incompatible",get:function(){var e=this.layerView;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}},{key:"castPanel",value:function(e){return this.get("panel.open")&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Y(e):null}},{key:"title",get:function(){var e=this.get("layer.layer");return(!e||e&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(e){void 0!==e?this._override("title",e):this._clearOverride("title")}},{key:"updating",get:function(){var e=this.layerView;return!this.connectionStatus&&(e?e.updating:this._isLayerUpdating(this.layer))}},{key:"visibleAtCurrentScale",get:function(){return!function(e,t){if(!e||isNaN(t))return!1;var n=function(e){if(e)return null!=e.minScale?e.minScale:void 0}(e),i=function(e){if(e)return null!=e.maxScale?e.maxScale:void 0}(e),r=!isNaN(n)&&n>0&&t>n,o=!isNaN(i)&&i>0&&t<i;return r||o}(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return function(e){if(!e)return"inherited";var t=e.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"==typeof t)return t?"independent":"inherited";var n=e.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"==typeof n?n?"independent":"inherited":null!=e.visibilityMode?e.visibilityMode:"independent"}(this.layer)}},{key:"clone",value:function(){return new X({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}},{key:"_setListItemOnPanel",value:function(e){e&&(e.listItem=this)}},{key:"_updateChildren",value:function(e){var t=this.children;t&&t.forEach((function(t){return t.view=e}))}},{key:"_addChildren",value:function(e){var t=this;if(this.handles.remove(G),this.children.removeAll(),e){e.forEach((function(n){t.handles.add((0,m.l)((function(){return n.listMode}),(function(){return t._addChildren(e)})),G)}));var n=e.filter((function(e){return"hide"!==D(e)}));this.children.addMany(this._makeChildren(n))}}},{key:"_watchSublayerChanges",value:function(e){var t=this;e&&this.handles.add(e.on("change",(function(){t._addChildren(e)})),z)}},{key:"_initializeChildLayers",value:function(e){this._addChildren(e),this._watchSublayerChanges(e)}},{key:"_makeChildren",value:function(e){var t=this;return e.map((function(e){return function(e){return D(e)!==T}(e)?new X({layer:e,listItemCreatedFunction:t.listItemCreatedFunction,parent:t,view:t.view}):null})).reverse()}},{key:"_watchLayerProperties",value:function(e){var t=this;if(this.handles&&(this.handles.remove(z),this.handles.remove(G),e))if(this.handles.add((0,m.l)((function(){return e.listMode}),(function(){return t._watchLayerProperties(e)})),z),"hide-children"!==D(e)){var n=x(e);n&&this.handles.add((0,m.l)((function(){return e[n]}),(function(){e.hasOwnProperty(n)&&t._initializeChildLayers(e[n])}),m.h),z)}else this.children.removeAll()}},{key:"_getLayerView",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.layer,n=this.view,!t||!n){e.next=13;break}return e.prev=2,e.next=5,n.whenLayerView(t);case 5:if((i=e.sent).layer===this.layer){e.next=8;break}return e.abrupt("return");case 8:this._set("layerView",i),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"_isLayerUpdating",value:function(e){return e&&"loading"===e.loadStatus}}]),n}((0,w.s)((0,_.a)(p.y)));(0,p.e)([(0,p.d)({type:W})],K.prototype,"actionsSections",void 0),(0,p.e)([(0,p.d)()],K.prototype,"actionsOpen",void 0),(0,p.e)([(0,p.d)({type:f.j})],K.prototype,"children",void 0),(0,p.e)([(0,p.d)()],K.prototype,"childrenSortable",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"connectionStatus",null),(0,p.e)([(0,y.o)("layer.loadError?")],K.prototype,"error",void 0),(0,p.e)([(0,p.d)()],K.prototype,"hidden",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"incompatible",null),(0,p.e)([(0,p.d)()],K.prototype,"layer",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"layerView",void 0),(0,p.e)([(0,p.d)()],K.prototype,"listItemCreatedFunction",void 0),(0,p.e)([(0,p.d)()],K.prototype,"open",void 0),(0,p.e)([(0,p.d)({type:Y})],K.prototype,"panel",void 0),(0,p.e)([(0,p.H)("panel")],K.prototype,"castPanel",null),(0,p.e)([(0,p.d)()],K.prototype,"parent",void 0),(0,p.e)([(0,p.d)()],K.prototype,"sortable",void 0),(0,p.e)([(0,p.d)()],K.prototype,"title",null),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"updating",null),(0,p.e)([(0,p.d)({value:null})],K.prototype,"view",void 0),(0,p.e)([(0,y.o)("layer.visible")],K.prototype,"visible",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"visibleAtCurrentScale",null),(0,p.e)([(0,p.d)({readOnly:!0})],K.prototype,"visibilityMode",null);var q=K=X=(0,p.e)([(0,p.n)("esri.widgets.LayerList.ListItem")],K),$="view",J="view-layers",Q="map-layers",ee="layer-views",te="layer-list-mode",ne="children",ie=f.j.ofType(q),re=function(e){(0,h.Z)(n,e);var t=(0,v.Z)(n);function n(e){var i;return(0,u.Z)(this,n),(i=t.call(this,e))._handles=new g.u,i.listItemCreatedFunction=null,i.operationalItems=new ie,i.view=null,i}return(0,d.Z)(n,[{key:"initialize",value:function(){var e=this;this._handles.add([(0,m.l)((function(){var t;return[e.view,null===(t=e.view)||void 0===t?void 0:t.ready]}),(function(){return e._viewHandles()}),m.h),(0,m.l)((function(){return e.listItemCreatedFunction}),(function(){return e._listItemCreatedFunctionChanged()}))],$)}},{key:"destroy",value:function(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}},{key:"state",get:function(){var e=this.get("view");return this.get("view.ready")?"ready":e?"loading":"disabled"}},{key:"triggerAction",value:function(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}},{key:"moveListItem",value:function(e,t,n,i){var r,o,a=null===e||void 0===e?void 0:e.layer;if(a){var l=null===(r=this.view)||void 0===r||null===(o=r.map)||void 0===o?void 0:o.layers,s=t?M(t):l,c=n?M(n):l;if(s&&c){var u=this.operationalItems,d=(null===t||void 0===t?void 0:t.children)||u,h=(null===n||void 0===n?void 0:n.children)||u,v=c.length-i;e.parent=n||null,d.includes(e)&&d.remove(e),s.includes(a)&&s.remove(a),h.includes(e)||h.add(e,v),c.includes(a)||c.add(a,v)}}}},{key:"_createLayerViewHandles",value:function(e){var t=this,n=this._handles;n.remove(ee),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),ee)}},{key:"_createMapLayerHandles",value:function(e){var t=this,n=this._handles;n.remove(Q),this._compileList(),e&&n.add(e.on("change",(function(){return t._compileList()})),Q)}},{key:"_createListItem",value:function(e){var t=this.view,n=this.listItemCreatedFunction;return new q({layer:e,listItemCreatedFunction:n,view:t})}},{key:"_removeAllItems",value:function(){var e=this._handles,t=this.operationalItems;t.forEach((function(t){e.remove("".concat(ne,"-").concat(t.uid))})),t.removeAll()}},{key:"_getViewableLayers",value:function(e){if(e)return e.filter((function(e){return"hide"!==D(e)}))}},{key:"_watchLayersListMode",value:function(e){var t=this,n=this._handles;n.remove(te),e&&e.forEach((function(e){"listMode"in e&&n.add((0,m.l)((function(){return e.listMode}),(function(){return t._compileList()})),te)}))}},{key:"_compileList",value:function(){var e=this.get("view.map.layers");this._watchLayersListMode(e);var t=this._getViewableLayers(e);t&&t.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}},{key:"_createNewItems",value:function(e){var t=this,n=this.operationalItems;e.forEach((function(e){n.find((function(t){return t.layer===e}))||n.add(t._createListItem(e))}))}},{key:"_removeItems",value:function(e){var t=this._handles,n=this.operationalItems,i=[];n.forEach((function(n){n&&e&&e.includes(n.layer)||(t.remove("".concat(ne,"-").concat(n.uid)),i.push(n))})),n.removeMany(i)}},{key:"_sortItems",value:function(e){this.operationalItems.sort((function(t,n){var i=e.indexOf(t.layer),r=e.indexOf(n.layer);return i>r?-1:i<r?1:0}))}},{key:"_listItemCreatedFunctionChanged",value:function(){this._removeAllItems(),this._compileList()}},{key:"_viewHandles",value:function(){var e=this,t=this._handles,n=this.view;t.remove([Q,ee,J]),this._compileList(),n&&n.ready&&t.add([(0,m.l)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.allLayers}),(function(t){return e._createMapLayerHandles(t)}),m.h),(0,m.l)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.allLayerViews}),(function(t){return e._createLayerViewHandles(t)}),m.h)],J)}}]),n}(f.n.EventedAccessor);(0,p.e)([(0,p.d)()],re.prototype,"listItemCreatedFunction",void 0),(0,p.e)([(0,p.d)({type:ie})],re.prototype,"operationalItems",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],re.prototype,"state",null),(0,p.e)([(0,p.d)()],re.prototype,"view",void 0);var oe=re=(0,p.e)([(0,p.n)("esri.widgets.LayerList.LayerListViewModel")],re);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){return se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(){return ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ue.apply(this,arguments)}function de(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function he(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var ve=he(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pe=he(/Edge/i),fe=he(/firefox/i),ge=he(/safari/i)&&!he(/chrome/i)&&!he(/android/i),me=he(/iP(ad|od|hone)/i),ye=he(/chrome/i)&&he(/android/i),be={capture:!1,passive:!1};function _e(e,t,n){e.addEventListener(t,n,!ve&&be)}function we(e,t,n){e.removeEventListener(t,n,!ve&&be)}function ke(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(Y){return!1}return!1}}function Ie(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ce(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ke(e,t):ke(e,t))||i&&e===n)return e;if(e===n)break}while(e=Ie(e))}return null}var Se,Ee=/\s+/g;function Ae(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(Ee," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(Ee," ")}}function Te(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"===typeof n?"":"px")}}function Oe(e,t){var n="";if("string"===typeof e)n=e;else do{var i=Te(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function De(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function xe(){var e=document.scrollingElement;return e||document.documentElement}function Ne(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var o,a,l,s,c,u,d;if(e!==window&&e.parentNode&&e!==xe()?(a=(o=e.getBoundingClientRect()).top,l=o.left,s=o.bottom,c=o.right,u=o.height,d=o.width):(a=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!ve))do{if(r&&r.getBoundingClientRect&&("none"!==Te(r,"transform")||n&&"static"!==Te(r,"position"))){var h=r.getBoundingClientRect();a-=h.top+parseInt(Te(r,"border-top-width")),l-=h.left+parseInt(Te(r,"border-left-width")),s=a+o.height,c=l+o.width;break}}while(r=r.parentNode);if(i&&e!==window){var v=Oe(r||e),p=v&&v.a,f=v&&v.d;v&&(s=(a/=f)+(u/=f),c=(l/=p)+(d/=p))}return{top:a,left:l,bottom:s,right:c,width:d,height:u}}}function Me(e,t,n){for(var i=Fe(e,!0),r=Ne(e)[t];i;){var o=Ne(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===xe())break;i=Fe(i,!1)}return!1}function Le(e,t,n,i){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Ut.ghost&&(i||a[o]!==Ut.dragged)&&Ce(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function Ze(e,t){for(var n=e.lastElementChild;n&&(n===Ut.ghost||"none"===Te(n,"display")||t&&!ke(n,t));)n=n.previousElementSibling;return n||null}function Pe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ut.clone||t&&!ke(e,t)||n++;return n}function Re(e){var t=0,n=0,i=xe();if(e)do{var r=Oe(e),o=r.a,a=r.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==i&&(e=e.parentNode));return[t,n]}function Fe(e,t){if(!e||!e.getBoundingClientRect)return xe();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Te(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return xe();if(i||t)return n;i=!0}}}while(n=n.parentNode);return xe()}function Be(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ve(e,t){return function(){if(!Se){var n=arguments,i=this;1===n.length?e.call(i,n[0]):e.apply(i,n),Se=setTimeout((function(){Se=void 0}),t)}}}function Ue(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function He(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var Xe="Sortable"+(new Date).getTime();function Ye(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Te(e,"display")&&e!==Ut.ghost){t.push({target:e,rect:Ne(e)});var n=le({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=Oe(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var r=!1,o=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=Ne(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=Oe(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&Be(s,l)&&!Be(a,l)&&(u.top-l.top)/(u.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(u,s,c,i.options)),Be(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=i.options.animation),i.animate(n,u,l,t)),t&&(r=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"===typeof n&&n()}),o):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){Te(e,"transition",""),Te(e,"transform","");var r=Oe(this.el),o=r&&r.a,a=r&&r.d,l=(t.left-n.left)/(o||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,Te(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Te(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Te(e,"transition",""),Te(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}var je=[],We={initializeByDefault:!0},ze={mount:function(e){for(var t in We)We.hasOwnProperty(t)&&!(t in e)&&(e[t]=We[t]);je.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),je.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";je.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r](le({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](le({sortable:t},n)))}))},initializePlugins:function(e,t,n,i){for(var r in je.forEach((function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var o=new i(e,t,e.options);o.sortable=e,o.options=e.options,e[r]=o,ue(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);"undefined"!==typeof o&&(e.options[r]=o)}},getEventProperties:function(e,t){var n={};return je.forEach((function(i){"function"===typeof i.eventProperties&&ue(n,i.eventProperties.call(t[i.pluginName],e))})),n},modifyOption:function(e,t,n){var i;return je.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"===typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))})),i}};var Ge=["evt"],Ke=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=de(n,Ge);ze.pluginEvent.bind(Ut)(e,t,le({dragEl:$e,parentEl:Je,ghostEl:Qe,rootEl:et,nextEl:tt,lastDownEl:nt,cloneEl:it,cloneHidden:rt,dragStarted:mt,putSortable:ut,activeSortable:Ut.active,originalEvent:i,oldIndex:ot,oldDraggableIndex:lt,newIndex:at,newDraggableIndex:st,hideGhostForTarget:Rt,unhideGhostForTarget:Ft,cloneNowHidden:function(){rt=!0},cloneNowShown:function(){rt=!1},dispatchSortableEvent:function(e){qe({sortable:t,name:e,originalEvent:i})}},r))};function qe(e){!function(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,o=e.cloneEl,a=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,v=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Xe]){var f,g=t.options,m="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||ve||pe?(f=document.createEvent("Event")).initEvent(i,!0,!0):f=new CustomEvent(i,{bubbles:!0,cancelable:!0}),f.to=a||n,f.from=l||n,f.item=r||n,f.clone=o,f.oldIndex=s,f.newIndex=c,f.oldDraggableIndex=u,f.newDraggableIndex=d,f.originalEvent=h,f.pullMode=v?v.lastPutMode:void 0;var y=le(le({},p),ze.getEventProperties(i,t));for(var b in y)f[b]=y[b];n&&n.dispatchEvent(f),g[m]&&g[m].call(t,f)}}(le({putSortable:ut,cloneEl:it,targetEl:$e,rootEl:et,oldIndex:ot,oldDraggableIndex:lt,newIndex:at,newDraggableIndex:st},e))}var $e,Je,Qe,et,tt,nt,it,rt,ot,at,lt,st,ct,ut,dt,ht,vt,pt,ft,gt,mt,yt,bt,_t,wt,kt=!1,It=!1,Ct=[],St=!1,Et=!1,At=[],Tt=!1,Ot=[],Dt="undefined"!==typeof document,xt=me,Nt=pe||ve?"cssFloat":"float",Mt=Dt&&!ye&&!me&&"draggable"in document.createElement("div"),Lt=function(){if(Dt){if(ve)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Zt=function(e,t){var n=Te(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Le(e,0,t),o=Le(e,1,t),a=r&&Te(r),l=o&&Te(o),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ne(r).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ne(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=i&&"none"===n[Nt]||o&&"none"===n[Nt]&&s+c>i)?"vertical":"horizontal"},Pt=function(e){function t(e,n){return function(i,r,o,a){var l=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(i,r,o,a),n)(i,r,o,a);var s=(n?i:r).options.group.name;return!0===e||"string"===typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},i=e.group;i&&"object"==se(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Rt=function(){!Lt&&Qe&&Te(Qe,"display","none")},Ft=function(){!Lt&&Qe&&Te(Qe,"display","")};Dt&&!ye&&document.addEventListener("click",(function(e){if(It)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),It=!1,!1}),!0);var Bt=function(e){if($e){var t=function(e,t){var n;return Ct.some((function(i){var r=i[Xe].options.emptyInsertThreshold;if(r&&!Ze(i)){var o=Ne(i),a=e>=o.left-r&&e<=o.right+r,l=t>=o.top-r&&t<=o.bottom+r;return a&&l?n=i:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Xe]._onDragOver(n)}}},Vt=function(e){$e&&$e.parentNode[Xe]._isOutsideThisEl(e.target)};function Ut(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ue({},t),e[Xe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Zt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ut.supportPointer&&"PointerEvent"in window&&!ge,emptyInsertThreshold:5};for(var i in ze.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var r in Pt(t),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Mt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_e(e,"pointerdown",this._onTapStart):(_e(e,"mousedown",this._onTapStart),_e(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_e(e,"dragover",this),_e(e,"dragenter",this)),Ct.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ue(this,Ye())}function Ht(e,t,n,i,r,o,a,l){var s,c,u=e[Xe],d=u.options.onMove;return!window.CustomEvent||ve||pe?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=i,s.related=r||t,s.relatedRect=o||Ne(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),d&&(c=d.call(u,s,a)),c}function Xt(e){e.draggable=!1}function Yt(){Tt=!1}function jt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Wt(e){return setTimeout(e,0)}function zt(e){return clearTimeout(e)}Ut.prototype={constructor:Ut,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(yt=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,$e):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=i.filter;if(function(e){Ot.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&Ot.push(i)}}(n),!$e&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!ge||!l||"SELECT"!==l.tagName.toUpperCase())&&(!(l=Ce(l,i.draggable,n,!1))||!l.animated)&&nt!==l){if(ot=Pe(l),lt=Pe(l,i.draggable),"function"===typeof c){if(c.call(this,e,l,this))return qe({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ke("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(i){if(i=Ce(s,i.trim(),n,!1))return qe({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ke("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!Ce(s,i.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var i,r=this,o=r.el,a=r.options,l=o.ownerDocument;if(n&&!$e&&n.parentNode===o){var s=Ne(n);if(et=o,Je=($e=n).parentNode,tt=$e.nextSibling,nt=n,ct=a.group,Ut.dragged=$e,dt={target:$e,clientX:(t||e).clientX,clientY:(t||e).clientY},ft=dt.clientX-s.left,gt=dt.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,$e.style["will-change"]="all",i=function(){Ke("delayEnded",r,{evt:e}),Ut.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!fe&&r.nativeDraggable&&($e.draggable=!0),r._triggerDragStart(e,t),qe({sortable:r,name:"choose",originalEvent:e}),Ae($e,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){De($e,e.trim(),Xt)})),_e(l,"dragover",Bt),_e(l,"mousemove",Bt),_e(l,"touchmove",Bt),_e(l,"mouseup",r._onDrop),_e(l,"touchend",r._onDrop),_e(l,"touchcancel",r._onDrop),fe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$e.draggable=!0),Ke("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(pe||ve))i();else{if(Ut.eventCanceled)return void this._onDrop();_e(l,"mouseup",r._disableDelayedDrag),_e(l,"touchend",r._disableDelayedDrag),_e(l,"touchcancel",r._disableDelayedDrag),_e(l,"mousemove",r._delayedDragTouchMoveHandler),_e(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&_e(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$e&&Xt($e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?_e(document,"pointermove",this._onTouchMove):_e(document,t?"touchmove":"mousemove",this._onTouchMove):(_e($e,"dragend",this),_e(et,"dragstart",this._onDragStart));try{document.selection?Wt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(kt=!1,et&&$e){Ke("dragStarted",this,{evt:t}),this.nativeDraggable&&_e(document,"dragover",Vt);var n=this.options;!e&&Ae($e,n.dragClass,!1),Ae($e,n.ghostClass,!0),Ut.active=this,e&&this._appendGhost(),qe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ht){this._lastX=ht.clientX,this._lastY=ht.clientY,Rt();for(var e=document.elementFromPoint(ht.clientX,ht.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ht.clientX,ht.clientY))!==t;)t=e;if($e.parentNode[Xe]._isOutsideThisEl(e),t)do{if(t[Xe]){if(t[Xe]._onDragOver({clientX:ht.clientX,clientY:ht.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ft()}},_onTouchMove:function(e){if(dt){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=Qe&&Oe(Qe,!0),a=Qe&&o&&o.a,l=Qe&&o&&o.d,s=xt&&wt&&Re(wt),c=(r.clientX-dt.clientX+i.x)/(a||1)+(s?s[0]-At[0]:0)/(a||1),u=(r.clientY-dt.clientY+i.y)/(l||1)+(s?s[1]-At[1]:0)/(l||1);if(!Ut.active&&!kt){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Qe){o?(o.e+=c-(vt||0),o.f+=u-(pt||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Te(Qe,"webkitTransform",d),Te(Qe,"mozTransform",d),Te(Qe,"msTransform",d),Te(Qe,"transform",d),vt=c,pt=u,ht=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Qe){var e=this.options.fallbackOnBody?document.body:et,t=Ne($e,!0,xt,!0,e),n=this.options;if(xt){for(wt=e;"static"===Te(wt,"position")&&"none"===Te(wt,"transform")&&wt!==document;)wt=wt.parentNode;wt!==document.body&&wt!==document.documentElement?(wt===document&&(wt=xe()),t.top+=wt.scrollTop,t.left+=wt.scrollLeft):wt=xe(),At=Re(wt)}Ae(Qe=$e.cloneNode(!0),n.ghostClass,!1),Ae(Qe,n.fallbackClass,!0),Ae(Qe,n.dragClass,!0),Te(Qe,"transition",""),Te(Qe,"transform",""),Te(Qe,"box-sizing","border-box"),Te(Qe,"margin",0),Te(Qe,"top",t.top),Te(Qe,"left",t.left),Te(Qe,"width",t.width),Te(Qe,"height",t.height),Te(Qe,"opacity","0.8"),Te(Qe,"position",xt?"absolute":"fixed"),Te(Qe,"zIndex","100000"),Te(Qe,"pointerEvents","none"),Ut.ghost=Qe,e.appendChild(Qe),Te(Qe,"transform-origin",ft/parseInt(Qe.style.width)*100+"% "+gt/parseInt(Qe.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;Ke("dragStart",this,{evt:e}),Ut.eventCanceled?this._onDrop():(Ke("setupClone",this),Ut.eventCanceled||((it=He($e)).removeAttribute("id"),it.draggable=!1,it.style["will-change"]="",this._hideClone(),Ae(it,this.options.chosenClass,!1),Ut.clone=it),n.cloneId=Wt((function(){Ke("clone",n),Ut.eventCanceled||(n.options.removeCloneOnHide||et.insertBefore(it,$e),n._hideClone(),qe({sortable:n,name:"clone"}))})),!t&&Ae($e,r.dragClass,!0),t?(It=!0,n._loopId=setInterval(n._emulateDragOver,50)):(we(document,"mouseup",n._onDrop),we(document,"touchend",n._onDrop),we(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,$e)),_e(document,"drop",n),Te($e,"transform","translateZ(0)")),kt=!0,n._dragStartId=Wt(n._dragStarted.bind(n,t,e)),_e(document,"selectstart",n),mt=!0,ge&&Te(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,o=this.el,a=e.target,l=this.options,s=l.group,c=Ut.active,u=ct===s,d=l.sort,h=ut||c,v=this,p=!1;if(!Tt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Ce(a,l.draggable,o,!0),O("dragOver"),Ut.eventCanceled)return p;if($e.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||v._ignoreWhileAnimating===a)return x(!1);if(It=!1,c&&!l.disabled&&(u?d||(i=Je!==et):ut===this||(this.lastPutMode=ct.checkPull(this,c,$e,e))&&s.checkPut(this,c,$e,e))){if(r="vertical"===this._getDirection(e,a),t=Ne($e),O("dragOverValid"),Ut.eventCanceled)return p;if(i)return Je=et,D(),this._hideClone(),O("revert"),Ut.eventCanceled||(tt?et.insertBefore($e,tt):et.appendChild($e)),x(!0);var f=Ze(o,l.draggable);if(!f||function(e,t,n){var i=Ne(Ze(n.el,n.options.draggable)),r=10;return t?e.clientX>i.right+r||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+r}(e,r,this)&&!f.animated){if(f===$e)return x(!1);if(f&&o===e.target&&(a=f),a&&(n=Ne(a)),!1!==Ht(et,o,$e,t,a,n,e,!!a))return D(),f&&f.nextSibling?o.insertBefore($e,f.nextSibling):o.appendChild($e),Je=o,N(),x(!0)}else if(f&&function(e,t,n){var i=Ne(Le(n.el,0,n.options,!0)),r=10;return t?e.clientX<i.left-r||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-r||e.clientY<i.bottom&&e.clientX<i.left}(e,r,this)){var g=Le(o,0,l,!0);if(g===$e)return x(!1);if(n=Ne(a=g),!1!==Ht(et,o,$e,t,a,n,e,!1))return D(),o.insertBefore($e,g),Je=o,N(),x(!0)}else if(a.parentNode===o){n=Ne(a);var m,y,b,_=$e.parentNode!==o,w=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return i===a||r===l||i+o/2===a+s/2}($e.animated&&$e.toRect||t,a.animated&&a.toRect||n,r),k=r?"top":"left",I=Me(a,"top","top")||Me($e,"top","top"),C=I?I.scrollTop:void 0;if(yt!==a&&(y=n[k],St=!1,Et=!w&&l.invertSwap||_),m=function(e,t,n,i,r,o,a,l){var s=i?e.clientY:e.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,h=!1;if(!a)if(l&&_t<c*r){if(!St&&(1===bt?s>u+c*o/2:s<d-c*o/2)&&(St=!0),St)h=!0;else if(1===bt?s<u+_t:s>d-_t)return-bt}else if(s>u+c*(1-r)/2&&s<d-c*(1-r)/2)return function(e){return Pe($e)<Pe(e)?1:-1}(t);if((h=h||a)&&(s<u+c*o/2||s>d-c*o/2))return s>u+c/2?1:-1;return 0}(e,a,n,r,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Et,yt===a),0!==m){var S=Pe($e);do{S-=m,b=Je.children[S]}while(b&&("none"===Te(b,"display")||b===Qe))}if(0===m||b===a)return x(!1);yt=a,bt=m;var E=a.nextElementSibling,A=!1,T=Ht(et,o,$e,t,a,n,e,A=1===m);if(!1!==T)return 1!==T&&-1!==T||(A=1===T),Tt=!0,setTimeout(Yt,30),D(),A&&!E?o.appendChild($e):a.parentNode.insertBefore($e,A?E:a),I&&Ue(I,0,C-I.scrollTop),Je=$e.parentNode,void 0===y||Et||(_t=Math.abs(y-Ne(a)[k])),N(),x(!0)}if(o.contains($e))return x(!1)}return!1}function O(l,s){Ke(l,v,le({evt:e,isOwner:u,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:a,completed:x,onMove:function(n,i){return Ht(et,o,$e,t,n,Ne(n),e,i)},changed:N},s))}function D(){O("dragOverAnimationCapture"),v.captureAnimationState(),v!==h&&h.captureAnimationState()}function x(t){return O("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(v),v!==h&&(Ae($e,ut?ut.options.ghostClass:c.options.ghostClass,!1),Ae($e,l.ghostClass,!0)),ut!==v&&v!==Ut.active?ut=v:v===Ut.active&&ut&&(ut=null),h===v&&(v._ignoreWhileAnimating=a),v.animateAll((function(){O("dragOverAnimationComplete"),v._ignoreWhileAnimating=null})),v!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(a===$e&&!$e.animated||a===o&&!a.animated)&&(yt=null),l.dragoverBubble||e.rootEl||a===document||($e.parentNode[Xe]._isOutsideThisEl(e.target),!t&&Bt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function N(){at=Pe($e),st=Pe($e,l.draggable),qe({sortable:v,name:"change",toEl:o,newIndex:at,newDraggableIndex:st,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){we(document,"mousemove",this._onTouchMove),we(document,"touchmove",this._onTouchMove),we(document,"pointermove",this._onTouchMove),we(document,"dragover",Bt),we(document,"mousemove",Bt),we(document,"touchmove",Bt)},_offUpEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;at=Pe($e),st=Pe($e,n.draggable),Ke("drop",this,{evt:e}),Je=$e&&$e.parentNode,at=Pe($e),st=Pe($e,n.draggable),Ut.eventCanceled||(kt=!1,Et=!1,St=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),zt(this.cloneId),zt(this._dragStartId),this.nativeDraggable&&(we(document,"drop",this),we(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ge&&Te(document.body,"user-select",""),Te($e,"transform",""),e&&(mt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Qe&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),(et===Je||ut&&"clone"!==ut.lastPutMode)&&it&&it.parentNode&&it.parentNode.removeChild(it),$e&&(this.nativeDraggable&&we($e,"dragend",this),Xt($e),$e.style["will-change"]="",mt&&!kt&&Ae($e,ut?ut.options.ghostClass:this.options.ghostClass,!1),Ae($e,this.options.chosenClass,!1),qe({sortable:this,name:"unchoose",toEl:Je,newIndex:null,newDraggableIndex:null,originalEvent:e}),et!==Je?(at>=0&&(qe({rootEl:Je,name:"add",toEl:Je,fromEl:et,originalEvent:e}),qe({sortable:this,name:"remove",toEl:Je,originalEvent:e}),qe({rootEl:Je,name:"sort",toEl:Je,fromEl:et,originalEvent:e}),qe({sortable:this,name:"sort",toEl:Je,originalEvent:e})),ut&&ut.save()):at!==ot&&at>=0&&(qe({sortable:this,name:"update",toEl:Je,originalEvent:e}),qe({sortable:this,name:"sort",toEl:Je,originalEvent:e})),Ut.active&&(null!=at&&-1!==at||(at=ot,st=lt),qe({sortable:this,name:"end",toEl:Je,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ke("nulling",this),et=$e=Je=Qe=tt=it=nt=rt=dt=ht=mt=at=st=ot=lt=yt=bt=ut=ct=Ut.dragged=Ut.ghost=Ut.clone=Ut.active=null,Ot.forEach((function(e){e.checked=!0})),Ot.length=vt=pt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":$e&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)Ce(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||jt(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach((function(e,t){var r=i.children[t];Ce(r,this.options.draggable,i,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ce(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=ze.modifyOption(this,e,t);n[e]="undefined"!==typeof i?i:t,"group"===e&&Pt(n)},destroy:function(){Ke("destroy",this);var e=this.el;e[Xe]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ct.splice(Ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!rt){if(Ke("hideClone",this),Ut.eventCanceled)return;Te(it,"display","none"),this.options.removeCloneOnHide&&it.parentNode&&it.parentNode.removeChild(it),rt=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(rt){if(Ke("showClone",this),Ut.eventCanceled)return;$e.parentNode!=et||this.options.group.revertClone?tt?et.insertBefore(it,tt):et.appendChild(it):et.insertBefore(it,$e),this.options.group.revertClone&&this.animate($e,it),Te(it,"display",""),rt=!1}}else this._hideClone()}},Dt&&_e(document,"touchmove",(function(e){(Ut.active||kt)&&e.cancelable&&e.preventDefault()})),Ut.utils={on:_e,off:we,css:Te,find:De,is:function(e,t){return!!Ce(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ve,closest:Ce,toggleClass:Ae,clone:He,index:Pe,nextTick:Wt,cancelNextTick:zt,detectDirection:Zt,getChild:Le},Ut.get=function(e){return e[Xe]},Ut.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ut.utils=le(le({},Ut.utils),e.utils)),ze.mount(e)}))},Ut.create=function(e,t){return new Ut(e,t)},Ut.version="1.15.0";var Gt,Kt,qt,$t,Jt,Qt,en=[],tn=!1;function nn(){en.forEach((function(e){clearInterval(e.pid)})),en=[]}function rn(){clearInterval(Qt)}var on=Ve((function(e,t,n,i){if(t.scroll){var r,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=xe(),u=!1;Kt!==n&&(Kt=n,nn(),Gt=t.scroll,r=t.scrollFn,!0===Gt&&(Gt=Fe(n,!0)));var d=0,h=Gt;do{var v=h,p=Ne(v),f=p.top,g=p.bottom,m=p.left,y=p.right,b=p.width,_=p.height,w=void 0,k=void 0,I=v.scrollWidth,C=v.scrollHeight,S=Te(v),E=v.scrollLeft,A=v.scrollTop;v===c?(w=b<I&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),k=_<C&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=b<I&&("auto"===S.overflowX||"scroll"===S.overflowX),k=_<C&&("auto"===S.overflowY||"scroll"===S.overflowY));var T=w&&(Math.abs(y-o)<=l&&E+b<I)-(Math.abs(m-o)<=l&&!!E),O=k&&(Math.abs(g-a)<=l&&A+_<C)-(Math.abs(f-a)<=l&&!!A);if(!en[d])for(var D=0;D<=d;D++)en[D]||(en[D]={});en[d].vx==T&&en[d].vy==O&&en[d].el===v||(en[d].el=v,en[d].vx=T,en[d].vy=O,clearInterval(en[d].pid),0==T&&0==O||(u=!0,en[d].pid=setInterval(function(){i&&0===this.layer&&Ut.active._onTouchMove(Jt);var t=en[this.layer].vy?en[this.layer].vy*s:0,n=en[this.layer].vx?en[this.layer].vx*s:0;"function"===typeof r&&"continue"!==r.call(Ut.dragged.parentNode[Xe],n,t,e,Jt,en[this.layer].el)||Ue(en[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=Fe(h,!1)));tn=u}}),30),an=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||r;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function ln(){}function sn(){}function cn(e,t,n){e.splice(n,0,e.splice(t,1)[0])}ln.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Le(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:an},ue(ln,{pluginName:"revertOnSpill"}),sn.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:an},ue(sn,{pluginName:"removeOnSpill"}),Ut.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?_e(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_e(document,"pointermove",this._handleFallbackAutoScroll):t.touches?_e(document,"touchmove",this._handleFallbackAutoScroll):_e(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?we(document,"dragover",this._handleAutoScroll):(we(document,"pointermove",this._handleFallbackAutoScroll),we(document,"touchmove",this._handleFallbackAutoScroll),we(document,"mousemove",this._handleFallbackAutoScroll)),rn(),nn(),clearTimeout(Se),Se=void 0},nulling:function(){Jt=Kt=Gt=tn=Qt=qt=$t=null,en.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(i,r);if(Jt=e,t||this.options.forceAutoScrollFallback||pe||ve||ge){on(e,this.options,o,t);var a=Fe(o,!0);!tn||Qt&&i===qt&&r===$t||(Qt&&rn(),Qt=setInterval((function(){var o=Fe(document.elementFromPoint(i,r),!0);o!==a&&(a=o,nn()),on(e,n.options,o,t)}),10),qt=i,$t=r)}else{if(!this.options.bubbleScroll||Fe(o,!0)===xe())return void nn();on(e,this.options,Fe(o,!1),!1)}}},ue(e,{pluginName:"scroll",initializeByDefault:!0})}),Ut.mount(sn,ln);var un=f.j.ofType(q),dn="data-sort-filter",hn="data-layer-uid",vn="esri-layer-list esri-widget esri-widget--panel",pn="esri-layer-list--new-ui",fn="esri-layer-list__no-items",gn="esri-layer-list__list",mn="esri-layer-list__list--root",yn="esri-layer-list__list--exclusive",bn="esri-layer-list__list--inherited",_n="esri-layer-list__list--independent",wn="esri-layer-list__item",kn="esri-layer-list__item--has-message",In="esri-layer-list__item--invisible",Cn="esri-layer-list__item--invisible-at-scale",Sn="esri-layer-list__item--updating",En="esri-layer-list__item--has-children",An="esri-layer-list__item--selectable",Tn="esri-layer-list__item-container",On="esri-layer-list__item-actions-menu",Dn="esri-layer-list__item-actions-menu-item",xn="esri-layer-list__item-actions-menu-item--active",Nn="esri-layer-list__item-actions",Mn="esri-layer-list__item-actions-list",Ln="esri-layer-list__item-action",Zn="esri-layer-list__item-action-icon",Pn="esri-layer-list__item-action-image",Rn="esri-layer-list__item-action-title",Fn="esri-layer-list__action-toggle",Bn="esri-layer-list__action-toggle--on",Vn="esri-layer-list__item-label",Un="esri-layer-list__item-message",Hn="esri-layer-list__item-title",Xn="esri-layer-list__connection-status",Yn="esri-layer-list__connection-status--disconnected",jn="esri-layer-list__connection-status--connected",Wn="esri-layer-list__item-toggle",zn="esri-layer-list__item-toggle-icon",Gn="esri-layer-list__item-toggle-icon",Kn="esri-layer-list__item-radio-icon",qn="esri-layer-list__child-toggle",$n="esri-layer-list__child-toggle--open",Jn="esri-layer-list__child-toggle-icon--opened",Qn="esri-layer-list__child-toggle-icon--closed",ei="esri-layer-list__child-toggle-icon--closed-rtl",ti="esri-layer-list--chosen",ni="esri-disabled",ii="esri-disabled-element",ri="esri-hidden",oi="esri-rotating",ai="esri-icon-handle-horizontal",li="esri-icon-visible",si="esri-icon-non-visible",ci="esri-icon-radio-checked",ui="esri-icon-radio-unchecked",di="esri-icon-notice-triangle",hi="esri-icon-down-arrow",vi="esri-icon-right-triangle-arrow",pi="esri-icon-left-triangle-arrow",fi="esri-icon-loading-indicator",gi="esri-icon-default-action",mi="esri-icon-layers",yi="actions",bi="action-section",_i="items",wi="exclusive",ki="inherited";function Ii(e){var t=e.actionsOpen,n=e.children;t&&(e.actionsOpen=!1),n.forEach((function(e){return Ii(e)}))}var Ci="root",Si={statusIndicators:!0},Ei=function(e){(0,h.Z)(i,e);var t=(0,v.Z)(i);function i(e,n){var r;return(0,u.Z)(this,i),(r=t.call(this,e,n))._handles=new g.u,r._sortableNodes=new Map,r._sortableMap=new Map,r._focusSortUid=null,r._newUI=(0,p.c)("esri-layerlist-new-ui"),r._tooltipReferenceMap=new Map,r.visibleItems=null,r.iconClass=mi,r.label=void 0,r.listItemCanGiveFunction=null,r.listItemCanReceiveFunction=null,r.listItemCreatedFunction=null,r.messages=null,r.messagesCommon=null,r.multipleSelectionEnabled=!1,r.operationalItems=null,r.selectionEnabled=!1,r.selectedItems=new un,r.view=null,r.viewModel=new oe,r.visibleElements=(0,a.Z)({},Si),r._onSortableSort=function(e){var t=e.to,n=e.from,i=e.item,o=e.newIndex;n&&t&&(n===t?r._sortLayers(r._sortableMap.get(n.dataset.group)):r._moveLayerFromChildList({to:t,from:n,item:i,newIndex:o}))},r._sortableCanSort=function(e,t){return!(!e.el.dataset.group||!t.el.dataset.group)},r._sortableCanPull=function(e,t,n){var i=(0,l.Z)(r).listItemCanGiveFunction,o={selected:n["data-item"],from:t.el["data-item"],to:e.el["data-item"]};return!r._sortableCanSort(e,t)||"function"!=typeof i||i.call(null,o)},r._sortableCanPut=function(e,t,n){var i=(0,l.Z)(r).listItemCanReceiveFunction,o={selected:n["data-item"],from:t.el["data-item"],to:e.el["data-item"]};return!r._sortableCanSort(e,t)||"function"!=typeof i||i.call(null,o)},r._onSortableEnd=function(e){var t=e.oldIndex,n=e.from,i=e.to,r=e.item;n!==i&&n.insertBefore(r,n.children[t])},r}return(0,d.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.operationalItems;this._setVisibleItems(t),this.own([(0,m.a)((function(){return e.operationalItems}),"change",(function(){return e._itemsChanged(t)})),(0,m.l)((function(){return e.errorsVisible}),(function(){return e._itemsChanged(t)})),(0,m.l)((function(){return e.selectionEnabled}),(function(){return e._toggleAllSorting()}),m.h)])}},{key:"loadDependencies",value:function(){return Promise.all([n.e(3165).then(n.bind(n,73165))])}},{key:"destroy",value:function(){this._destroySortables(),this._tooltipReferenceMap.clear(),this._handles.destroy(),this._handles=null}},{key:"castVisibleElements",value:function(e){return(0,a.Z)((0,a.Z)({},Si),e)}},{key:"triggerAction",value:function(e,t){this.viewModel.triggerAction(e,t)}},{key:"render",value:function(){var e,t,n=this.visibleItems,i=this._newUI,r=null===(e=this.viewModel)||void 0===e?void 0:e.state,a=(t={},(0,o.Z)(t,pn,i),(0,o.Z)(t,ri,"loading"===r),(0,o.Z)(t,ni,"disabled"===r),t),l=this.renderItemTooltips(),s=this.renderItems();return(0,b.n)("div",{class:this.classes(vn,a)},null!==n&&void 0!==n&&n.length?[l,s]:this.renderNoItems())}},{key:"renderItemTooltip",value:function(e){var t=this._tooltipReferenceMap,n=this.messages;return e?(0,b.n)("calcite-tooltip",{label:n.layerIncompatible,referenceElement:t.get(e.uid)},n.layerIncompatibleTooltip):null}},{key:"renderItemTooltipNodes",value:function(e){var t=this,n=e.incompatible,i=e.children;return[n?this.renderItemTooltip(e):null].concat((0,r.Z)(n?[]:null===i||void 0===i?void 0:i.toArray().map((function(e){return t.renderItemTooltipNodes(e)}))))}},{key:"renderItemTooltips",value:function(){var e=this;return this.visibleItems.toArray().map((function(t){return e.renderItemTooltipNodes(t)}))}},{key:"renderNoItems",value:function(){return(0,b.n)("div",{class:fn},this.messages.noItemsToDisplay)}},{key:"renderItems",value:function(){var e=this,t=this.visibleItems,n=this.selectionEnabled,i=this.messages;return(0,b.n)("ul",{"aria-label":i.widgetLabel,role:n?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":Ci,bind:this,class:this.classes(gn,mn,_n)},null===t||void 0===t?void 0:t.map((function(t){return e.renderItem(t,null)})).toArray())}},{key:"renderActionsMenuIcon",value:function(e,t){var n=this.messagesCommon,i=(0,o.Z)({},xn,e.actionsOpen);return(0,b.n)("div",{key:"actions-menu-toggle","data-item":e,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes(Dn,i),tabindex:"0",role:"button","aria-controls":t,"aria-label":n.options,title:n.options},(0,b.n)("span",{"aria-hidden":"true",class:ai}))}},{key:"renderActionsMenu",value:function(e,t,n,i){var r=e.panel,o=r&&r.visible?this.renderPanelButton(r):null,a=1===n&&this._getSingleActionButton(t),l=a?this.renderAction({item:e,action:a,singleAction:!0}):null,s=!a&&n?this.renderActionsMenuIcon(e,i):null;return s||o||a?(0,b.n)("div",{key:"actions-menu",class:On},o,l,s):null}},{key:"renderChildList",value:function(e,t){var n,i,r=this,a=this.selectionEnabled,l=e.visibilityMode,s=e.children,c=this._hasChildren(e),u=!c&&a&&"group"===(null===(n=e.layer)||void 0===n?void 0:n.type),d=wi,h=ki,v=(i={},(0,o.Z)(i,yn,l===d),(0,o.Z)(i,bn,l===h),(0,o.Z)(i,_n,l!==h&&l!==d),i);return c||u?(0,b.n)("ul",{bind:this,key:"list-items",id:t,"data-group":e.uid,"data-item":e,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes(gn,v),"aria-expanded":e.open?"true":"false",role:a?"listbox":l===d?"radiogroup":"group",hidden:!e.open&&!u||null},null===s||void 0===s?void 0:s.map((function(t){return r.renderItem(t,e)})).toArray()):null}},{key:"renderChildrenToggle",value:function(e,t){var n=this.messagesCommon,i=this._hasChildren(e),r=(0,o.Z)({},$n,e.open),a=e.open?n.collapse:n.expand;return i?(0,b.n)("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":e,key:"toggle-children",class:this.classes(qn,r),tabindex:"0",role:"button","aria-controls":t,"aria-label":a,title:a},(0,b.n)("span",{"aria-hidden":"true",class:this.classes(Qn,vi)}),(0,b.n)("span",{"aria-hidden":"true",class:this.classes(Jn,hi)}),(0,b.n)("span",{"aria-hidden":"true",class:this.classes(ei,pi)})):null}},{key:"renderItemMessage",value:function(e){var t=this;return e.error?(0,b.n)("div",{key:"esri-layer-list__error",class:Un,role:"alert"},(0,b.n)("span",{"aria-hidden":"true",class:di}),this.messages.layerError):e.incompatible?(0,b.n)("div",{key:"esri-layer-list__incompatible",class:Un,role:"alert"},(0,b.n)("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:di,afterCreate:function(n){return t._setTooltipReference(n,e)}}),this.messages.layerIncompatible):null}},{key:"renderItemContent",value:function(e,t,n){var i=this.id,r="".concat(i,"_").concat(e.uid),o="".concat(r,"_actions"),a="".concat(r,"__list"),l=e.panel,s=this._filterActions(e.actionsSections),c=this._countActions(s);return[(0,b.n)("div",{key:"list-item-container",class:Tn},this.renderChildrenToggle(e,a),this.renderLabel(e,t,n),this.renderActionsMenu(e,s,c,o)),this.renderItemMessage(e),c?this.renderActionsSections(e,s,o):null,l&&l.open?l.render():null,this.renderChildList(e,a)]}},{key:"renderItem",value:function(e,t){var n,i=this._newUI,r=this.id,l=this.selectionEnabled,s=this.selectedItems,c=this.visibleElements,u="".concat("".concat(r,"_").concat(e.uid),"__title"),d=this._hasMessage(e),h=this._hasChildren(e),v=(n={},(0,o.Z)(n,En,h),(0,o.Z)(n,kn,!!d),(0,o.Z)(n,Sn,e.updating&&!t&&c.statusIndicators),(0,o.Z)(n,In,i&&!e.visible),(0,o.Z)(n,Cn,!e.visibleAtCurrentScale),(0,o.Z)(n,An,l),n);if(l){var p,f,g=(f={},(0,o.Z)(f,hn,null===(p=e.layer)||void 0===p?void 0:p.uid),(0,o.Z)(f,dn,(!e.sortable).toString()),f);return(0,b.n)("li",(0,a.Z)({key:"item-with-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(wn,v),"aria-labelledby":u,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":e,"data-group":t?t.uid:Ci,tabIndex:0,"aria-selected":L(e,s)?"true":"false",role:"option"},g),this.renderItemContent(e,t,u))}return(0,b.n)("li",{key:"item-no-selection-".concat(e.uid),bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes(wn,v),"aria-labelledby":u},this.renderItemContent(e,t,u))}},{key:"renderItemConnectionStatus",value:function(e){var t,n=e.connectionStatus;return n?(0,b.n)("span",{class:this.classes((t={},(0,o.Z)(t,Xn,!0),(0,o.Z)(t,Yn,"disconnected"===n),(0,o.Z)(t,jn,"connected"===n),t)),key:"layer-connection-status"}):null}},{key:"renderItemTitle",value:function(e,t){var n=this.messages;if(!e)return null;var i=e.title||n.untitledLayer,r=e.visibleAtCurrentScale?i:"".concat(i," (").concat(n.layerInvisibleAtScale,")");return(0,b.n)("span",{key:"layer-title-container",id:t,title:r,"aria-label":r,class:Hn},i)}},{key:"renderItemToggleIcon",value:function(e,t){var n,i=this._newUI,r=wi,a=t&&t.visibilityMode,l=(n={},(0,o.Z)(n,zn,i),(0,o.Z)(n,Gn,i&&a!==r),(0,o.Z)(n,Kn,i&&a===r),(0,o.Z)(n,ci,a===r&&e.visible),(0,o.Z)(n,ui,a===r&&!e.visible),(0,o.Z)(n,li,a!==r&&e.visible),(0,o.Z)(n,si,a!==r&&!e.visible),n);return(0,b.n)("span",{key:"item-toggle-icon",class:this.classes(l),"aria-hidden":"true"})}},{key:"renderItemToggle",value:function(e,t,n){var i=this.selectionEnabled,r=this.messages,o=wi,a=t&&t.visibilityMode,l=a===o?"radio":"switch";return(0,b.n)("span",i?{key:"item-toggle-selection-enabled",class:Wn,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":a,tabIndex:0,title:e.visible?r.hideLayer:r.showLayer,"aria-checked":e.visible?"true":"false",role:l,"aria-labelledby":n}:{key:"item-toggle",class:Wn},this.renderItemToggleIcon(e,t))}},{key:"renderLabel",value:function(e,t,n){var i=this.selectionEnabled,r=this._newUI,o=this.messages,a=ki,l=wi,s=null===t||void 0===t?void 0:t.visibilityMode,c=s===l?"radio":"switch",u=[this.renderItemToggle(e,t,n),this.renderItemConnectionStatus(e),this.renderItemTitle(e,n)];r&&u.reverse();var d=(0,b.n)("div",i?{key:"item-label-no-selection-".concat(e.uid),class:Vn}:{key:"item-label-with-selection-".concat(e.uid),class:Vn,bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":e,"data-parent-visibility":s,tabIndex:0,"aria-checked":e.visible?"true":"false",title:e.visible?o.hideLayer:o.showLayer,role:c,"aria-labelledby":n},u);return s===a||e.error?(0,b.n)("div",{key:"item-label-container-".concat(e.uid),class:Vn},this.renderItemTitle(e,n)):d}},{key:"renderPanelButton",value:function(e){var t=e.className,n=e.open,i=e.title,r=e.image||t?t:gi,a=this._getIconImageStyles(e),l=(0,o.Z)({},xn,n),s=(0,o.Z)({},Pn,!!a["background-image"]);return r&&(s[r]=!!r),(0,b.n)("div",{key:"panel-".concat(e.uid),bind:this,"data-panel":e,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes(Dn,l),role:"button",tabindex:"0",title:i,"aria-label":i},(0,b.n)("span",{class:this.classes(s),styles:a}))}},{key:"renderActionsSections",value:function(e,t,n){var i=this,r=t.toArray().map((function(t,n){return(0,b.n)("ul",{key:"".concat(e,"-action-section-").concat(n),class:Mn},i.renderActionSection(e,t))}));return(0,b.n)("div",{role:"group","aria-expanded":e.actionsOpen?"true":"false",key:"actions-section",id:n,class:Nn,hidden:!e.actionsOpen||null},r)}},{key:"renderActionSection",value:function(e,t){var n=this;return(t&&t.toArray()).map((function(t){return n.renderAction({item:e,action:t})}))}},{key:"renderActionIcon",value:function(e){var t,n=e.active,i=e.className,r=this._getIconImageStyles(e),a="button"!==e.type||e.image||i?i:gi,l=(t={},(0,o.Z)(t,Pn,!n&&!!r["background-image"]),(0,o.Z)(t,fi,n),(0,o.Z)(t,oi,n),t);return a&&!n&&(l[a]=!0),(0,b.n)("span",{key:"action-icon","aria-hidden":"true",class:this.classes(Zn,l),styles:r})}},{key:"renderActionTitle",value:function(e,t){return t?null:(0,b.n)("span",{key:"action-title",class:Rn},e)}},{key:"renderAction",value:function(e){var t,n=e.item,i=e.action,r=e.singleAction,a=i.active,l=i.disabled,s=i.title,c=(t={},(0,o.Z)(t,Dn,r&&"button"===i.type),(0,o.Z)(t,Ln,a||!r&&"toggle"!==i.type),(0,o.Z)(t,Fn,!a&&"toggle"===i.type),(0,o.Z)(t,Bn,!a&&"toggle"===i.type&&i.value),(0,o.Z)(t,ii,l),t),u=[this.renderActionIcon(i),this.renderActionTitle(s,r)];return r?(0,b.n)("div",{bind:this,"data-item":n,"data-action":i,role:"button",key:"single-action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:c,tabindex:"0",title:s,"aria-label":s},u):(0,b.n)("li",{bind:this,"data-item":n,"data-action":i,key:"action-".concat(i.uid),onclick:this._triggerAction,onkeydown:this._triggerAction,classes:c,tabindex:"0",role:"button",title:s,"aria-label":s},u)}},{key:"_setTooltipReference",value:function(e,t){this._tooltipReferenceMap.set(t.uid,e),this.scheduleRender()}},{key:"_hasMessage",value:function(e){return!!e.error||e.incompatible}},{key:"_hasChildren",value:function(e){return!!e.children.length&&!this._hasMessage(e)}},{key:"_sortNodeRemoved",value:function(e){var t=this._sortableMap,n=e.dataset.group,i=t.get(n);i&&i.destroy(),t.delete(n)}},{key:"_destroySortables",value:function(){var e=this._sortableMap,t=this._sortableNodes;e.forEach((function(e){return e&&e.destroy()})),e.clear(),t.clear()}},{key:"_moveLayerFromChildList",value:function(e){var t=e.to,n=e.from,i=e.item,r=e.newIndex,o=i["data-item"],a=t["data-item"],l=n["data-item"];this.viewModel.moveListItem(o,l,a,r)}},{key:"_sortLayers",value:function(e){var t,n;if(e){var i=e.el["data-item"],r=e.toArray();i?function(e,t){var n=null===e||void 0===e?void 0:e.layer;if(n){var i=x(n);i&&N(n.get(i),t)}}(i,r):N(null===(t=this.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers,r)}}},{key:"_toggleSorting",value:function(e,t){var n=this._sortableMap,i=this.selectionEnabled,r=n.get(t),o=e["data-item"],a=(t===Ci||o.childrenSortable&&function(e){var t=e&&(e.get("layer.layer")||e.layer);if(!t)return!1;var n=t.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"!=typeof n||n}(o))&&i;if(r)r.option("disabled",!a);else if(a){var l=Ut.create(e,{dataIdAttr:hn,group:{name:t,pull:this._sortableCanPull,put:this._sortableCanPut},filter:"[".concat(dn,'="true"]'),fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!a,chosenClass:ti});n.set(t,l)}}},{key:"_toggleAllSorting",value:function(){var e=this;this._sortableNodes.forEach((function(t,n){return e._toggleSorting(t,n)}))}},{key:"_sortNodeCreated",value:function(e){var t=e.dataset.group;t&&(this._sortableNodes.set(t,e),this._toggleSorting(e,t))}},{key:"_setVisibleItems",value:function(e){var t=this;this.visibleItems=null===e||void 0===e?void 0:e.filter((function(e){return!e.hidden&&(t.errorsVisible||!e.error)}))}},{key:"_getSingleActionButton",value:function(e){return e.reduce((function(e){return e})).filter((function(e){return e&&"button"===e.type})).getItemAt(0)}},{key:"_focusListItem",value:function(e){var t,n=this._focusSortUid;e&&n&&(null===(t=e["data-item"].layer)||void 0===t?void 0:t.uid)===n&&(e.focus(),this._focusSortUid=null)}},{key:"_watchActionSectionChanges",value:function(e,t){var n=this,i=bi+t;this._handles.add(e.on("change",this.scheduleRender.bind(this)),i),e.forEach((function(e){return n._renderOnActionChanges(e,t)}))}},{key:"_renderOnActionChanges",value:function(e,t){var n=this,i=yi+t;"toggle"!==e.type?"slider"!==e.type?this._handles.add((0,m.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.image,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible]}),(function(){return n.scheduleRender()}),m.h),i):this._handles.add((0,m.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.value,null===e||void 0===e?void 0:e.displayValueEnabled,null===e||void 0===e?void 0:e.max,null===e||void 0===e?void 0:e.min,null===e||void 0===e?void 0:e.step]}),(function(){return n.scheduleRender()}),m.h),i):this._handles.add((0,m.l)((function(){return[null===e||void 0===e?void 0:e.className,null===e||void 0===e?void 0:e.image,null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.value]}),(function(){return n.scheduleRender()}),m.h),i)}},{key:"_renderOnItemChanges",value:function(e){var t=this,n=e.uid,i=_i+n;this._handles.add([(0,m.l)((function(){var t,n,i;return[null===e||void 0===e?void 0:e.actionsOpen,null===e||void 0===e?void 0:e.visible,null===e||void 0===e?void 0:e.open,null===e||void 0===e?void 0:e.updating,null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.visibleAtCurrentScale,null===e||void 0===e?void 0:e.error,null===e||void 0===e?void 0:e.visibilityMode,null===e||void 0===e?void 0:e.panel,null===e||void 0===e||null===(t=e.panel)||void 0===t?void 0:t.title,null===e||void 0===e||null===(n=e.panel)||void 0===n?void 0:n.content,null===e||void 0===e||null===(i=e.panel)||void 0===i?void 0:i.className,null===e||void 0===e?void 0:e.sortable,null===e||void 0===e?void 0:e.childrenSortable]}),(function(){return t.scheduleRender()}),m.w),(0,m.l)((function(){return[null===e||void 0===e?void 0:e.hidden,null===e||void 0===e?void 0:e.error]}),(function(){return t._setVisibleItems(t.operationalItems)})),e.actionsSections.on("change",(function(){return t.scheduleRender()})),e.children.on("change",(function(){return t.scheduleRender()}))],i),e.children.forEach((function(e){return t._renderOnItemChanges(e)})),e.actionsSections.forEach((function(e){return t._watchActionSectionChanges(e,n)}))}},{key:"_itemsChanged",value:function(e){var t=this;this._handles.removeAll(),e.forEach((function(e){return t._renderOnItemChanges(e)})),this._tooltipReferenceMap.clear(),this._setVisibleItems(e),this.scheduleRender()}},{key:"_filterActions",value:function(e){return e.map((function(e){return e.filter((function(e){return e.visible}))}))}},{key:"_countActions",value:function(e){return e.reduce((function(e,t){return e+t.length}),0)}},{key:"_getIconImageStyles",value:function(e){var t="esri.widgets.LayerList.ListItemPanel"===e.declaredClass||"esri.support.Action.ActionButton"===e.declaredClass||"esri.support.Action.ActionToggle"===e.declaredClass?e.image:null;return{"background-image":t?'url("'.concat(t,'")'):null}}},{key:"_selectionKeydown",value:function(e){var t=(0,p.i)(e);if(["ArrowDown","ArrowUp"].includes(t)){e.stopPropagation();var n=e.currentTarget,i=n["data-item"],r=this._sortableMap,o=this.selectedItems,a=n.dataset.group,l=r.get(a);if(l){var s=L(i,o),c=l.toArray(),u=e.target,d=c.indexOf(u.dataset.layerUid);if(-1!==d){if("ArrowDown"===t){var h,v,f=d+1;if(f>=c.length)return;s?(cn(c,d,f),l.sort(c),this._sortLayers(l),this._focusSortUid=null===(h=i.layer)||void 0===h?void 0:h.uid):(this._focusSortUid=null===(v=i.layer)||void 0===v?void 0:v.uid,this.scheduleRender())}if("ArrowUp"===t){var g,m,y=d-1;if(y<=-1)return;s?(cn(c,d,y),l.sort(c),this._sortLayers(l),this._focusSortUid=null===(g=i.layer)||void 0===g?void 0:g.uid):(this._focusSortUid=null===(m=i.layer)||void 0===m?void 0:m.uid,this.scheduleRender())}}}}else this._toggleSelection(e)}},{key:"_toggleActionsOpen",value:function(e){var t=e.currentTarget["data-item"],n=!t.actionsOpen;n&&this.operationalItems.forEach((function(e){return Ii(e)})),t.actionsOpen=n,e.stopPropagation()}},{key:"_triggerPanel",value:function(e){var t=e.currentTarget["data-panel"];t&&(t.open=!t.open),e.stopPropagation()}},{key:"_triggerAction",value:function(e){var t=e.currentTarget,n=t["data-action"],i=t["data-item"];"toggle"===n.type&&(n.value=!n.value),this.triggerAction(n,i),e.stopPropagation()}},{key:"_toggleVisibility",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-parent-visibility"),i=t["data-item"];n===wi&&i.visible||(i.visible=!i.visible),e.stopPropagation()}},{key:"_toggleChildrenClick",value:function(e){var t=e.currentTarget["data-item"];t.open=!t.open,e.stopPropagation()}},{key:"_toggleSelection",value:function(e){var t,n;e.stopPropagation();var i=this.multipleSelectionEnabled,r=this.selectedItems,o=e.currentTarget["data-item"],a=L(o,r),l=r.length;if(!i)return!l||a&&1===l?void(a?null===(t=r.remove)||void 0===t||t.call(r,a):r.add(o)):(r.removeAll(),void r.add(o));a?null===(n=r.remove)||void 0===n||n.call(r,a):r.add(o)}}]),i}(b.O);(0,p.e)([(0,p.d)()],Ei.prototype,"visibleItems",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"iconClass",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"errorsVisible",void 0),(0,p.e)([(0,p.d)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ei.prototype,"label",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"listItemCanGiveFunction",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"listItemCanReceiveFunction",void 0),(0,p.e)([(0,y.o)("viewModel.listItemCreatedFunction")],Ei.prototype,"listItemCreatedFunction",void 0),(0,p.e)([(0,p.d)(),(0,b.e)("esri/widgets/LayerList/t9n/LayerList")],Ei.prototype,"messages",void 0),(0,p.e)([(0,p.d)(),(0,b.e)("esri/t9n/common")],Ei.prototype,"messagesCommon",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"multipleSelectionEnabled",void 0),(0,p.e)([(0,y.o)("viewModel.operationalItems")],Ei.prototype,"operationalItems",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"selectionEnabled",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"selectedItems",void 0),(0,p.e)([(0,y.o)("viewModel.view")],Ei.prototype,"view",void 0),(0,p.e)([(0,S.t)("trigger-action"),(0,p.d)({type:oe})],Ei.prototype,"viewModel",void 0),(0,p.e)([(0,p.d)()],Ei.prototype,"visibleElements",void 0),(0,p.e)([(0,p.H)("visibleElements")],Ei.prototype,"castVisibleElements",null),(0,p.e)([(0,y.o)("viewModel.triggerAction")],Ei.prototype,"triggerAction",null),(0,p.e)([(0,C.t)()],Ei.prototype,"_toggleActionsOpen",null),(0,p.e)([(0,C.t)()],Ei.prototype,"_triggerPanel",null),(0,p.e)([(0,C.t)()],Ei.prototype,"_triggerAction",null),(0,p.e)([(0,C.t)()],Ei.prototype,"_toggleVisibility",null),(0,p.e)([(0,C.t)()],Ei.prototype,"_toggleChildrenClick",null),(0,p.e)([(0,C.t)()],Ei.prototype,"_toggleSelection",null);var Ai=Ei=(0,p.e)([(0,p.n)("esri.widgets.LayerList")],Ei);t.default=Ai},4197:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(73393);function r(){return function(e,t){if(!e[t])throw new TypeError("Cannot auto bind undefined function '".concat(t,"'"));return{value:a(e[t])}}}function o(e){var t=e.type;return e instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}function a(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];o(t)?(0,i.k)(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call.apply(e,[this,t].concat(r))}}},17691:function(e,t,n){n.d(t,{o:function(){return o}});var i=n(1413),r=n(50165);function o(e,t){var n=t?(0,i.Z)((0,i.Z)({},t),{},{source:e}):e;return(0,r.d)({aliasOf:n})}},87110:function(e,t,n){n.d(t,{s:function(){return v}});var i=n(74165),r=n(15671),o=n(43144),a=n(15861),l=n(42),s=n(50165),c=(n(52155),n(72577)),u=n(13994),d=n(61772),h=s.s.getLogger("esri.intl");function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.format,r=void 0===i?{}:i;return(0,s.h)(e,(function(e){return p(e,t,r)}))}function p(e,t,n){var i,r,o=e.indexOf(":");if(-1===o?i=e.trim():(i=e.slice(0,o).trim(),r=e.slice(o+1).trim()),!i)return"";var a=(0,s.j)(i,t);if(null==a)return"";var c=n[r]||n[i];return c?function(e,t){switch(t.type){case"date":return(0,l.L)(e,t.intlOptions);case"number":return(0,l.m)(e,t.intlOptions);default:return h.warn("missing format descriptor for key {key}"),f(e)}}(a,c):r?function(e,t){switch(t.toLowerCase()){case"dateformat":return(0,l.L)(e);case"numberformat":return(0,l.m)(e);default:return h.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?(0,l.L)(e):/^numberformat/i.test(t)?(0,l.m)(e):f(e)}}(a,r):f(a)}function f(e){switch(typeof e){case"string":return e;case"number":return(0,l.m)(e);case"boolean":return""+e;default:return e instanceof Date?(0,l.L)(e):""}}function g(){return g=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){var a,l,u,d,h,v,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.exec(r)){e.next=3;break}throw new s.a("esri-intl:invalid-bundle",'Bundle id "'.concat(r,'" is not compatible with the pattern "').concat(n,'"'));case 3:return l=a[1]?"".concat(a[1],"/"):"",u=a[2],d=(0,c.u)(o),h="".concat(l).concat(u,".json"),v=d?"".concat(l).concat(u,"_").concat(d,".json"):h,e.prev=4,e.next=7,m(t(v));case 7:case 17:p=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),v!==h){e.next=14;break}throw new s.a("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,m(t(h));case 20:throw e.prev=20,e.t1=e.catch(14),new s.a("intl:unknown-bundle",'Bundle "'.concat(r,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",p);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),g.apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.r)(w.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",w.fetchBundleAsset(t));case 2:return e.next=4,(0,u.U)(t,{responseType:"text"});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(){function e(t){var n,i=t.base,o=void 0===i?"":i,a=t.pattern,l=t.location,s=void 0===l?new URL(window.location.href):l;(0,r.Z)(this,e),n="string"==typeof s?function(e){return new URL(e,new URL(s,window.location.href)).href}:s instanceof URL?function(e){return new URL(e,s).href}:s,this.pattern="string"==typeof a?new RegExp("^".concat(a)):a,this.getAssetUrl=n,o=o?o.endsWith("/")?o:o+"/":"",this.matcher=new RegExp("^".concat(o,"(?:(.*)/)?(.*)$"))}return(0,o.Z)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,n,i){return g.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var _,w={};(0,c.l)((_={pattern:"esri/",location:d.a},new b(_)))},82162:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(93433);function r(e){return function(t){t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);var n=t._delegatedEventNames,r=Array.isArray(e)?e:function(e){return e.split(",").map((function(e){return e.trim()}))}(e);n.push.apply(n,(0,i.Z)(r))}}},43895:function(e,t,n){n.d(t,{e:function(){return i},t:function(){return r}});n(73393);function i(e){return e&&"function"==typeof e.render}function r(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);
//# sourceMappingURL=9017.9a885d83.chunk.js.map