"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9460],{9460:function(e,t,r){r.r(t);var i=r(37762),n=r(15671),l=r(43144),u=r(11752),s=r(61120),a=r(60136),o=r(29388),d=r(48848),c=r(64998),y=r(93661),h=r(50690),f=r(62470),v=r(51920),g=r(17562),p=r(35237),_=r(22603),F=r(75922),b=r(72770),I=r(69672),w=r(261),E=r(78697),k=r(22159),C=r(37661),x=r(72936),S=r(28390),Q=r(47748),m=(r(74384),r(46817),r(82474),r(40114),r(40558),r(25577),r(62610),r(93314),r(37856),r(15751),r(59984),r(20302),r(53586),r(65094),r(60369),r(92072),r(37944),r(86086),r(21385),r(89794),r(48200),r(71802),r(85253),r(93209),r(25456),r(46337),r(81556),r(93116),r(56162),r(33795),r(79557),r(89181),r(2821),r(66577),r(33794),r(71147),r(84186),r(15529),r(47855),r(70449),r(2959),r(56546),r(39926),r(6762),r(8141),r(26151),r(91681),r(12953),r(63393),r(90442),r(64854),r(69641),r(15436),r(69768),r(43955),r(26313),r(43066),r(49228),r(95249),r(75255),r(65415),r(32043),r(42467),r(46737),r(52113),r(42667),r(61118),r(630),r(98598),r(1500),r(19941),r(39994),r(49871),r(63212),r(69717),r(53409),r(35182),r(62466),r(51816),r(68781),r(35865),r(51219),r(95643),r(59389),r(43976),r(90429),r(52559),r(95399),r(98987),r(99795),r(87753),r(29130),r(82396),r(1685),r(74797),r(45999),r(85113),r(72973),r(62710),r(52721),r(61903),r(23444),r(40811),r(24623),r(64264),r(6379),r(21015),r(23341),r(41820),r(20086),r(92982),r(61416),r(77880),r(74494),r(77755),r(71645),r(89311),r(67066),r(39769),r(70607),r(85700),r(3719),r(32161),r(37686),r(16641),r(62642),r(90316),r(19891),r(23585),r(70522),r(17332),r(17455),r(29048),r(68136),r(13239),r(50253),r(27205),r(60666),r(43406),r(45184),r(73911),r(43345),r(66633),r(70381),r(20675),r(37077),r(85026),r(33973),r(42233),r(93122),r(70288),r(67430),r(76291),r(95414),r(57791),r(87750),r(64772),r(75833),r(31698),r(94777),r(87424),r(20846),r(10464),r(4937),r(41723),r(24093),r(477),r(22862),r(68882),r(41896),r(5526),r(2473),r(40345),r(96278),r(52638),r(76419),r(25874),r(44581),r(44513),r(90325),r(53921),r(25747),r(6189),r(69838),r(2352),r(54622),r(73679),r(62753),r(83948),r(94663),r(67477),r(78413),r(26593),r(60491),r(3393),r(59929),r(81216),r(62004),r(31303),r(52195),r(35264),r(16263),r(3356),r(87440),r(21744),r(18936),r(4397),r(25217),r(72361),r(87917),r(46018),r(70863),r(62312),r(24648),r(63999),r(1797),r(2467),r(75257),r(26789),r(64095),r(51732),r(2851),r(70285),r(40335),r(18395),r(87888),(0,I.b)()),j=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).type="scene-layer-3d",e.progressiveLoadFactor=1,e._elevationContext="scene",e._isIntegratedMesh=!1,e._supportsLabeling=!0,e._interactiveEditingSessions=new Map,e._queryEngine=null,e}return(0,l.Z)(r,[{key:"i3slayer",get:function(){return this.layer}},{key:"layerPopupEnabled",get:function(){return this.layer.popupEnabled}},{key:"filter",get:function(){return this._get("filter")},set:function(e){this._set("filter",w.L.checkSupport(e)?e:null)}},{key:"viewFilter",get:function(){var e=this,t=this.filter,r=this.layerFilter;if((0,y.t)(t)&&(0,y.t)(r))return null;var i=this._get("viewFilter");return(0,y.t)(i)?new w.L({layerFilter:r,viewFilter:t,layerFieldsIndex:this.layer.fieldsIndex,loadAsyncModule:function(t){return e._loadAsyncModule(t)},addSqlFilter:function(t,r){return e.addSqlFilter(t,r,e.logError)}}):(i.viewFilter=t,i.layerFilter=r,i)}},{key:"requiredFields",get:function(){var e,t;return null!==(e=null===(t=this._fieldsHelper)||void 0===t?void 0:t.requiredFields)&&void 0!==e?e:[]}},{key:"_floorFilterClause",get:function(){var e=(0,g.o)(this);return(0,y.r)(e)?f.WhereClause.create(e,this.layer.fieldsIndex):null}},{key:"_excludeObjectIdsSorted",get:function(){var e=this.layer.excludeObjectIds.toArray();return(0,_.t)()&&this.i3sOverrides.geometryChangedObjectIds.length>0&&(e=e.concat(this.i3sOverrides.geometryChangedObjectIds)),e.length?e.sort((function(e,t){return e-t})):null}},{key:"_objectQualitySettings",get:function(){var e,t,r;return null===(e=this.view)||void 0===e||null===(t=e.qualitySettings)||void 0===t||null===(r=t.sceneService)||void 0===r?void 0:r.object}},{key:"lodFactor",get:function(){var e,t;return null!==(e=null===(t=this._objectQualitySettings)||void 0===t?void 0:t.lodFactor)&&void 0!==e?e:1}},{key:"lodCrossfadeinDuration",get:function(){var e;return null!==(e=this._objectQualitySettings.lodCrossfadeinDuration)&&void 0!==e?e:0}},{key:"lodCrossfadeoutDuration",get:function(){var e;return null!==(e=this._objectQualitySettings.lodCrossfadeoutDuration)&&void 0!==e?e:0}},{key:"lodCrossfadeUncoveredDuration",get:function(){var e;return null!==(e=this._objectQualitySettings.lodCrossfadeUncoveredDuration)&&void 0!==e?e:0}},{key:"updatingProgressValue",get:function(){var e,t;return null!==(e=null===(t=this._controller)||void 0===t?void 0:t.updatingProgress)&&void 0!==e?e:0}},{key:"initialize",value:function(){var e=this;this._fieldsHelper=new I.c({layerView:this}),this.updatingHandles.add((function(){return e.layer.rangeInfos}),(function(t){return e._rangeInfosChanged(t)}),h.h),this.updatingHandles.add((function(){return e.layer.renderer}),(function(t){return e.updatingHandles.addPromise(e._rendererChange(t))}),h.h);var t=function(){return e._filterChange()};this.updatingHandles.add((function(){return e.parsedDefinitionExpression}),t),this.updatingHandles.add((function(){return e.filter}),t),this.updatingHandles.add((function(){return e._floorFilterClause}),t),this.updatingHandles.add((function(){return e._excludeObjectIdsSorted}),t),this.updatingHandles.add((function(){return(0,y.r)(e.viewFilter)?e.viewFilter.sortedObjectIds:null}),t),this.updatingHandles.add((function(){return(0,y.r)(e.viewFilter)?e.viewFilter.parsedWhereClause:null}),t),this.updatingHandles.add((function(){return[(0,y.r)(e.viewFilter)?e.viewFilter.parsedGeometry:null,(0,y.r)(e.filter)?e.filter.spatialRelationship:null,(0,y.r)(e.layer.filter)?e.layer.filter.spatialRelationship:null]}),(function(){return e._geometryFilterChange()})),this.handles.add(this.layer.on("apply-edits",(function(t){return e.updatingHandles.addPromise(t.result)}))),this.handles.add(this.layer.on("edits",(function(t){return e._handleEdits(t)})))}},{key:"destroy",value:function(){this._fieldsHelper=(0,y.g)(this._fieldsHelper)}},{key:"_rangeInfosChanged",value:function(e){null!=e&&e.length>0&&d.a.getLogger(this.declaredClass).warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")}},{key:"createQuery",value:function(){var e={outFields:["*"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return(0,y.r)(this.filter)?this.filter.createQuery(e):new p.x(e)}},{key:"queryExtent",value:function(e,t){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"queryFeatureCount",value:function(e,t){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"queryFeatures",value:function(e,t){var r=this;return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal).then((function(e){if(null===e||void 0===e||!e.features)return e;var t,n=r.layer,l=(0,i.Z)(e.features);try{for(l.s();!(t=l.n()).done;){var u=t.value;u.layer=n,u.sourceLayer=n}}catch(s){l.e(s)}finally{l.f()}return e}))}},{key:"queryObjectIds",value:function(e,t){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"_ensureQueryEngine",value:function(){return this._queryEngine||(this._queryEngine=this._createQueryEngine()),this._queryEngine}},{key:"_createQueryEngine",value:function(){var e=this,t=(0,F.u)(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new w.d({layerView:this,priority:Q.I.FEATURE_QUERY_ENGINE,spatialIndex:new w.f({featureAdapter:new w.n({objectIdField:this.layer.objectIdField,attributeStorageInfo:this.layer.attributeStorageInfo,getFeatureExtent:t}),toArray:function(){var t=new Array;return e._forAllFeatures((function(e,r,i){return t.push({id:e,index:r,meta:i}),F.L.CONTINUE}),null,F.I.ALL_IN_CLIPPING_AREA),t},forAllFeatures:function(t,r){return e._forAllFeatures((function(e,r,i){return t({id:e,index:r,meta:i})}),r,F.I.ALL_IN_CLIPPING_AREA)},getFeatureExtent:t,sourceSpatialReference:(0,k.w)(this.layer),viewSpatialReference:this.view.spatialReference})})}},{key:"highlight",value:function(e){var t=this._highlights;if(e instanceof p.x){var i=t.acquireSet(),n=i.set,l=i.handle;return this.queryObjectIds(e).then((function(e){return t.setFeatureIds(n,e)})),l}return(0,u.Z)((0,s.Z)(r.prototype),"highlight",this).call(this,e)}},{key:"createInteractiveEditSession",value:function(e){return(0,I.i)(this._attributeEditingContext,e)}},{key:"_createLayerGraphic",value:function(e){var t=new c.g(null,null,e);return t.layer=this.layer,t.sourceLayer=this.layer,t}},{key:"canResume",value:function(){return(0,u.Z)((0,s.Z)(r.prototype),"canResume",this).call(this)&&(!this._controller||this._controller.rootNodeVisible)}},{key:"getFilters",value:function(){var e=(0,u.Z)((0,s.Z)(r.prototype),"getFilters",this).call(this),t=this._excludeObjectIdsSorted;return(0,y.r)(t)&&e.push((function(e){return(0,k.q)(t,!1,e)})),this._floorFilterClause&&this.addSqlFilter(e,this._floorFilterClause,this.logError),this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),(0,y.r)(this.viewFilter)&&this.viewFilter.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}},{key:"isUpdating",value:function(){return(0,u.Z)((0,s.Z)(r.prototype),"isUpdating",this).call(this)||this.layerFilterUpdating||(0,y.r)(this.viewFilter)&&this.viewFilter.updating||(0,y.r)(this.i3sOverrides)&&this.i3sOverrides.updating}},{key:"_ensureQuery",value:function(e){return this._addDefinitionExpressionToQuery((0,y.t)(e)?this.createQuery():p.x.from(e))}},{key:"_attributeEditingContext",get:function(){var e=this;return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:this._getObjectIdField(),forEachNode:function(t){return e._forAllNodes((function(e){return(0,y.r)(e)?t(e.node,e.featureIds):null}))},attributeStorageInfo:this.i3slayer.attributeStorageInfo,i3sOverrides:this.i3sOverrides,getAttributeData:function(t){return e.getAttributeData(t)},setAttributeData:function(t,r){return e.setAttributeData(t,r)},clearMemCache:function(){return e.clearMemCache()}}}},{key:"_handleEdits",value:function(e){(0,_.t)()&&(0,I.a)(this._attributeEditingContext,e),(0,I.u)(this._attributeEditingContext,e)}},{key:"hasGeometryFilter",get:function(){var e=this.viewFilter;return(0,y.r)(e)&&(0,y.r)(e.parsedGeometry)}},{key:"computeNodeFiltering",value:function(e){var t=this.viewFilter;return(0,y.t)(t)||t.isMBSGeometryVisible(e,this.view.spatialReference,this._controller.crsIndex)?E.n.Unmodified:E.n.Culled}}]),r}((0,F.y)((0,C.t)((0,x.c)((0,b.n)(I.E)))));(0,d.e)([(0,d.y)()],j.prototype,"i3slayer",null),(0,d.e)([(0,d.y)(S.t)],j.prototype,"updatingProgress",void 0),(0,d.e)([(0,d.y)({type:v.y})],j.prototype,"filter",null),(0,d.e)([(0,d.y)({readOnly:!0})],j.prototype,"viewFilter",null),(0,d.e)([(0,d.y)(m.requiredFields)],j.prototype,"requiredFields",null),(0,d.e)([(0,d.y)(m.availableFields)],j.prototype,"availableFields",void 0),(0,d.e)([(0,d.y)()],j.prototype,"_fieldsHelper",void 0),(0,d.e)([(0,d.y)()],j.prototype,"_floorFilterClause",null),(0,d.e)([(0,d.y)()],j.prototype,"_excludeObjectIdsSorted",null),(0,d.e)([(0,d.y)()],j.prototype,"_objectQualitySettings",null),(0,d.e)([(0,d.y)()],j.prototype,"lodFactor",null),(0,d.e)([(0,d.y)()],j.prototype,"updatingProgressValue",null);var A=j=(0,d.e)([(0,d.n)("esri.views.3d.layers.SceneLayerView3D")],j);t.default=A}}]);
//# sourceMappingURL=9460.ef49dee3.chunk.js.map