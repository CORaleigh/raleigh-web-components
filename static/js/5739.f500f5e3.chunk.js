"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5739],{32959:function(e,t,r){r.r(t);var n=r(74165),i=r(15861),a=r(1413),o=r(15671),s=r(43144),c=r(11752),l=r(61120),u=r(60136),p=r(29388),y=r(48848),d=r(93661),h=r(50690),f=r(68781),v=r(54545),m=r(95415);r(74384),r(46817),r(82474),r(40114),r(40558),r(64998),r(25577),r(62610),r(93314),r(37856),r(15751),r(59984),r(20302),r(53586),r(65094),r(60369),r(92072),r(37944),r(86086),r(21385),r(89794),r(48200),r(71802),r(85253),r(93209),r(25456),r(46337),r(81556),r(93116),r(56162),r(69641),r(15436),r(18030),r(33795),r(79557),r(51920),r(89181),r(35237),r(69768),r(2821),r(66577),r(33794),r(71147),r(84186),r(15529),r(47855),r(70449),r(22603),r(2959),r(56546),r(39926),r(6762),r(8141),r(26151),r(91681),r(12953),r(63393),r(90442),r(64854),r(18144),r(91502),r(84234),r(43066),r(64095),r(1206),r(5650),r(35602),r(54233),r(93122),r(75833),r(27205),r(50796),r(87753),r(33563),r(18007),r(82017),r(91242),r(21438),r(70607),r(29048),r(68136),r(63999),r(45184),r(43924),r(25217),r(50253),r(5430),r(85113),r(75255),r(46737),r(52113),r(53921),r(51732),r(65703),r(62004),r(31303),r(52195),r(630),r(35264);function _(e,t){if((0,d.t)(e)&&(0,d.t)(t))return null;var r={};return(0,d.r)(t)&&(r.geometry=t.toJSON()),(0,d.r)(e)&&(r.where=e),r}var O=function(e){(0,u.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;return(0,o.Z)(this,r),(e=t.apply(this,arguments))._enabledDataReceived=!1,e.errorString=null,e.connectionStatus="disconnected",e}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this;this.handles.add([(0,h.l)((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.purgeOptions}),(function(){return e._update()})),(0,h.l)((function(){return e.suspended}),(function(t){t?e._proxy.pauseStream():e._proxy.resumeStream()}))])}},{key:"connectionError",get:function(){if(this.errorString)return new y.s("stream-controller",this.errorString)}},{key:"on",value:function(e,t){"data-received"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent("data-received",!0));var n=(0,c.Z)((0,l.Z)(r.prototype),"on",this).call(this,e,t),i=this;return{remove:function(){n.remove(),"data-received"===e&&(i._proxy.closed||i.hasEventListener("data-received")||i._proxy.enableEvent("data-received",!1))}}}},{key:"queryLatestObservations",value:function(e,t){var r=this;if(!this.layer.timeInfo.endField&&!this.layer.timeInfo.startField)throw new y.s("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((function(e){var t=f.default.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))}},{key:"detach",value:function(){(0,c.Z)((0,l.Z)(r.prototype),"detach",this).call(this),this.connectionStatus="disconnected"}},{key:"_createClientOptions",value:function(){var e=this;return(0,a.Z)((0,a.Z)({},(0,c.Z)((0,l.Z)(r.prototype),"_createClientOptions",this).call(this)),{},{setProperty:function(t){e.set(t.propertyName,t.value)}})}},{key:"_createTileRendererHash",value:function(e){var t="".concat(JSON.stringify(this.layer.purgeOptions),".").concat(JSON.stringify(_(this.layer.definitionExpression,this.layer.geometryDefinition)),")");return(0,c.Z)((0,l.Z)(r.prototype),"_createTileRendererHash",this).call(this,e)+t}},{key:"_createServiceOptions",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,a,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.layer,r=t.objectIdField,i=t.fields.map((function(e){return e.toJSON()})),a=(0,m.e)(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,s=t.spatialReference?t.spatialReference.toJSON():null,e.abrupt("return",{type:"stream",fields:i,geometryType:a,objectIdField:r,timeInfo:o,source:this.layer.parsedUrl,serviceFilter:_(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:s,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:t.customParameters});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(v.default);(0,y.e)([(0,y.y)()],O.prototype,"errorString",void 0),(0,y.e)([(0,y.y)({readOnly:!0})],O.prototype,"connectionError",null),(0,y.e)([(0,y.y)()],O.prototype,"connectionStatus",void 0);var S=O=(0,y.e)([(0,y.n)("esri.views.2d.layers.StreamLayerView2D")],O);t.default=S}}]);
//# sourceMappingURL=5739.f500f5e3.chunk.js.map