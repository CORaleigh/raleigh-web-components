"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[6570],{60369:function(e,t,i){i.d(t,{a:function(){return f},b:function(){return y},c:function(){return p}});var r,n=i(15671),a=i(43144),l=i(60136),o=i(29388),s=i(48848),u=(i(93661),i(92072)),c=r=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).active=!1,r.className=null,r.disabled=!1,r.id=null,r.indicator=!1,r.title=null,r.type=null,r.visible=!0,r}return(0,a.Z)(i,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),i}((0,u.s)(s.m));(0,s.e)([(0,s.y)()],c.prototype,"active",void 0),(0,s.e)([(0,s.y)()],c.prototype,"className",void 0),(0,s.e)([(0,s.y)()],c.prototype,"disabled",void 0),(0,s.e)([(0,s.y)()],c.prototype,"id",void 0),(0,s.e)([(0,s.y)()],c.prototype,"indicator",void 0),(0,s.e)([(0,s.y)()],c.prototype,"title",void 0),(0,s.e)([(0,s.y)()],c.prototype,"type",void 0),(0,s.e)([(0,s.y)()],c.prototype,"visible",void 0);var d,p=c=r=(0,s.e)([(0,s.n)("esri.support.actions.ActionBase")],c),v=d=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).image=null,r.type="button",r}return(0,a.Z)(i,[{key:"clone",value:function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),i}(p);(0,s.e)([(0,s.y)()],v.prototype,"image",void 0);var m,f=v=d=(0,s.e)([(0,s.n)("esri.support.Action.ActionButton")],v),h=m=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).image=null,r.type="toggle",r.value=!1,r}return(0,a.Z)(i,[{key:"clone",value:function(){return new m({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),i}(p);(0,s.e)([(0,s.y)()],h.prototype,"image",void 0),(0,s.e)([(0,s.y)()],h.prototype,"value",void 0);var y=h=m=(0,s.e)([(0,s.n)("esri.support.Action.ActionToggle")],h)},6379:function(e,t,i){i.d(t,{v:function(){return g}});var r=i(1413),n=i(74165),a=i(15861),l=i(15671),o=i(43144),s=i(11752),u=i(61120),c=i(60136),d=i(29388),p=i(48848),v=i(40558),m=i(59389),f=i(93661),h=i(82474),y=i(93116),b=i(21015),g=function(e){var t=function(e){(0,c.Z)(h,e);var t=(0,d.Z)(h);function h(){var e;return(0,l.Z)(this,h),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e.userHasEditingPrivileges=!0,e}return(0,o.Z)(h,[{key:"destroy",value:function(){this.portalItem=(0,f.g)(this.portalItem)}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,i){if(t.itemId)return new b.default({id:t.itemId,portal:i&&i.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,Promise.all([i.e(9557),i.e(5249),i.e(3028)]).then(i.bind(i,64789)).then((function(e){return e.l}));case 4:return a=e.sent,(0,p.f)(r),e.next=8,a.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},r);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),(0,p.j)(e.t0)||p.a.getLogger(this.declaredClass).warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,i){return e.apply(this,arguments)}}()},{key:"finishLoadEditablePortalLayer",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this._fetchUserHasEditingPrivileges(t).catch((function(e){return(0,p.w)(e),!0}));case 3:e.t1=e.sent,e.t0._set.call(e.t0,"userHasEditingPrivileges",e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchUserHasEditingPrivileges",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.url?null===v.b||void 0===v.b?void 0:v.b.findCredential(this.url):null){e.next=3;break}return e.abrupt("return",!0);case 3:if(w.credential!==i){e.next=7;break}e.t0=w.user,e.next=10;break;case 7:return e.next=9,this._fetchEditingUser(t);case 9:e.t0=e.sent;case 10:return r=e.t0,e.abrupt("return",(w.credential=i,w.user=r,(0,f.t)(r)||null==r.privileges||r.privileges.includes("features:user:edit")));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchEditingUser",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,r,a,l,o,s,u,c,d,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l=null===(i=this.portalItem)||void 0===i||null===(r=i.portal)||void 0===r?void 0:r.user)){e.next=3;break}return e.abrupt("return",l);case 3:if(null!==(o=v.b.findServerInfo(null!==(a=this.url)&&void 0!==a?a:""))&&void 0!==o&&o.owningSystemUrl){e.next=6;break}return e.abrupt("return",null);case 6:if(s="".concat(o.owningSystemUrl,"/sharing/rest"),!(u=y.j.getDefault())||!u.loaded||(0,v.F)(u.restUrl)!==(0,v.F)(s)){e.next=9;break}return e.abrupt("return",u.user);case 9:return c="".concat(s,"/community/self"),d=(0,f.r)(t)?t.signal:null,e.next=13,(0,m.b)((0,v.U)(c,{authMode:"no-prompt",query:{f:"json"},signal:d}));case 13:return p=e.sent,e.abrupt("return",p.ok?y.p.fromJSON(p.value.data):null);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),(0,s.Z)((0,u.Z)(h.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var i=t&&t.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||y.j.getDefault());return i&&n&&!(0,v.N)(n.restUrl,i.restUrl)?(t.messages&&t.messages.push(new p.s("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer"),{layer:this})),null):(0,s.Z)((0,u.Z)(h.prototype),"write",this).call(this,e,(0,r.Z)((0,r.Z)({},t),{},{layer:this}))}}]),h}(e);return(0,p.e)([(0,p.y)({type:b.default})],t.prototype,"portalItem",null),(0,p.e)([(0,h.o)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,p.e)([(0,h.r)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,p.e)([(0,p.y)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,p.e)([(0,p.y)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,p.e)([(0,p.n)("esri.layers.mixins.PortalLayer")],t)},w={credential:null,user:null}},41820:function(e,t,i){i.d(t,{t:function(){return s}});var r=i(15671),n=i(43144),a=i(60136),l=i(29388),o=i(48848),s=(i(93661),function(e){var t=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return(0,n.Z)(i,[{key:"effectiveScaleRange",get:function(){var e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);var i=this._get("effectiveScaleRange");return i&&i.minScale===e.minScale&&i.maxScale===e.maxScale?i:e}}]),i}(e);return(0,o.e)([(0,o.y)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,o.e)([(0,o.y)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,o.e)([(0,o.y)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,o.e)([(0,o.n)("esri.layers.mixins.ScaleRangeLayer")],t)})},67066:function(e,t,i){i.d(t,{p:function(){return o}});var r=i(25577),n=i(59984),a=["oid","global-id"],l=["oid","global-id","guid"];function o(e,t){var i=e.displayField,a=e.editFieldsInfo,l=e.fields,o=e.objectIdField,s=e.title;if(!l)return null;var d=function(e,t){var i=e.editFieldsInfo,n=e.fields,a=e.objectIdField;return function(e,t){var i=e;return t&&(e=e.filter((function(e){return!t.includes(e.type)}))),e===i&&(e=e.slice()),e.sort(c),e}(null!==n&&void 0!==n?n:[],(null===t||void 0===t?void 0:t.ignoreFieldTypes)||f).map((function(e){return new r.a({fieldName:e.name,isEditable:p(e,i),label:e.alias,format:v(e),visible:u(e,{editFieldsInfo:i,objectIdField:a,visibleFieldNames:null===t||void 0===t?void 0:t.visibleFieldNames})})}))}({editFieldsInfo:a,fields:l,objectIdField:o},t);if(!d.length)return null;var m=function(e){var t=(0,n.E)(e),i=e.titleBase;return t?"".concat(i,": {").concat(t.trim(),"}"):null!==i&&void 0!==i?i:""}({titleBase:s,fields:l,displayField:i}),h=[new r.b,new r.i];return new r.k({title:m,content:h,fieldInfos:d})}var s=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],u=function(e,t){var i=t.editFieldsInfo,r=t.objectIdField,n=t.visibleFieldNames;return n?n.has(e.name):!d(e.name,i)&&(!r||e.name!==r)&&!a.includes(e.type)&&!s.some((function(t){return t.test(e.name)}))};function c(e,t){return"oid"===e.type?-1:"oid"===t.type?1:m(e)?-1:m(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function d(e,t){if(!e||!t)return!1;var i=t.creationDateField,r=t.creatorField,n=t.editDateField,a=t.editorField;return[i&&i.toLowerCase(),r&&r.toLowerCase(),n&&n.toLowerCase(),a&&a.toLowerCase()].includes(e.toLowerCase())}function p(e,t){return e.editable&&!l.includes(e.type)&&!d(e.name,t)}function v(e){switch(e.type){case"small-integer":case"integer":case"single":return new r.u({digitSeparator:!0,places:0});case"double":return new r.u({digitSeparator:!0,places:2});case"date":return new r.u({dateFormat:"long-month-day-year"});default:return"string"===e.type&&(0,n.a)(e.name)?new r.u({digitSeparator:!0,places:0}):null}}function m(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())}var f=["geometry","blob","raster","guid","xml"]}}]);
//# sourceMappingURL=6570.4eb9dec2.chunk.js.map