"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[729],{81642:function(e,t,n){n.d(t,{a:function(){return p},c:function(){return f},l:function(){return d},u:function(){return u}});var r=n(4942),i=n(1413),a=n(75610),s=n(14739),o=n(50338);function u(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.l:"esriGeometryPolyline"===e?o.o:o.S}}}var c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,l=1;function p(e,t){if((0,a.a)("esri-csp-restrictions"))return function(){return(0,i.Z)((0,r.Z)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var s in e)n+="this".concat(c.test(s)?".".concat(s):'["'.concat(s,'"]')," = ").concat(JSON.stringify(e[s]),";");var o=new Function("\n      return class AttributesClass$".concat(l++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new o}}catch(o){return function(){return(0,i.Z)((0,r.Z)({},t,null),e)}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,a.m)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.t,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},50338:function(e,t,n){n.d(t,{S:function(){return o},e:function(){return r},i:function(){return i},l:function(){return a},o:function(){return s},r:function(){return c},s:function(){return l},t:function(){return u},y:function(){return p}});var r=[252,146,31,255],i=[153,153,153,255],a={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},u={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},80729:function(e,t,n){n.d(t,{F:function(){return v},I:function(){return S},N:function(){return q},S:function(){return T},T:function(){return Z},j:function(){return w},k:function(){return x},q:function(){return N},v:function(){return A},x:function(){return C}});var r=n(74165),i=n(37762),a=n(1413),s=n(70804),o=n(15861),u=(n(91204),n(57714)),c=n(23132),l=n(75610),p=n(30709),d=n(61495),f=n(9e4),y=n(36659),m=n(81642),g=n(55827),h=n(69797),b=c.s.getLogger("esri.layers.graphics.sources.ogcfeature"),w="http://www.opengis.net/def/crs/",v="".concat(w,"OGC/1.3/CRS84");function S(e,t){return k.apply(this,arguments)}function k(){return k=(0,o.Z)((0,r.Z)().mark((function e(t,n){var s,o,p,d,f,w,v,S,k,Z,F,x,I,T,j,C,M,q,N,O,A,G=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=G.length>2&&void 0!==G[2]?G[2]:{},o=G.length>3&&void 0!==G[3]?G[3]:5,p=t.links,d=W(p,"items","application/geo+json")||W(p,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!(0,l.t)(d)){e.next=5;break}throw new c.a("ogc-feature-layer:missing-items-page","Missing items url");case 5:return e.next=7,(0,u.U)(d.href,{signal:s.signal,query:(0,a.Z)((0,a.Z)({limit:o},s.customParameters),{},{token:s.apiKey}),headers:{accept:"application/geo+json"}});case 7:return f=e.sent,w=f.data,e.next=11,(0,y.O)(w);case 11:if(v=(0,y.T)(w,{geometryType:n.geometryType}),S=n.fields||v.fields||[],k=null!=n.hasZ?n.hasZ:v.hasZ,Z=v.geometryType,F=n.objectIdField||v.objectIdFieldName||"OBJECTID",x=n.timeInfo,I=S.find((function(e){return e.name===F}))){e.next=20;break}if(v.objectIdFieldType){e.next=17;break}throw new c.a("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");case 17:S.unshift({name:F,alias:F,type:"esriFieldTypeOID",editable:!1,nullable:!1}),e.next=21;break;case 20:I.type="esriFieldTypeOID",I.editable=!1,I.nullable=!1;case 21:F!==v.objectIdFieldName&&(T=S.find((function(e){return e.name===v.objectIdFieldName})))&&(T.type="esriFieldTypeInteger"),S===v.fields&&v.unknownFields.length>0&&b.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:v.unknownFields}}),j=(0,i.Z)(S),e.prev=24,j.s();case 26:if((C=j.n()).done){e.next=34;break}if(null==(M=C.value).name&&(M.name=M.alias),null==M.alias&&(M.alias=M.name),"esriFieldTypeOID"!==M.type&&"esriFieldTypeGlobalID"!==M.type&&(M.editable=null==M.editable||!!M.editable,M.nullable=null==M.nullable||!!M.nullable),M.name){e.next=30;break}throw new c.a("ogc-feature-layer:invalid-field-name","field name is missing",{field:M});case 30:if(h.i.jsonValues.includes(M.type)){e.next=32;break}throw new c.a("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(M.name,'"'),{field:M});case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),j.e(e.t0);case 39:return e.prev=39,j.f(),e.finish(39);case 42:return x&&(q=new g.d(S),x.startTimeField&&((N=q.get(x.startTimeField))?(x.startTimeField=N.name,N.type="esriFieldTypeDate"):x.startTimeField=null),x.endTimeField&&((O=q.get(x.endTimeField))?(x.endTimeField=O.name,O.type="esriFieldTypeDate"):x.endTimeField=null),x.trackIdField&&((A=q.get(x.trackIdField))?x.trackIdField=A.name:(x.trackIdField=null,b.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:x}}))),x.startTimeField||x.endTimeField||(b.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:x}}),x=null)),e.abrupt("return",{drawingInfo:Z?(0,m.u)(Z):null,geometryType:Z,fields:S,hasZ:!!k,objectIdField:F,timeInfo:x});case 44:case"end":return e.stop()}}),e,null,[[24,36,39,42]])}))),k.apply(this,arguments)}function Z(e){return F.apply(this,arguments)}function F(){return F=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,p,d,f,y,m=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},i=t.links,s=W(i,"data","application/json")||W(i,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json"),!(0,l.t)(s)){e.next=4;break}throw new c.a("ogc-feature-layer:missing-collections-page","Missing collections url");case 4:return o=n.apiKey,p=n.customParameters,d=n.signal,e.next=9,(0,u.U)(s.href,{signal:d,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},p),{},{token:o})});case 9:return f=e.sent,y=f.data,e.abrupt("return",y);case 12:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function x(e){return I.apply(this,arguments)}function I(){return I=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,p,d,f,y,m=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},i=t.links,s=W(i,"conformance","application/json")||W(i,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json"),!(0,l.t)(s)){e.next=4;break}throw new c.a("ogc-feature-layer:missing-conformance-page","Missing conformance url");case 4:return o=n.apiKey,p=n.customParameters,d=n.signal,e.next=9,(0,u.U)(s.href,{signal:d,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},p),{},{token:o})});case 9:return f=e.sent,y=f.data,e.abrupt("return",y);case 12:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function T(e){return j.apply(this,arguments)}function j(){return j=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,c,l,p=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},i=n.apiKey,s=n.customParameters,o=n.signal,e.next=6,(0,u.U)(t,{signal:o,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},s),{},{token:i})});case 6:return c=e.sent,l=c.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function C(e){return M.apply(this,arguments)}function M(){return M=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,c,p,d,f,y=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:{},i="application/vnd.oai.openapi+json;version=3.0",s=W(t.links,"service-desc",i),!(0,l.t)(s)){e.next=4;break}return e.abrupt("return",(b.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null));case 4:return o=n.apiKey,c=n.customParameters,p=n.signal,e.next=9,(0,u.U)(s.href,{signal:p,headers:{accept:i},query:(0,a.Z)((0,a.Z)({},c),{},{token:o})});case 9:return d=e.sent,f=d.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function q(e){var t,n=null===(t=(0,s.Z)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e))||void 0===t?void 0:t.groups;if(!n)return null;var r=n.authority,i=n.code;switch(r.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return p.k.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return p.k.WGS84.wkid;default:return null}case"esri":case"epsg":var a=Number.parseInt(i,10);return Number.isNaN(a)?null:a;default:return null}}function N(e,t,n){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t,n,i);case 2:return a=e.sent,e.abrupt("return",(0,d.s)(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,n){return G.apply(this,arguments)}function G(){return G=(0,o.Z)((0,r.Z)().mark((function e(t,n,s){var o,m,g,h,b,w,v,S,k,Z,F,x,I,T,j,C,M,q,N,O,A,G,R,z,_,B,K,E,Q,$,J,H,V,X,Y,ee,te,ne,re,ie,ae,se;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.capabilities.query.maxRecordCount,m=t.collection,g=t.layerDefinition,h=t.queryParameters,b=h.apiKey,w=h.customParameters,v=t.spatialReference,S=t.supportedCrs,k=m.links,Z=W(k,"items","application/geo+json")||W(k,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!(0,l.t)(Z)){e.next=3;break}throw new c.a("ogc-feature-layer:missing-items-page","Missing items url");case 3:if(F=n.geometry,x=n.num,I=n.start,T=n.timeExtent,j=n.where,!n.objectIds){e.next=6;break}throw new c.a("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");case 6:return C=p.k.fromJSON(v),M=(0,l.n)(n.outSpatialReference,C),q=M.isWGS84?null:L(M,S),N=U(F,S),O=P(T),A=D(j),G=null!==x&&void 0!==x?x:null!=I&&void 0!==I?10:o,e.next=15,(0,u.U)(Z.href,(0,a.Z)((0,a.Z)({},s),{},{query:(0,a.Z)((0,a.Z)((0,a.Z)({},w),N),{},{crs:q,datetime:O,query:A,limit:G,startindex:I,token:b}),headers:{accept:"application/geo+json"}}));case 15:if(R=e.sent,z=R.data,_=!1,z.links&&(B=z.links.find((function(e){return"next"===e.rel})),_=!!B),!_&&Number.isInteger(z.numberMatched)&&Number.isInteger(z.numberReturned)&&(_=z.numberReturned<z.numberMatched),K=g.fields,E=g.globalIdField,Q=g.hasM,$=g.hasZ,J=g.objectIdField,H=g.geometryType,V=(0,y.L)(z,{geometryType:H,hasZ:$,objectIdField:J}),!q&&M.isWebMercator){X=(0,i.Z)(V);try{for(X.s();!(Y=X.n()).done;)ee=Y.value,(0,l.r)(ee.geometry)&&((te=(0,d.n)(ee.geometry,H,$,!1)).spatialReference=p.k.WGS84,ee.geometry=(0,d.t)((0,p.M)(te,M)))}catch(r){X.e(r)}finally{X.f()}}ne=(0,i.Z)(V);try{for(ne.s();!(re=ne.n()).done;)(ie=re.value).objectId=ie.attributes[J]}catch(r){ne.e(r)}finally{ne.f()}return ae=q||!q&&M.isWebMercator?M.toJSON():p.n,se=new f.e,e.abrupt("return",(se.exceededTransferLimit=_,se.features=V,se.fields=K,se.geometryType=H,se.globalIdFieldName=E,se.hasM=Q,se.hasZ=$,se.objectIdFieldName=J,se.spatialReference=ae,se));case 26:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function L(e,t){var n,r,i,a=e.isWebMercator;if(!e.wkid)return null;var s=a?null!==(n=null!==(r=null!==(i=t[3857])&&void 0!==i?i:t[102100])&&void 0!==r?r:t[102113])&&void 0!==n?n:t[900913]:t[e.wkid];return s?"".concat(w).concat(s):null}function R(e){if((0,l.t)(e))return"";var t=e.xmin,n=e.ymin,r=e.xmax,i=e.ymax;return"".concat(t,",").concat(n,",").concat(r,",").concat(i)}function P(e){if((0,l.t)(e))return null;var t=e.start,n=e.end;return"".concat((0,l.r)(t)?t.toISOString():"..","/").concat((0,l.r)(n)?n.toISOString():"..")}function D(e){return(0,l.t)(e)||!e||"1=1"===e?null:e}function U(e,t){if(!function(e){return(0,l.r)(e)&&"extent"===e.type}(e))return null;var n=e.spatialReference;if(!n||n.isWGS84)return{bbox:R(e)};var r=L(n,t);return(0,l.r)(r)?{bbox:R(e),"bbox-crs":r}:n.isWebMercator?{bbox:R((0,p.M)(e,p.k.WGS84))}:null}function W(e,t,n){return e.find((function(e){return e.rel===t&&e.type===n}))||e.find((function(e){return e.rel===t&&!e.type}))}}}]);
//# sourceMappingURL=729.2f101594.chunk.js.map