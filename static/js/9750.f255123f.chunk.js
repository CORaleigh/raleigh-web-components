"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9750],{9750:function(e,t,r){r.r(t);var i=r(37762),n=r(15671),l=r(43144),u=r(11752),s=r(61120),a=r(60136),o=r(29388),d=r(23132),c=r(83822),h=r(75610),y=r(36551),f=r(81019),v=r(25838),p=r(42814),g=r(34860),F=r(40023),_=r(3964),b=r(35825),w=r(39149),I=r(68528),E=r(58687),C=r(28930),k=r(73538),S=r(14181),x=(r(91204),r(80262),r(30709),r(70441),r(36460),r(57714),r(51451),r(80175),r(50526),r(50448),r(41742),r(43920),r(1773),r(77196),r(24980),r(3114),r(22144),r(78674),r(66307),r(2760),r(88370),r(72820),r(78311),r(96349),r(9055),r(79611),r(2157),r(30604),r(21583),r(83024),r(61340),r(36638),r(67154),r(96636),r(79054),r(29709),r(47642),r(18411),r(44455),r(43782),r(33976),r(407),r(28210),r(17436),r(25316),r(77389),r(53373),r(94872),r(3969),r(54539),r(19967),r(50338),r(43124),r(69797),r(48561),r(96401),r(40273),r(77470),r(84538),r(49580),r(54841),r(33703),r(92870),r(97033),r(72692),r(55269),r(32568),r(69202),r(27597),r(1241),r(67417),r(15181),r(33642),r(28999),r(69953),r(15612),r(10590),r(19948),r(30664),r(38304),r(47626),r(79042),r(61495),r(16485),r(92029),r(74575),r(9575),r(53249),r(83996),r(72763),r(6794),r(28681),r(38929),r(97866),r(68890),r(31513),r(28623),r(10312),r(95254),r(61099),r(12158),r(93874),r(62446),r(27264),r(50905),r(78945),r(55827),r(70516),r(25279),r(22268),r(40452),r(60424),r(22225),r(38425),r(42471),r(78470),r(1665),r(38843),r(24892),r(48889),r(30150),r(53647),r(81663),r(86270),r(47672),r(63022),r(10815),r(87833),r(21523),r(84192),r(71710),r(45332),r(57952),r(48466),r(86148),r(60912),r(64571),r(94867),r(91309),r(25715),r(71573),r(83262),r(2822),r(61349),r(32990),r(6819),r(52376),r(6243),r(44344),r(64296),r(45414),r(74021),r(97566),r(90138),r(50982),r(37783),r(14432),r(55806),r(56864),r(58394),r(20005),r(62400),r(16936),r(84452),r(63662),r(86068),r(75370),r(62268),r(18392),r(97627),r(64004),r(21924),r(13425),r(21165),r(21984),r(5900),r(20880),r(73554),r(68826),r(61212),r(83712),r(7513),r(75955),r(14739),r(10780),r(83059),r(4720),r(48373),r(61473),r(14946),r(44365),r(90584),r(98907),r(66156),r(10534),r(25459),r(78556),r(77787),r(85511),r(87603),r(22051),r(46123),r(75777),r(76071),r(42446),r(59819),r(42152),d.s.getLogger("esri.views.3d.layers.SceneLayerView3D")),q=(0,b.b)(),O=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).type="scene-layer-3d",e.lodFactor=1,e.progressiveLoadFactor=1,e._elevationContext="scene",e._isIntegratedMesh=!1,e._supportsLabeling=!0,e._interactiveEditingSessions=new Map,e._queryEngine=null,e}return(0,l.Z)(r,[{key:"filter",get:function(){return this._get("filter")},set:function(e){this._set("filter",w.C.checkSupport(e)?e:null)}},{key:"viewFilter",get:function(){var e=this,t=this.filter;if((0,h.t)(t)&&(0,h.t)(this.layerFilter))return null;var r=this._get("viewFilter");return(0,h.t)(r)?new w.C({layerFilter:this.layerFilter,viewFilter:t,layerFieldsIndex:this.layer.fieldsIndex,loadAsyncModule:function(t){return e._loadAsyncModule(t)},applyFilters:function(){return e._applyFilters(!0)},addSqlFilter:function(t,r){return e.addSqlFilter(t,r,e.logError)}}):(r.viewFilter=this.filter,r.layerFilter=this.layerFilter,this.notifyChange("viewFilter"),r)}},{key:"requiredFields",get:function(){var e,t;return null!==(e=null===(t=this.fieldsHelper)||void 0===t?void 0:t.requiredFields)&&void 0!==e?e:[]}},{key:"floorFilterClause",get:function(){var e=(0,p.o)(this);return(0,h.r)(e)?f.WhereClause.create(e,this.layer.fieldsIndex):null}},{key:"excludeObjectIdsSorted",get:function(){var e=this.layer.excludeObjectIds;return e.length?e.toArray().sort((function(e,t){return e-t})):null}},{key:"lodCrossfadeinDuration",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.qualitySettings.sceneService["3dObject"].lodCrossfadeinDuration)&&void 0!==e?e:0}},{key:"lodCrossfadeoutDuration",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.qualitySettings.sceneService["3dObject"].lodCrossfadeoutDuration)&&void 0!==e?e:0}},{key:"lodCrossfadeUncoveredDuration",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.qualitySettings.sceneService["3dObject"].lodCrossfadeUncoveredDuration)&&void 0!==e?e:0}},{key:"initialize",value:function(){var e=this;this.fieldsHelper=new b.c({layerView:this}),this.updatingHandles.add((function(){return e.layer.rangeInfos}),(function(t){return e._rangeInfosChanged(t)}),y.h),this.updatingHandles.add((function(){return e.layer.renderer}),(function(t){return e.updatingHandles.addPromise(e._rendererChange(t))}),y.h),this.updatingHandles.add((function(){return[e.parsedDefinitionExpression,e.filter,e.layer.filter,e.floorFilterClause,e.excludeObjectIdsSorted,(0,h.h)(e.viewFilter,(function(e){return[e.parsedWhereClause,e.parsedGeometry,e.sortedObjectIds]}))]}),(function(){return e._filterChange()})),this.updatingHandles.add((function(){return[e.filter,(0,h.h)(e.viewFilter,(function(e){return e.parsedGeometry}))]}),(function(){return e._geometryFilterChange()})),this.handles.add(this.layer.on("apply-edits",(function(t){return e.updatingHandles.addPromise(t.result)}))),this.handles.add(this.layer.on("edits",(function(t){return e._handleEdits(t)})))}},{key:"destroy",value:function(){this.fieldsHelper=(0,h.l)(this.fieldsHelper)}},{key:"_rangeInfosChanged",value:function(e){null!=e&&e.length>0&&x.warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")}},{key:"createQuery",value:function(){var e={outFields:["*"],returnGeometry:!1,outSpatialReference:this.view.spatialReference};return(0,h.r)(this.filter)?this.filter.createQuery(e):new g.b(e)}},{key:"queryExtent",value:function(e,t){return this._ensureQueryEngine().executeQueryForExtent(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"queryFeatureCount",value:function(e,t){return this._ensureQueryEngine().executeQueryForCount(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"queryFeatures",value:function(e,t){var r=this;return this._ensureQueryEngine().executeQuery(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal).then((function(e){if(null===e||void 0===e||!e.features)return e;var t,n=r.layer,l=(0,i.Z)(e.features);try{for(l.s();!(t=l.n()).done;){var u=t.value;u.layer=n,u.sourceLayer=n}}catch(s){l.e(s)}finally{l.f()}return e}))}},{key:"queryObjectIds",value:function(e,t){return this._ensureQueryEngine().executeQueryForIds(this._ensureQuery(e),null===t||void 0===t?void 0:t.signal)}},{key:"_ensureQueryEngine",value:function(){return this._queryEngine||(this._queryEngine=this._createQueryEngine()),this._queryEngine}},{key:"_createQueryEngine",value:function(){var e=this,t=(0,F.u)(this.view.spatialReference,this.view.renderSpatialReference,this._collection);return new w.p({layerView:this,priority:S.L.FEATURE_QUERY_ENGINE,spatialIndex:new w.f({featureAdapter:new w.n({objectIdField:this.layer.objectIdField,attributeStorageInfo:this.layer.attributeStorageInfo,getFeatureExtent:t}),toArray:function(){var t=new Array;return e._forAllFeatures((function(e,r,i){return t.push({id:e,index:r,meta:i}),F.L.CONTINUE}),null,F.I.ALL_IN_CLIPPING_AREA),t},forAllFeatures:function(t,r){return e._forAllFeatures((function(e,r,i){return t({id:e,index:r,meta:i})}),r,F.I.ALL_IN_CLIPPING_AREA)},getFeatureExtent:t,sourceSpatialReference:(0,E.K)(this.layer),viewSpatialReference:this.view.spatialReference})})}},{key:"highlight",value:function(e){var t=this._highlights;if(e instanceof g.b){var i=t.acquireSet(),n=i.set,l=i.handle;return this.queryObjectIds(e).then((function(e){return t.setFeatureIds(n,e)})),l}return(0,u.Z)((0,s.Z)(r.prototype),"highlight",this).call(this,e)}},{key:"createInteractiveEditSession",value:function(e){return(0,b.i)(this.attributeEditingContext,e)}},{key:"_createLayerGraphic",value:function(e){var t=new c.g(null,null,e);return t.layer=this.layer,t.sourceLayer=this.layer,t}},{key:"canResume",value:function(){return(0,u.Z)((0,s.Z)(r.prototype),"canResume",this).call(this)&&(!this._controller||this._controller.rootNodeVisible)}},{key:"getFilters",value:function(){var e=(0,u.Z)((0,s.Z)(r.prototype),"getFilters",this).call(this),t=this.excludeObjectIdsSorted;return(0,h.r)(t)&&e.push((function(e){return(0,E.ad)(t,!1,e)})),this.floorFilterClause&&this.addSqlFilter(e,this.floorFilterClause,this.logError),this.addSqlFilter(e,this.parsedDefinitionExpression,this.logError),(0,h.r)(this.viewFilter)&&this.viewFilter.addFilters(e,this.view,this._controller.crsIndex,this._collection),e}},{key:"isUpdating",value:function(){return(0,u.Z)((0,s.Z)(r.prototype),"isUpdating",this).call(this)||this.layerFilterUpdating}},{key:"_ensureQuery",value:function(e){return this._addDefinitionExpressionToQuery((0,h.t)(e)?this.createQuery():g.b.from(e))}},{key:"attributeEditingContext",get:function(){var e=this;return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:this._getObjectIdField(),forEachNode:function(t){return e._forAllNodes((function(e){return(0,h.r)(e)?t(e.node,e.featureIds):null}))},attributeStorageInfo:this.i3slayer.attributeStorageInfo,attributeOverrides:this.attributeOverrides,getAttributeData:function(t){return e.getAttributeData(t)},setAttributeData:function(t,r){return e.setAttributeData(t,r)},clearMemCache:function(){return e.clearMemCache()}}}},{key:"_handleEdits",value:function(e){(0,b.a)(this.attributeEditingContext,e)}},{key:"hasGeometryFilter",get:function(){var e=this.viewFilter;return(0,h.r)(e)&&(0,h.r)(e.parsedGeometry)}},{key:"computeNodeFiltering",value:function(e){var t=this.viewFilter;return(0,h.t)(t)||t.isMBSGeometryVisible(e,this.view.spatialReference,this._controller.crsIndex)?I.n.Unmodified:I.n.Culled}}]),r}((0,F.p)((0,C.p)((0,k.c)((0,_.n)(b.g)))));(0,d.e)([(0,d.d)({aliasOf:"layer"})],O.prototype,"i3slayer",void 0),(0,d.e)([(0,d.d)(E.t)],O.prototype,"updatingProgress",void 0),(0,d.e)([(0,d.d)({type:v.y})],O.prototype,"filter",null),(0,d.e)([(0,d.d)({readOnly:!0})],O.prototype,"viewFilter",null),(0,d.e)([(0,d.d)(q.requiredFields)],O.prototype,"requiredFields",null),(0,d.e)([(0,d.d)(q.availableFields)],O.prototype,"availableFields",void 0),(0,d.e)([(0,d.d)()],O.prototype,"fieldsHelper",void 0),(0,d.e)([(0,d.d)()],O.prototype,"floorFilterClause",null),(0,d.e)([(0,d.d)()],O.prototype,"excludeObjectIdsSorted",null),(0,d.e)([(0,d.d)({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.3dObject.lodFactor"})],O.prototype,"lodFactor",void 0),(0,d.e)([(0,d.d)({readOnly:!0,aliasOf:"_controller.updatingProgress"})],O.prototype,"updatingProgressValue",void 0);var m=O=(0,d.e)([(0,d.n)("esri.views.3d.layers.SceneLayerView3D")],O);t.default=m}}]);
//# sourceMappingURL=9750.f255123f.chunk.js.map