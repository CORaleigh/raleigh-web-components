"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5113],{46737:function(e,t,n){n.d(t,{s:function(){return p}});var r=n(74165),o=n(15671),s=n(43144),i=n(15861),a=n(53586),u=n(48848),c=n(93661),l=(n(65094),n(52113)),f=n(40558),h=n(75255),d=u.a.getLogger("esri.intl.substitute");function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.format,o=void 0===r?{}:r;return(0,u.H)(e,(function(e){return v(e,t,o)}))}function v(e,t,n){var r,o,s,i=e.indexOf(":");if(-1===i?o=e.trim():(o=e.slice(0,i).trim(),s=e.slice(i+1).trim()),!o)return"";var u=(0,c.a)(o,t);if(null==u)return"";var l=null!==(r=s?null===n||void 0===n?void 0:n[s]:null)&&void 0!==r?r:null===n||void 0===n?void 0:n[o];return l?function(e,t){switch(t.type){case"date":return(0,a.L)(e,t.intlOptions);case"number":return(0,a.m)(e,t.intlOptions);default:return d.warn("missing format descriptor for key {key}"),g(e)}}(u,l):s?function(e,t){switch(t.toLowerCase()){case"dateformat":return(0,a.L)(e);case"numberformat":return(0,a.m)(e);default:return d.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?(0,a.L)(e):/^numberformat/i.test(t)?(0,a.m)(e):g(e)}}(u,s):g(u)}function g(e){switch(typeof e){case"string":return e;case"number":return(0,a.m)(e);case"boolean":return""+e;default:return e instanceof Date?(0,a.L)(e):""}}function m(){return m=(0,i.Z)((0,r.Z)().mark((function e(t,n,o,s){var i,a,c,f,h,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.exec(o)){e.next=3;break}throw new u.s("esri-intl:invalid-bundle",'Bundle id "'.concat(o,'" is not compatible with the pattern "').concat(n,'"'));case 3:return a=i[1]?"".concat(i[1],"/"):"",c=i[2],f=(0,l.h)(s),h="".concat(a).concat(c,".json"),d=f?"".concat(a).concat(c,"_").concat(f,".json"):h,e.prev=4,e.next=7,k(t(d));case 7:case 17:p=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),d!==h){e.next=14;break}throw new u.s("intl:unknown-bundle",'Bundle "'.concat(o,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,k(t(h));case 20:throw e.prev=20,e.t1=e.catch(14),new u.s("intl:unknown-bundle",'Bundle "'.concat(o,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",p);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),m.apply(this,arguments)}function k(e){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.r)(w.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",w.fetchBundleAsset(t));case 2:return e.next=4,(0,f.U)(t,{responseType:"text"});case 4:return n=e.sent,e.abrupt("return",JSON.parse(n.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){function e(t){var n,r=t.base,s=void 0===r?"":r,i=t.pattern,a=t.location,u=void 0===a?new URL(window.location.href):a;(0,o.Z)(this,e),n="string"==typeof u?function(e){return new URL(e,new URL(u,window.location.href)).href}:u instanceof URL?function(e){return new URL(e,u).href}:u,this.pattern="string"==typeof i?new RegExp("^".concat(i)):i,this.getAssetUrl=n,s=s?s.endsWith("/")?s:s+"/":"",this.matcher=new RegExp("^".concat(s,"(?:(.*)/)?(.*)$"))}return(0,s.Z)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,n,r){return m.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var _,w={};(0,l.l)((_={pattern:"esri/",location:h.a},new y(_)))},85113:function(e,t,n){n.d(t,{e:function(){return m},h:function(){return J},l:function(){return ae},u:function(){return le}});var r,o=n(74165),s=n(15861),i=n(1413),a=n(37762),u=n(15671),c=n(43144),l=n(48848),f=n(93661),h=n(40558),d=n(75255),p=(n(46737),n(65094)),v="20221121",g="f520630575ed53cf8b49e5f1492799065ee366e5",m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.values().next().value};(0,u.Z)(this,e),this._peeker=t,this._items=new Set}return(0,c.Z)(e,[{key:"length",get:function(){return this._items.size}},{key:"clear",value:function(){this._items.clear()}},{key:"last",value:function(){if(0!==this._items.size){var e,t,n=(0,a.Z)(this._items);try{for(n.s();!(t=n.n()).done;)e=t.value}catch(r){n.e(r)}finally{n.f()}return e}}},{key:"peek",value:function(){if(0!==this._items.size)return this._peeker(this._items)}},{key:"push",value:function(e){this.contains(e)||this._items.add(e)}},{key:"contains",value:function(e){return this._items.has(e)}},{key:"pop",value:function(){if(0!==this.length){var e=this.peek();return this._items.delete((0,f.x)(e)),e}}},{key:"popLast",value:function(){if(0!==this.length){var e=this.last();return this._items.delete((0,f.x)(e)),e}}},{key:"remove",value:function(e){this._items.delete(e)}},{key:"filter",value:function(e){var t=this;return this._items.forEach((function(n){e(n)||t._items.delete(n)})),this}}]),e}();!function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"}(r||(r={}));var k=0;function b(){return k++}function y(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function _(e,t,n,o){var s;if(t.type!==r.OPEN_PORT)if(t.type===r.INVOKE||t.type===r.RESPONSE)if(function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(n)?(s=P(n.transferList),t.data=n.result):(s=P(o),t.data=n),s){if((0,f.h)("ff")){var i,u=(0,a.Z)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value;if("byteLength"in c&&c.byteLength>267386880){var l="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case r.INVOKE:throw l;case r.RESPONSE:return void _(e,{type:r.RESPONSE,jobId:t.jobId,error:y(l)})}}}}catch(h){u.e(h)}finally{u.f()}}e.postMessage(t,s)}else e.postMessage(t);else e.postMessage(t);else e.postMessage(t,[t.port])}function w(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function P(e){if(!e||!e.length)return null;if((0,f.h)("esri-workers-arraybuffer-transfer"))return e;var t=e.filter((function(e){return!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e)}));return t.length?t:null}var E={statsWorker:function(){return Promise.all([n.e(4622),n.e(8856)]).then(n.bind(n,28856))},geometryEngineWorker:function(){return Promise.all([n.e(6951),n.e(8818)]).then(n.bind(n,38818))},CSVSourceWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(2470),n.e(4622),n.e(2352),n.e(8420),n.e(2559),n.e(6593),n.e(1898),n.e(1543)]).then(n.bind(n,90026))},EdgeProcessingWorker:function(){return Promise.all([n.e(5026),n.e(7440),n.e(5345)]).then(n.bind(n,71079))},ElevationSamplerWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(5026),n.e(734),n.e(5797)]).then(n.bind(n,25797))},FeatureServiceSnappingSourceWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(2470),n.e(7859),n.e(4622),n.e(2352),n.e(8420),n.e(2559),n.e(6593),n.e(9871),n.e(1898),n.e(2219)]).then(n.bind(n,49055))},GeoJSONSourceWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(2470),n.e(4622),n.e(2352),n.e(8420),n.e(2559),n.e(6593),n.e(1898),n.e(1585),n.e(279)]).then(n.bind(n,60279))},LercWorker:function(){return n.e(1833).then(n.bind(n,11833))},MemorySourceWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(2470),n.e(4622),n.e(2352),n.e(8420),n.e(2559),n.e(6593),n.e(1898),n.e(1585),n.e(5463)]).then(n.bind(n,55463))},PBFDecoderWorker:function(){return Promise.all([n.e(2559),n.e(8046)]).then(n.bind(n,88046))},Pipeline:function(){return Promise.all([n.e(9557),n.e(3314),n.e(5249),n.e(642),n.e(5833),n.e(2470),n.e(7859),n.e(4233),n.e(4622),n.e(2352),n.e(8420),n.e(2559),n.e(9871),n.e(2399),n.e(1898),n.e(3609),n.e(4022),n.e(4760),n.e(6077)]).then(n.bind(n,52344))},PointCloudWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(1475),n.e(328)]).then(n.bind(n,328))},RasterWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(4954),n.e(1532),n.e(3669),n.e(8e3),n.e(1887),n.e(5888)]).then(n.bind(n,15888))},SceneLayerSnappingSourceWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(2470),n.e(4622),n.e(2352),n.e(2559),n.e(5026),n.e(7440),n.e(1636)]).then(n.bind(n,21199))},SceneLayerWorker:function(){return Promise.all([n.e(9557),n.e(7888)]).then(n.bind(n,87888)).then((function(e){return e.S}))},WFSSourceWorker:function(){return Promise.all([n.e(9557),n.e(5249),n.e(2470),n.e(4622),n.e(2352),n.e(8420),n.e(2559),n.e(6593),n.e(1898),n.e(1585),n.e(3588),n.e(7269)]).then(n.bind(n,17269))},WorkerTileHandler:function(){return Promise.all([n.e(9370),n.e(309),n.e(4495),n.e(4968)]).then(n.bind(n,18811))}},O=r,N=O.CLOSE,S=O.ABORT,M=O.INVOKE,I=O.RESPONSE,L=O.OPEN_PORT,Z=O.ON,j=function(){function e(t){(0,u.Z)(this,e),this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}return(0,c.Z)(e,[{key:"push",value:function(e){e.type===r.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}},{key:"clear",value:function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}},{key:"_process",value:function(){this._timer=null;var e,t=(0,a.Z)(this._invokeMessages);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._cancelledJobIds.has(n.jobId)||this._invoke(n)}}catch(r){t.e(r)}finally{t.f()}this._cancelledJobIds.clear(),this._invokeMessages.length=0}}]),e}(),A=function(){function e(t,n,r){var o=this;(0,u.Z)(this,e),this._port=t,this._getNextJob=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new j((function(e){return o._onInvokeMessage(e)})),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}return(0,c.Z)(e,[{key:"close",value:function(){this._post({type:N}),this._close()}},{key:"isBusy",value:function(){return this._outJobs.size>0}},{key:"invoke",value:function(e,t,n){var r=this,o=n&&n.signal,s=n&&n.transferList;if(!this._port)return Promise.reject(new l.s("worker:port-closed","Cannot call invoke('".concat(e,"'), port is closed"),{methodName:e,data:t}));var i=b();return new Promise((function(n,a){if((0,l.p)(o))return r._processWork(),void a((0,l.d)());var u=(0,l.v)(o,(function(){var e=r._outJobs.get(i);e&&(r._outJobs.delete(i),r._processWork(),(0,f.f)(e.abortHandle),r._post({type:S,jobId:i}),a((0,l.d)()))})),c={resolve:n,reject:a,abortHandle:u,debugInfo:e};r._outJobs.set(i,c),r._post({type:M,jobId:i,methodName:e,abortable:null!=o},t,s)}))}},{key:"on",value:function(e,t){var n=new MessageChannel;function o(e){t(e.data)}return this._port.postMessage({type:r.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",o),n.port1.start(),{remove:function(){n.port1.postMessage({type:r.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",o)}}}},{key:"jobAdded",value:function(){this._processWork()}},{key:"openPort",value:function(){var e=new MessageChannel;return this._post({type:L,port:e.port2}),e.port1}},{key:"_processWork",value:function(){if(!(this._outJobs.size>=2)){var e=this._getNextJob();if(e){var t=e.methodName,n=e.data,r=e.invokeOptions,o=e.deferred;this.invoke(t,n,r).then((function(e){return o.resolve(e)})).catch((function(e){return o.reject(e)}))}}}},{key:"_close",value:function(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((function(e){(0,f.f)(e.abortHandle),e.reject((0,l.d)("Worker closing, aborting job calling '".concat(e.debugInfo,"'")))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}},{key:"_onMessage",value:function(e){var t=this;(0,f.r)(this._schedule)?this._schedule((function(){return t._processMessage(e)})):this._processMessage(e)}},{key:"_processMessage",value:function(e){var t=w(e);if(t)switch(t.type){case I:this._onResponseMessage(t);break;case M:this._invokeQueue.push(t);break;case S:this._onAbortMessage(t);break;case N:this._onCloseMessage();break;case L:this._onOpenPortMessage(t);break;case Z:this._onOnMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,n=e.jobId,r=t.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(n))}},{key:"_onCloseMessage",value:function(){var t=this._client;this._close(),t&&"destroy"in t&&e.clients.get(this)===t&&t.destroy(),e.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}},{key:"_onInvokeMessage",value:function(e){var t,n=this,r=e.methodName,o=e.jobId,s=e.data,i=e.abortable?new AbortController:null,a=this._inJobs,u=this._client,c=u[r];try{if(!c&&r&&r.includes("."))for(var f=r.split("."),h=0;h<f.length-1;h++)c=(u=u[f[h]])[f[h+1]];if("function"!=typeof c)throw new TypeError("".concat(r," is not a function"));t=c.call(u,s,{client:this,signal:i?i.signal:null})}catch(le){return void this._post({type:I,jobId:o,error:y(le)})}(0,l.V)(t)?(a.set(o,{controller:i,promise:t}),t.then((function(e){a.has(o)&&(a.delete(o),n._post({type:I,jobId:o},e))}),(function(e){a.has(o)&&(a.delete(o),(0,l.j)(e)||n._post({type:I,jobId:o,error:y(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:I,jobId:o},t)}},{key:"_onOpenPortMessage",value:function(t){new e(t.port,{client:this._client},(function(){return null}))}},{key:"_onOnMessage",value:function(e){var t=e.port,n=this._client.on(e.eventType,(function(e){t.postMessage(e)})),o=(0,l.C)(e.port,"message",(function(e){var s;(null===(s=w(e))||void 0===s?void 0:s.type)===r.CLOSE&&(o.remove(),n.remove(),t.close())}))}},{key:"_onResponseMessage",value:function(e){var t=e.jobId,n=e.error,r=e.data,o=this._outJobs;if(o.has(t)){var s=o.get(t);o.delete(t),this._processWork(),(0,f.f)(s.abortHandle),n?s.reject(l.s.fromJSON(JSON.parse(n))):s.resolve(r)}}},{key:"_post",value:function(e,t,n){return _(this._port,e,t,n)}}],[{key:"connect",value:function(t){var n,r=new MessageChannel;n="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t;var o=new e(r.port1,{channel:r,client:n},(function(){return null}));return"object"==typeof n&&"remoteClient"in n&&(n.remoteClient=o),e.clients.set(o,n),r.port2}},{key:"loadWorker",value:function(e){var t=E[e];return t?t():Promise.resolve(null)}}]),e}();A.kernelInfo={revision:g,version:h.a,buildDate:v},A.clients=new Map;var J=function(){function e(){(0,u.Z)(this,e),this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new m}return(0,c.Z)(e,[{key:"destroy",value:function(){this.close()}},{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"open",value:function(e,t){var n=this;return new Promise((function(r,o){var s=!0,i=function(e){(0,l.f)(t.signal),s&&(s=!1,e())};n._clients.length=e.length,n._clientPromises.length=e.length,n._inUseClients.length=e.length;for(var a=function(s){var a=e[s];(0,l.V)(a)?n._clientPromises[s]=a.then((function(e){return n._clients[s]=new A(e,t,(function(){var e;return null!==(e=n._ongoingJobsQueue.pop())&&void 0!==e?e:null})),i(r),n._clients[s]}),(function(){return i(o),null})):(n._clients[s]=new A(a,t,(function(){var e;return null!==(e=n._ongoingJobsQueue.pop())&&void 0!==e?e:null})),n._clientPromises[s]=Promise.resolve(n._clients[s]),i(r))},u=0;u<e.length;++u)a(u)}))}},{key:"broadcast",value:function(e,t,n){for(var r=new Array(this._clientPromises.length),o=0;o<this._clientPromises.length;++o){var s=this._clientPromises[o];r[o]=s.then((function(r){return null===r||void 0===r?void 0:r.invoke(e,t,n)}))}return r}},{key:"close",value:function(){for(var e;e=this._ongoingJobsQueue.pop();)e.deferred.reject((0,l.d)("Worker closing, aborting job calling '".concat(e.methodName,"'")));var t,n=(0,a.Z)(this._clientPromises);try{for(n.s();!(t=n.n()).done;){t.value.then((function(e){return null===e||void 0===e?void 0:e.close()}))}}catch(r){n.e(r)}finally{n.f()}this._clients.length=0,this._clientPromises.length=0}},{key:"invoke",value:function(e,t,n){var r;Array.isArray(n)?(l.a.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:n}):r=n;var o=(0,l.A)();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:r,deferred:o});for(var s=0;s<this._clientPromises.length;s++){var i=this._clients[s];i?i.jobAdded():this._clientPromises[s].then((function(e){return null===e||void 0===e?void 0:e.jobAdded()}))}return o.promise}},{key:"on",value:function(e,t){var n=this;return Promise.all(this._clientPromises).then((function(){return(0,l.F)(n._clients.map((function(n){return n.on(e,t)})))}))}},{key:"openPorts",value:function(){var e=this;return new Promise((function(t){for(var n=new Array(e._clientPromises.length),r=n.length,o=function(o){e._clientPromises[o].then((function(e){e&&(n[o]=e.openPort()),0==--r&&t(n)}))},s=0;s<e._clientPromises.length;++s)o(s)}))}},{key:"test",get:function(){return{numClients:this._clients.length}}}]),e}(),C={};function x(e){var t,n={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:(0,i.Z)({},e.has),map:(0,i.Z)({},e.map),packages:e.packages&&e.packages.concat()||[],paths:(0,i.Z)({},e.paths)};return e.hasOwnProperty("async")||(n.async=!0),e.hasOwnProperty("isDebug")||(n.isDebug=!1),e.baseUrl||(n.baseUrl=C.baseUrl),null!==(t=C.packages)&&void 0!==t&&t.forEach((function(e){var t;!function(e,t){var n,r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;)if(n.value.name===t.name)return}catch(o){r.e(o)}finally{r.f()}e.push(t)}(null!==(t=n.packages)&&void 0!==t?t:[],e)})),n}var R,W,H=(0,c.Z)((function e(){var t=this;(0,u.Z)(this,e);var n=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((function(e){t[e]=function(){return n[e].apply(n,arguments)}}))})),U=function(){function e(){(0,u.Z)(this,e),this._dispatcher=new H,this._workerPostMessage({type:r.HANDSHAKE})}return(0,c.Z)(e,[{key:"terminate",value:function(){}},{key:"onmessage",get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}},{key:"postMessage",value:function(e){var t=this;(0,l.a5)((function(){t._workerMessageHandler(new MessageEvent("message",{data:e}))}))}},{key:"dispatchEvent",value:function(e){return this._dispatcher.dispatchEvent(e)}},{key:"addEventListener",value:function(e,t,n){this._dispatcher.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this._dispatcher.removeEventListener(e,t,n)}},{key:"_workerPostMessage",value:function(e){var t=this;(0,l.a5)((function(){t.dispatchEvent(new MessageEvent("message",{data:e}))}))}},{key:"_workerMessageHandler",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,s,i,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=w(t))||n.type!==r.OPEN){e.next=13;break}return s=n.modulePath,i=n.jobId,e.next=5,A.loadWorker(s);case 5:if(a=e.sent,e.t0=a,e.t0){e.next=11;break}return e.next=10,import(s);case 10:a=e.sent;case 11:u=A.connect(a),this._workerPostMessage({type:r.OPENED,jobId:i,data:u});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=l.a.getLogger("esri.core.workers.workerFactory"),T=r.HANDSHAKE,B='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});',Q="Failed to create Worker. Fallback to execute module in main thread";function F(){return K.apply(this,arguments)}function K(){return K=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,f.h)("esri-workers")&&((0,f.h)("mozilla"),1)){e.next=2;break}return e.abrupt("return",V(new U));case 2:if(!R&&!W)try{t=B.split('"{CONFIGURATION}"').join("'".concat(q(),"'")),R=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(x){W=x||{}}if(R)try{n=new Worker(R,{name:"esri-worker-"+G++})}catch(x){D.warn(Q,W),n=new U}else D.warn(Q,W),n=new U;return e.abrupt("return",V(n));case 5:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function V(e){return z.apply(this,arguments)}function z(){return z=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){function n(o){var s=w(o);s&&s.type===T&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(e){e.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),D.warn("Failed to create Worker. Fallback to execute module in main thread",e),(t=new U).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})));case 1:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function q(){var e;if(null!=f.s.default){var t=(0,i.Z)({},f.s);delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(f.s));e.assetsPath=(0,h.Q)(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?(0,h.Q)(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=(0,p.l)(),e.has={"esri-csp-restrictions":(0,f.h)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,f.h)("esri-2d-update-debug"),"featurelayer-pbf":(0,f.h)("featurelayer-pbf"),"featurelayer-simplify-thresholds":(0,f.h)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,f.h)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,f.h)("featurelayer-simplify-mobile-factor"),"esri-atomics":(0,f.h)("esri-atomics"),"esri-shared-array-buffer":(0,f.h)("esri-shared-array-buffer"),"esri-tiles-debug":(0,f.h)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,f.h)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,f.h)("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":(0,f.h)("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=(0,h.Q)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=(0,h.Q)(e.workers.workerPath):e.workers.workerPath=(0,h.Q)((0,d.a)("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;var n=f.s.workers.loaderConfig,r=x({baseUrl:null===n||void 0===n?void 0:n.baseUrl,locale:(0,p.l)(),has:(0,i.Z)({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},null===n||void 0===n?void 0:n.has),map:(0,i.Z)({},null===n||void 0===n?void 0:n.map),paths:(0,i.Z)({},null===n||void 0===n?void 0:n.paths),packages:(null===n||void 0===n?void 0:n.packages)||[]}),o={version:h.a,buildDate:v,revision:g};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:o})}var G=0,$=r,X=$.ABORT,Y=$.INVOKE,ee=$.OPEN,te=$.OPENED,ne=$.RESPONSE,re=function(){function e(t,n){(0,u.Z)(this,e),this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=n,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",(function(e){e.preventDefault(),l.a.getLogger("esri.core.workers.WorkerOwner").error(e)}))}return(0,c.Z)(e,[{key:"terminate",value:function(){this.worker.terminate()}},{key:"open",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,s,i=this,a=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=n.signal,s=b(),e.abrupt("return",new Promise((function(e,n){var o={resolve:e,reject:n,abortHandle:(0,l.o)(r,(function(){i._outJobs.delete(s),i._post({type:X,jobId:s})}))};i._outJobs.set(s,o),i._post({type:ee,jobId:s,modulePath:t})})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(e){var t=w(e);if(t)switch(t.type){case te:this._onOpenedMessage(t);break;case ne:this._onResponseMessage(t);break;case X:this._onAbortMessage(t);break;case Y:this._onInvokeMessage(t)}}},{key:"_onAbortMessage",value:function(e){var t=this._inJobs,n=e.jobId,r=t.get(n);r&&(r.controller&&r.controller.abort(),t.delete(n))}},{key:"_onInvokeMessage",value:function(e){var t,n=this,r=e.methodName,o=e.jobId,s=e.data,i=e.abortable?new AbortController:null,a=this._inJobs,u=h.d[r];try{if("function"!=typeof u)throw new TypeError("".concat(r," is not a function"));t=u.call(null,s,{signal:i?i.signal:null})}catch(X){return void this._post({type:ne,jobId:o,error:y(X)})}(0,l.V)(t)?(a.set(o,{controller:i,promise:t}),t.then((function(e){a.has(o)&&(a.delete(o),n._post({type:ne,jobId:o},e))}),(function(e){a.has(o)&&(a.delete(o),e||(e={message:"Error encountered at method"+r}),(0,l.j)(e)||n._post({type:ne,jobId:o,error:y(e||{message:"Error encountered at method ".concat(r)})}))}))):this._post({type:ne,jobId:o},t)}},{key:"_onOpenedMessage",value:function(e){var t=e.jobId,n=e.data,r=this._outJobs.get(t);r&&(this._outJobs.delete(t),(0,f.f)(r.abortHandle),r.resolve(n))}},{key:"_onResponseMessage",value:function(e){var t=e.jobId,n=e.error,r=e.data,o=this._outJobs.get(t);o&&(this._outJobs.delete(t),(0,f.f)(o.abortHandle),n?o.reject(l.s.fromJSON(JSON.parse(n))):o.resolve(r))}},{key:"_post",value:function(e,t,n){return _(this.worker,e,t,n)}}],[{key:"create",value:function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){var r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:return r=t.sent,t.abrupt("return",new e(r,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),oe=(0,f.h)("esri-workers-debug")?1:(0,f.h)("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):(0,f.h)("host-browser")?navigator.hardwareConcurrency-1:0;oe||(oe=(0,f.h)("safari")&&(0,f.h)("mac")||(0,f.h)("trident")?7:2);var se=0,ie=[];function ae(){de()}function ue(e,t){return ce.apply(this,arguments)}function ce(){return ce=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new J,e.next=3,r.open(t,n);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function le(e){return fe.apply(this,arguments)}function fe(){return fe=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,s,a,u,c,h,d,p,v=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>1&&void 0!==v[1]?v[1]:{},"string"==typeof t){e.next=3;break}throw new l.s("workers:undefined-module","modulePath is missing");case 3:if(r=n.strategy||"distributed",(0,f.h)("host-webworker")&&!(0,f.h)("esri-workers")&&(r="local"),"local"!==r){e.next=16;break}return e.next=7,A.loadWorker(t);case 7:if(s=e.sent,e.t0=s,e.t0){e.next=13;break}return e.next=12,import(t);case 12:s=e.sent;case 13:return(0,l.f)(n.signal),a=n.client||s,e.abrupt("return",ue([A.connect(s)],(0,i.Z)((0,i.Z)({},n),{},{client:a})));case 16:return e.next=18,de();case 18:if((0,l.f)(n.signal),"dedicated"!==r){e.next=28;break}return u=se++%oe,e.t1=ue,e.next=24,ie[u].open(t,n);case 24:return e.t2=e.sent,e.t3=[e.t2],e.t4=n,e.abrupt("return",(0,e.t1)(e.t3,e.t4));case 28:if(!(n.maxNumWorkers&&n.maxNumWorkers>0)){e.next=34;break}if(!((c=Math.min(n.maxNumWorkers,oe))<oe)){e.next=34;break}for(h=new Array(c),d=0;d<c;++d)p=se++%oe,h[d]=ie[p].open(t,n);return e.abrupt("return",ue(h,n));case 34:return e.abrupt("return",ue(ie.map((function(e){return e.open(t,n)})),n));case 35:case"end":return e.stop()}}),e)}))),fe.apply(this,arguments)}var he=null;function de(){return pe.apply(this,arguments)}function pe(){return pe=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he){e.next=2;break}return e.abrupt("return",he);case 2:for(new AbortController,t=[],n=function(e){var n=re.create(e).then((function(t){return ie[e]=t,t}));t.push(n)},r=0;r<oe;r++)n(r);return e.abrupt("return",he=Promise.all(t));case 7:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}}}]);
//# sourceMappingURL=5113.02e36217.chunk.js.map