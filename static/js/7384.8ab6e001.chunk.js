"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[7384],{97384:function(e,t,r){r.r(t);var i=r(74165),n=r(1413),s=r(37762),a=r(15861),u=r(15671),l=r(43144),o=r(50165),d=r(78664),p=r(77322),c=r(30594),y=r(94858),f=r(91403),h=r(35650),m=r(17704),g=r(873),v=r(72179),b=r(39001),F=r(31412),I=r(4483),S=(r(96263),r(31278),r(32335),r(2326),r(40133),r(9330),r(79146),r(2760),r(55985),r(18392),r(43750),r(13089),r(98643),r(73428),r(13994),r(61340),r(61772),r(76375),r(7513),r(59075),r(10489),r(33530),r(45940),r(75105),r(57439),r(92637),r(62335),r(70146),r(16897),r(88406),r(66307),r(79747),r(9887),r(29173),r(14739),r(7671),r(67871),r(69738),r(73627),r(50338),p.n),_={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:p.n},T={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function x(e){return(0,d.l)(e)?null!=e.z:!!e.hasZ}function E(e){return(0,d.l)(e)?null!=e.m:!!e.hasM}var k=function(){function e(){(0,u.Z)(this,e),this._queryEngine=null,this._nextObjectId=null}return(0,l.Z)(e,[{key:"destroy",value:function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}},{key:"load",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,a,u,l,d,p,c,v,x,E,k,Z,w,R,j,q,D,O,M,A,C,Q,L,G,P,z,U;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],a=t.features,u=this._inferLayerProperties(a,t.fields),l=t.fields||[],d=null!=t.hasM?t.hasM:u.hasM,p=null!=t.hasZ?t.hasZ:u.hasZ,c=!t.spatialReference&&!u.spatialReference,v=c?S:t.spatialReference||u.spatialReference,x=c?_:null,E=t.geometryType||u.geometryType,k=!E,Z=t.objectIdField||u.objectIdField,w=t.timeInfo,k||(c&&r.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),E)){e.next=4;break}throw new o.a("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");case 4:if(Z){e.next=6;break}throw new o.a("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");case 6:u.objectIdField&&Z!==u.objectIdField&&(r.push({name:"feature-layer:duplicated-oid-field",message:'Provided objectIdField "'.concat(Z,'" doesn\'t match the field name "').concat(u.objectIdField,'", found in the provided fields')}),Z=u.objectIdField),Z&&!u.objectIdField&&(R=null,l.some((function(e){return e.name===Z&&(R=e,!0)}))?(R.type="esriFieldTypeOID",R.editable=!1,R.nullable=!1):l.unshift({alias:Z,name:Z,type:"esriFieldTypeOID",editable:!1,nullable:!1})),j=(0,s.Z)(l),e.prev=8,j.s();case 10:if((q=j.n()).done){e.next=18;break}if(null==(D=q.value).name&&(D.name=D.alias),null==D.alias&&(D.alias=D.name),D.name){e.next=14;break}throw new o.a("feature-layer:invalid-field-name","field name is missing",{field:D});case 14:if(D.name===Z&&(D.type="esriFieldTypeOID"),F.i.jsonValues.includes(D.type)){e.next=16;break}throw new o.a("feature-layer:invalid-field-type",'invalid type for field "'.concat(D.name,'"'),{field:D});case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),j.e(e.t0);case 23:return e.prev=23,j.f(),e.finish(23);case 26:O={},M=(0,s.Z)(l);try{for(M.s();!(A=M.n()).done;)"esriFieldTypeOID"!==(C=A.value).type&&"esriFieldTypeGlobalID"!==C.type&&void 0!==(Q=(0,I.P)(C))&&(O[C.name]=Q)}catch(i){M.e(i)}finally{M.f()}if(this._fieldsIndex=new b.d(l),this._createDefaultAttributes=(0,g.a)(O,Z),w&&(w.startTimeField&&((L=this._fieldsIndex.get(w.startTimeField))?(w.startTimeField=L.name,L.type="esriFieldTypeDate"):w.startTimeField=null),w.endTimeField&&((G=this._fieldsIndex.get(w.endTimeField))?(w.endTimeField=G.name,G.type="esriFieldTypeDate"):w.endTimeField=null),w.trackIdField&&((P=this._fieldsIndex.get(w.trackIdField))?w.trackIdField=P.name:(w.trackIdField=null,r.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:w}}))),w.startTimeField||w.endTimeField||(r.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:w}}),w=null)),z={warnings:r,featureErrors:[],layerDefinition:(0,n.Z)((0,n.Z)({},T),{},{drawingInfo:(0,g.u)(E),templates:(0,g.l)(O),extent:x,geometryType:E,objectIdField:Z,fields:l,hasZ:!!p,hasM:!!d,timeInfo:w}),assignedObjectIds:{}},this._queryEngine=new m.Y({fields:l,geometryType:E,hasM:d,hasZ:p,objectIdField:Z,spatialReference:v,featureStore:new f.u({geometryType:E,hasM:d,hasZ:p}),timeInfo:w,cacheSpatialQueries:!0}),a&&a.length){e.next=33;break}return e.abrupt("return",(this._nextObjectId=y.t,z));case 33:return U=(0,y.n)(Z,a),this._nextObjectId=U+1,e.next=37,(0,h.f)(a,v);case 37:return e.abrupt("return",this._loadInitialFeatures(z,a));case 38:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._queryEngine,n=r.spatialReference,s=r.geometryType,e.next=3,Promise.all([(0,v.w)(n,s),(0,h.f)(t.adds,n),(0,h.f)(t.updates,n)]);case 3:return e.abrupt("return",this._applyEdits(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQuery(e,t.signal)}},{key:"queryFeatureCount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForCount(e,t.signal)}},{key:"queryObjectIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForIds(e,t.signal)}},{key:"queryExtent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForExtent(e,t.signal)}},{key:"querySnapping",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForSnapping(e,t.signal)}},{key:"_inferLayerProperties",value:function(e,t){var r,i,n,a=null,u=null,l=null,p=(0,s.Z)(e);try{for(p.s();!(n=p.n()).done;){var c=n.value.geometry;if(!(0,o.t)(c)&&(a||(a=(0,d.v)(c)),u||(u=c.spatialReference),null==r&&(r=x(c)),null==i&&(i=E(c)),a&&u&&null!=r&&null!=i))break}}catch(f){p.e(f)}finally{p.f()}if(t&&t.length){var y=null;t.some((function(e){var t="esriFieldTypeOID"===e.type,r=!e.type&&e.name&&"objectid"===e.name.toLowerCase();return y=e,t||r}))&&(l=y.name)}return{geometryType:a,spatialReference:u,objectIdField:l,hasM:i,hasZ:r}}},{key:"_loadInitialFeatures",value:function(e,t){var r,i=this._queryEngine,n=i.geometryType,a=i.hasM,u=i.hasZ,l=i.objectIdField,p=i.spatialReference,y=i.featureStore,f=[],m=(0,s.Z)(t);try{for(m.s();!(r=m.n()).done;){var g=r.value;if(null!=g.uid&&(e.assignedObjectIds[g.uid]=-1),g.geometry&&n!==(0,d.v)(g.geometry))e.featureErrors.push((0,v.a)("Incorrect geometry type."));else{var b=this._createDefaultAttributes(),F=(0,v.m)(this._fieldsIndex,b,g.attributes,!0,e.warnings);F?e.featureErrors.push(F):(this._assignObjectId(b,g.attributes,!0),g.attributes=b,null!=g.uid&&(e.assignedObjectIds[g.uid]=g.attributes[l]),(0,o.r)(g.geometry)&&(g.geometry=(0,h.g)(g.geometry,g.geometry.spatialReference,p)),f.push(g))}}}catch(T){m.e(T)}finally{m.f()}if(y.addMany((0,c.W)([],f,n,u,a,l)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){var I=this._queryEngine.timeExtent,S=I.start,_=I.end;e.layerDefinition.timeInfo.timeExtent=[S,_]}return e}},{key:"_applyEdits",value:function(e){var t=e.adds,r=e.updates,i=e.deletes,n={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(n,t),r&&r.length&&this._applyUpdateEdits(n,r),i&&i.length){var a,u=(0,s.Z)(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;n.deleteResults.push((0,v.f)(l))}}catch(o){u.e(o)}finally{u.f()}this._queryEngine.featureStore.removeManyById(i)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:n}}},{key:"_applyAddEdits",value:function(e,t){var r,i=e.addResults,n=this._queryEngine,a=n.geometryType,u=n.hasM,l=n.hasZ,p=n.objectIdField,y=n.spatialReference,f=n.featureStore,m=[],g=(0,s.Z)(t);try{for(g.s();!(r=g.n()).done;){var b=r.value;if(b.geometry&&a!==(0,d.v)(b.geometry))i.push((0,v.a)("Incorrect geometry type."));else{var F=this._createDefaultAttributes(),I=(0,v.m)(this._fieldsIndex,F,b.attributes);if(I)i.push(I);else{if(this._assignObjectId(F,b.attributes),b.attributes=F,null!=b.uid){var S=b.attributes[p];e.uidToObjectId[b.uid]=S}(0,o.r)(b.geometry)&&(b.geometry=(0,h.g)((0,v.g)(b.geometry,y),b.geometry.spatialReference,y)),m.push(b),i.push((0,v.f)(b.attributes[p]))}}}}catch(_){g.e(_)}finally{g.f()}f.addMany((0,c.W)([],m,a,l,u,p))}},{key:"_applyUpdateEdits",value:function(e,t){var r,i=e.updateResults,n=this._queryEngine,a=n.geometryType,u=n.hasM,l=n.hasZ,p=n.objectIdField,y=n.spatialReference,f=n.featureStore,m=(0,s.Z)(t);try{for(m.s();!(r=m.n()).done;){var g=r.value,b=g.attributes,F=g.geometry,I=b&&b[p];if(null!=I)if(f.has(I)){var S=(0,c.e)(f.getFeature(I),a,l,u);if((0,o.r)(F)){if(a!==(0,d.v)(F)){i.push((0,v.a)("Incorrect geometry type."));continue}S.geometry=(0,h.g)((0,v.g)(F,y),F.spatialReference,y)}if(b){var _=(0,v.m)(this._fieldsIndex,S.attributes,b);if(_){i.push(_);continue}}f.add((0,c.Q)(S,a,l,u,p)),i.push((0,v.f)(I))}else i.push((0,v.a)("Feature with object id ".concat(I," missing")));else i.push((0,v.a)("Identifier field ".concat(p," missing")))}}catch(T){m.e(T)}finally{m.f()}}},{key:"_assignObjectId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._queryEngine.objectIdField;r&&t&&isFinite(t[i])?e[i]=t[i]:e[i]=this._nextObjectId++}}]),e}();t.default=k},873:function(e,t,r){r.d(t,{a:function(){return p},c:function(){return y},l:function(){return c},u:function(){return l}});var i=r(4942),n=r(1413),s=r(50165),a=r(14739),u=r(50338);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?u.l:"esriGeometryPolyline"===e?u.o:u.S}}}var o=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,d=1;function p(e,t){if((0,s.c)("esri-csp-restrictions"))return function(){return(0,n.Z)((0,i.Z)({},t,null),e)};try{var r="this.".concat(t," = null;");for(var a in e)r+="this".concat(o.test(a)?".".concat(a):'["'.concat(a,'"]')," = ").concat(JSON.stringify(e[a]),";");var u=new Function("\n      return class AttributesClass$".concat(d++," {\n        constructor() {\n          ").concat(r,";\n        }\n      }\n    "))();return function(){return new u}}catch(u){return function(){return(0,n.Z)((0,i.Z)({},t,null),e)}}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,s.m)(e)}}]}function y(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:a.t,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},50338:function(e,t,r){r.d(t,{S:function(){return u},e:function(){return i},i:function(){return n},l:function(){return s},o:function(){return a},r:function(){return o},s:function(){return d},t:function(){return l},y:function(){return p}});var i=[252,146,31,255],n=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},u={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},o={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},d={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},31412:function(e,t,r){r.d(t,{i:function(){return i}});var i=new(r(13994).s)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},94858:function(e,t,r){r.d(t,{n:function(){return s},t:function(){return n}});var i=r(37762),n=1;function s(e,t){var r,n=0,s=(0,i.Z)(t);try{for(s.s();!(r=s.n()).done;){var a,u=null===(a=r.value.attributes)||void 0===a?void 0:a[e];"number"==typeof u&&isFinite(u)&&(n=Math.max(n,u))}}catch(l){s.e(l)}finally{s.f()}return n}}}]);
//# sourceMappingURL=7384.8ab6e001.chunk.js.map