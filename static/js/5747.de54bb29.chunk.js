"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5747],{41723:function(e,t,n){n.d(t,{A:function(){return v},H:function(){return y},I:function(){return g},L:function(){return T},P:function(){return R},U:function(){return r},a:function(){return d},b:function(){return O},c:function(){return p},d:function(){return f},i:function(){return w},k:function(){return k},l:function(){return i},m:function(){return _},p:function(){return M},s:function(){return b},u:function(){return m},v:function(){return E}});var r,i,a,o=n(64772),u=n(79557),s=n(71802),c=n(91681),l=n(24093);function f(e){return e?{ray:(0,o.d)(e.ray),c0:e.c0,c1:e.c1}:{ray:(0,o.d)(),c0:0,c1:Number.MAX_VALUE}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f();return(0,o.k)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function p(e,t){return h(e,e.c0,t)}function v(e,t){return h(e,e.c1,t)}function h(e,t,n){return(0,s.u)(n,e.ray.origin,(0,s.g)(n,e.ray.direction,t))}function y(e){return e?[(0,l.p)(e[0]),(0,l.p)(e[1]),(0,l.p)(e[2]),(0,l.p)(e[3]),(0,l.p)(e[4]),(0,l.p)(e[5])]:[(0,l.p)(),(0,l.p)(),(0,l.p)(),(0,l.p)(),(0,l.p)(),(0,l.p)()]}function g(){return[(0,s.n)(),(0,s.n)(),(0,s.n)(),(0,s.n)(),(0,s.n)(),(0,s.n)(),(0,s.n)(),(0,s.n)()]}function m(e,t){for(var n=0;n<E.NUM;n++)(0,l.A)(e[n],t[n])}function b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N,i=(0,u.u)(o.a.get(),t,e);(0,u.h)(i,i);for(var a=0;a<A.NUM;++a){var c=(0,s.w)(o.r.get(),Z[a],i);(0,s.o)(r[a],c[0]/c[3],c[1]/c[3],c[2]/c[3])}T(n,r)}function T(e,t){(0,l.j)(t[i.FAR_BOTTOM_LEFT],t[i.NEAR_BOTTOM_LEFT],t[i.NEAR_TOP_LEFT],e[r.LEFT]),(0,l.j)(t[i.NEAR_BOTTOM_RIGHT],t[i.FAR_BOTTOM_RIGHT],t[i.FAR_TOP_RIGHT],e[r.RIGHT]),(0,l.j)(t[i.FAR_BOTTOM_LEFT],t[i.FAR_BOTTOM_RIGHT],t[i.NEAR_BOTTOM_RIGHT],e[r.BOTTOM]),(0,l.j)(t[i.NEAR_TOP_LEFT],t[i.NEAR_TOP_RIGHT],t[i.FAR_TOP_RIGHT],e[r.TOP]),(0,l.j)(t[i.NEAR_BOTTOM_LEFT],t[i.NEAR_BOTTOM_RIGHT],t[i.NEAR_TOP_RIGHT],e[r.NEAR]),(0,l.j)(t[i.FAR_BOTTOM_RIGHT],t[i.FAR_BOTTOM_LEFT],t[i.FAR_TOP_LEFT],e[r.FAR])}function w(e,t){for(var n=0;n<E.NUM;n++){var r=e[n];if(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=t[3])return!1}return!0}function R(e,t){return x(e,d(t,P.get()))}function O(e,t){for(var n=0;n<E.NUM;n++){var r=e[n];if(!(0,l.G)(r,t))return!1}return!0}function _(e,t,n){return x(e,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f(),r=(0,s.s)(e.vector);return(0,o.v)(e.origin,t,n.ray),n.c0=0,n.c1=r,n}(t,n,P.get()))}function M(e,t){for(var n=0;n<E.NUM;n++)if((0,l.R)(e[n],t)>0)return!1;return!0}function x(e,t){for(var n=0;n<E.NUM;n++)if(!(0,l.D)(e[n],t))return!1;return!0}new o.s((function(){return f()})),(a=r||(r={}))[a.LEFT=0]="LEFT",a[a.RIGHT=1]="RIGHT",a[a.BOTTOM=2]="BOTTOM",a[a.TOP=3]="TOP",a[a.NEAR=4]="NEAR",a[a.FAR=5]="FAR",function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(i||(i={}));var E,A,k={bottom:[i.FAR_BOTTOM_RIGHT,i.NEAR_BOTTOM_RIGHT,i.NEAR_BOTTOM_LEFT,i.FAR_BOTTOM_LEFT],near:[i.NEAR_BOTTOM_LEFT,i.NEAR_BOTTOM_RIGHT,i.NEAR_TOP_RIGHT,i.NEAR_TOP_LEFT],far:[i.FAR_BOTTOM_RIGHT,i.FAR_BOTTOM_LEFT,i.FAR_TOP_LEFT,i.FAR_TOP_RIGHT],right:[i.NEAR_BOTTOM_RIGHT,i.FAR_BOTTOM_RIGHT,i.FAR_TOP_RIGHT,i.NEAR_TOP_RIGHT],left:[i.FAR_BOTTOM_LEFT,i.NEAR_BOTTOM_LEFT,i.NEAR_TOP_LEFT,i.FAR_TOP_LEFT],top:[i.FAR_TOP_LEFT,i.NEAR_TOP_LEFT,i.NEAR_TOP_RIGHT,i.FAR_TOP_RIGHT]};!function(e){e[e.NUM=6]="NUM"}(E||(E={})),function(e){e[e.NUM=8]="NUM"}(A||(A={}));var Z=[(0,c.r)(-1,-1,-1,1),(0,c.r)(1,-1,-1,1),(0,c.r)(1,1,-1,1),(0,c.r)(-1,1,-1,1),(0,c.r)(-1,-1,1,1),(0,c.r)(1,-1,1,1),(0,c.r)(1,1,1,1),(0,c.r)(-1,1,1,1)],P=new o.s(f),N=g()},6189:function(e,t,n){n.d(t,{d:function(){return u},i:function(){return i},o:function(){return o},r:function(){return a}});var r=n(47855);function i(e,t){var n=t||e.extent,i=e.width,a=(0,r.$)(n&&n.spatialReference);return n&&i?n.width/i*a*r.f*96:0}function a(e,t){return e/((0,r.$)(t)*r.f*96)}function o(e){return e/(96*r.f)}function u(e,t){var n=e.extent,r=e.width-(e.padding?e.padding.left+e.padding.right:0),i=a(t,n.spatialReference);return n.clone().expand(i*r/n.width)}},25747:function(e,t,n){n.d(t,{$:function(){return zn},A:function(){return ot},B:function(){return ct},C:function(){return Mn},D:function(){return Ye},E:function(){return Rn},F:function(){return _n},G:function(){return Ve},H:function(){return On},I:function(){return xe},J:function(){return Ie},K:function(){return xn},L:function(){return Ct},M:function(){return Ce},N:function(){return Ee},O:function(){return Pt},P:function(){return xt},Q:function(){return Bn},R:function(){return rr},S:function(){return Et},T:function(){return Pe},U:function(){return Fe},V:function(){return Mt},W:function(){return Dn},X:function(){return Je},Y:function(){return st},Z:function(){return Cn},_:function(){return Hn},a:function(){return D},a0:function(){return At},a1:function(){return kt},a2:function(){return We},a3:function(){return Ge},a4:function(){return Ae},a5:function(){return ke},a6:function(){return Se},a7:function(){return $e},a8:function(){return lt},a9:function(){return ft},aa:function(){return Xe},ab:function(){return Qe},ac:function(){return at},b:function(){return ce},c:function(){return dr},d:function(){return Ze},e:function(){return ie},f:function(){return ye},g:function(){return St},h:function(){return ln},i:function(){return le},j:function(){return Me},k:function(){return Ne},l:function(){return zt},m:function(){return Ht},n:function(){return te},o:function(){return vr},p:function(){return ue},q:function(){return Qn},r:function(){return H},s:function(){return pr},t:function(){return jt},u:function(){return Kn},v:function(){return Yn},w:function(){return ir},x:function(){return Le},y:function(){return Gn},z:function(){return Kt}});var r,i=n(74165),a=n(15861),o=n(37762),u=n(1413),s=n(15671),c=n(43144),l=n(60136),f=n(29388),d=n(48848),p=n(40114),v=n(93661),h=n(20302),y=n(82474),g=n(89794),m=n(37944),b=n(71802),T=n(17455),w=(n(74384),n(64998)),R=n(59389),O=n(1500),_=n(26313),M=n(37077),x=n(49228),E=n(95249),A=n(93209),k=n(25456),Z=n(41723),P=n(6189),N=n(47855),S=n(79557),L=n(91681),F=n(64772),G=n(17332),C=n(87750),I=n(24093),B=n(20846),z=n(46817);function H(e,t){return null!=e&&(null==t||(t===G.l.Local?!e.isGeographic||e.isWGS84||e.wkid===y.S.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===y.S.CGCS2000||e.wkid===y.S.GCSMARS2000||e.wkid===y.S.GCSMARS2000_SPHERE||e.wkid===y.S.GCSMOON2000))}var j=r=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="sunny",r.cloudCover=.5,r}return(0,c.Z)(n,[{key:"clone",value:function(){return new r({cloudCover:this.cloudCover})}}]),n}(p.l);(0,d.e)([(0,h.r)({sunny:"sunny"})],j.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],j.prototype,"cloudCover",void 0);var U,D=j=r=(0,d.e)([(0,d.n)("esri.views.3d.environment.SunnyWeather")],j),q=U=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="cloudy",r.cloudCover=.5,r}return(0,c.Z)(n,[{key:"clone",value:function(){return new U({cloudCover:this.cloudCover})}}]),n}(p.l);(0,d.e)([(0,h.r)({cloudy:"cloudy"})],q.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],q.prototype,"cloudCover",void 0);var W,V=q=U=(0,d.e)([(0,d.n)("esri.views.3d.environment.CloudyWeather")],q),J=W=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="foggy",r.fogStrength=.5,r}return(0,c.Z)(n,[{key:"clone",value:function(){return new W({fogStrength:this.fogStrength})}}]),n}(p.l);(0,d.e)([(0,h.r)({foggy:"foggy"})],J.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],J.prototype,"fogStrength",void 0);var Y,X=J=W=(0,d.e)([(0,d.n)("esri.views.3d.environment.FoggyWeather")],J),K=Y=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="rainy",r.cloudCover=.5,r.precipitation=.5,r}return(0,c.Z)(n,[{key:"clone",value:function(){return new Y({cloudCover:this.cloudCover,precipitation:this.precipitation})}}]),n}(p.l);(0,d.e)([(0,h.r)({rainy:"rainy"})],K.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],K.prototype,"cloudCover",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],K.prototype,"precipitation",void 0);var Q,$=K=Y=(0,d.e)([(0,d.n)("esri.views.3d.environment.RainyWeather")],K),ee=Q=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="snowy",r.cloudCover=.5,r.precipitation=.5,r.snowCover="disabled",r}return(0,c.Z)(n,[{key:"clone",value:function(){return new Q({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}}]),n}(p.l);(0,d.e)([(0,h.r)({snowy:"snowy"})],ee.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ee.prototype,"cloudCover",void 0),(0,d.e)([(0,d.y)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],ee.prototype,"precipitation",void 0),(0,d.e)([(0,d.y)({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],ee.prototype,"snowCover",void 0),ee=Q=(0,d.e)([(0,d.n)("esri.views.3d.environment.SnowyWeather")],ee);var te={key:"type",base:D,typeMap:{sunny:D,cloudy:V,rainy:$,snowy:ee,foggy:X}},ne=Object.keys(te.typeMap);var re,ie=1e4,ae=re=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="sun",r.date=null,r.directShadowsEnabled=!1,r.displayUTCOffset=null,r}return(0,c.Z)(n,[{key:"readDate",value:function(e,t){return null!=t.datetime&&new Date(t.datetime)||null}},{key:"writeDate",value:function(e,t,n){t[n]=e.getTime()}},{key:"readDirectShadowsEnabled",value:function(e,t){return!!t.directShadows}},{key:"writedirectShadowsEnabled",value:function(e,t,n){e&&(t[n]=e)}},{key:"writeDisplayUTCOffset",value:function(e,t){null!=e&&(t.displayUTCOffset=e)}},{key:"clone",value:function(){return new re(this.cloneConstructProperties())}},{key:"cloneConstructProperties",value:function(){var e={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};return null!=this.date&&(e.date=new Date(this.date.getTime())),e}}]),n}(p.l);(0,d.e)([(0,d.y)({readOnly:!0,type:["sun"],json:{write:!0}})],ae.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Date,json:{type:Number,write:{target:"datetime"}}})],ae.prototype,"date",void 0),(0,d.e)([(0,y.o)("date",["datetime"])],ae.prototype,"readDate",null),(0,d.e)([(0,y.r)("date")],ae.prototype,"writeDate",null),(0,d.e)([(0,d.y)({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],ae.prototype,"directShadowsEnabled",void 0),(0,d.e)([(0,y.o)("directShadowsEnabled",["directShadows"])],ae.prototype,"readDirectShadowsEnabled",null),(0,d.e)([(0,y.r)("directShadowsEnabled")],ae.prototype,"writedirectShadowsEnabled",null),(0,d.e)([(0,d.y)({type:Number,json:{write:!0}})],ae.prototype,"displayUTCOffset",void 0),(0,d.e)([(0,y.r)("displayUTCOffset")],ae.prototype,"writeDisplayUTCOffset",null);var oe,ue=ae=re=(0,d.e)([(0,d.n)("esri.webscene.SunLighting")],ae),se=oe=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="virtual",r.directShadowsEnabled=!1,r}return(0,c.Z)(n,[{key:"clone",value:function(){return new oe(this.cloneConstructProperties())}},{key:"cloneConstructProperties",value:function(){return{directShadowsEnabled:this.directShadowsEnabled}}}]),n}(p.l);(0,d.e)([(0,d.y)({readOnly:!0,type:["virtual"],json:{write:!0}})],se.prototype,"type",void 0),(0,d.e)([(0,d.y)({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],se.prototype,"directShadowsEnabled",void 0);var ce=se=oe=(0,d.e)([(0,d.n)("esri.webscene.VirtualLighting")],se),le={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:ue,virtual:ce}},fe=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){return(0,s.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"clone",value:function(){}}]),n}(p.l);(0,d.e)([(0,d.y)({readOnly:!0,json:{read:!1}})],fe.prototype,"type",void 0);var de,pe=fe=(0,d.e)([(0,d.n)("esri.webscene.background.Background")],fe),ve=(0,u.Z)((0,u.Z)({},m.q),{},{nonNullable:!0}),he=de=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type="color",r.color=new g.l([0,0,0,1]),r}return(0,c.Z)(n,[{key:"clone",value:function(){return new de(this.cloneProperties())}},{key:"cloneProperties",value:function(){return{color:this.color.clone()}}}]),n}(pe);(0,d.e)([(0,h.r)({color:"color"},{readOnly:!0})],he.prototype,"type",void 0),(0,d.e)([(0,d.y)(ve)],he.prototype,"color",void 0);var ye=he=de=(0,d.e)([(0,d.n)("esri.webscene.background.ColorBackground")],he),ge={base:pe,key:"type",typeMap:{color:ye}};var me,be,Te={types:ge,json:{read:(me=ge,function(e,t,n){if(!e)return e;for(var r in me.typeMap)if(e.type===r){var i=new me.typeMap[r];return i.read(e,n),i}}),write:{overridePolicy:function(e,t,n){return{enabled:!n||!n.isPresentation}}}}},we="esri.webscene.Environment",Re=d.a.getLogger(we),Oe=function(e,t,n){return{enabled:!n||!n.isPresentation}},_e=be=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).lighting=new ue,r.background=null,r.atmosphereEnabled=!0,r.starsEnabled=!0,r}return(0,c.Z)(n,[{key:"weather",set:function(e){(function(e,t){return!!ne.includes(e)||(t.error('"'.concat(e,'" is not a valid weather type')),!1)})(null===e||void 0===e?void 0:e.type,Re)&&this._set("weather",e)}},{key:"clone",value:function(){return new be(this.cloneConstructProperties())}},{key:"cloneConstructProperties",value:function(){return{lighting:this.lighting&&"virtual"===this.lighting.type?ce.prototype.clone.call(this.lighting):ue.prototype.clone.call(this.lighting),background:(0,v.y)(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}}}]),n}(p.l);(0,d.e)([(0,d.y)({types:le,nonNullable:!0,json:{write:!0}})],_e.prototype,"lighting",void 0),(0,d.e)([(0,d.y)(Te)],_e.prototype,"background",void 0),(0,d.e)([(0,d.y)({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:Oe}}})],_e.prototype,"atmosphereEnabled",void 0),(0,d.e)([(0,d.y)({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:Oe}}})],_e.prototype,"starsEnabled",void 0),(0,d.e)([(0,d.y)({types:te,nonNullable:!0,json:{write:!0},value:new D})],_e.prototype,"weather",null);var Me=_e=be=(0,d.e)([(0,d.n)(we)],_e);function xe(e){var t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],n=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}function Ee(e,t){var n=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),r=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),i=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return(0,b.o)(e,n,r,i),e}function Ae(e,t,n){n=n||e;var r=(0,b.P)(e,t);(0,b.o)(n,e[0]-r*t[0],e[1]-r*t[1],e[2]-r*t[2]),(0,b.z)(n,n)}function ke(e,t,n){Math.abs(e[0])>Math.abs(e[1])?(0,b.o)(t,0,1,0):(0,b.o)(t,1,0,0),(0,b._)(n,e,t),(0,b.z)(t,t),(0,b._)(t,n,e),(0,b.z)(n,n)}function Ze(e,t){return(e%t+t)%t}function Pe(e,t,n,r,i,a){var o=e+(t-e)*i;return o+(n+(r-n)*i-o)*a}function Ne(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,b.n)(),i=(0,b.s)(e),a=(0,b.s)(t),o=(0,b.P)(e,t)/(i*a);if(o<.9999999999999999){var u=Math.acos(o),s=((1-n)*i+n*a)/Math.sin(u),c=s/i*Math.sin((1-n)*u),l=s/a*Math.sin(n*u);return(0,b.g)(je,e,c),(0,b.g)(Ue,t,l),(0,b.u)(r,je,Ue)}return(0,b.A)(r,e,t,n)}function Se(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,b.n)(),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,b.n)(),a=(0,b.s)(e),o=(0,b.s)(t),u=(0,b.P)(e,t)/(a*o);if(u<.9999999999999999){var s=Math.acos(u),c=Math.sin(s),l=Math.sin(n*s),f=Math.sin((1-n)*s),d=(1-n)*a+n*o,p=d/c,v=p/o*l;(0,b.g)(je,e,p/a*f),(0,b.g)(Ue,t,v),(0,b.u)(r,je,Ue);var h=1/a*(-Math.cos((1-n)*s)*s*d+f*(-a+o));(0,b.g)(je,e,h);var y=1/o*(Math.cos(n*s)*s*d+l*(-a+o));return(0,b.g)(Ue,t,y),(0,b.u)(i,je,Ue),(0,b.g)(i,i,1/c),i}return(0,b.A)(r,e,t,n),(0,b.e)(i,t,e),(0,b.z)(i,i),i}function Le(e,t,n){e=(0,b.z)(je,e),t=(0,b.z)(Ue,t);var r=(0,b.i)((0,b.P)(e,t));if(n){var i=(0,b._)(He,e,t);if((0,b.P)(i,n)<0)return-r}return r}function Fe(e){var t=e.length;return function(n){if(n<=e[0][0])return e[0][1];if(n>=e[t-1][0])return e[t-1][1];for(var r=1;n>e[r][0];)r++;var i=e[r-1][0],a=e[r][0],o=(a-n)/(a-i);return o*e[r-1][1]+(1-o)*e[r][1]}}function Ge(e,t,n,r){(0,b.e)(Be,t,e),(0,b.e)(ze,n,e),(0,b._)(r,Be,ze),(0,b.z)(r,r),r[3]=-(0,b.P)(e,r)}var Ce,Ie,Be=(0,b.n)(),ze=(0,b.n)(),He=(0,b.n)(),je=(0,b.n)(),Ue=(0,b.n)();!function(e){e[e.OBJECT=0]="OBJECT",e[e.HUD=1]="HUD",e[e.TERRAIN=2]="TERRAIN",e[e.OVERLAY=3]="OVERLAY",e[e.I3S=4]="I3S",e[e.PCL=5]="PCL",e[e.LOD=6]="LOD",e[e.VOXEL=7]="VOXEL"}(Ce||(Ce={}));var De=(0,c.Z)((function e(){(0,s.Z)(this,e),this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.store=Ie.ALL}));!function(e){e[e.MIN=0]="MIN",e[e.MINMAX=1]="MINMAX",e[e.ALL=2]="ALL"}(Ie||(Ie={}));var qe=d.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane"),We=(0,c.Z)((function e(){(0,s.Z)(this,e),this.plane=(0,I.p)(),this.origin=(0,b.n)(),this.basis1=(0,b.n)(),this.basis2=(0,b.n)()}));function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt;return{plane:(0,I.p)(e.plane),origin:(0,b.t)(e.origin),basis1:(0,b.t)(e.basis1),basis2:(0,b.t)(e.basis2)}}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve();return Ye(e.origin,e.basis1,e.basis2,t)}function Ye(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ve();return(0,b.r)(r.origin,e),(0,b.r)(r.basis1,t),(0,b.r)(r.basis2,n),Xe(r),ht(r,"fromValues()"),r}function Xe(e){(0,I.O)(e.basis2,e.basis1,e.origin,e.plane)}function Ke(e,t,n){e!==n&&Je(e,n);var r=(0,b.g)(F.c.get(),ft(e),t);return(0,b.u)(n.origin,n.origin,r),n.plane[3]-=t,n}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve(),n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return(0,b.o)(t.origin,e[0]+n,e[1]+r,0),(0,b.o)(t.basis1,n,0,0),(0,b.o)(t.basis2,0,r,0),(0,I.F)(0,0,1,0,t.plane),t}function $e(e,t,n){return!!(0,I.q)(e.plane,t,n)&&dt(e,n)}function et(e,t,n){var r=mt.get();yt(e,t,r,mt.get());var i,a=Number.POSITIVE_INFINITY,u=(0,o.Z)(Rt);try{for(u.s();!(i=u.n()).done;){var s=vt(e,i.value,bt.get()),c=F.c.get();if((0,I.x)(r,s,c)){var l=(0,b.H)(F.c.get(),t.origin,c),f=Math.abs((0,b.i)((0,b.P)(t.direction,l)));f<a&&(a=f,(0,b.r)(n,c))}}}catch(d){u.e(d)}finally{u.f()}return a===Number.POSITIVE_INFINITY?tt(e,t,n):n}function tt(e,t,n){if($e(e,t,n))return n;var r=mt.get(),i=mt.get();yt(e,t,r,i);var a,u=Number.POSITIVE_INFINITY,s=(0,o.Z)(Rt);try{for(s.s();!(a=s.n()).done;){var c=vt(e,a.value,bt.get()),l=F.c.get();if((0,I.U)(r,c,l)){var f=(0,F.b)(t,l);if(!(0,I.z)(i,l))continue;f<u&&(u=f,(0,b.r)(n,l))}}}catch(d){s.e(d)}finally{s.f()}return it(e,t.origin)<u&&nt(e,t.origin,n),n}function nt(e,t,n){var r=(0,I.H)(e.plane,t,F.c.get()),i=(0,C.A)(pt(e,e.basis1),r,-1,1,F.c.get()),a=(0,C.A)(pt(e,e.basis2),r,-1,1,F.c.get());return(0,b.e)(n,(0,b.u)(F.c.get(),i,a),e.origin),n}function rt(e,t,n){var r=e.origin,i=e.basis1,a=e.basis2,o=(0,b.e)(F.c.get(),t,r),u=(0,F.f)(i,o),s=(0,F.f)(a,o),c=(0,F.f)(ft(e),o);return(0,b.o)(n,u,s,c)}function it(e,t){var n=rt(e,t,F.c.get()),r=e.basis1,i=e.basis2,a=(0,b.s)(r),o=(0,b.s)(i),u=Math.max(Math.abs(n[0])-a,0),s=Math.max(Math.abs(n[1])-o,0),c=n[2];return u*u+s*s+c*c}function at(e,t){return Math.sqrt(it(e,t))}function ot(e,t){return(0,I.z)(e.plane,t)&&dt(e,t)}function ut(e,t){var n=-e.plane[3];return(0,F.f)(ft(e),t)-n}function st(e,t){return(0,b.F)(e.basis1,t.basis1)&&(0,b.F)(e.basis2,t.basis2)&&(0,b.F)(e.origin,t.origin)}function ct(e,t,n){return e!==n&&Je(e,n),(0,S.h)(Ot,t),(0,S.o)(Ot,Ot),(0,b.O)(n.basis1,e.basis1,Ot),(0,b.O)(n.basis2,e.basis2,Ot),(0,b.O)((0,I.Y)(n.plane),(0,I.Y)(e.plane),Ot),(0,b.O)(n.origin,e.origin,t),(0,I.L)(n.plane,n.plane,n.origin),n}function lt(e,t,n,r){return e!==r&&Je(e,r),(0,S.g)(_t,t,n),(0,b.O)(r.basis1,e.basis1,_t),(0,b.O)(r.basis2,e.basis2,_t),Xe(r),r}function ft(e){return(0,I.Y)(e.plane)}function dt(e,t){var n=(0,b.e)(F.c.get(),t,e.origin),r=(0,b.v)(e.basis1),i=(0,b.v)(e.basis2),a=(0,b.P)(e.basis1,n),o=(0,b.P)(e.basis2,n);return-a-r<0&&a-r<0&&-o-i<0&&o-i<0}function pt(e,t){var n=bt.get();return(0,b.r)(n.origin,e.origin),(0,b.r)(n.vector,t),n}function vt(e,t,n){var r=e.basis1,i=e.basis2,a=e.origin,o=(0,b.g)(F.c.get(),r,t.origin[0]),u=(0,b.g)(F.c.get(),i,t.origin[1]);(0,b.u)(n.origin,o,u),(0,b.u)(n.origin,n.origin,a);var s=(0,b.g)(F.c.get(),r,t.direction[0]),c=(0,b.g)(F.c.get(),i,t.direction[1]);return(0,b.g)(n.vector,(0,b.u)(s,s,c),2),n}function ht(e,t){Math.abs((0,b.P)(e.basis1,e.basis2)/((0,b.s)(e.basis1)*(0,b.s)(e.basis2)))>1e-6&&qe.warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,b.P)(e.basis1,ft(e)))>1e-6&&qe.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,b.P)(ft(e),e.origin)-e.plane[3])>1e-6&&qe.warn(t,"Plane offset is not consistent with plane origin")}function yt(e,t,n,r){var i=ft(e);(0,I.O)(i,t.direction,t.origin,n),(0,I.O)((0,I.Y)(n),i,t.origin,r)}var gt={plane:(0,I.p)(),origin:(0,b.c)(0,0,0),basis1:(0,b.c)(1,0,0),basis2:(0,b.c)(0,1,0)},mt=new F.s(I.p),bt=new F.s(C.v),Tt=(0,b.n)(),wt=new F.s((function(){return Ve()})),Rt=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Ot=(0,x.e)(),_t=(0,x.e)(),Mt=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:We,create:Ve,wrap:function(e,t,n){var r=wt.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=(0,I.E)(0,0,0,0),Xe(r),r},copy:Je,copyWithoutVerify:function(e,t){(0,b.r)(t.origin,e.origin),(0,b.r)(t.basis1,e.basis1),(0,b.r)(t.basis2,e.basis2),(0,I.A)(t.plane,e.plane)},fromValues:Ye,updateUnboundedPlane:Xe,elevate:Ke,setExtent:function(e,t,n){return Qe(t,n),Ke(n,ut(e,e.origin),n),n},fromAABoundingRect:Qe,intersectRay:$e,intersectRayClosestSilhouette:function(e,t,n){if($e(e,t,n))return n;var r=et(e,t,F.c.get());return(0,b.u)(n,t.origin,(0,b.g)(F.c.get(),t.direction,(0,b.x)(t.origin,r)/(0,b.s)(t.direction))),n},closestPointOnSilhouette:et,closestPoint:tt,projectPoint:nt,projectPointLocal:rt,distance2:it,distance:at,distanceToSilhouette:function(e,t){var n,r=Number.NEGATIVE_INFINITY,i=(0,o.Z)(Rt);try{for(i.s();!(n=i.n()).done;){var a=vt(e,n.value,bt.get()),u=(0,C.M)(a,t);u>r&&(r=u)}}catch(s){i.e(s)}finally{i.f()}return Math.sqrt(r)},extrusionContainsPoint:ot,axisAt:function(e,t,n,r){return function(e,t,n){switch(t){case F.n.X:(0,b.r)(n,e.basis1),(0,b.z)(n,n);break;case F.n.Y:(0,b.r)(n,e.basis2),(0,b.z)(n,n);break;case F.n.Z:(0,b.r)(n,ft(e))}return n}(e,n,r)},altitudeAt:ut,setAltitudeAt:function(e,t,n,r){var i=ut(e,t),a=(0,b.g)(Tt,ft(e),n-i);return(0,b.u)(r,t,a),r},equals:st,transform:ct,rotate:lt,normal:ft,UP:gt},Symbol.toStringTag,{value:"Module"}));function xt(e){return(0,v.r)(e)&&(0,v.r)(e.dist)}function Et(e){return function(t,n,r){return(0,b.A)(Zt,t,n,r),!ot(e,Zt)}}function At(e){return xt(e)&&e.intersector===Ce.OBJECT&&!!e.target}function kt(e){return xt(e)&&e.intersector===Ce.HUD&&!!e.target&&(0,v.r)(e.target.center)}var Zt=(0,b.n)(),Pt=1e-5,Nt=function(){function e(t){(0,s.Z)(this,e),this.options=new De,this._results=new Lt,this.transform=new B.u,this.tolerance=Pt,this.verticalOffset=null,this._ray=(0,F.d)(),this._rayEnd=(0,b.n)(),this._rayBeginTransformed=(0,b.n)(),this._rayEndTransformed=(0,b.n)(),this.viewingMode=null!==t&&void 0!==t?t:G.l.Global}return(0,c.Z)(e,[{key:"results",get:function(){return this._results}},{key:"ray",get:function(){return this._ray}},{key:"rayBegin",get:function(){return this._ray.origin}},{key:"rayEnd",get:function(){return this._rayEnd}},{key:"reset",value:function(e,t,n){this.resetWithRay((0,F.h)(e,t,this._ray),n)}},{key:"resetWithRay",value:function(e,t){this.camera=t,e!==this._ray&&(0,F.k)(e,this._ray),0!==this.options.verticalOffset?this.viewingMode===G.l.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,b.u)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}},{key:"intersect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;this.point=n,this.filterPredicate=i,this.tolerance=null!==r&&void 0!==r?r:Pt;var u=(0,B.y)(this.verticalOffset);(0,v.r)(t)&&t.length>0&&function(){var n,r=a?function(t){a(t)&&e.intersectObject(t)}:function(t){e.intersectObject(t)},i=(0,o.Z)(t);try{for(i.s();!(n=i.n()).done;){var s=n.value,c=s.getSpatialQueryAccelerator&&s.getSpatialQueryAccelerator();(0,v.r)(c)?((0,v.r)(u)?c.forEachAlongRayWithVerticalOffset(e._ray.origin,e._ray.direction,r,u):c.forEachAlongRay(e._ray.origin,e._ray.direction,r),e.options.selectionMode&&e.options.hud&&c.forEachDegenerateObject(r)):s.objects.forAll((function(e){return r(e)}))}}catch(l){i.e(l)}finally{i.f()}}(),this.sortResults()}},{key:"intersectObject",value:function(e){var t=this,n=e.geometryRecords;if(n){var r,i=e.transformation,a=(0,B.y)(this.verticalOffset),u=(0,o.Z)(n);try{var s=function(){var n=r.value,o=n.geometry,u=n.material,s=n.instanceParameters;if((0,B.a)(s))return"continue";var c=o.id;t.transform.setAndInvalidateLazyTransforms(i,n.getShaderTransformation()),(0,b.O)(t._rayBeginTransformed,t.rayBegin,t.transform.inverse),(0,b.O)(t._rayEndTransformed,t.rayEnd,t.transform.inverse);var l=t.transform.transform;(0,v.r)(a)&&(a.objectTransform=t.transform),u.intersect(o,s,t.transform.transform,t,t._rayBeginTransformed,t._rayEndTransformed,(function(n,r,i,a,o,u){if(n>=0){if((0,v.r)(t.filterPredicate)&&!t.filterPredicate(t._ray.origin,t._rayEnd,n))return;var s=a?t._results.hud:t._results,f=a?function(t){var a={object:e,geometryId:c,triangleNr:i,center:(0,v.r)(u)?[u[0],u[1],u[2]]:null};t.set(Ce.HUD,a,n,r,x.o,o)}:function(t){return t.set(Ce.OBJECT,{object:e,geometryId:c,triangleNr:i},n,r,l,o)};if((null==s.min.drapedLayerOrder||o>=s.min.drapedLayerOrder)&&(null==s.min.dist||n<s.min.dist)&&f(s.min),t.options.store!==Ie.MIN&&(null==s.max.drapedLayerOrder||o<s.max.drapedLayerOrder)&&(null==s.max.dist||n>s.max.dist)&&f(s.max),t.options.store===Ie.ALL)if(a){var d=new Gt(t._ray);f(d),t._results.hud.all.push(d)}else{var p=new Ft(t._ray);f(p),t._results.all.push(p)}}}),n.shaderTransformation)};for(u.s();!(r=u.n()).done;)s()}catch(c){u.e(c)}finally{u.f()}}}},{key:"sortResults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._results.all;e.sort((function(e,t){return e.dist!==t.dist?(0,v.v)(e.dist,0)-(0,v.v)(t.dist,0):e.drapedLayerOrder!==t.drapedLayerOrder?(0,v.v)(e.drapedLayerOrder,Number.MAX_VALUE)-(0,v.v)(t.drapedLayerOrder,Number.MAX_VALUE):(0,v.v)(t.drapedLayerGraphicOrder,Number.MIN_VALUE)-(0,v.v)(e.drapedLayerGraphicOrder,Number.MIN_VALUE)}))}}]),e}();function St(e){return new Nt(e)}var Lt=function(){function e(){(0,s.Z)(this,e),this.min=new Ft((0,F.d)()),this.max=new Ft((0,F.d)()),this.hud={min:new Gt((0,F.d)()),max:new Gt((0,F.d)()),all:new Array},this.ground=new Ft((0,F.d)()),this.all=[]}return(0,c.Z)(e,[{key:"init",value:function(e){this.min.init(e),this.max.init(e),this.ground.init(e),this.all.length=0,this.hud.min.init(e),this.hud.max.init(e),this.hud.all.length=0}}]),e}(),Ft=function(){function e(t){(0,s.Z)(this,e),this.intersector=Ce.OBJECT,this.normal=(0,b.n)(),this.transformation=(0,x.e)(),this._ray=(0,F.d)(),this.init(t)}return(0,c.Z)(e,[{key:"ray",get:function(){return this._ray}},{key:"distanceInRenderSpace",get:function(){return(0,v.r)(this.dist)?((0,b.g)(It,this.ray.direction,this.dist),(0,b.s)(It)):null}},{key:"getIntersectionPoint",value:function(e){return!!xt(this)&&((0,b.g)(It,this.ray.direction,this.dist),(0,b.u)(e,this.ray.origin,It),!0)}},{key:"getTransformedNormal",value:function(e){return(0,b.r)(Bt,this.normal),Bt[3]=0,(0,b.w)(Bt,Bt,this.transformation),(0,b.r)(e,Bt),(0,b.z)(e,e)}},{key:"init",value:function(e){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=Ce.OBJECT,(0,F.k)(e,this._ray)}},{key:"set",value:function(e,t,n,r,i,a,o){this.intersector=e,this.dist=n,(0,b.r)(this.normal,(0,v.v)(r,b.k)),(0,S.n)(this.transformation,(0,v.v)(i,x.o)),this.target=t,this.drapedLayerOrder=a,this.drapedLayerGraphicOrder=o}},{key:"copy",value:function(e){(0,F.k)(e.ray,this._ray),this.intersector=e.intersector,this.dist=e.dist,this.target=e.target,this.drapedLayerOrder=e.drapedLayerOrder,this.drapedLayerGraphicOrder=e.drapedLayerGraphicOrder,(0,b.r)(this.normal,e.normal),(0,S.n)(this.transformation,e.transformation)}}]),e}(),Gt=function(e){(0,l.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,s.Z)(this,n),(e=t.apply(this,arguments)).intersector=Ce.HUD,e}return(0,c.Z)(n)}(Ft);function Ct(e){return new Ft(e)}var It=(0,b.n)(),Bt=(0,L.n)();function zt(e,t,n,r){return(0,v.r)(e.renderCoordsHelper.fromRenderCoords(t.eye,qt,r))&&(0,k.b)(n,qt)}function Ht(e,t){return e.elevationProvider?(0,v.v)(e.elevationProvider.getElevation(t[0],t[1],t[2],e.renderCoordsHelper.spatialReference,"ground"),0):0}function jt(e,t,n,r){var i=e.state.camera.clone();t&&(i.eye=t,i.center=n,i.up=r),function(e,t,n){var r=Dt[e.viewingMode];r||((r=St(e.state.viewingMode)).options.backfacesTerrain=!e.state.isGlobal,r.options.invisibleTerrain=!0,Dt[e.viewingMode]=r);var i=e.state.isGlobal;return!(!e.sceneIntersectionHelper.intersectRay(t,r,n)||Ut(e,t.origin,n))||!(!e.renderCoordsHelper.intersectManifold(t,0,n)||Ut(e,t.origin,n))||!!i&&function(e,t,n){var r=(0,b.P)(e.origin,e.origin)-n*n,i=r>0?Math.sqrt(r)/3:1;return(0,b.g)(t,e.direction,i/(0,b.s)(e.direction)),(0,b.u)(t,t,e.origin),!0}(t,n,(0,N.u)(e.spatialReference).radius)}(e,i.ray,Wt)||(0,b.r)(Wt,i.center);var a=e.state.constraints,o=a.minimumPoiDistance;if((0,b.p)(i.eye,Wt)<o){var u=a.collision.enabled;(0,b.r)(Vt,i.viewForward),(0,b.g)(Vt,Vt,o),u?i.eye=(0,b.e)(qt,Wt,Vt):(0,b.u)(Wt,i.eye,Vt);var s=e.renderCoordsHelper,c=s.getAltitude(i.eye),l=a.collision.elevationMargin;u&&c<l&&((0,b.e)(Vt,Wt,i.eye),i.eye=s.setAltitude(qt,l,i.eye),(0,b.u)(Wt,i.eye,Vt))}return i.center=Wt,i}function Ut(e,t,n){if(!e.state.isGlobal)return!1;var r=Ht(e,t),i=e.stateManager.constraintsManager.nearFarHeuristic.compute(t,n,e.renderDataExtent,r,Jt).far,a=i*i;return(0,b.p)(t,n)>a}var Dt={},qt=(0,b.n)(),Wt=(0,b.n)(),Vt=(0,b.n)(),Jt={near:0,far:0},Yt=(0,b.n)(),Xt=(0,b.n)();function Kt(){return{direction:(0,b.n)(),up:(0,b.n)()}}function Qt(e,t,n,r,i){var a=(0,b.z)(Yt,e),o=(0,b.P)(a,r),u=o>0;(o=Math.abs(o))>.99&&((o=Math.abs((0,b.P)(t,r)))<.99?((0,b.r)(a,t),u&&(0,b.g)(a,a,-1)):a=null);var s=0;if(a){(0,b.g)(Xt,r,(0,b.P)(r,a)),(0,b.e)(a,a,Xt);var c=(0,b.P)(a,i)/((0,b.s)(a)*(0,b.s)(i));(0,b._)(Xt,a,i),s=((0,b.P)(Xt,r)>0?1:-1)*(0,b.b)((0,b.i)(c))}var l=(0,b.b)((0,b.i)(-(0,b.P)(r,e)/(0,b.s)(e)));return n?(n.heading=s,n.tilt=l,n):{heading:s,tilt:l}}var $t=(0,b.c)(0,1,0),en=(0,b.c)(0,0,1),tn=(0,x.e)(),nn=(0,b.n)(),rn=(0,b.n)();function an(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kt(),i=r.direction,a=r.up;return(0,S.R)(tn,-(0,b.m)(t)),(0,S.b)(tn,tn,(0,b.m)(n)),(0,b.O)(i,en,tn),(0,b.g)(i,i,-1),(0,b.O)(a,$t,tn),r}function on(e,t,n,r,i){var a=e.renderSpatialReference,o=e.map&&e.spatialReference||t.spatialReference;return(0,E.g)(t,nn,a),(0,E.g)(t,rn,a),nn[0]-=n/2,rn[0]+=n/2,nn[1]-=r/2,rn[1]+=r/2,(0,E.j)(nn,a,nn,o),(0,E.j)(rn,a,rn,o),i?(i.xmin=nn[0],i.ymin=nn[1],i.xmax=rn[0],i.ymax=rn[1],i.spatialReference=o):i=new z.w(nn[0],nn[1],rn[0],rn[1],o),i}var un=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:an,directionToHeadingTilt:function(e,t,n,r){return Qt(t,n,r,en,$t)},eyeForCenterWithHeadingTilt:function(e,t,n,r){var i=an(e,n,r),a=(0,b.n)();return(0,b.g)(a,i.direction,-t),(0,b.u)(a,a,e),{up:i.up,eye:a,heading:n,tilt:r}},lookAtTiltToEyeTilt:function(e){return(0,b.b)(e)},eyeTiltToLookAtTilt:function(e){return(0,b.m)(e)},toExtent:on},Symbol.toStringTag,{value:"Module"}));function sn(e,t,n){if((0,v.t)(t.longitude)||(0,v.t)(t.latitude)||(0,v.t)(n.longitude)||(0,v.t)(n.latitude))throw new Error("Invalid points: no lon/lat");return function(e,t,n,r,i){var a=(0,b.m)(n),o=(0,b.m)(i),u=a-o,s=(0,b.m)(t)-(0,b.m)(r),c=Math.sin(u/2),l=Math.sin(s/2),f=2*(0,b.N)(Math.sqrt(c*c+Math.cos(a)*Math.cos(o)*l*l))*e;return Math.round(1e4*f)/1e4}(e,t.longitude,t.latitude,n.longitude,n.latitude)}function cn(e,t,n){var r=t.spatialReference,i=(0,N.u)(r),a=new y.w(t.x,e.y,r),o=new y.w(n.x,e.y,r),u=new y.w(e.x,t.y,r),s=new y.w(e.x,n.y,r);return{lon:sn(i.radius,a,o),lat:sn(i.radius,u,s)}}function ln(e,t){t||(t={hours:0,minutes:0,seconds:0}),t.hours=function(e,t){var n=e/15;return t||(n=Math.round(n)),n}(e[0],!0);var n=t.hours%1;t.hours-=n,t.minutes=60*n;var r=t.minutes%1;return t.minutes-=r,t.seconds=Math.round(60*r),t}var fn=(0,b.c)(0,0,1),dn=(0,b.z)((0,b.n)(),(0,b.c)(1,1,1)),pn=new O.i(-180,180),vn=(0,x.e)(),hn=(0,b.n)(),yn=(0,b.n)();function gn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kt();(0,b._)(hn,e,fn),0===(0,b.P)(hn,hn)&&(0,b._)(hn,e,dn),(0,S.g)(vn,-(0,b.m)(t),e),(0,S.f)(vn,vn,-(0,b.m)(n),hn);var i=r.up,a=r.direction;return(0,b._)(i,hn,e),(0,b.z)(i,i),(0,b.O)(i,i,vn),(0,b.z)(a,e),(0,b.q)(a,a),(0,b.O)(a,a,vn),r}function mn(e){var t=e[1];e[1]=-e[2],e[2]=t}function bn(e,t){var n=gn(t,e.heading,e.tilt);return e.up=n.up,e}function Tn(e,t,n,r,i){var a,o,u,s,c=t.latitude,l=(0,N.u)(e.spatialReference).radius,f=t.longitude,d=function(e,t,n){var r=t/n,i=(0,b.m)(e),a=Math.sin(r/2),o=Math.cos(i),u=2*(0,b.N)(Math.sqrt(a*a/(o*o)));return(0,b.b)(u)}(c,n,l)/2;a=f-d,o=f+d;var p=(0,b.m)(c),v=(1+Math.sin(p))/(1-Math.sin(p)),h=(v+1)*Math.tan(r/l/2),g=h*h;function m(e){var t=Math.PI/2;return(e=O.o.normalize(e,-t))>t&&(e=Math.PI-e),e}if(s=(u=1.5*Math.PI-2*Math.atan(.5*(h+Math.sqrt(4*v+g))))+r/l,u=m(u),(s=m(s))<u){var T=s;s=u,u=T}if(u=Math.max((0,b.b)(u),-90),s=Math.min((0,b.b)(s),90),(o=pn.monotonic(a,o))-a>180){var w=(o-a-180)/2;a+=w,o-=w}var R=e.spatialReference&&e.spatialReference.isGeographic?e.spatialReference:y.k.WGS84;return i?(i.xmin=a,i.ymin=u,i.xmax=o,i.ymax=s,i.spatialReference=R):i=new z.w(a,u,o,s,R),e.spatialReference&&e.spatialReference.isWebMercator&&(0,y.R)(i,!1,i),i}var wn=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:gn,directionToHeadingTilt:function(e,t,n,r){var i=hn,a=yn;return(0,b.z)(i,e),(0,b._)(yn,i,fn),0===(0,b.P)(yn,yn)&&(0,b._)(yn,i,dn),(0,b._)(a,yn,i),Qt(t,n,r,i,a)},eyeForCenterWithHeadingTilt:function(e,t,n,r){var i={eye:(0,b.n)(),up:null,tilt:r,heading:n},a=hn;a[0]=e[0],a[1]=e[2],a[2]=-e[1];var o,u=t,s=(0,b.m)(n),c=(0,b.m)(r),l=Math.sin(s),f=Math.cos(s),d=Math.sin(c),p=Math.cos(c),v=(0,b.s)(a);if(Math.abs(c)<1e-8)o=u+v;else{var h=v/d,y=(0,b.N)(u/h),g=Math.PI-c-y;o=h*Math.sin(g)}var m=p*u,T=u*u*(d*d),w=f*f*T,R=o-m,O=R*R,_=w*(w+O-a[1]*a[1]);if(_<0)return(0,b.g)(i.eye,a,o/v),i.tilt=0,i;var M,x=Math.sqrt(_),E=a[1]*R,A=w+O;if(M=f>0?-x+E:x+E,Math.abs(A)<1e-8)return v<1e-8?(i.eye[0]=0,i.eye[1]=0,i.eye[2]=u):(0,b.g)(i.eye,a,o/v),i.tilt=0,mn(i.eye),bn(i,e);i.eye[1]=M/A;var k=l*l*T,Z=d*u,P=f*Z*i.eye[1],N=i.eye[1]*i.eye[1],S=1-N,L=Math.sqrt(S),F=w*N+k-2*P*L*R+S*O;return Math.abs(F)<1e-8?((0,b.g)(i.eye,a,o/v),i.tilt=0,mn(i.eye),bn(i,e)):(i.eye[0]=(S*(o*a[0]-m*a[0])-Z*L*(a[0]*i.eye[1]*f+a[2]*l))/F,i.eye[2]=(S*(o*a[2]-m*a[2])-Z*L*(a[2]*i.eye[1]*f-a[0]*l))/F,(0,b.g)(i.eye,i.eye,o),mn(i.eye),bn(i,e))},lookAtTiltToEyeTilt:function(e,t,n){var r=(0,b.s)(t),i=Math.sqrt(n*n+r*r-2*n*r*Math.cos(Math.PI-e)),a=(0,b.N)(n/(i/Math.sin(e)));return(0,b.b)(e-a)},eyeTiltToLookAtTilt:function(e,t,n){var r=(0,b.m)(e),i=(0,b.s)(t);return(0,b.N)(n/(i/Math.sin(r)))+r},toExtent:Tn},Symbol.toStringTag,{value:"Module"}));function Rn(e){return"point"===e.type}var On=(0,c.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,s.Z)(this,e),this.array=t,this.spatialReference=n,this.offset=r}));function _n(e){return"array"in e}function Mn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if(Rn(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,n);if(_n(t)){var r=t.offset;return e.getElevation(t.array[r++],t.array[r++],t.array[r]||0,(0,v.v)(t.spatialReference,e.spatialReference),n)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,n)}var xn,En=d.a.getLogger("esri.views.3d.support.cameraUtils"),An=(0,b.n)(),kn=(0,b.n)(),Zn={heading:0,tilt:0},Pn=new y.w,Nn=new O.i(-20037508.342788905,20037508.342788905),Sn=new O.i(-180,180);function Ln(e){return e.spatialReference||y.k.WGS84}function Fn(e){return"global"===e.viewingMode?wn:un}function Gn(e,t,n,r,i){return Fn(e).headingTiltToDirectionUp(t,n,r,i)}function Cn(e,t){if((0,v.t)(t))return null;var n=e.renderSpatialReference,r=Fn(e).headingTiltToDirectionUp,i=(0,b.n)();if(!(0,E.g)(t.position,i,n))return null;var a=r(i,t.heading,t.tilt);(0,b.g)(a.direction,a.direction,e.state.camera.distance),(0,b.u)(a.direction,a.direction,i);var o=jt(e,i,a.direction,a.up);return o.fov=(0,b.m)(t.fov),o}!function(e){e[e.LOCKED=0]="LOCKED",e[e.ADJUST=1]="ADJUST"}(xn||(xn={}));var In=(0,b.n)();function Bn(e,t,n){var r=e.renderSpatialReference,i=Dn(e,t.eye,t.viewForward,t.up,Zn),a=Ln(e);return(0,E.j)(t.eye,r,In,a)||(a=y.k.WGS84,(0,E.j)(t.eye,r,In,a)),(0,v.t)(n)?new T.y(new y.w(In,a),i.heading,i.tilt,(0,b.b)(t.fov)):(n.position.x=In[0],n.position.y=In[1],n.position.z=In[2],n.position.spatialReference=a,n.heading=i.heading,n.tilt=i.tilt,n.fov=(0,b.b)(t.fov),n)}function zn(e,t,n){var r=e.state.camera,i=r.width/2/r.pixelRatio;return e.renderCoordsHelper.viewingMode===G.l.Global&&null!=n&&(t*=Math.cos((0,b.m)(n))),i/(96*39.37/(t/=e.renderCoordsHelper.unitInMeters))/Math.tan(r.fovX/2)}function Hn(e,t,n){var r=e.state.camera,i=t*Math.tan(r.fovX/2),a=96*39.37/(r.width/2/r.pixelRatio/i);return e.renderCoordsHelper.viewingMode===G.l.Global&&(a/=Math.cos((0,b.m)(n))),a*=e.renderCoordsHelper.unitInMeters}function jn(e,t,n,r,i,a){return Un(e,t,zn(e,n,t.latitude),r,i,a)}function Un(e,t,n,r,i,a){if(ur(a)){var o=new or(a.signal);return Yn(e,r.heading,r.tilt,t,n,i,o),void o.resolver.promise.then((function(t){var n=nr(e,t,r.fov);if(!(0,v.t)(n))return a.resolver.resolve(n);a.resolver.reject()}),(function(e){return a.resolver.reject(e)}))}var u=Yn(e,r.heading,r.tilt,t,n,i);return nr(e,u,r.fov,a)}function Dn(e,t,n,r,i){return Fn(e).directionToHeadingTilt(t,n,r,i)}function qn(e,t){return!!(e.basemapTerrain&&e.renderCoordsHelper.fromRenderCoords(t,Pn,e.spatialReference)&&(0,v.v)(Mn(e.elevationProvider,Pn),0)>Pn.z-1)}function Wn(){return Wn=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.renderCoordsHelper.fromRenderCoords(n,Pn,t.spatialReference)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,t.elevationProvider.queryElevation(Pn.x,Pn.y,Pn.z,Pn.spatialReference,"ground",r);case 4:return a=e.sent,e.abrupt("return",(0,v.v)(a,0)>Pn.z-1);case 6:case"end":return e.stop()}}),e)}))),Wn.apply(this,arguments)}function Vn(){return Vn=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,b.n)(),!n){e.next=13;break}if(!(n instanceof y.w)){e.next=10;break}if((0,E.g)(n,a,t.renderSpatialReference),null!=n.z||null==t.basemapTerrain){e.next=8;break}return e.next=6,t.elevationProvider.queryElevation(n.x,n.y,n.z,n.spatialReference,"ground",r);case 6:return o=e.sent,e.abrupt("return",((0,v.r)(o)&&t.renderCoordsHelper.setAltitude(a,o),a));case 8:e.next=11;break;case 10:(0,b.r)(a,n);case 11:e.next=14;break;case 13:(0,b.r)(a,t.state.camera.center);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)}))),Vn.apply(this,arguments)}function Jn(e,t){var n=(0,b.n)();if(t&&t instanceof y.w){if((0,E.g)(t,n,e.renderSpatialReference),null==t.z&&null!=e.basemapTerrain){var r=Mn(e.elevationProvider,t);(0,v.r)(r)&&e.renderCoordsHelper.setAltitude(n,r)}}else(0,b.r)(n,t||e.state.camera.center);return n}function Yn(e,t,n,r,i,a,o){var u=r&&r instanceof y.w?r:null;if(ur(o))return function(e,t,n){return Vn.apply(this,arguments)}(e,r,o.signal).then((function(r){Xn(e,t,n,u,r,i,a,o)}),(function(e){return o.resolver.reject(e)})),null;var s=Jn(e,r);return Xn(e,t,n,u,s,i,a,o)}function Xn(e,t,n,r,i,a,o,u){if((0,v.t)(r)){var s=e.renderSpatialReference;if(r=(0,E.d)(i,s,Ln(e)),(0,v.t)(r))return null}a=Math.max(a,e.state.constraints.minimumPoiDistance);var c=function(e,t,n,r,i,a){var o=0;return a===xn.ADJUST&&function(e,t,n){var r=e.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(n/r)/Math.LN2>8)return!0;var i=e.renderSpatialReference,a=Ln(e),o=(0,E.d)(t,i,a),u=(0,E.d)(e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,i,a);if((0,v.t)(o)||(0,v.t)(u))return!1;var s=Math.tan(.5*e.state.camera.fov)*r;return u.distance(o)/s>5}(e,r,i)?(t=0,o=function(e,t,n,r){var i=e.state.constraints.tilt(t);i.max=Math.min(i.max,.5*Math.PI);var a=i.min*(1-$n)+i.max*$n,o=tr(e,r,t,n);return Math.min(o,a)}(e,i,n,r)):o=tr(e,r,i,n),o=e.state.constraints.clampTilt(i,o),{heading:t,tilt:n=er(e,r,i,o)}}(e,t,n,i,a,o),l=(0,Fn(e).eyeForCenterWithHeadingTilt)(i,a,c.heading,c.tilt);if(o===xn.ADJUST&&"global"===e.viewingMode&&n>0){var f=function(){var s=er(e,i,a,function(e,t,n,r){var i=e.state.constraints.tilt(t),a=tr(e,r,t,n);return a=Math.min(a,.5*Math.PI),i.min*(1-$n)+a*$n}(e,a,n,i));return o=n-s<1?xn.LOCKED:xn.ADJUST,Xn(e,t,s,r,i,a,o,u)},d=e.map.ground.navigationConstraint;if(!d||"stay-above"===d.type){if(qn(e,l.eye))return f();if(ur(u))return function(e,t,n){return Wn.apply(this,arguments)}(e,l.eye,u.signal).then((function(e){return e?f():(u.resolver.resolve({eye:l.eye,up:l.up,center:(0,b.t)(i),heading:l.heading,tilt:l.tilt}),null)})),null}}var p=!u||ur(u)?{center:(0,b.n)(),eye:(0,b.n)(),up:(0,b.n)(),tilt:0,heading:0}:u;return p.eye=l.eye,p.up=l.up,p.center=(0,b.t)(i),p.heading=l.heading,p.tilt=l.tilt,ur(u)&&u.resolver.resolve(p),p}function Kn(e,t,n,r,i){var a,o,u,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=null!=t.zmax&&null!=t.zmin;if(e.state.isGlobal){if(!H(t.spatialReference,G.l.Global))return ur(s)&&s.resolver.reject(),null;var l=new y.w(t.xmin,t.ymin,t.spatialReference),f=new y.w(t.xmax,t.ymax,t.spatialReference),d=t.spatialReference.isGeographic?Sn:Nn;a=new y.w({x:d.center(l.x,f.x),y:(f.y+l.y)/2,z:c?(t.zmax+t.zmin)/2:null,spatialReference:t.spatialReference});var p=(0,N.u)(t.spatialReference),h=cn(a,l,f);o=h.lon,u=h.lat,d.diff(l.x,f.x)>d.range/2&&(o+=p.halfCircumference),o=Math.min(o,p.halfCircumference),u=Math.min(u,p.halfCircumference)}else{var g=(0,v.v)(e.renderSpatialReference,t.spatialReference);g.equals(t.spatialReference)||(t=(0,E.r)(t,g)),o=t.xmax-t.xmin,u=t.ymax-t.ymin;var m=c?(t.zmax+t.zmin)/2:null;a=new y.w({x:t.xmin+.5*o,y:t.ymin+.5*u,z:m,spatialReference:g})}var b=c?t.zmax-t.zmin:0,T=e.state.camera,w=1/Math.tan(T.fovX/2),R=1/Math.tan(T.fovY/2),O=1/Math.tan(T.fov/2),_=Math.max(.5*o*w,.5*u*R,.5*b*O)/1;if(ur(s)){var M=new or(s.signal);return Yn(e,n,r,a,_,i,M),void M.resolver.promise.then((function(t){var n=nr(e,t,e.camera.fov);if(!(0,v.t)(n))return s.resolver.resolve(n);s.resolver.reject()}),(function(e){return s.resolver.reject(e)}))}var x=Yn(e,n,r,a,_,i);return nr(e,x,e.camera.fov,s)}function Qn(e,t,n){var r=e.renderSpatialReference,i=(0,E.d)(n,r,Ln(e));if((0,v.t)(i))return null;var a=Math.tan(t.fovX/2),o=Math.tan(t.fovY/2),u=(0,b.U)(t.eye,n),s=2*u*a*1,c=2*u*o*1;return"global"===e.viewingMode?Tn(e,i,s,c):on(e,i,s,c)}var $n=.7;function er(e,t,n,r){return Fn(e).lookAtTiltToEyeTilt(r,t,n)}function tr(e,t,n,r){return Fn(e).eyeTiltToLookAtTilt(r,t,n)}function nr(e,t,n,r){if((0,v.t)(t))return null;var i=e.renderSpatialReference,a=(0,E.d)(t.eye,i,Ln(e));return(0,v.t)(a)?null:(0,v.r)(r)?(r.position=a,r.heading=t.heading,r.tilt=t.tilt,r.fov=n,r):new T.y(a,t.heading,t.tilt,n)}function rr(e,t){var n,r=null===(n=e.basemapTerrain)||void 0===n?void 0:n.tilingScheme;if(r)return r.levelAtScale(t);En.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")}function ir(e,t){var n,r=null===(n=e.basemapTerrain)||void 0===n?void 0:n.tilingScheme;if(r)return r.scaleAtLevel(t);En.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")}function ar(e,t,n){var r,i,a=e.renderSpatialReference;t||(t=e.state.camera);var o=y.k.WGS84;return t instanceof T.y?(r=t.position.latitude,(0,E.g)(t.position,An,a),(0,E.g)(n,kn,a),i=(0,b.x)(An,kn)):((0,E.j)(t.center,a,kn,o),r=kn[1],i=t.distance),Hn(e,i,r)}var or=(0,c.Z)((function e(t){(0,s.Z)(this,e),this.signal=t,this.resolver=(0,d.ap)()}));function ur(e){return e&&"resolver"in e}function sr(e){return 360-O.s.normalize(e)}function cr(e){return O.s.normalize(360-e)}function lr(e){return(0,v.r)(e)&&e.resolver&&e.resolver.reject(),null}function fr(e,t){return(0,v.r)(e)&&e.resolver&&e.resolver.resolve(t),t}function dr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return lr(r);var i=e.spatialReference||y.k.WGS84;if((0,v.r)(t.camera)){var a=(0,y.M)(t.camera.position,i);if((0,v.t)(a))return lr(r);var o=t.camera.clone();return o.position=a,fr(r,o)}if((0,v.t)(t.targetGeometry))return lr(r);var u=t.get("targetGeometry.spatialReference");if(u&&!(0,y.g)(u,i))return lr(r);var s=Bn(e,e.state.camera),c=xn.ADJUST;if(null!=t.rotation&&(s.heading=sr(t.rotation),c=xn.LOCKED),null!=n&&(s.tilt=n),"point"===t.targetGeometry.type){var l=t.targetGeometry,f=t.targetGeometry.clone();return Un(e,f,null!=t.scale?zn(e,t.scale,l.latitude):e.state.camera.distance,s,c,r)}var d=t.targetGeometry.extent;return Kn(e,d,s.heading,s.tilt,c,r)}function pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,v.t)(n)&&(n=new T.u),br(e,null,t.clone(),n)}function vr(e,t,n){return hr.apply(this,arguments)}function hr(){return hr=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,u,s,c,l,f,p,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Br(t,n)){e.next=3;break}throw new d.s("viewpointutils-create:no-target","Missing target for creating viewpoint");case 3:if(o=new T.y({fov:t.camera.fov}),u=new T.u({camera:o}),!(a.target instanceof T.u)){e.next=10;break}return e.t0=zr,e.next=8,Mr(t,a.target,a,r,u);case 8:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:if(!(a.target instanceof T.y)){e.next=12;break}return e.abrupt("return",zr(Er(t,a.target,u)));case 12:if(s=null!=a.scale||null!=a.zoom,!(a.target instanceof z.w)){e.next=27;break}if(c=a.target.xmin===a.target.xmax||a.target.ymin===a.target.ymax,e.t2=zr,!s&&!c){e.next=22;break}return e.next=19,kr(t,a,a.target.center,o,r,u);case 19:e.t3=e.sent,e.next=25;break;case 22:return e.next=24,Lr(t,a,a.target,o,r,u);case 24:e.t3=e.sent;case 25:return e.t4=e.t3,e.abrupt("return",(0,e.t2)(e.t4));case 27:return l={boundingBox:(0,A.A)(),hasZ:!1,screenSpaceObjects:[]},f=s?gr(t,a):void 0,e.next=30,Or(t,a.target,f,l);case 30:if(!isFinite(l.boundingBox[0])){e.next=43;break}if((0,A.p)(l.boundingBox,jr),Kr.x=jr[0],Kr.y=jr[1],Kr.z=jr[2],Kr.spatialReference=t.spatialReference,isFinite(Kr.z)&&l.hasZ?p=(0,A.P)(l.boundingBox):(Kr.z=void 0,p=(0,k.H)((0,A.B)(l.boundingBox,Wr))),!s&&!p){e.next=37;break}return e.t5=zr,e.next=35,kr(t,a,Kr,o,r,u);case 35:return e.t6=e.sent,e.abrupt("return",(0,e.t5)(e.t6));case 37:return v=Hr(t,l.screenSpaceObjects),e.t7=zr,e.next=41,Cr(t,a,Kr,l.boundingBox,v,o,r,u);case 41:return e.t8=e.sent,e.abrupt("return",(0,e.t7)(e.t8));case 43:if(!a.position){e.next=47;break}e.t9=zr(Pr(t,a,o,u)),e.next=52;break;case 47:return e.t10=zr,e.next=50,Nr(t,a,o,r,u);case 50:e.t11=e.sent,e.t9=(0,e.t10)(e.t11);case 52:return e.abrupt("return",e.t9);case 53:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function yr(e,t){return null==t.scale&&null!=t.zoom?ir(e,t.zoom):t.scale}function gr(e,t){return(0,P.o)(yr(e,t))}function mr(e,t){var n=!1;return null!=t.heading?(e.heading=t.heading,n=!0):null!=t.rotation&&(e.heading=sr(t.rotation),n=!0),null!=t.tilt&&(e.tilt=t.tilt,n=!0),null!=t.fov&&(e.fov=t.fov),n}function br(e,t,n,r){var i=e.spatialReference||y.k.WGS84;return t=(0,v.r)(t)?t:Cn(e,n),(0,v.t)(t)||(r.targetGeometry=(0,E.d)(t.center,e.renderSpatialReference,i),r.scale=ar(e,t),r.rotation=cr(n.heading),r.camera=n),r}function Tr(e,t,n){var r,i=function(){return new d.s("viewpointutils:invalid-geometry","The target is missing a valid geometry")};if(!t)throw i();if(!(0,y.g)(t.spatialReference,e.spatialReference))throw new d.s("viewpointutils:incompatible-spatialreference","Spatial reference (".concat(t.spatialReference?t.spatialReference.wkid:"unknown",") is incompatible with the view (").concat(e.spatialReference.wkid,")"),{geometry:t});var a=[];if(!t.hasZ&&e.basemapTerrain){var o;switch(t.type){case"point":o=t;break;case"multipoint":case"polyline":o=null===(r=t.extent)||void 0===r?void 0:r.center;break;case"mesh":o=t.origin;break;case"extent":o=t.center;break;case"polygon":o=t.centroid}o&&(0,v.r)(e.basemapTerrain.spatialReference)&&(0,y.g)(o,e.basemapTerrain.spatialReference)?jr[2]=(0,v.v)(Mn(e.elevationProvider,o),0):jr[2]=0}(0,Qr[t.type])(t,(function(e){a.push(e[0],e[1],e[2])}),jr);var u=a.length/3;if(0===u)throw i();var s=new Array(a.length);if((0,E.x)(a,t.spatialReference,0,s,e.spatialReference,0,u)){t.hasZ&&(n.hasZ=!0);for(var c=0;c<s.length;c+=3)t.hasZ?(jr[0]=s[c+0],jr[1]=s[c+1],jr[2]=s[c+2]):(jr[0]=s[c+0],jr[1]=s[c+1]),(0,A.c)(n.boundingBox,jr)}}function wr(e,t,n,r){return Rr.apply(this,arguments)}function Rr(){return Rr=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){var o,u,s,c,l,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.b)(t.whenViewForGraphic(n));case 2:if(!1!==(o=e.sent).ok&&!(0,v.t)(o.value)&&"whenGraphicBounds"in o.value){e.next=5;break}return e.abrupt("return",void Tr(t,n.geometry,a));case 5:return u=o.value,e.next=8,(0,R.b)(u.whenGraphicBounds(n,{minDemResolution:r}));case 8:if(!1!==(s=e.sent).ok){e.next=11;break}return e.abrupt("return",void Tr(t,n.geometry,a));case 11:c=s.value,l=c.screenSpaceObjects,f=c.boundingBox,(0,A.f)(a.boundingBox,f),l&&l.forEach((function(e){a.screenSpaceObjects.push(e)})),isFinite(f[2])&&(a.hasZ=!0);case 13:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Or(e,t,n,r){return _r.apply(this,arguments)}function _r(){return _r=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){var o,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(n)||2!==n.length){e.next=4;break}if(o=n[0],u=n[1],"number"!=typeof o||"number"!=typeof u){e.next=4;break}return e.abrupt("return",(Kr.x=o,Kr.y=u,Kr.z=void 0,Kr.spatialReference=t.spatialReference.isGeographic?t.spatialReference:y.k.WGS84,void Tr(t,Kr,a)));case 4:if(!n||"function"!=typeof n.map){e.next=9;break}return e.next=7,(0,d.E)(n.map((function(e){return Or(t,e,r,a)})));case 7:e.next=17;break;case 9:if(!(n instanceof y.p)){e.next=13;break}Tr(t,n,a),e.next=17;break;case 13:if(e.t0=n instanceof w.g,!e.t0){e.next=17;break}return e.next=17,wr(t,n,r,a);case 17:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function Mr(e,t,n,r,i){return xr.apply(this,arguments)}function xr(){return xr=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,o){var u,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,v.r)(n.camera)){e.next=2;break}return e.abrupt("return",Er(t,n.camera,o));case 2:return o.scale=n.scale,o.rotation=n.rotation,o.targetGeometry=(0,v.r)(n.targetGeometry)?n.targetGeometry.clone():null,o.camera=null,null!=r.heading?o.rotation=cr(r.heading):null!=r.rotation&&(o.rotation=r.rotation),null!=(u=yr(t,r))&&(o.scale=u),s=new or(a),dr(t,o,r.tilt,s),e.next=9,s.resolver.promise;case 9:return o.camera=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function Er(e,t,n){var r=e.spatialReference,i=(0,y.M)(t.position,r);return(0,v.t)(i)?null:((t=t.clone()).fov=e.camera.fov,t.position=i,br(e,null,t,n))}function Ar(e,t,n,r,i,a){var o=e.renderSpatialReference;return(0,E.g)(n.position,Jr,o),(0,E.g)(t,Yr,o),a.targetGeometry=new y.w(t),i.position=new y.w(n.position),(0,b.e)(Vr,Yr,Jr),Dn(e,Jr,Vr,r.up,i),a.scale=Hn(e,(0,b.x)(Jr,Yr),a.targetGeometry.latitude),a.rotation=cr(i.heading),a.camera=i,a}function kr(e,t,n,r,i,a){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,o,u){var s,c,l,f,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,v.t)(r)){e.next=2;break}throw new d.s("createfromcenter","invalid point");case 2:if(u.targetGeometry=r.clone(),s=jt(t),!n.position){e.next=6;break}return e.abrupt("return",Ar(t,u.targetGeometry,n,s,a,u));case 6:if(n.zoomFactor&&(c=s.distance/n.zoomFactor,l=(0,b.g)(jr,s.viewForward,-c),s.eye=(0,b.u)(jr,s.center,l),u.scale=Hn(t,c,r.latitude)),Bn(t,s,a),f=mr(a,n)?xn.LOCKED:xn.ADJUST,n.zoomFactor){e.next=16;break}return u.scale=yr(t,n),null==u.scale&&((0,E.g)(r,jr,t.renderSpatialReference),(0,Z.p)(s.frustum,jr)?u.scale=Hn(t,(0,b.x)(s.eye,jr),r.latitude):u.scale=ar(t,s)),p=new or(o),jn(t,u.targetGeometry,u.scale,a,f,p),e.next=15,p.resolver.promise;case 15:u.camera=e.sent;case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function Pr(e,t,n,r){var i=jt(e);return(0,b.r)(Vr,i.viewForward),Dn(e,i.eye,Vr,i.up,Xr),n.position=new y.w(t.position),n.heading=null!=t.heading?t.heading:Xr.heading,n.tilt=null!=t.tilt?t.tilt:Xr.tilt,br(e,null,n,r)}function Nr(e,t,n,r,i){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,o){var u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=jt(t),e.abrupt("return",kr(t,n,(0,E.d)(u.center,t.renderSpatialReference,t.spatialReference),r,a,o));case 2:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Lr(e,t,n,r,i,a){return Fr.apply(this,arguments)}function Fr(){return Fr=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,o,u){var s,c,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.targetGeometry=r.clone(),s=jt(t),Bn(t,s,a),c=mr(a,n)?xn.LOCKED:xn.ADJUST,l=new or(o),Kn(t,r,a.heading,a.tilt,c,l),e.next=7,l.resolver.promise;case 7:return u.camera=e.sent,e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Gr(e,t,n,r,i){var a=0;n.hasZ?a=n.z:e.basemapTerrain&&(a=(0,v.e)(Mn(e.elevationProvider,n))),(0,b.o)(jr,n.x,n.y,a),(0,E.Z)(e.spatialReference,jr,Ur,e.renderSpatialReference),(0,_.a)(Dr,Ur),(0,_.o)(Dr,Dr),(0,A.A)(qr);for(var o=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],u=0;u<o.length;u++){var s=o[u],c=r[s[2]];isFinite(c)||(c=a),(0,b.o)(jr,r[s[0]],r[s[1]],c),(0,E.j)(jr,e.spatialReference,jr,e.renderSpatialReference),(0,A.c)(qr,(0,b.S)(jr,jr,Dr))}var l=(0,A.I)(qr),f=(0,A.N)(qr),d=(0,A.y)(qr),p=1/Math.tan(t.fovX/2),h=1/Math.tan(t.fovY/2),y=.5*Math.sqrt(l*l+d*d)*Math.max(h,p)+.5*f,g=.5*f*h+.5*Math.max(l,d);return Math.max(y,g)/i}function Cr(e,t,n,r,i,a,o,u){return Ir.apply(this,arguments)}function Ir(){return Ir=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a,o,u,s,c){var l,f,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.targetGeometry=r.clone(),l=jt(t),f=Gr(t,l,r,a,o),Bn(t,l,u),d=mr(u,n)?xn.LOCKED:xn.ADJUST,c.scale=Hn(t,f,c.targetGeometry.latitude),p=new or(s),jn(t,c.targetGeometry,c.scale,u,d,p),e.next=9,p.resolver.promise;case 9:return c.camera=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Br(e,t){if(!t||!e.spatialReference)return null;var n={target:null};if("declaredClass"in t||Array.isArray(t))n.target=t;else{for(var r in t)n[r]=t[r];t.center&&!n.target&&(n.target=t.center)}return n}function zr(e){return e&&(0,v.r)(e.camera)&&(e.rotation=cr(e.camera.heading)),e}function Hr(e,t){if(!t.length)return.66;for(var n=Number.NEGATIVE_INFINITY,r=0;r<t.length;r++){var i=t[r].screenSpaceBoundingRect;n=Math.max(n,Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2]),Math.abs(i[3]))}return.66-n/Math.min(e.width,e.height)*2}var jr=(0,b.n)(),Ur=(0,x.e)(),Dr=(0,M.e)(),qr=(0,A.a)(),Wr=(0,k.u)(),Vr=(0,b.n)(),Jr=(0,b.n)(),Yr=(0,b.n)(),Xr={heading:0,tilt:0},Kr=new y.w,Qr={point:function(e,t,n){n[0]=e.x,n[1]=e.y,e.hasZ&&(n[2]=e.z),t(n)},polygon:function(e,t,n){for(var r=e.hasZ,i=0;i<e.rings.length;i++)for(var a=e.rings[i],o=0;o<a.length;o++)n[0]=a[o][0],n[1]=a[o][1],r&&(n[2]=a[o][2]),t(n)},polyline:function(e,t,n){for(var r=e.hasZ,i=0;i<e.paths.length;i++)for(var a=e.paths[i],o=0;o<a.length;o++)n[0]=a[o][0],n[1]=a[o][1],r&&(n[2]=a[o][2]),t(n)},multipoint:function(e,t,n){for(var r=e.points,i=e.hasZ,a=0;a<r.length;a++)n[0]=r[a][0],n[1]=r[a][1],i&&(n[2]=r[a][2]),t(n)},extent:function(e,t,n){e.hasZ?(t((0,b.o)(n,e.xmin,e.ymin,e.zmin)),t((0,b.o)(n,e.xmax,e.ymin,e.zmin)),t((0,b.o)(n,e.xmin,e.ymax,e.zmin)),t((0,b.o)(n,e.xmax,e.ymax,e.zmin)),t((0,b.o)(n,e.xmin,e.ymin,e.zmax)),t((0,b.o)(n,e.xmax,e.ymin,e.zmax)),t((0,b.o)(n,e.xmin,e.ymax,e.zmax)),t((0,b.o)(n,e.xmax,e.ymax,e.zmax))):(t((0,b.o)(n,e.xmin,e.ymin,n[2])),t((0,b.o)(n,e.xmax,e.ymin,n[2])),t((0,b.o)(n,e.xmin,e.ymax,n[2])),t((0,b.o)(n,e.xmax,e.ymax,n[2])))},mesh:function(e,t,n){var r=e.vertexAttributes&&e.vertexAttributes.position;if(r)for(var i=0;i<r.length;i+=3)t((0,b.o)(n,r[i+0],r[i+1],r[i+2]))}}}}]);
//# sourceMappingURL=5747.de54bb29.chunk.js.map