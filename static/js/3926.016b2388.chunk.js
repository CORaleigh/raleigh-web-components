"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[3926],{24410:function(e,t,i){i.d(t,{f:function(){return y}});var r=i(74165),n=i(15861),a=i(15671),s=i(43144),l=i(60136),o=i(29388),u=i(48848),c=i(64998),h=i(93661),d=i(12953),f=i(31532),v=i(31303),y=function(e){var t=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments))._rasterFieldPrefix="Raster.",e.layer=null,e.view=null,e.tileInfo=null,e}return(0,s.Z)(i,[{key:"fullExtent",get:function(){return this._getfullExtent()}},{key:"_getfullExtent",value:function(){return this.projectFullExtent(this.view.spatialReference)}},{key:"hasTilingEffects",get:function(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}},{key:"datumTransformation",get:function(){return(0,f.v)((0,h.e)(this.layer.fullExtent),this.view.spatialReference,!0)}},{key:"supportsSpatialReference",value:function(e){return!!this.projectFullExtent(e)}},{key:"projectFullExtent",value:function(e){var t=(0,h.e)(this.layer.fullExtent),i=(0,f.v)(t,e,!1);return(0,f.J)(t,e,i)}},{key:"fetchPopupFeatures",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,i){var n,a,s,l,o,d,f,y,p,m,g,b,w,k,_,x,R;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.layer,t){e.next=3;break}throw new u.s("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:n});case 3:if(a=n.popupEnabled,s=(0,v.s)(n,i),a&&!(0,h.t)(s)){e.next=6;break}throw new u.s("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:a,popupTemplate:s});case 6:return l=[],e.next=9,n.identify(t,{timeExtent:this.timeExtent});case 9:if(o=e.sent,d=o.value,f=o.magdirValue,y="",d&&d.length){if(y="imagery-tile"===n.type&&n.hasStandardTime()&&null!=d[0]?d.map((function(e){return n.getStandardTimeValue(e)})).join(", "):d.join(", "),(p={ObjectId:0})["Raster.ServicePixelValue"]=y,m=n.rasterInfo.attributeTable,(0,h.r)(m)&&(g=m.fields,b=m.features,w=g.find((function(e){return"value"===e.name.toLowerCase()})),k=w?b.find((function(e){return String(e.attributes[w.name])===y})):null,k))for(_ in k.attributes)k.attributes.hasOwnProperty(_)&&(p[this._rasterFieldPrefix+_]=k.attributes[_]);"vector-magdir"!==(x=n.rasterInfo.dataType)&&"vector-uv"!==x||(p["Raster.Magnitude"]=null===f||void 0===f?void 0:f[0],p["Raster.Direction"]=null===f||void 0===f?void 0:f[1]),(R=new c.g(this.fullExtent.clone(),null,p)).layer=n,R.sourceLayer=R.layer,l.push(R)}return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()}]),i}(e);return(0,u.e)([(0,u.y)()],t.prototype,"layer",void 0),(0,u.e)([(0,u.y)(d.g)],t.prototype,"timeExtent",void 0),(0,u.e)([(0,u.y)()],t.prototype,"view",void 0),(0,u.e)([(0,u.y)()],t.prototype,"fullExtent",null),(0,u.e)([(0,u.y)()],t.prototype,"tileInfo",void 0),(0,u.e)([(0,u.y)({readOnly:!0})],t.prototype,"hasTilingEffects",null),t=(0,u.e)([(0,u.n)("esri.views.layers.ImageryTileLayerView")],t)}},3926:function(e,t,i){i.r(t);var r=i(1413),n=i(74165),a=i(15861),s=i(93433),l=i(29439),o=i(15671),u=i(43144),c=i(11752),h=i(61120),d=i(60136),f=i(29388),v=i(48848),y=i(64998),p=i(93661),m=i(50690),g=i(47546),b=i(14776),w=i(91502),k=i(25456),_=i(32043),x=i(6994),R=i(43066),Z=i(26789),P=i(1206),S=i(17327),T=(i(74384),i(630)),I=i(82474),C=i(44954),V=i(3356),D=i(72215),U=i(31532),z=i(97880),F=i(65703),M=(i(51732),i(50253)),L=i(46817),B=i(95415),E=i(3669),A=i(26313),q=i(24410),G=i(52195),N=i(35264),O=(i(25577),i(62610),i(93314),i(37856),i(15751),i(40114),i(59984),i(40558),i(20302),i(53586),i(65094),i(60369),i(92072),i(37944),i(86086),i(21385),i(89794),i(48200),i(71802),i(85253),i(93209),i(46337),i(81556),i(93116),i(56162),i(31698),i(93122),i(75833),i(27205),i(64095),i(68136),i(54233),i(18144),i(84234),i(18030),i(33795),i(79557),i(5650),i(35602),i(26151),i(91681),i(42467),i(46737),i(52113),i(75255),i(42667),i(61118),i(98598),i(43955),i(1500),i(47855),i(19941),i(39994),i(49871),i(63212),i(69717),i(53409),i(35182),i(62466),i(51816),i(65415),i(68781),i(69641),i(15436),i(35237),i(89181),i(69768),i(35865),i(51219),i(66577),i(95643),i(59389),i(43976),i(6762),i(2959),i(2821),i(33794),i(71147),i(84186),i(15529),i(70449),i(22603),i(56546),i(39926),i(8141),i(90429),i(52559),i(95399),i(98987),i(99795),i(87753),i(29130),i(82396),i(1685),i(12953),i(74797),i(45999),i(85113),i(72973),i(62710),i(52721),i(61903),i(23444),i(40811),i(51920),i(63393),i(90442),i(64854),i(24623),i(64264),i(6379),i(21015),i(23341),i(41820),i(20086),i(92982),i(61416),i(77880),i(74494),i(77755),i(71645),i(89311),i(67066),i(39769),i(70607),i(85700),i(3719),i(32161),i(37686),i(16641),i(62642),i(90316),i(19891),i(23585),i(47748),i(70522),i(17332),i(95249),i(17455),i(29048),i(13239),i(7131),i(1797),i(92739),i(74337),i(4679),i(62312),i(60491),i(87917),i(5430),i(53921),i(31303),function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(e,r,n,a,s,l){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return(0,o.Z)(this,i),(u=t.call(this,e,r,n,a,s,l)).bitmap=new x.p(c,null,null),u.bitmap.coordScale=[s,l],u.bitmap.once("isReady",(function(){return u.ready()})),u}return(0,u.Z)(i,[{key:"destroy",value:function(){(0,c.Z)((0,h.Z)(i.prototype),"destroy",this).call(this),this.bitmap.destroy(),this.bitmap=null,this.stage=null}},{key:"stencilRef",get:function(){return this.bitmap.stencilRef},set:function(e){this.bitmap.stencilRef=e}},{key:"setTransform",value:function(e){(0,c.Z)((0,h.Z)(i.prototype),"setTransform",this).call(this,e),this.bitmap.transforms.dvs=this.transforms.dvs}},{key:"_createTransforms",value:function(){return{dvs:(0,R.e)(),tileMat3:(0,R.e)()}}},{key:"onAttach",value:function(){this.bitmap.stage=this.stage}},{key:"onDetach",value:function(){this.bitmap.stage=null}}]),i}(Z.r)),j=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.apply(this,arguments)).isCustomTilingScheme=!1,e}return(0,u.Z)(i,[{key:"createTile",value:function(e){var t=this._getTileBounds(e),i=(0,l.Z)(this._tileInfoView.tileInfo.size,2),r=i[0],n=i[1],a=this._tileInfoView.getTileResolution(e.level);return new O(e,a,t[0],t[3],r,n)}},{key:"prepareRenderPasses",value:function(e){var t=this,r=e.registerRenderPass({name:"imagery (tile)",brushes:[x.b.raster],target:function(){return t.children.map((function(e){return e.bitmap}))},drawPhase:P.I.MAP});return[].concat((0,s.Z)((0,c.Z)((0,h.Z)(i.prototype),"prepareRenderPasses",this).call(this,e)),[r])}},{key:"doRender",value:function(e){this.visible&&e.drawPhase===P.I.MAP&&(0,c.Z)((0,h.Z)(i.prototype),"doRender",this).call(this,e)}},{key:"_getTileBounds",value:function(e){var t=this._tileInfoView.getTileBounds((0,k.u)(),e);if(this.isCustomTilingScheme&&e.world){var i=this._tileInfoView.tileInfo,r=(0,_.a2)(i.spatialReference);if(r){var n=i.lodAt(e.level).resolution,a=r/n%i.size[0],s=a?(i.size[0]-a)*n:0;t[0]-=s*e.world,t[2]-=s*e.world}}return t}}]),i}(S.i),W=[0,0],Q=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.apply(this,arguments))._emptyTilePixelBlock=null,e._tileStrategy=null,e._tileInfoView=null,e._fetchQueue=null,e._blockCacheRegistryUrl=null,e._blockCacheRegistryId=null,e._srcResolutions=null,e.previousLOD=null,e._needBlockCacheUpdate=!1,e._globalSymbolizerParams=null,e._symbolizerParams=null,e._abortController=null,e._isCustomTilingScheme=!1,e._globalUpdateRequested=!1,e.attached=!1,e.container=null,e.layer=null,e.timeExtent=null,e.redrawOrRefetch=(0,v.a1)((function(t,i){return!e.previousLOD||e.layerView.suspended?Promise.resolve():t?e.updatingHandles.addPromise(e.doRefresh()):e.updatingHandles.addPromise(e._redrawImage(i))})),e}return(0,u.Z)(i,[{key:"useWebGLForProcessing",get:function(){var e;return null===(e=this._get("useWebGLForProcessing"))||void 0===e||e},set:function(e){this._set("useWebGLForProcessing",e)}},{key:"useProgressiveUpdate",get:function(){return null==this._get("useProgressiveUpdate")||this._get("useProgressiveUpdate")},set:function(e){var t=this;if(this._tileStrategy&&this.useProgressiveUpdate!==e){this._tileStrategy.destroy(),this.container.removeAllChildren();var i=this._getCacheSize(e);this._tileStrategy=new z.r({cachePolicy:"purge",acquireTile:function(e){return t.acquireTile(e)},releaseTile:function(e){return t.releaseTile(e)},cacheSize:i,tileInfoView:this._tileInfoView}),this._set("useProgressiveUpdate",e),this.layerView.requestUpdate()}}},{key:"update",value:function(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();var t=e.state,i=t.extent,r=t.resolution,n=t.scale,a=this._tileInfoView.getClosestInfoForScale(n);if(this.layer.raster){var s;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){var l=this._srcResolutions[a.level],o=i.toJSON?i:L.w.fromJSON(i);(0,D.g)(this._blockCacheRegistryUrl,this._blockCacheRegistryId,o,r,l,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null===(s=this.previousLOD)||void 0===s?void 0:s.level)!==a.level&&(this.previousLOD=a,null==this._symbolizerParams||this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._tileStrategy.updateCacheSize(0))}}},{key:"moveEnd",value:function(){var e=this;!this.layerView.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=new AbortController,0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((function(){e._globalUpdateRequested=!1,e.layerView.requestUpdate()})));var t=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy.updateCacheSize(t),this.layerView.requestUpdate()}},{key:"updating",get:function(){var e;return(null===(e=this._fetchQueue)||void 0===e?void 0:e.updating)||this._globalUpdateRequested||!(!this.updatingHandles||!this.updatingHandles.updating)}},{key:"attach",value:function(){var e=this;(0,M.l)("2d").supportsTextureFloat||(this.useWebGLForProcessing=!1),this._initializeTileInfo(),this._tileInfoView=new F.h(this.layerView.tileInfo,this.layerView.fullExtent);var t=this._computeFetchConcurrency();this._fetchQueue=new z.y({tileInfoView:this._tileInfoView,concurrency:t,process:function(t,i){return e._fetchTile1(t,i)}});var i=this._getCacheSize(this.useProgressiveUpdate);this._tileStrategy=new z.r({cachePolicy:"purge",acquireTile:function(t){return e.acquireTile(t)},releaseTile:function(t){return e.releaseTile(t)},cacheSize:i,tileInfoView:this._tileInfoView}),this._updateBlockCacheRegistry()}},{key:"detach",value:function(){this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,(0,D.f)(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryUrl=this._blockCacheRegistryId=null}},{key:"acquireTile",value:function(e){var t=this.container.createTile(e);return this._enqueueTileFetch(t),this.layerView.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,t}},{key:"releaseTile",value:function(e){var t=this;this._fetchQueue.abort(e.key.id),this.container.removeChild(e),e.once("detach",(function(){e.destroy(),t.layerView.requestUpdate()})),this.layerView.requestUpdate()}},{key:"createEmptyTilePixelBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null==e||e.join(",")===this._tileInfoView.tileInfo.size.join(",");if(t&&(0,p.r)(this._emptyTilePixelBlock))return this._emptyTilePixelBlock;var i=e=e||this._tileInfoView.tileInfo.size,r=(0,l.Z)(i,2),n=r[0],a=r[1],s=new C.g({width:n,height:a,pixels:[new Uint8Array(n*a)],mask:new Uint8Array(n*a),pixelType:"u8"});return t&&(this._emptyTilePixelBlock=s),s}},{key:"_fetchTile1",value:function(e,t){var i=(0,p.r)(t)&&t.signal,r=this.canUseWebGLForProcessing(),n=this.layerView,a=!n.tileInfo.isWrappable&&(0,p.r)((0,U.U)(n.view.spatialReference)),s={allowPartialFill:!0,datumTransformation:n.datumTransformation,interpolation:r?"nearest":this.layer.interpolation,registryId:this._blockCacheRegistryId,requestRawData:r,signal:(0,p.e)(i),srcResolution:this._srcResolutions[e.level],timeExtent:n.timeExtent,tileInfo:n.tileInfo,disableWrapAround:a};return this.fetchTile(e,s)}},{key:"_getCacheSize",value:function(e){return e?40:0}},{key:"_initializeTileInfo",value:function(){var e=this.layerView.view.spatialReference,t=new I.w({x:this.layerView.fullExtent.xmin,y:this.layerView.fullExtent.ymax,spatialReference:e}),i=(0,U.i)(this.layer.rasterInfo,e),r=i.scales,n=i.srcResolutions,a=i.isCustomTilingScheme,s=V.j.create({spatialReference:e,size:512,scales:r});(0===s.origin.x||s.origin.x>t.x)&&(s.origin=t),this._isCustomTilingScheme=a,this.layerView.set("tileInfo",s),this._srcResolutions=null!==n&&void 0!==n?n:[]}},{key:"_computeFetchConcurrency",value:function(){var e=this.layer.rasterInfo.storageInfo.blockBoundary,t=e[e.length-1];return(t.maxCol-t.minCol+1)*(t.maxRow-t.minRow+1)>64?2:10}},{key:"_enqueueTileFetch",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updatingHandles.addPromise(this._enqueueTileFetch1(t,i));case 1:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_enqueueTileFetch1",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var r,a,s,l,o,u=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._fetchQueue.has(t.key.id)){e.next=30;break}return e.prev=1,e.next=4,this._fetchQueue.push(t.key);case 4:if(r=e.sent,a=this.layer.bandIds,s=!this.useProgressiveUpdate||this.layerView.hasTilingEffects&&!this._globalSymbolizerParams,!this._globalUpdateRequested||this.layerView.moving||0!==this._fetchQueue.length){e.next=18;break}return s=!1,e.prev=9,e.next=12,this._redrawImage(this._abortController&&this._abortController.signal);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),(0,v.j)(e.t0)&&v.a.getLogger(this.declaredClass).error(e.t0);case 17:this._globalUpdateRequested=!1;case 18:return!this.canUseWebGLForProcessing()&&"rasterVF"!==this.type||this.layerView.hasTilingEffects||null!=this._symbolizerParams||this._updateSymbolizerParams(),l=this._tileInfoView.getTileCoords(W,t.key),o=this._tileInfoView.getTileResolution(t.key),e.next=22,this.updateTileSource(t,{source:r,symbolizerParams:this._symbolizerParams,globalSymbolizerParams:this._globalSymbolizerParams,suspended:s,bandIds:a,coords:l,resolution:o});case 22:t.once("attach",(function(){return u.layerView.requestUpdate()})),this.container.addChild(t),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),(0,v.j)(e.t1)||v.a.getLogger(this.declaredClass).error(e.t1);case 29:this.layerView.requestUpdate();case 30:case"end":return e.stop()}}),e,this,[[1,26],[9,14]])})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_redrawImage",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,r=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.container.children.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.layer.updateRenderer();case 4:if(!this.layerView.hasTilingEffects){e.next=9;break}return e.next=7,this._updateGlobalSymbolizerParams(t);case 7:e.next=10;break;case 9:this._updateSymbolizerParams(),this._globalSymbolizerParams=null;case 10:return i=this.container.children.map(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.updateTileSymbolizerParameters(t,{local:r._symbolizerParams,global:r._globalSymbolizerParams}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=13,(0,v.E)(i);case 13:this.container.requestRender();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateGlobalSymbolizerParams",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={srcResolution:this._srcResolutions[this.previousLOD.level],registryId:this._blockCacheRegistryId,signal:t},e.next=3,this.layer.fetchPixels(this.layerView.view.extent,this.layerView.view.width,this.layerView.view.height,i);case 3:if((r=e.sent)&&r.pixelBlock){e.next=6;break}return e.abrupt("return");case 6:a=this.layer.symbolizer.generateWebGLParameters({pixelBlock:(0,C.s)(r.pixelBlock,this.layer.bandIds),isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds}),!this.canUseWebGLForProcessing()&&a&&"stretch"===a.type&&this.layer.renderer&&"raster-stretch"===this.layer.renderer.type&&(a.factor=a.factor.map((function(e){return 255*e})),a.outMin=Math.round(255*a.outMin),a.outMax=Math.round(255*a.outMax)),this._globalSymbolizerParams=a;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateSymbolizerParams",value:function(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.layerView.view.spatialReference.isGeographic,resolution:{x:this.previousLOD.resolution,y:this.previousLOD.resolution},bandIds:this.layer.bandIds})}},{key:"_updateBlockCacheRegistry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.layer,i=t.url,r=t.rasterInfo,n=t.raster,a=this.layer.normalizeRasterFetchOptions({multidimensionalDefinition:this.layer.multidimensionalDefinition,timeExtent:this.layerView.timeExtent}),s=a.multidimensionalDefinition,l=null!==r&&void 0!==r&&r.multidimensionalInfo?n.getSliceIndex(s):null,o=(0,D.a)(i,l);if(o!==this._blockCacheRegistryUrl){if(null!=this._blockCacheRegistryUrl&&(0,D.f)(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=(0,D.u)(o,this.layer.raster.rasterInfo),e){var u=this._tileInfoView.getClosestInfoForScale(this.layerView.view.scale),c=this._srcResolutions[u.level];(0,D.g)(o,this._blockCacheRegistryId,this.layerView.view.extent,this.layerView.view.resolution,c,this.layer.raster.ioConfig.sampling)}this._blockCacheRegistryUrl=o}}},{key:"doRefresh",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,i=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.attached){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.layer.updateRenderer();case 4:return this.layerView.hasTilingEffects||this._updateSymbolizerParams(),this._updateBlockCacheRegistry(!0),this._fetchQueue.reset(),t=[],this._globalUpdateRequested=this.layerView.hasTilingEffects||!this.useProgressiveUpdate,this._tileStrategy.tiles.forEach((function(e){return t.push(i._enqueueTileFetch(e))})),e.next=12,(0,v.E)(t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),i}(T.d);(0,v.e)([(0,v.y)()],Q.prototype,"_fetchQueue",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"_globalUpdateRequested",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"attached",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"container",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"layer",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"layerView",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"type",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"useWebGLForProcessing",null),(0,v.e)([(0,v.y)()],Q.prototype,"useProgressiveUpdate",null),(0,v.e)([(0,v.y)()],Q.prototype,"timeExtent",void 0),(0,v.e)([(0,v.y)()],Q.prototype,"updating",null);var Y=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.apply(this,arguments)).container=null,e.layer=null,e.type="raster",e}return(0,u.Z)(i,[{key:"attach",value:function(){(0,c.Z)((0,h.Z)(i.prototype),"attach",this).call(this),this.container=new j(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme}},{key:"detach",value:function(){(0,c.Z)((0,h.Z)(i.prototype),"detach",this).call(this),this.container.removeAllChildren(),this.container=null}},{key:"canUseWebGLForProcessing",value:function(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!("majority"===this.layer.interpolation&&(0,B.r)(this.layer))}},{key:"fetchTile",value:function(e,t){return this.layer.fetchTile(e.level,e.row,e.col,t)}},{key:"updateTileSource",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var r,a,s,o,u,c,h,d,f,v,y,m,g,b;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.layer.bandIds,s=this._getLayerInterpolation(),o=this.canUseWebGLForProcessing(),u=i.source,c=i.globalSymbolizerParams,h=i.suspended,d=i.coords,f=i.resolution,v=this.layerView.hasTilingEffects?c:i.symbolizerParams,y=t.bitmap,r=(0,l.Z)(d,2),y.x=r[0],y.y=r[1],y.resolution=f,!(u&&(0,p.r)(u)&&(0,p.r)(u.pixelBlock))){e.next=14;break}if(m={extent:u.extent,pixelBlock:u.pixelBlock},y.rawPixelData=m,!o){e.next=7;break}y.source=u.pixelBlock,y.isRendereredSource=!1,e.next=11;break;case 7:return e.next=9,this.layer.applyRenderer(m,"stretch"===(null===c||void 0===c?void 0:c.type)?c:null);case 9:g=e.sent,y.source=g,y.isRendereredSource=!0;case 11:y.symbolizerParameters=o?v:null,o?y.transformGrid||(y.transformGrid=u.transformGrid):y.transformGrid=null,e.next=16;break;case 14:b=this.createEmptyTilePixelBlock(),y.source=b,y.symbolizerParameters=o?v:null,y.transformGrid=null;case 16:y.bandIds=o?a:null,y.width=this._tileInfoView.tileInfo.size[0],y.height=this._tileInfoView.tileInfo.size[1],y.interpolation=s,y.suspended=h,y.invalidateTexture();case 17:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"updateTileSymbolizerParameters",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var r,a,s,l,o,u,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.local,a=i.global,s=this.layer.bandIds,l=this._getLayerInterpolation(),o=this.canUseWebGLForProcessing(),u=t.bitmap,c=u.rawPixelData,o||!(0,p.r)(c)){e.next=8;break}return e.next=4,this.layer.applyRenderer(c,"stretch"===(null===a||void 0===a?void 0:a.type)?a:null);case 4:u.source=e.sent,u.isRendereredSource=!0,e.next=9;break;case 8:u.isRendereredSource&&(0,p.r)(c)&&(u.source=c.pixelBlock),u.isRendereredSource=!1;case 9:u.symbolizerParameters=o?this.layerView.hasTilingEffects?a:r:null,u.bandIds=o?s:null,u.interpolation=l,u.suspended=!1;case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getLayerInterpolation",value:function(){var e=this.layer.renderer.type;if("raster-colormap"===e||"unique-value"===e||"class-breaks"===e)return"nearest";var t=this.layer.interpolation,i=this.layer.renderer;return"raster-stretch"===i.type&&null!=i.colorRamp?"bilinear"===t||"cubic"===t?"bilinear":"nearest":t}}]),i}(Q=(0,v.e)([(0,v.n)("esri.views.2d.layers.imagery.BaseImageryTileSubView2D")],Q));(0,v.e)([(0,v.y)()],Y.prototype,"container",void 0),(0,v.e)([(0,v.y)()],Y.prototype,"layer",void 0),(0,v.e)([(0,v.y)()],Y.prototype,"type",void 0);var H=Y=(0,v.e)([(0,v.n)("esri.views.2d.layers.imagery.ImageryTileView2D")],Y),J=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(e,r,n,a,s,l){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return(0,o.Z)(this,i),(u=t.call(this,e,r,n,a,s,l)).tileData=new b.y(c),u.tileData.coordScale=[s,l],u.tileData.once("isReady",(function(){return u.ready()})),u}return(0,u.Z)(i,[{key:"destroy",value:function(){(0,c.Z)((0,h.Z)(i.prototype),"destroy",this).call(this),this.tileData.destroy(),this.tileData=null,this.stage=null}},{key:"stencilRef",get:function(){return this.tileData.stencilRef},set:function(e){this.tileData.stencilRef=e}},{key:"_createTransforms",value:function(){return{dvs:(0,R.e)(),tileMat3:(0,R.e)()}}},{key:"setTransform",value:function(e){(0,c.Z)((0,h.Z)(i.prototype),"setTransform",this).call(this,e);var t=this.resolution/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,n=(0,l.Z)(this.tileData.offset,2),a=n[0],s=n[1],o=[this.x+a*this.resolution,this.y-s*this.resolution],u=e.toScreenNoRotation([0,0],o),d=(0,l.Z)(u,2),f=d[0],v=d[1],y=this.tileData.symbolizerParameters.symbolTileSize,p=Math.round((this.width-this.tileData.offset[0])/y)*y,m=Math.round((this.height-this.tileData.offset[1])/y)*y,g=p/this.rangeX*t,b=m/this.rangeY*t;(0,A.s)(r,g,0,0,0,b,0,f,v,1),(0,A.i)(this.transforms.dvs,e.displayViewMat3,r),this.tileData.transforms.dvs=this.transforms.dvs}},{key:"onAttach",value:function(){this.tileData.stage=this.stage}},{key:"onDetach",value:function(){this.tileData.stage=null}}]),i}(Z.r),X=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.apply(this,arguments)).isCustomTilingScheme=!1,e.symbolTypes=["triangle"],e}return(0,u.Z)(i,[{key:"createTile",value:function(e){var t=this._tileInfoView.getTileBounds((0,k.u)(),e),i=(0,l.Z)(this._tileInfoView.tileInfo.size,2),r=i[0],n=i[1],a=this._tileInfoView.getTileResolution(e.level);return new J(e,a,t[0],t[3],r,n)}},{key:"prepareRenderPasses",value:function(e){var t=this,r=e.registerRenderPass({name:"imagery (vf tile)",brushes:[x.d],target:function(){return t.children.map((function(e){return e.tileData}))},drawPhase:P.I.MAP});return[].concat((0,s.Z)((0,c.Z)((0,h.Z)(i.prototype),"prepareRenderPasses",this).call(this,e)),[r])}},{key:"doRender",value:function(e){var t=this;this.visible&&e.drawPhase===P.I.MAP&&this.symbolTypes.forEach((function(r){e.renderPass=r,(0,c.Z)((0,h.Z)(i.prototype),"doRender",t).call(t,e)}))}}]),i}(S.i),K=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.apply(this,arguments))._handle=null,e.container=null,e.layer=null,e.type="rasterVF",e}return(0,u.Z)(i,[{key:"canUseWebGLForProcessing",value:function(){return!1}},{key:"fetchTile",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,r.Z)((0,r.Z)({},i),{},{interpolation:"nearest",requestProjectedLocalDirections:!0}),e.next=3,this.layer.fetchTile(t.level,t.row,t.col,i);case 3:if(a=e.sent,e.t0="vector-magdir"===this.layer.rasterInfo.dataType&&null!==a&&void 0!==a&&a.pixelBlock,!e.t0){e.next=9;break}return e.next=8,this.layer.convertVectorFieldData(a.pixelBlock,i);case 8:a.pixelBlock=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"updateTileSource",value:function(e,t){var i=t.symbolizerParams,r=e.tileData;r.key=e.key,r.width=this._tileInfoView.tileInfo.size[0],r.height=this._tileInfoView.tileInfo.size[1];var n=i.symbolTileSize,a=t.source;if(r.offset=this._getTileSymbolOffset(r.key,n),(0,p.r)(a)&&(0,p.r)(a.pixelBlock)){var s={extent:a.extent,pixelBlock:a.pixelBlock};r.rawPixelData=s,r.symbolizerParameters=i,r.source=this._sampleVectorFieldData(a.pixelBlock,i,r.offset)}else{var l=[Math.round((this._tileInfoView.tileInfo[0]-r.offset[0])/n),Math.round((this._tileInfoView.tileInfo[1]-r.offset[1])/n)],o=this.createEmptyTilePixelBlock(l);r.source=o,r.symbolizerParameters=i}return r.invalidateVAO(),Promise.resolve(null)}},{key:"updateTileSymbolizerParameters",value:function(e,t){var i,r=t.local,n=r.symbolTileSize,a=e.tileData;a.offset=this._getTileSymbolOffset(a.key,n);var s=a.symbolizerParameters.symbolTileSize;return a.symbolizerParameters=r,(0,p.r)(null===(i=a.rawPixelData)||void 0===i?void 0:i.pixelBlock)&&s!==n&&(a.source=this._sampleVectorFieldData(a.rawPixelData.pixelBlock,a.symbolizerParameters,a.offset)),Promise.resolve(null)}},{key:"attach",value:function(){var e=this;(0,c.Z)((0,h.Z)(i.prototype),"attach",this).call(this),this.container=new X(this._tileInfoView),this.container.isCustomTilingScheme=this._isCustomTilingScheme,this._updateSymbolType(this.layer.renderer),this._handle=(0,m.l)((function(){return e.layer.renderer}),(function(t){return e._updateSymbolType(t)}))}},{key:"detach",value:function(){(0,c.Z)((0,h.Z)(i.prototype),"detach",this).call(this),this.container.removeAllChildren(),this._handle.remove(),this._handle=null}},{key:"_getTileSymbolOffset",value:function(e,t){var i=e.col*this._tileInfoView.tileInfo.size[0]%t,r=e.row*this._tileInfoView.tileInfo.size[1]%t;return[i>t/2?t-i:-i,r>t/2?t-r:-r]}},{key:"_sampleVectorFieldData",value:function(e,t,i){var r=t.symbolTileSize;return(0,E.j)(e,"vector-uv",r,i)}},{key:"_updateSymbolType",value:function(e){"vector-field"===e.type&&(this.container.symbolTypes="wind-barb"===e.style?["scalar","triangle"]:"simple-scalar"===e.style?["scalar"]:["triangle"])}}]),i}(Q);(0,v.e)([(0,v.y)()],K.prototype,"container",void 0),(0,v.e)([(0,v.y)()],K.prototype,"layer",void 0),(0,v.e)([(0,v.y)()],K.prototype,"type",void 0);var $=K=(0,v.e)([(0,v.n)("esri.views.2d.layers.imagery.VectorFieldTileView2D")],K),ee=function(e){(0,d.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.apply(this,arguments))._useWebGLForProcessing=!0,e._useProgressiveUpdate=!0,e.subview=null,e}return(0,u.Z)(i,[{key:"useWebGLForProcessing",get:function(){return this._useWebGLForProcessing},set:function(e){this._useWebGLForProcessing=e,this.subview&&"useWebGLForProcessing"in this.subview&&(this.subview.useWebGLForProcessing=e)}},{key:"useProgressiveUpdate",get:function(){return this._useWebGLForProcessing},set:function(e){this._useProgressiveUpdate=e,this.subview&&"useProgressiveUpdate"in this.subview&&(this.subview.useProgressiveUpdate=e)}},{key:"update",value:function(e){this.subview.update(e),this.notifyChange("updating")}},{key:"isUpdating",value:function(){return!this.subview||this.subview.updating}},{key:"attach",value:function(){var e=this;this.layer.increaseRasterJobHandlerUsage(),this._updateSubview(),this.handles.add([(0,m.l)((function(){var t=e.layer;return{bandIds:t.bandIds,renderer:t.renderer,interpolation:t.interpolation,multidimensionalDefinition:t.multidimensionalDefinition,rasterFunction:"imagery-tile"===t.type?t.rasterFunction:null}}),(function(t,i){var r,n,a=t.interpolation!==i.interpolation&&("majority"===t.interpolation||"majority"===i.interpolation)&&(0,B.r)(e.layer),s=t.renderer!==i.renderer&&(null===(r=i.renderer)||void 0===r?void 0:r.type)!==(null===(n=t.renderer)||void 0===n?void 0:n.type);s&&e._updateSubview();var l=t.multidimensionalDefinition!==i.multidimensionalDefinition,o=t.rasterFunction!==i.rasterFunction,u=l||a||s||o;e.subview.redrawOrRefetch(u).catch((function(t){(0,v.j)(t)||v.a.getLogger(e.declaredClass).error(t)})),e.notifyChange("updating")})),(0,m.l)((function(){var t;return null!==(t=e.layer.blendMode)&&void 0!==t?t:"normal"}),(function(t){e.subview.container.blendMode=t}),m.w),(0,m.l)((function(){var t;return null!==(t=e.layer.effect)&&void 0!==t?t:null}),(function(t){e.subview.container.effect=t}),m.w),(0,m.l)((function(){var t;return null!==(t=e.layer.multidimensionalSubset)&&void 0!==t?t:null}),(function(t,i){var r=e.layer.multidimensionalDefinition;(0,p.r)(r)&&(0,g.m)(r,t)!==(0,g.m)(r,i)&&(e.subview.redrawOrRefetch(!0).catch((function(t){(0,v.j)(t)||v.a.getLogger(e.declaredClass).error(t)})),e.notifyChange("updating"))}),m.U),(0,m.l)((function(){return e.timeExtent}),(function(){e.subview.timeExtent=e.timeExtent,e.subview.redrawOrRefetch(!0).catch((function(t){(0,v.j)(t)||v.a.getLogger(e.declaredClass).error(t)}))}),m.h)],"attach")}},{key:"detach",value:function(){var e;this.handles.remove("attach"),this.layer.decreaseRasterJobHandlerUsage(),this._detachSubview(this.subview),null!==(e=this.subview)&&void 0!==e&&e.destroy(),this.subview=null}},{key:"moveStart",value:function(){this.requestUpdate()}},{key:"viewChange",value:function(){this.requestUpdate()}},{key:"moveEnd",value:function(){this.subview.moveEnd()}},{key:"hitTest",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{type:"graphic",layer:this.layer,mapPoint:t,graphic:new y.g({attributes:{},geometry:t.clone()})}]);case 1:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"doRefresh",value:function(){var e;return null===(e=this.subview)||void 0===e?void 0:e.doRefresh()}},{key:"_updateSubview",value:function(){var e="vector-field"===this.layer.renderer.type?"rasterVF":"flow"===this.layer.renderer.type?"flow":"raster";if(this.subview){var t;if(this.subview.type===e)return void this._attachSubview(this.subview);this._detachSubview(this.subview),null!==(t=this.subview)&&void 0!==t&&t.destroy(),this.subview=null}var i,r=this.layer;"useWebGLForProcessing"in(i="rasterVF"===e?new $({layer:r,layerView:this}):"flow"===e?new b.d({layer:r,layerView:this}):new H({layer:r,layerView:this}))&&(i.useWebGLForProcessing=this._useWebGLForProcessing),"useProgressiveUpdate"in i&&(i.useProgressiveUpdate=this._useProgressiveUpdate),"previousLOD"in i&&(i.previousLOD=this.subview&&"previousLOD"in this.subview&&this.subview.previousLOD),this._attachSubview(i),this.subview=i,this.requestUpdate()}},{key:"_attachSubview",value:function(e){e&&!e.attached&&(e.attach(),e.attached=!0,this.container.addChildAt(e.container,0),e.container.blendMode=this.layer.blendMode,e.container.effect=this.layer.effect)}},{key:"_detachSubview",value:function(e){(null===e||void 0===e?void 0:e.attached)&&(this.container.removeChild(e.container),e.detach(),e.attached=!1)}}]),i}((0,q.f)((0,N.i)((0,w.y)(G.u))));(0,v.e)([(0,v.y)()],ee.prototype,"subview",void 0),(0,v.e)([(0,v.y)()],ee.prototype,"useWebGLForProcessing",null),(0,v.e)([(0,v.y)()],ee.prototype,"useProgressiveUpdate",null);var te=ee=(0,v.e)([(0,v.n)("esri.views.2d.layers.ImageryTileLayerView2D")],ee);t.default=te},52195:function(e,t,i){i.d(t,{u:function(){return v}});var r=i(15671),n=i(43144),a=i(60136),s=i(29388),l=i(48848),o=i(37856),u=i(630),c=i(92072),h=i(93661),d=i(65094),f=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).layer=null,n.parent=null,n}return(0,n.Z)(i,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";l.a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(r,"', id: '").concat(i,"')"),t)}}))}},{key:"fullOpacity",get:function(){return(0,h.v)(this.get("layer.opacity"),1)*(0,h.v)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"canResume",value:function(){var e,t,i;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(i=this.view)||void 0===i?void 0:i.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),i}((0,u.a)((0,c.s)((0,d.m)(o.n.EventedMixin(l.m)))));(0,l.e)([(0,l.y)()],f.prototype,"fullOpacity",null),(0,l.e)([(0,l.y)()],f.prototype,"layer",void 0),(0,l.e)([(0,l.y)()],f.prototype,"parent",void 0),(0,l.e)([(0,l.y)({readOnly:!0})],f.prototype,"suspended",null),(0,l.e)([(0,l.y)({readOnly:!0})],f.prototype,"suspendInfo",null),(0,l.e)([(0,l.y)({readOnly:!0})],f.prototype,"legendEnabled",null),(0,l.e)([(0,l.y)({type:Boolean,readOnly:!0})],f.prototype,"updating",null),(0,l.e)([(0,l.y)({readOnly:!0})],f.prototype,"updatingProgress",null),(0,l.e)([(0,l.y)()],f.prototype,"visible",null),(0,l.e)([(0,l.y)()],f.prototype,"view",void 0);var v=f=(0,l.e)([(0,l.n)("esri.views.layers.LayerView")],f)},91502:function(e,t,i){i.d(t,{y:function(){return V}});var r=i(11752),n=i(61120),a=i(15671),s=i(43144),l=i(60136),o=i(29388),u=i(48848),c=i(93314),h=i(81556),d=i(50690),f=(i(93661),i(84234)),v=i(40114),y=i(74384),p=i(82474),m=i(56162),g=i(46817),b=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,s.Z)(i,[{key:"version",get:function(){return this.commitVersionProperties(),(this._get("version")||0)+1}}]),i}(v.l);(0,u.e)([(0,u.y)({readOnly:!0})],b.prototype,"version",null);var w,k=b=(0,u.e)([(0,u.n)("esri.views.layers.support.ClipArea")],b),_=w=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var r;return(0,a.Z)(this,i),(r=t.call(this,e)).type="rect",r.left=null,r.right=null,r.top=null,r.bottom=null,r}return(0,s.Z)(i,[{key:"clone",value:function(){return new w({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}},{key:"commitVersionProperties",value:function(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}}]),i}(k);(0,u.e)([(0,u.y)({type:[Number,String],json:{write:!0}})],_.prototype,"left",void 0),(0,u.e)([(0,u.y)({type:[Number,String],json:{write:!0}})],_.prototype,"right",void 0),(0,u.e)([(0,u.y)({type:[Number,String],json:{write:!0}})],_.prototype,"top",void 0),(0,u.e)([(0,u.y)({type:[Number,String],json:{write:!0}})],_.prototype,"bottom",void 0);var x,R=_=w=(0,u.e)([(0,u.n)("esri.views.layers.support.ClipRect")],_),Z={base:p.p,key:"type",typeMap:{extent:g.w,polygon:y.v}},P=x=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var r;return(0,a.Z)(this,i),(r=t.call(this,e)).type="geometry",r.geometry=null,r}return(0,s.Z)(i,[{key:"clone",value:function(){var e,t;return new x({geometry:null!==(e=null===(t=this.geometry)||void 0===t?void 0:t.clone())&&void 0!==e?e:null})}},{key:"commitVersionProperties",value:function(){this.commitProperty("geometry")}}]),i}(k);(0,u.e)([(0,u.y)({types:Z,json:{read:m.v,write:!0}})],P.prototype,"geometry",void 0);var S=P=x=(0,u.e)([(0,u.n)("esri.views.layers.support.Geometry")],P),T=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var r;return(0,a.Z)(this,i),(r=t.call(this,e)).type="path",r.path=[],r}return(0,s.Z)(i,[{key:"commitVersionProperties",value:function(){this.commitProperty("path")}}]),i}(k);(0,u.e)([(0,u.y)({type:[[[Number]]],json:{write:!0}})],T.prototype,"path",void 0);var I=T=(0,u.e)([(0,u.n)("esri.views.layers.support.Path")],T),C=c.j.ofType({key:"type",base:null,typeMap:{rect:R,path:I,geometry:S}}),V=function(e){var t=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).attached=!1,e.clips=new C,e.lastUpdateId=-1,e.moving=!1,e.updateRequested=!1,e.visibleAtCurrentScale=!1,e}return(0,s.Z)(i,[{key:"initialize",value:function(){var e,t,i,r,n=this,a=null===(e=null===(t=this.view)||void 0===t?void 0:t.spatialReferenceLocked)||void 0===e||e;(null===(i=this.view)||void 0===i?void 0:i.spatialReference)&&a&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new u.s("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new f.i),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.handles.add([(0,d.l)((function(){return n.suspended}),(function(e){n.container&&(n.container.visible=!e),n.view&&!e&&n.updateRequested&&n.view.requestUpdate()}),d.w),(0,d.l)((function(){var e,t;return null!==(e=null===(t=n.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1}),(function(e){n.container&&(n.container.opacity=e)}),d.w),(0,d.l)((function(){return n.layer&&"blendMode"in n.layer?n.layer.blendMode:"normal"}),(function(e){n.container&&(n.container.blendMode=e)}),d.w),(0,d.l)((function(){return n.layer&&"effect"in n.layer?n.layer.effect:null}),(function(e){n.container&&(n.container.effect=e)}),d.w),(0,d.a)((function(){return n.clips}),"change",(function(){n.container&&(n.container.clips=n.clips)}),d.w),(0,d.l)((function(){var e;return{scale:null===(e=n.view)||void 0===e?void 0:e.scale,scaleRange:n.layer&&"effectiveScaleRange"in n.layer?n.layer.effectiveScaleRange:null}}),(function(e){var t=e.scale,i=t&&n.isVisibleAtScale(t);i!==n.visibleAtCurrentScale&&n._set("visibleAtCurrentScale",i)}),d.w)]),null!==(r=this.view)&&void 0!==r&&r.whenLayerView?this.view.whenLayerView(this.layer).then((function(e){e===n&&n.processAttach()}),(function(){})):this.when().then((function(){n.processAttach()}),(function(){})))}},{key:"destroy",value:function(){this.processDetach(),this.updateRequested=!1}},{key:"spatialReferenceSupported",get:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.spatialReference;return null==t||this.supportsSpatialReference(t)}},{key:"updating",get:function(){var e;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null===(e=this.updatingHandles)||void 0===e||!e.updating))}},{key:"processAttach",value:function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}},{key:"processDetach",value:function(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)}},{key:"isVisibleAtScale",value:function(e){var t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;var i=t.minScale,r=t.maxScale;return(0===i||e<=i)&&(0===r||e>=r)}},{key:"requestUpdate",value:function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}},{key:"processUpdate",value:function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}},{key:"hitTest",value:function(e,t){return Promise.resolve(null)}},{key:"supportsSpatialReference",value:function(e){return!0}},{key:"canResume",value:function(){return!!this.spatialReferenceSupported&&!!(0,r.Z)((0,n.Z)(i.prototype),"canResume",this).call(this)&&this.visibleAtCurrentScale}},{key:"getSuspendInfo",value:function(){var e=(0,r.Z)((0,n.Z)(i.prototype),"getSuspendInfo",this).call(this),t=!this.spatialReferenceSupported,a=this.visibleAtCurrentScale;return t&&(e.spatialReferenceNotSupported=t),a&&(e.outsideScaleRange=a),e}}]),i}(e);return(0,u.e)([(0,u.y)()],t.prototype,"attached",void 0),(0,u.e)([(0,u.y)({type:C,set:function(e){var t=(0,h.n)(e,this._get("clips"),C);this._set("clips",t)}})],t.prototype,"clips",void 0),(0,u.e)([(0,u.y)()],t.prototype,"container",void 0),(0,u.e)([(0,u.y)()],t.prototype,"moving",void 0),(0,u.e)([(0,u.y)({readOnly:!0})],t.prototype,"spatialReferenceSupported",null),(0,u.e)([(0,u.y)({readOnly:!0})],t.prototype,"updateParameters",void 0),(0,u.e)([(0,u.y)()],t.prototype,"updateRequested",void 0),(0,u.e)([(0,u.y)()],t.prototype,"updating",null),(0,u.e)([(0,u.y)()],t.prototype,"view",void 0),(0,u.e)([(0,u.y)({readOnly:!0})],t.prototype,"visibleAtCurrentScale",void 0),t=(0,u.e)([(0,u.n)("esri.views.2d.layers.LayerView2D")],t)}},72215:function(e,t,i){i.d(t,{a:function(){return h},d:function(){return m},f:function(){return f},g:function(){return b},h:function(){return p},m:function(){return v},u:function(){return d},x:function(){return y}});var r=i(15671),n=i(43144),a=(i(74384),i(93661)),s=i(31532),l=i(82474),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;(0,r.Z)(this,e),this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,i)}return(0,n.Z)(e,[{key:"decreaseRefCount",value:function(e,t){var i=e+"/"+t,r=this._cachedBlocks;if(r.has(i)){var n=r.get(i);return n.refCount--,n.refCount<=0&&(r.delete(i),n.controller&&n.controller.abort()),n.refCount}return 0}},{key:"getBlock",value:function(e,t){var i=e+"/"+t,r=this._cachedBlocks;if(r.has(i)){var n=r.get(i);return n.ts=Date.now(),n.refCount++,r.delete(i),r.set(i,n),n.block}return null}},{key:"putBlock",value:function(e,t,i,r){var n=this._cachedBlocks,a=e+"/"+t;if(n.has(a)){var s=n.get(a);s.ts=Date.now(),s.refCount++}else n.set(a,{block:i,ts:Date.now(),refCount:1,controller:r});this._trim(),this._updateTimer()}},{key:"deleteBlock",value:function(e,t){var i=this._cachedBlocks,r=e+"/"+t;i.has(r)&&i.delete(r)}},{key:"updateMaxSize",value:function(e){this._size=e,this._trim()}},{key:"empty",value:function(){this._cachedBlocks.clear(),this._clearTimer()}},{key:"getCurrentSize",value:function(){return this._cachedBlocks.size}},{key:"_updateTimer",value:function(){var e=this;if(null==this._timer){var t=this._cachedBlocks;this._timer=setInterval((function(){for(var i=Array.from(t),r=Date.now(),n=0;n<i.length&&i[n][1].ts<=r-e._duration;n++)t.delete(i[n][0]);0===t.size&&e._clearTimer()}),this._interval)}}},{key:"_trim",value:function(){var e=this._cachedBlocks;if(!(-1===this._size||this._size>=e.size))for(var t=Array.from(e),i=0;i<t.length-this._size;i++)e.delete(t[i][0])}},{key:"_clearTimer",value:function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}}]),e}(),u=new Map,c=new o;function h(e,t){return null==t?e:"".concat(e,"?sliceId=").concat(t)}function d(e,t){var i={extent:null,rasterInfo:t,cache:new Map},r=u.get(e);return r?(r.push(i),r.length-1):(u.set(e,[i]),0)}function f(e,t){var i=u.get(e);i&&(i[t]=null,i.some((function(e){return null!=e}))||u.delete(e))}function v(e,t,i){var r,n=u.get(e);if(!n)return null==t?c.decreaseRefCount(e,i):0;if(null==t||null==n[t])return c.decreaseRefCount(e,i);var a=null===(r=n[t])||void 0===r?void 0:r.cache,s=null===a||void 0===a?void 0:a.get(i);if(a&&s){if(s.refCount--,0===s.refCount){a.delete(i);for(var l=0;l<n.length;l++){var o;null===(o=n[l])||void 0===o||o.cache.delete(i)}s.controller&&s.controller.abort()}return s.refCount}return 0}function y(e,t,i){var r,n=u.get(e);if(!n)return null==t?c.getBlock(e,i):null;if(null==t||null==n[t]){for(var a=0;a<n.length;a++){var s,l=null===(s=n[a])||void 0===s?void 0:s.cache.get(i);if(l)return l.refCount++,l.block}return c.getBlock(e,i)}var o=null===(r=n[t])||void 0===r?void 0:r.cache.get(i);if(o)return o.refCount++,o.block;for(var h=0;h<n.length;h++){var d;if(h!==t&&n[h]){var f=null===(d=n[h])||void 0===d?void 0:d.cache,v=null===f||void 0===f?void 0:f.get(i);if(f&&v)return v.refCount++,f.set(i,v),v.block}}return null}function p(e,t,i,r){var n,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=u.get(e);if(s)if(null!=t&&null!=s[t]){var l={refCount:1,block:r,isResolved:!1,isRejected:!1,controller:a};r.then((function(){return l.isResolved=!0})).catch((function(){return l.isRejected=!0})),null===(n=s[t])||void 0===n||n.cache.set(i,l)}else c.putBlock(e,i,r,a);else null==t&&c.putBlock(e,i,r,a)}function m(e,t,i){var r,n=u.get(e);n?null!=t&&null!=n[t]?null===(r=n[t])||void 0===r||r.cache.delete(i):c.deleteBlock(e,i):null==t&&c.deleteBlock(e,i)}function g(e,t){var i,r=u.get(e);return r&&null!==(i=r[t])&&void 0!==i?i:null}function b(e,t,i,r,n,o){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=g(e,t);if(h){var d=h.extent,f=h.cache,v=h.rasterInfo;if(!d||d.xmin!==i.xmin||d.xmax!==i.xmax||d.ymin!==i.ymin||d.ymax!==i.ymax){r=null!==(u=r)&&void 0!==u?u:0;for(var y=i.clone().normalize(),p=v.spatialReference,m=v.transform,b=new Set,w=0;w<y.length;w++){var k=y[w];if(!(k.xmax-k.xmin<=r||k.ymax-k.ymin<=r)){var _=(0,s.J)(k,p,c);(0,a.r)(m)&&(_=m.inverseTransform(_));var x=new l.w({x:r,y:r,spatialReference:k.spatialReference});if(null==n&&!(n=(0,s.C)(x,p,k,c)))return;var R=(0,s.o)(n,v,o||"closest"),Z=R.pyramidLevel,P=R.pyramidResolution,S=R.excessiveReading;if(S)return;for(var T=v.storageInfo,I=T.origin,C={x:Math.max(0,Math.floor((_.xmin-I.x)/P.x)),y:Math.max(0,Math.floor((I.y-_.ymax)/P.y))},V=Math.ceil((_.xmax-_.xmin)/P.x-.1),D=Math.ceil((_.ymax-_.ymin)/P.y-.1),U=Z>0?T.pyramidBlockWidth:T.blockWidth,z=Z>0?T.pyramidBlockHeight:T.blockHeight,F=1,M=Math.max(0,Math.floor(C.x/U)-F),L=Math.max(0,Math.floor(C.y/z)-F),B=Math.floor((C.x+V-1)/U)+F,E=Math.floor((C.y+D-1)/z)+F,A=L;A<=E;A++)for(var q=M;q<=B;q++)b.add("".concat(Z,"/").concat(A,"/").concat(q))}}f.forEach((function(e,t){if(!b.has(t)){var i=f.get(t);(null==i||i.isResolved||i.isRejected)&&f.delete(t)}})),h.extent={xmin:i.xmin,ymin:i.ymin,xmax:i.xmax,ymax:i.ymax}}}}},17327:function(e,t,i){i.d(t,{i:function(){return v}});var r=i(37762),n=i(15671),a=i(43144),s=i(11752),l=i(61120),o=i(60136),u=i(29388),c=i(93661),h=i(1206),d=i(6994),f=function(e,t){return e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col},v=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this))._tileInfoView=e,r}return(0,a.Z)(i,[{key:"requiresDedicatedFBO",get:function(){return!1}},{key:"renderChildren",value:function(e){this.sortChildren(f),this.setStencilReference(e),(0,s.Z)((0,l.Z)(i.prototype),"renderChildren",this).call(this,e)}},{key:"createRenderParams",value:function(e){var t=e.state,r=(0,s.Z)((0,l.Z)(i.prototype),"createRenderParams",this).call(this,e);return r.requiredLevel=this._tileInfoView.getClosestInfoForScale(t.scale).level,r.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(t.scale),r}},{key:"prepareRenderPasses",value:function(e){var t=this,r=(0,s.Z)((0,l.Z)(i.prototype),"prepareRenderPasses",this).call(this,e);return r.push(e.registerRenderPass({name:"stencil",brushes:[d.h],drawPhase:h.I.DEBUG|h.I.MAP|h.I.HIGHLIGHT,target:function(){return t.getStencilTarget()}})),(0,c.h)("esri-tiles-debug")&&r.push(e.registerRenderPass({name:"tileInfo",brushes:[d.x],drawPhase:h.I.DEBUG,target:function(){return t.children}})),r}},{key:"getStencilTarget",value:function(){return this.children}},{key:"setStencilReference",value:function(e){var t,i=1,n=(0,r.Z)(this.children);try{for(n.s();!(t=n.n()).done;){t.value.stencilRef=i++}}catch(a){n.e(a)}finally{n.f()}}}]),i}(d.o)},26789:function(e,t,i){i.d(t,{r:function(){return h}});var r=i(29439),n=i(15671),a=i(43144),s=i(60136),l=i(29388),o=i(26313),u=i(64095),c=i(51732),h=function(e){(0,s.Z)(i,e);var t=(0,l.Z)(i);function i(e,r,a,s,l,o){var u,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o;return(0,n.Z)(this,i),(u=t.call(this)).triangleCountReportedInDebug=0,u.triangleCount=0,u.texture=null,u.key=new c.e(e),u.resolution=r,u.x=a,u.y=s,u.width=l,u.height=o,u.rangeX=h,u.rangeY=d,u}return(0,a.Z)(i,[{key:"destroy",value:function(){this.texture&&(this.texture.dispose(),this.texture=null)}},{key:"setTransform",value:function(e){var t=this.resolution/(e.resolution*e.pixelRatio),i=this.transforms.tileMat3,n=e.toScreenNoRotation([0,0],[this.x,this.y]),a=(0,r.Z)(n,2),s=a[0],l=a[1],u=this.width/this.rangeX*t,c=this.height/this.rangeY*t;(0,o.s)(i,u,0,0,0,c,0,s,l,1),(0,o.i)(this.transforms.dvs,e.displayViewMat3,i)}}]),i}(u.r)},47546:function(e,t,i){i.d(t,{c:function(){return _},d:function(){return R},f:function(){return x},g:function(){return P},i:function(){return p},m:function(){return k},p:function(){return v},s:function(){return m}});var r,n=i(1413),a=i(93433),s=i(15671),l=i(43144),o=i(60136),u=i(29388),c=i(93661),h=i(48848),d=i(40114),f=r=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(e){var r;return(0,s.Z)(this,i),(r=t.call(this,e)).variableName=null,r.dimensionName=null,r.values=[],r.isSlice=!1,r}return(0,l.Z)(i,[{key:"clone",value:function(){return new r({variableName:this.variableName,dimensionName:this.dimensionName,values:(0,c.y)(this.values),isSlice:this.isSlice})}}]),i}(d.l);(0,h.e)([(0,h.y)({type:String,json:{write:!0}})],f.prototype,"variableName",void 0),(0,h.e)([(0,h.y)({type:String,json:{write:!0}})],f.prototype,"dimensionName",void 0),(0,h.e)([(0,h.y)({type:h.aA.array(h.aA.oneOf([h.aA.native(Number),h.aA.array(h.aA.native(Number))])),json:{write:!0}})],f.prototype,"values",void 0),(0,h.e)([(0,h.y)({type:Boolean,json:{write:!0}})],f.prototype,"isSlice",void 0);var v=f=r=(0,h.e)([(0,h.n)("esri.layers.support.DimensionalDefinition")],f);function y(e,t,i){var r=t.shift();if(0===i.length){i.push({sliceId:-1,multidimensionalDefinition:[]})}for(var n=i.length,s=function(t){var n,s=i.shift().multidimensionalDefinition;null===(n=r.values)||void 0===n||n.forEach((function(t){i.push({sliceId:-1,multidimensionalDefinition:[].concat((0,a.Z)(s),[{variableName:e,dimensionName:r.name,values:[t]}])})}))},l=0;l<n;l++)s();t.length&&y(e,t,i)}function p(e,t){var i=[],r=0;return(t?e.variables.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()})):(0,a.Z)(e.variables).sort((function(e,t){return e.name>t.name?1:-1}))).forEach((function(e){var t=[],s=(0,a.Z)(e.dimensions).sort((function(e,t){return e.name>t.name?-1:1}));y(e.name,s,t),t.forEach((function(e){i.push((0,n.Z)((0,n.Z)({},e),{},{sliceId:r++}))}))})),i}function m(e,t,i){var r=e;if(t&&(t=(0,a.Z)(t).sort((function(e,t){return e.dimensionName<t.dimensionName?-1:1}))).forEach((function(e){var t=e.dimensionName,i=e.values,n=e.isSlice;i.length&&(r=r.filter((function(e){var r=e.multidimensionalDefinition.find((function(e){return e.dimensionName===t}));if(null==r)return!1;var a=r.values[0];return"number"==typeof a?"number"==typeof i[0]?i.includes(a):i.some((function(e){return e[0]<=a&&e[1]>=a})):"number"==typeof i[0]?i.some((function(e){return a[0]<=e&&a[1]>=e})):n?i.some((function(e){return e[0]===a[0]&&e[0]===a[1]})):i.some((function(e){return e[0]>=a[0]&&e[0]<=a[1]||e[1]>=a[0]&&e[1]<=a[1]||e[0]<a[0]&&e[1]>a[1]}))})))})),r.length&&i&&(0,c.r)(i.start)&&(0,c.r)(i.end)){var n=i.start.getTime(),s=i.end.getTime(),l=r[0].multidimensionalDefinition.findIndex((function(e){return"StdTime"===e.dimensionName}));l>-1&&(r=r.filter((function(e){var t=e.multidimensionalDefinition[l].values[0];return n<=t&&s>=t})))}return r.map((function(e){return e.sliceId}))}function g(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function b(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function w(e,t,i){var r,s;if(null===t||void 0===t||null===(r=t.subsetDefinitions)||void 0===r||!r.length)return e;if(i){var l,o=t.variables;if(o.length&&!o.includes(i))return null;var u=t.subsetDefinitions.find((function(t){return t.dimensionName===e.name&&t.variableName===i}));if(null===u||void 0===u||null===(l=u.values)||void 0===l||!l.length)return e;s=b(u.values)}else{var c;s=null===(c=t.dimensions.find((function(t){return t.name===e.name})))||void 0===c?void 0:c.extent}var h=s;if(!h||null===h||void 0===h||!h.length)return e;var d=e.values.filter((function(e){return g(e,h)}));return(0,n.Z)((0,n.Z)({},e),{},{extent:(0,a.Z)(h),values:d})}function k(e,t,i){var r;if(null===t||void 0===t||null===(r=t.subsetDefinitions)||void 0===r||!r.length)return!1;var n=t.variables;if(n.length&&e.some((function(e){var t=e.variableName;return t&&!n.includes(t)})))return!0;for(var a=function(r){var n=e[r],a=t.subsetDefinitions.find((function(e){return(""===n.variableName||e.variableName===n.variableName)&&e.dimensionName===n.dimensionName}));if(null!==a&&void 0!==a&&a.values.length){var s=b(a.values);if(n.isSlice||2!==n.values.length||Array.isArray(n.values[0])||n.values[0]===n.values[1]||!i){if(n.values.some((function(e){return!g(e,s)})))return{v:!0}}else if(!function(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}(n.values,s))return{v:!0}}},s=0;s<e.length;s++){var l=a(s);if("object"===typeof l)return l.v}return!1}function _(e){var t,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.multidimensionalInfo,a=e.keyProperties;if((0,c.t)(n))return null;var s=r.variableName||(null===a||void 0===a?void 0:a.DefaultVariable),l=n.variables,o=r.multidimensionalSubset;(null===o||void 0===o||null===(t=o.variables)||void 0===t?void 0:t.length)&&(l=l.filter((function(e){var t=e.name;return o.variables.includes(t)})));var u=s&&null!==(i=l.find((function(e){return e.name===s})))&&void 0!==i?i:l[0];if(!u)return null;var h=[],d=u.dimensions,f=u.name;if(0===d.length)return[new v({variableName:f,dimensionName:"",values:[],isSlice:!0})];for(var y=0;y<d.length;y++){var p,m=w(d[y],o,f);if(!m)return null;var g=m.values,b=m.extent,k=null!==(p=null===g||void 0===g?void 0:g[0])&&void 0!==p?p:b[0];"stdz"===m.name.toLowerCase()&&!m.hasRanges&&Math.abs(b[1])<=Math.abs(b[0])&&(k=null!==g&&void 0!==g&&g.length?g[g.length-1]:b[1]),h.push(new v({variableName:f,dimensionName:m.name,values:[k],isSlice:!r.useRangeForRangedDimensionInfo||!!m.hasRanges}))}return h}function x(e){return!((0,c.t)(e)||!e.length)&&e.some((function(e){if(null==e.values)return!0;var t=e.values.length;return 0===t||t>1||!e.isSlice&&Array.isArray(e.values[0])}))}function R(e,t){var i;if((0,c.t)(t)||(0,c.t)(e))return null;var r=t.variables.map((function(e){return(0,n.Z)({},e)}));return null!==e&&void 0!==e&&null!==(i=e.variables)&&void 0!==i&&i.length&&(r=r.filter((function(t){var i=t.name;return e.variables.includes(i)})),r.forEach((function(t){t.dimensions=t.dimensions.map((function(i){return w(i,e,t.name)}))}))),r}function Z(e){var t,i,r,n=null===(t=e.values)||void 0===t?void 0:t.length;if(n)return n;var a=e.extent,s=e.unit,l=e.interval||1,o=a?a[1]-a[0]:0;if("ISO8601"!==s)return Math.round(o/l);switch(null!==(i=null===(r=e.intervalUnit)||void 0===r?void 0:r.toLowerCase())&&void 0!==i?i:"seconds"){case"seconds":n=Math.round(o/1e3/l);break;case"minutes":n=Math.round(o/6e4/l);break;case"hours":n=Math.round(o/36e5/l);break;case"days":n=Math.round(o/864e5/l);break;case"months":var u=new Date(a[1]).getUTCFullYear()-new Date(a[0]).getUTCFullYear(),c=new Date(a[1][0]).getUTCMonth(),h=new Date(a[1][1]).getUTCMonth();n=0===u?h-c+1:h+11-c+12*(u-1)+1;break;case"years":n=Math.round((new Date(a[1]).getUTCFullYear()-new Date(a[0]).getUTCFullYear())/l);break;case"decades":n=Math.round((new Date(a[1]).getUTCFullYear()-new Date(a[0]).getUTCFullYear())/10/l);break;default:n=0}return n}function P(e,t){for(var i=0,r=e[0].variableName,n=(0,a.Z)(t.variables).sort((function(e,t){return e.name>t.name?1:-1})),s=function(t){var s=n[t],l=(0,a.Z)(s.dimensions).sort((function(e,t){return e.name>t.name?-1:1}));if(s.name!==r)return i+=l.map((function(e){return Z(e)})).reduce((function(e,t){return e*t})),"continue";for(var o=l.map((function(e){return Z(e)})),u=l.length,c=function(t){var r=e.find((function(e){return e.dimensionName===l[t].name}));if(null==r)return{v:{v:null}};var n=function(e,t){var i,r=t.values;if(null!==r&&void 0!==r&&r.length)return Array.isArray(r[0])!==Array.isArray(e)?-1:Array.isArray(r[0])?r.findIndex((function(t){return t[0]===e[0]&&t[1]===e[1]})):r.indexOf(e);var n=t.extent;if(Array.isArray(e)||e<n[0]||e>n[1])return-1;var a=t.interval||1;if("ISO8601"!==t.unit)return Math.round((e-n[0])/a);var s=n[0],l=-1;switch((null===(i=t.intervalUnit)||void 0===i?void 0:i.toLowerCase())||"seconds"){case"seconds":l=Math.round((e-s)/1e3/a);break;case"minutes":l=Math.round((e-s)/6e4/a);break;case"hours":l=Math.round((e-s)/36e5/a);break;case"days":l=Math.round((e-s)/864e5/a);break;case"months":var o=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),u=new Date(s).getUTCMonth(),c=new Date(e).getUTCMonth();l=0===o?c-u:c+11-u+12*(o-1);break;case"years":l=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/a);break;case"decades":l=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/a)}return l}(r.values[0],l[t]);if(-1===n)return{v:{v:null}};o.shift(),i+=t===u-1?n:n*o.reduce((function(e,t){return e*t}))},h=0;h<u;h++){var d=c(h);if("object"===typeof d)return d.v}return"break"},l=0;l<n.length;l++){var o=s(l);if("continue"!==o){if("break"===o)break;if("object"===typeof o)return o.v}}return i}},95415:function(e,t,i){i.d(t,{e:function(){return n},r:function(){return a}});var r=new(i(40558).s)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function n(e){return r.toJSON(e)}function a(e){var t=e.rasterInfo,i=t.bandCount,r=t.attributeTable,n=t.colormap,a=t.pixelType;return 1===i&&(null!=r||null!=n||"u8"===a||"s8"===a)}}}]);
//# sourceMappingURL=3926.016b2388.chunk.js.map