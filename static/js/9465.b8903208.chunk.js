"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9465],{99465:function(e,t,r){r.d(t,{q:function(){return D}});var n=r(1413),a=r(37762),i=r(74165),o=r(15861),s=r(15671),u=r(43144),l=r(11752),c=r(61120),h=r(60136),d=r(29388),p=r(23132),f=r(38304),v=r(75610),y=r(36551),g=r(80262),m=r(78311),x=r(58687),w=r(3964),_=r(91309),S=r(94867),Z=r(91034),b=r(45414),k=r(7214),R=r(5900),C=r(19231),O=r(38425),P=r(6819);function A(e){return x.T.createSquareGeometry([[e[0],e[1],-1],[e[2],e[1],-1],[e[2],e[3],-1],[e[0],e[3],-1]])}function T(e,t){if(!(0,m.E)(e,t))return A(t);for(var r=[e[1]-t[1],Math.min(e[3],t[3])-Math.max(e[1],t[1]),t[3]-e[3],123456],n=[e[0]-t[0],Math.min(e[2],t[2])-Math.max(e[0],t[0]),t[2]-e[2],123456],a=t[2]-t[0],i=t[3]-t[1],o=n[0]>0&&n[2]>0?3:2,s=r[0]>0&&r[2]>0?3:2,u=(s+1)*(o+1),l=new Float64Array(3*u),c=new Float32Array(2*u),h=new Uint32Array(6*(s*o-1)),d=0,p=0,f=0,v=0,y=0,g=0;g<4;g++){var x=r[g];if(!(x<=0)){for(var w=0,Z=0;Z<4;Z++){var b=n[Z];b<=0||(l[p++]=t[0]+w,l[p++]=t[1]+d,l[p++]=-1,c[f++]=w/a,c[f++]=d/i,Z<3&&g<3&&(1!==Z||1!==g)&&(h[y++]=v,h[y++]=v+1,h[y++]=v+o+1,h[y++]=v+1,h[y++]=v+o+2,h[y++]=v+o+1),v++,w+=b)}d+=x}}var k=new Uint32Array(h.length);return new _.I([[S.O.POSITION,{size:3,data:l,exclusive:!0}],[S.O.NORMAL,{size:3,data:E,exclusive:!0}],[S.O.UV0,{size:2,data:c,exclusive:!0}]],[[S.O.POSITION,h],[S.O.NORMAL,k],[S.O.UV0,h]])}var E=[0,0,1],I=p.s.getLogger("esri.views.3d.layers.DynamicLayerView3D"),M=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).drapeSourceType=x.e.RasterImage,e.updatePolicy=b.o.SYNC,e.fullExtentInLocalViewSpatialReference=null,e.maximumDataResolution=null,e._images=new Array,e._extents=new Array,e._overlays=new Array,e.updateWhenStationary=!0,e._drapeSourceRenderer=null,e.refreshDebounced=(0,p.x)(function(){var t=(0,o.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.destroyed,t.t0){t.next=4;break}return t.next=4,e._doRefresh(r).catch((function(t){(0,p.u)(t)||p.s.getLogger(e.declaredClass).error(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),2e3),e}return(0,u.Z)(r,[{key:"initialize",value:function(){var e=this;this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.handles.add((0,p.g)((function(){return e.view.basemapTerrain.overlayManager.unregisterDrapeSource(e)}))),this.addResolvingPromise((0,Z.l)(this).then((function(t){return e._set("fullExtentInLocalViewSpatialReference",t)}))),this.updatingHandles.add((function(){return e.suspended}),(function(){return e._suspendedChangeHandler()})),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((function(){e._isScaleRangeActive()&&e.notifyChange("suspended")}),(function(){}))),this._isScaleRangeLayer()&&this.updatingHandles.add((function(){return e.layer.effectiveScaleRange}),(function(){return e.notifyChange("suspended")}))}},{key:"destroy",value:function(){this.clear()}},{key:"setDrapingExtent",value:function(e,t){var r=this;this._spatialReference=t,e.forEach((function(e){r._overlays[e.index]=e,r._updateImageExtent(e)}))}},{key:"_updateImageExtent",value:function(e){var t=this._clippedExtent(e.extent,L);if(!(0,v.t)(t)){var r=function(e,t,r){var n=(0,m.s)(e)/(0,m.l)(e),a={width:r,height:r};return n>1.0001?a.height=r/n:n<.9999&&(a.width=r*n),a.width=Math.round(a.width/((0,m.s)(e)/(0,m.s)(t))),a.height=Math.round(a.height/((0,m.l)(e)/(0,m.l)(t))),a}(e.extent,t,e.resolution),n=e.pixelRatio*this.view.state.pixelRatio;if("imageMaxWidth"in this.layer||"imageMaxHeight"in this.layer){var a=this.layer.imageMaxWidth,i=this.layer.imageMaxHeight;if(r.width>a){var o=a/r.width;r.height=Math.floor(r.height*o),r.width=a,n*=o}if(r.height>i){var s=i/r.height;r.width=Math.floor(r.width*s),r.height=i,n*=s}}var u=this._extents[e.index];u&&(0,m.I)(u.extent,t)&&this._imageSizeEquals(t,u.imageSize,r)||(this._extents[e.index]={extent:(0,m.u)(t),imageSize:r,pixelRatio:n},this.suspended||this._fetch(e.index).catch((function(e){(0,p.u)(e)||I.error(e)})))}}},{key:"clear",value:function(){for(var e=0;e<this._images.length;e++)this._clearImage(e)}},{key:"doRefresh",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._doRefresh());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_doRefresh",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended){e.next=2;break}return e.abrupt("return");case 2:for(r=[],n=0;n<this._extents.length;n++)this._extents[n]&&r.push(this._fetch(n,t));return e.next=6,(0,p.E)(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){if(!(0,l.Z)((0,c.Z)(r.prototype),"canResume",this).call(this))return!1;var e=this.layer;if(this._isScaleRangeActive()){var t=e.effectiveScaleRange,n=t.minScale,a=t.maxScale,i=this.view.scale;if(i<a||n>0&&i>n)return!1}return!0}},{key:"isUpdating",value:function(){return this._images.some((function(e){return!!e.loadingPromise}))}},{key:"processResult",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r instanceof HTMLImageElement||r instanceof HTMLCanvasElement)&&(t.image=r);case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"findExtentInfoAt",value:function(e){var t,r=(0,a.Z)(this._extents);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.extent;if(new g.M(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return n}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"getFetchOptions",value:function(){}},{key:"redraw",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.n)(this._images,function(){var e=(0,o.Z)((0,i.Z)().mark((function e(a,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,!e.t0){e.next=6;break}return e.next=4,t(a,r);case 4:return e.next=6,n._createStageObjects(o,a.image,r);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_imageSizeEquals",value:function(e,t,r){if(!this.maximumDataResolution)return!1;var n=(0,m.s)(e)/this.maximumDataResolution.x,a=(0,m.l)(e)/this.maximumDataResolution.y,i=n/t.width,o=a/t.height,s=n/r.width,u=a/r.height,l=Math.abs(i-s),c=Math.abs(o-u),h=x.B.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return l<=h&&c<=h}},{key:"_fetch",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var a,s,u,l,c,h,d,f=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended){e.next=2;break}return e.abrupt("return");case 2:if(a=this._extents[t],s=a.extent,this._images[t]||(this._images[t]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,m.u)(s)}),(u=this._images[t]).loadingAbortController&&(u.loadingAbortController.abort(),u.loadingAbortController=null),0!==(l=new g.M(s[0],s[1],s[2],s[3],this._spatialReference)).width&&0!==l.height){e.next=9;break}return e.abrupt("return",void this._clearImage(t));case 9:return c=new AbortController,u.loadingAbortController=c,(0,p.v)(r,(function(){return c.abort()})),h=c.signal,d=this._waitFetchReady(h).then((0,o.Z)((0,i.Z)().mark((function e(){var r,o,s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,n.Z)((0,n.Z)({requestAsImageElement:!0,pixelRatio:f._overlays[t].pixelRatio},f.getFetchOptions()),{},{signal:h}),o=a.imageSize,s=o.height,u=o.width,e.abrupt("return",f.layer.fetchImage(l,u,s,r));case 2:case"end":return e.stop()}}),e)})))).then((function(e){if((0,p.p)(h))throw I.warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,p.m)();return f.processResult(u,e)})).then((function(){(0,m.a)(u.renderExtent,s)})).finally((function(){d===u.loadingPromise&&(u.loadingPromise=null,u.loadingAbortController=null)})),u.loadingPromise=d,this.notifyChange("updating"),e.next=16,d.then((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.aborted){e.next=2;break}throw(0,p.m)();case 2:return e.next=4,f._createStageObjects(t,u.image,h);case 4:f.notifyChange("updating");case 5:case"end":return e.stop()}}),e)})))).catch((function(e){throw e&&!(0,p.u)(e)&&I.error(e),f.notifyChange("updating"),e}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_clearImage",value:function(e){var t=this._images[e];if(t){(0,v.r)(t.renderGeometry)&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],x.v.Geometry.UPDATE),t.renderGeometry=null);var r=this.view._stage;r.remove(t.texture),t.texture=null,r.remove(t.material),t.material=null,t.loadingAbortController&&(t.loadingAbortController.abort(),t.loadingAbortController=null),t.loadingPromise=null,t.image=null,t.pixelData=null}}},{key:"_createStageObjects",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var a,o,s,u,l,c,h=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.view._stage,o=this._images[t],s=function(){a.remove(o.texture),o.texture=null,(0,v.r)(o.renderGeometry)&&(h._drapeSourceRenderer.removeGeometries([o.renderGeometry],x.v.Geometry.UPDATE),o.renderGeometry=null)},!r){e.next=25;break}return u=new _.T(r,{width:r.width,height:r.height,preMultiplyAlpha:!0,wrap:{s:P.D.CLAMP_TO_EDGE,t:P.D.CLAMP_TO_EDGE}}),e.next=5,(0,f.a)(this._images[t===x.z.INNER?x.z.OUTER:x.z.INNER].loadingPromise);case 5:if((0,p.H)(n),t!==x.z.INNER){e.next=10;break}l=A(o.renderExtent),e.next=14;break;case 10:if(c=this._images[0].renderExtent){e.next=13;break}return e.abrupt("return",void s());case 13:l=T(c,o.renderExtent);case 14:return s(),a.add(u),e.next=18,a.loadImmediate(u);case 18:o.texture=u,(0,v.t)(o.material)?(o.material=new k.m({transparent:!0,textureId:u.id}),a.add(o.material)):o.material.setParameters({textureId:u.id}),o.renderGeometry=new x.A(l,o.material),o.renderGeometry.origin=this._overlays[t].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([o.renderGeometry],x.v.Geometry.UPDATE),e.next=26;break;case 25:s(),a.remove(o.material),o.material=null;case 26:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_isScaleRangeLayer",value:function(){return"effectiveScaleRange"in this.layer}},{key:"_isScaleRangeActive",value:function(){var e=this.layer;if(!this._isScaleRangeLayer())return!1;var t=e.effectiveScaleRange,r=t.minScale,n=t.maxScale;return(0,O.o)(r,n)}},{key:"_clippedExtent",value:function(e,t){if("local"!==this.view.viewingMode)return(0,m.a)(t,e);var r=this.view.basemapTerrain;return r.ready?(0,m.U)(e,r.extent,t):(0,m.a)(t,e)}},{key:"_suspendedChangeHandler",value:function(){this.suspended?this.clear():this.refreshDebounced()}},{key:"_waitFetchReady",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.j)((function(){return r.view.stationary}),t);case 2:(0,p.H)(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,C.i)((0,w.n)(R.u)));(0,p.e)([(0,p.d)()],M.prototype,"layer",void 0),(0,p.e)([(0,p.d)()],M.prototype,"suspended",void 0),(0,p.e)([(0,p.d)({readOnly:!0})],M.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,p.e)([(0,p.d)()],M.prototype,"updating",void 0);var D=M=(0,p.e)([(0,p.n)("esri.views.3d.layers.DynamicLayerView3D")],M),L=(0,m.u)()},7214:function(e,t,r){r.d(t,{f:function(){return S},m:function(){return C}});var n,a,i,o=r(1413),s=r(15671),u=r(43144),l=r(11752),c=r(61120),h=r(60136),d=r(29388),p=r(30168),f=r(91309),v=r(45414),y=r(58687),g=r(23132),m=r(75610),x=r(84192),w=r(94867),_=r(6819);function S(e){var t=new f.a;(0,f.P)(t,e),t.include(f.G),t.attributes.add(w.O.POSITION,"vec3"),t.attributes.add(w.O.UV0,"vec2"),t.varyings.add("vpos","vec3"),e.hasMultipassTerrain&&t.varyings.add("depth","float");var r=t.vertex,o=t.fragment;return r.uniforms.add(new f.f("textureCoordinateScaleFactor",(function(e){return(0,m.r)(e.texture)&&(0,m.r)(e.texture.descriptor.textureCoordinateScaleFactor)?e.texture.descriptor.textureCoordinateScaleFactor:x.i}))),r.code.add((0,f.n)(n||(n=(0,p.Z)(["\n    void main(void) {\n      vpos = position;\n      ","\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  "])),e.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":"")),t.include(f.U,e),t.include(f.ak,e),o.uniforms.add([new f.B("tex",(function(e){return e.texture})),new f.p("opacity",(function(e){return e.opacity}))]),t.varyings.add("vTexCoord","vec2"),e.output===f.V.Alpha?o.code.add((0,f.n)(a||(a=(0,p.Z)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ",") {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    "])),e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":"",f.n.float(f.a0))):(o.include(f.q),o.code.add((0,f.n)(i||(i=(0,p.Z)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ",") {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ","\n    }\n    "])),e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":"",f.n.float(f.a0),e.transparencyPassType===v.O.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""))),t}var Z=Object.freeze(Object.defineProperty({__proto__:null,build:S},Symbol.toStringTag,{value:"Module"})),b=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"initializeProgram",value:function(e){var t=r.shader.get().build(this.configuration);return new f.h(e.rctx,t,f.E)}},{key:"_setPipelineState",value:function(e,t){var r=this.configuration,n=e===v.O.NONE,a=e===v.O.FrontFace;return(0,v.W)({blending:r.output!==f.V.Color&&r.output!==f.V.Alpha||!r.transparent?null:n?k:(0,v.E)(e),culling:(0,v.k)(r.cullFace),depthTest:{func:(0,v.e)(e)},depthWrite:n?r.writeDepth&&v.b:(0,v.S)(e),colorWrite:v.c,stencilWrite:r.hasOccludees?f.al:null,stencilTest:r.hasOccludees?t?f.am:f.an:null,polygonOffset:n||a?null:(0,v.g)(r.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipelineState",value:function(e,t){return t?this._occludeePipelineState:(0,l.Z)((0,c.Z)(r.prototype),"getPipelineState",this).call(this,e,t)}}]),r}(f.g);b.shader=new f.t(Z,(function(){return r.e(5258).then(r.bind(r,35258))}));var k=(0,v.s)(_.R.ONE,_.R.ONE_MINUS_SRC_ALPHA),R=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).output=f.V.Color,e.cullFace=v.n.None,e.hasSlicePlane=!1,e.transparent=!1,e.enableOffset=!0,e.writeDepth=!0,e.hasOccludees=!1,e.transparencyPassType=v.O.NONE,e.hasMultipassTerrain=!1,e.cullAboveGround=!1,e}return(0,u.Z)(r)}(f.a2);(0,g.e)([(0,f.j)({count:f.V.COUNT})],R.prototype,"output",void 0),(0,g.e)([(0,f.j)({count:v.n.COUNT})],R.prototype,"cullFace",void 0),(0,g.e)([(0,f.j)()],R.prototype,"hasSlicePlane",void 0),(0,g.e)([(0,f.j)()],R.prototype,"transparent",void 0),(0,g.e)([(0,f.j)()],R.prototype,"enableOffset",void 0),(0,g.e)([(0,f.j)()],R.prototype,"writeDepth",void 0),(0,g.e)([(0,f.j)()],R.prototype,"hasOccludees",void 0),(0,g.e)([(0,f.j)({count:v.O.COUNT})],R.prototype,"transparencyPassType",void 0),(0,g.e)([(0,f.j)()],R.prototype,"hasMultipassTerrain",void 0),(0,g.e)([(0,f.j)()],R.prototype,"cullAboveGround",void 0);var C=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,s.Z)(this,r),(n=t.call(this,e,new P)).supportsEdges=!0,n.techniqueConfig=new R,n}return(0,u.Z)(r,[{key:"getConfiguration",value:function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<v._,this.techniqueConfig.hasMultipassTerrain=t.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=t.multipassTerrain.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,r,n,a,i,o){(0,f.aA)(e,t,n,a,i,void 0,o)}},{key:"requiresSlot",value:function(e,t){return e===f.C.DRAPED_MATERIAL||((0,y.D)(t)===f.V.Highlight?e===f.C.OPAQUE_MATERIAL:e===(this.parameters.transparent?this.parameters.writeDepth?f.C.TRANSPARENT_MATERIAL:f.C.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:f.C.OPAQUE_MATERIAL))}},{key:"createGLMaterial",value:function(e){return e.output===f.V.Color||e.output===f.V.Alpha||e.output===f.V.Highlight?new O(e):void 0}},{key:"createBufferWriter",value:function(){return new y.F(y.G)}}]),r}(f.a3),O=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,(0,o.Z)((0,o.Z)({},e),e.material.parameters))}return(0,u.Z)(r,[{key:"_updateParameters",value:function(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(b,e)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}},{key:"beginSlot",value:function(e){return this._output!==f.V.Color&&this._output!==f.V.Alpha||this._updateOccludeeState(e),this._updateParameters(e)}}]),r}(f.a7),P=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.hasSlicePlane=!1,e.cullFace=v.n.None,e.hasOccludees=!1,e.opacity=1,e.textureId=null,e.initTextureTransparent=!0,e}return(0,u.Z)(r)}(f.ai)},5900:function(e,t,r){r.d(t,{u:function(){return f}});var n=r(15671),a=r(43144),i=r(60136),o=r(29388),s=r(23132),u=r(80175),l=r(97033),c=r(77196),h=r(75610),d=r(43920),p=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(e){var a;return(0,n.Z)(this,r),(a=t.call(this,e)).layer=null,a.parent=null,a}return(0,a.Z)(r,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";s.s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(n,"', id: '").concat(r,"')"),t)}}))}},{key:"fullOpacity",get:function(){return(0,h.n)(this.get("layer.opacity"),1)*(0,h.n)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}},{key:"canResume",value:function(){var e,t,r;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(r=this.view)||void 0===r?void 0:r.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),r}((0,l.a)((0,c.s)((0,d.m)(u.n.EventedMixin(s.y)))));(0,s.e)([(0,s.d)()],p.prototype,"fullOpacity",null),(0,s.e)([(0,s.d)()],p.prototype,"layer",void 0),(0,s.e)([(0,s.d)()],p.prototype,"parent",void 0),(0,s.e)([(0,s.d)({readOnly:!0})],p.prototype,"suspended",null),(0,s.e)([(0,s.d)({readOnly:!0})],p.prototype,"suspendInfo",null),(0,s.e)([(0,s.d)({readOnly:!0})],p.prototype,"legendEnabled",null),(0,s.e)([(0,s.d)({type:Boolean,readOnly:!0})],p.prototype,"updating",null),(0,s.e)([(0,s.d)({readOnly:!0})],p.prototype,"updatingProgress",null),(0,s.e)([(0,s.d)()],p.prototype,"visible",null),(0,s.e)([(0,s.d)()],p.prototype,"view",void 0);var f=p=(0,s.e)([(0,s.n)("esri.views.layers.LayerView")],p)},3964:function(e,t,r){r.d(t,{n:function(){return f}});var n=r(74165),a=r(15861),i=r(15671),o=r(43144),s=r(11752),u=r(61120),l=r(60136),c=r(29388),h=r(23132),d=r(36551),p=(r(75610),r(86270)),f=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,o.Z)(r,[{key:"postscript",value:function(e){(0,s.Z)((0,u.Z)(r.prototype),"postscript",this).call(this,e),(0,p.g)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,i=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,r=t.signal,this.handles.add((0,h.g)((function(){return t.abort()}))),e.next=4,(0,d.j)((function(){var e;return null===(e=i.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),r);case 4:if((0,h.H)(r),!(a=(0,p.o)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw a;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,s.Z)((0,u.Z)(r.prototype),"canResume",this).call(this)&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}},{key:"getSuspendInfo",value:function(){var e=(0,s.Z)((0,u.Z)(r.prototype),"getSuspendInfo",this).call(this),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}}]),r}(e);return(0,h.e)([(0,h.d)()],t.prototype,"view",void 0),(0,h.e)([(0,h.d)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,h.e)([(0,h.n)("esri.views.3d.layers.LayerView3D")],t)}},19231:function(e,t,r){r.d(t,{i:function(){return l}});var n=r(15671),a=r(43144),i=r(60136),o=r(29388),s=r(23132),u=r(36551),l=(r(75610),function(e){var t=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"initialize",value:function(){var e=this;this.handles.add((0,u.a)((function(){return e.layer}),"refresh",(function(t){e.doRefresh(t.dataChanged).catch((function(t){(0,s.u)(t)||s.s.getLogger(e.declaredClass).error(t)}))})),"RefreshableLayerView")}}]),r}(e);return(0,s.e)([(0,s.d)()],t.prototype,"layer",void 0),t=(0,s.e)([(0,s.n)("esri.layers.mixins.RefreshableLayerView")],t)})},91034:function(e,t,r){r.d(t,{l:function(){return o}});var n=r(75610),a=r(30709),i=r(87603);function o(e){var t=e.view.spatialReference,r=e.layer.fullExtent,o=(0,n.r)(r)&&r.spatialReference;if((0,n.t)(r)||!o)return Promise.resolve(null);if(o.equals(t))return Promise.resolve(r.clone());var s=(0,a.M)(r,t);return(0,n.r)(s)?Promise.resolve(s):e.view.state.isLocal?(0,i.projectGeometry)(r,t,e.layer.portalItem).then((function(t){return!e.destroyed&&t?t:void 0})).catch((function(){return null})):Promise.resolve(null)}}}]);
//# sourceMappingURL=9465.b8903208.chunk.js.map