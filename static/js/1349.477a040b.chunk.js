"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[1349],{61349:function(e,t,r){r.d(t,{S:function(){return C},a:function(){return q},b:function(){return $},c:function(){return Be},d:function(){return qe},e:function(){return W},f:function(){return Ge},g:function(){return P},h:function(){return F},i:function(){return Ve},j:function(){return je},k:function(){return z},l:function(){return M},m:function(){return Q},n:function(){return te},o:function(){return Y},p:function(){return H},q:function(){return R},r:function(){return ee},t:function(){return K},u:function(){return L}});var n,u=r(37762),a=r(4942),o=r(1413),i=r(74165),s=r(15861),c=r(15671),f=r(43144),p=r(2822),l=r(32990),d=r(57714),h=r(38304),v=r(23132),y=r(75610),m=r(57952),b=r(6819),x=r(48889),g=r(52376),w=r(61340),_=r(6243),T=r(71573),S=r(83262),k=r(2760),I=r(44344),A=r(64296);function C(e,t,r){var n=t[0]-e[0],u=t[1]-e[1],a=r[0]-e[0],o=r[1]-e[1];return.5*Math.abs(n*o-u*a)}function O(e,t,r){return(0,k.e)(E,t,e),(0,k.e)(B,r,e),(0,k.s)((0,k._)(E,E,B))/2}new I.s(A.v),new I.s((function(){return{p0:null,p1:null,p2:null}}));var E=(0,k.n)(),B=(0,k.n)(),N=function(){for(var e=new Uint32Array(131072),t=0;t<e.length;++t)e[t]=t;return e}(),U=new Uint16Array([0]),Z=function(){for(var e=new Uint16Array(65536),t=0;t<e.length;++t)e[t]=t;return e}();function M(e){if(1===e)return U;if(e<Z.length)return new Uint16Array(Z.buffer,0,e);if(e>N.length){var t=Math.max(2*N.length,e);N=new Uint32Array(t);for(var r=0;r<N.length;r++)N[r]=r}return new Uint32Array(N.buffer,0,e)}function R(e){if(1===e)return new Uint16Array(U);if(e<Z.length)return new Uint16Array(Z.slice(0,e));if(e>N.length){for(var t=new Uint32Array(e),r=0;r<t.length;r++)t[r]=r;return t}return new Uint32Array(N.slice(0,e))}function L(e,t,r){if(!e)return!1;var n=e.size,u=e.data;(0,k.f)(r,0,0,0),(0,k.f)(V,0,0,0);for(var a=0,o=0,i=0;i<t.length-2;i+=3){var s=t[i+0]*n,c=t[i+1]*n,f=t[i+2]*n;(0,k.f)(D,u[s+0],u[s+1],u[s+2]),(0,k.f)(j,u[c+0],u[c+1],u[c+2]),(0,k.f)(G,u[f+0],u[f+1],u[f+2]);var p=O(D,j,G);p?((0,k.u)(D,D,j),(0,k.u)(D,D,G),(0,k.q)(D,D,1/3*p),(0,k.u)(r,r,D),a+=p):((0,k.u)(V,V,D),(0,k.u)(V,V,j),(0,k.u)(V,V,G),o+=3)}return(0!==o||0!==a)&&(0!==a?((0,k.q)(r,r,1/a),!0):0!==o&&((0,k.q)(r,V,1/o),!0))}function P(e,t,r){if(!e||!t)return!1;var n=e.size,u=e.data;(0,k.f)(r,0,0,0);for(var a=-1,o=0,i=0;i<t.length;i++){var s=t[i]*n;a!==s&&(r[0]+=u[s+0],r[1]+=u[s+1],r[2]+=u[s+2],o++),a=s}return o>1&&(0,k.q)(r,r,1/o),o>0}function F(e,t,r,n){if(!e)return!1;var u=e.size,a=e.data;(0,k.f)(n,0,0,0),(0,k.f)(V,0,0,0);for(var o=0,i=0,s=t?t.length-1:a.length/u-1,c=s+(r?2:0),f=0;f<c;f+=2){var p=f<s?f:s,l=f<s?f+1:0,d=(t?t[p]:p)*u,h=(t?t[l]:l)*u;D[0]=a[d+0],D[1]=a[d+1],D[2]=a[d+2],j[0]=a[h+0],j[1]=a[h+1],j[2]=a[h+2],(0,k.q)(D,(0,k.u)(D,D,j),.5);var v=(0,k.U)(D,j);v>0?((0,k.u)(n,n,(0,k.q)(D,D,v)),o+=v):((0,k.u)(V,V,D),i++)}return 0!==o?((0,k.q)(n,n,1/o),!0):0!==i&&((0,k.q)(n,V,1/i),!0)}var D=(0,k.n)(),j=(0,k.n)(),G=(0,k.n)(),V=(0,k.n)();function q(e,t,r){if(e.count===t.count)for(var n=e.count,u=r[0],a=r[1],o=r[2],i=r[3],s=r[4],c=r[5],f=r[6],l=r[7],d=r[8],h=e.typedBuffer,v=e.typedBufferStride,y=t.typedBuffer,m=t.typedBufferStride,b=0;b<n;b++){var x=b*v,g=b*m,w=y[g],_=y[g+1],T=y[g+2],S=y[g+3];h[x]=u*w+i*_+f*T,h[x+1]=a*w+s*_+l*T,h[x+2]=o*w+c*_+d*T,h[x+3]=S}else p.a.error("source and destination buffers need to have the same number of elements")}function z(e,t){for(var r=Math.min(e.count,t.count),n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=0;i<r;i++){var s=i*u,c=i*o,f=a[c],p=a[c+1],l=a[c+2],d=f*f+p*p+l*l;if(d>0){var h=1/Math.sqrt(d);n[s]=h*f,n[s+1]=h*p,n[s+2]=h*l}}}function Y(e,t,r){for(var n=Math.min(e.count,t.count),u=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,i=t.typedBufferStride,s=0;s<n;s++){var c=s*a,f=s*i;u[c]=r*o[f],u[c+1]=r*o[f+1],u[c+2]=r*o[f+2],u[c+3]=r*o[f+3]}}function H(e,t,r){for(var n=Math.min(e.count,t.count),u=e.typedBuffer,a=e.typedBufferStride,o=t.typedBuffer,i=t.typedBufferStride,s=0;s<n;s++){var c=s*a,f=s*i;u[c]=o[f]>>r,u[c+1]=o[f+1]>>r,u[c+2]=o[f+2]>>r,u[c+3]=o[f+3]>>r}}function X(e,t){var r=e.count;t||(t=new e.TypedArrayConstructor(r));for(var n=0;n<r;n++)t[n]=e.get(n);return t}function J(e,t,r){for(var n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*u,c=(r&&r.srcIndex?r.srcIndex:0)*o,f=0;f<i;++f)n[s]=a[c],n[s+1]=a[c+1],s+=u,c+=o}function $(e,t,r){var n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*u,c=(r&&r.srcIndex?r.srcIndex:0)*o;if((0,l.c)(t.elementType)){var f=(0,l.u)(t.elementType);if((0,l.r)(t.elementType))for(var p=0;p<i;++p)n[s]=Math.max(a[c]/f,-1),n[s+1]=Math.max(a[c+1]/f,-1),s+=u,c+=o;else for(var d=0;d<i;++d)n[s]=a[c]/f,n[s+1]=a[c+1]/f,s+=u,c+=o}else J(e,t,r);return e}function Q(e,t,r,n){for(var u,a,o=e.typedBuffer,i=e.typedBufferStride,s=null!==(u=null===n||void 0===n?void 0:n.count)&&void 0!==u?u:e.count,c=(null!==(a=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==a?a:0)*i,f=0;f<s;++f)o[c]=t,o[c+1]=r,c+=i}function W(e,t,r){for(var n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*u,c=(r&&r.srcIndex?r.srcIndex:0)*o,f=0;f<i;++f)n[s]=a[c],n[s+1]=a[c+1],n[s+2]=a[c+2],n[s+3]=a[c+3],s+=u,c+=o}function K(e,t,r,n,u,a){for(var o,i,s=e.typedBuffer,c=e.typedBufferStride,f=null!==(o=null===a||void 0===a?void 0:a.count)&&void 0!==o?o:e.count,p=(null!==(i=null===a||void 0===a?void 0:a.dstIndex)&&void 0!==i?i:0)*c,l=0;l<f;++l)s[p]=t,s[p+1]=r,s[p+2]=n,s[p+3]=u,p+=c}function ee(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,l.e)(e.ElementType)))}Object.freeze(Object.defineProperty({__proto__:null,transformMat4:function(e,t,r){if(e.count===t.count)for(var n=e.count,u=r[0],a=r[1],o=r[2],i=r[3],s=r[4],c=r[5],f=r[6],l=r[7],d=r[8],h=r[9],v=r[10],y=r[11],m=r[12],b=r[13],x=r[14],g=r[15],w=e.typedBuffer,_=e.typedBufferStride,T=t.typedBuffer,S=t.typedBufferStride,k=0;k<n;k++){var I=k*_,A=k*S,C=T[A],O=T[A+1],E=T[A+2],B=T[A+3];w[I]=u*C+s*O+d*E+m*B,w[I+1]=a*C+c*O+h*E+b*B,w[I+2]=o*C+f*O+v*E+x*B,w[I+3]=i*C+l*O+y*E+g*B}else p.a.error("source and destination buffers need to have the same number of elements")},transformMat3:q,normalize:z,scale:Y,shiftRight:H},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*u,c=(r&&r.srcIndex?r.srcIndex:0)*o,f=0;f<i;++f){for(var p=0;p<9;++p)n[s+p]=a[c+p];s+=u,c+=o}}},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*u,c=(r&&r.srcIndex?r.srcIndex:0)*o,f=0;f<i;++f){for(var p=0;p<16;++p)n[s+p]=a[c+p];s+=u,c+=o}}},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,r){for(var n=e.typedBuffer,u=e.typedBufferStride,a=t.typedBuffer,o=t.typedBufferStride,i=r?r.count:t.count,s=(r&&r.dstIndex?r.dstIndex:0)*u,c=(r&&r.srcIndex?r.srcIndex:0)*o,f=0;f<i;++f)n[s]=a[c],s+=u,c+=o},makeDense:X},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:J,normalizeIntegerBuffer:$,fill:Q},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:W,fill:K},Symbol.toStringTag,{value:"Module"}));var te=function(){function e(t){(0,c.Z)(this,e),this.streamDataRequester=t}return(0,f.Z)(e,[{key:"loadJSON",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._load("json",t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"loadBinary",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.X)(t)?((0,v.H)(r),(0,d.Y)(t)):this._load("binary",t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"loadImage",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._load("image",t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_load",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r,n){var u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,y.t)(this.streamDataRequester)){e.next=4;break}return e.next=3,(0,d.U)(r,{responseType:re[t]});case 3:return e.abrupt("return",e.sent.data);case 4:return e.next=6,(0,h.a)(this.streamDataRequester.request(r,t,n));case 6:if(!0!==(u=e.sent).ok){e.next=9;break}return e.abrupt("return",u.value);case 9:throw(0,v.M)(u.error),new v.a("","Request for resource failed: ".concat(u.error));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),re={image:"image",binary:"array-buffer",json:"json"},ne=v.s.getLogger("esri.views.3d.glTF"),ue=function(){function e(){(0,c.Z)(this,e)}return(0,f.Z)(e,[{key:"error",value:function(e){throw new v.a("gltf-loader-error",e)}},{key:"errorUnsupported",value:function(e){throw new v.a("gltf-loader-unsupported-feature",e)}},{key:"errorUnsupportedIf",value:function(e,t){e&&this.errorUnsupported(t)}},{key:"assert",value:function(e,t){e||this.error(t)}},{key:"warn",value:function(e){ne.warn(e)}},{key:"warnUnsupported",value:function(e){this.warn("[Unsupported Feature] "+e)}},{key:"warnUnsupportedIf",value:function(e,t){e&&this.warnUnsupported(t)}}]),e}();var ae,oe,ie=function(){function e(t){(0,c.Z)(this,e),this.data=t,this.offset4=0,this.dataUint32=new Uint32Array(this.data,0,Math.floor(this.data.byteLength/4))}return(0,f.Z)(e,[{key:"readUint32",value:function(){var e=this.offset4;return this.offset4+=1,this.dataUint32[e]}},{key:"readUint8Array",value:function(e){var t=4*this.offset4;return this.offset4+=e/4,new Uint8Array(this.data,t,e)}},{key:"remainingBytes",value:function(){return this.data.byteLength-4*this.offset4}}]),e}();!function(e){e.SCALAR="SCALAR",e.VEC2="VEC2",e.VEC3="VEC3",e.VEC4="VEC4",e.MAT2="MAT2",e.MAT3="MAT3",e.MAT4="MAT4"}(ae||(ae={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(oe||(oe={}));var se={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},ce={pbrMetallicRoughness:se,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},fe={ESRI_externalColorMixMode:"tint"},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.Z)((0,o.Z)({},se),e.pbrMetallicRoughness),r=le((0,o.Z)((0,o.Z)({},fe),e.extras));return(0,o.Z)((0,o.Z)((0,o.Z)({},ce),e),{},{pbrMetallicRoughness:t,extras:r})};function le(e){switch(e.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:e.ESRI_externalColorMixMode="tint"}return e}var de={magFilter:b.L.LINEAR,minFilter:b.L.LINEAR_MIPMAP_LINEAR,wrapS:b.D.REPEAT,wrapT:b.D.REPEAT},he=function(e){return(0,o.Z)((0,o.Z)({},de),e)};var ve=1179937895,ye=1313821514,me=5130562,be=function(){function e(t,r,n,u,a){(0,c.Z)(this,e),this.context=t,this.errorContext=r,this.uri=n,this.json=u,this.glbBuffer=a,this.bufferLoaders=new Map,this.textureLoaders=new Map,this.textureCache=new Map,this.materialCache=new Map,this.nodeParentMap=new Map,this.nodeTransformCache=new Map,this.baseUri=function(e){var t,r;return e.replace(/^(.*\/)?([^/]*)$/,(function(e,n,u){return t=n||"",r=u||"",""})),{dirPart:t,filePart:r}}(this.uri).dirPart,this._checkVersionSupported(),this._checkRequiredExtensionsSupported(),r.errorUnsupportedIf(null==u.scenes,"Scenes must be defined."),r.errorUnsupportedIf(null==u.meshes,"Meshes must be defined"),r.errorUnsupportedIf(null==u.nodes,"Nodes must be defined."),this._computeNodeParents()}return(0,f.Z)(e,[{key:"getBuffer",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.json.buffers[t],u=this.errorContext,null!=n.uri){e.next=3;break}return e.abrupt("return",(u.assert(null!=this.glbBuffer,"GLB buffer not present"),this.glbBuffer));case 3:return e.next=5,this._getBufferLoader(t,r);case 5:return a=e.sent,e.abrupt("return",(u.assert(a.byteLength===n.byteLength,"Buffer byte lengths should match."),a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getBufferLoader",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.bufferLoaders.get(t))){e.next=3;break}return e.abrupt("return",n);case 3:return u=this.json.buffers[t],a=this.context.loadBinary(this._resolveUri(u.uri),r).then((function(e){return new Uint8Array(e)})),e.abrupt("return",(this.bufferLoaders.set(t,a),a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAccessor",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u,a,o,s,c,f,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).errorUnsupportedIf(!this.json.accessors,"Accessors missing."),u=this.json.accessors[t],n.errorUnsupportedIf(null==(null===u||void 0===u?void 0:u.bufferView),"Some accessor does not specify a bufferView."),n.errorUnsupportedIf(u.type in[ae.MAT2,ae.MAT3,ae.MAT4],"AttributeType ".concat(u.type," is not supported")),a=this.json.bufferViews[u.bufferView],e.next=7,this.getBuffer(a.buffer,r);case 7:return o=e.sent,s=_e[u.type],c=Te[u.componentType],f=s*c,p=a.byteStride||f,e.abrupt("return",{raw:o.buffer,byteStride:p,byteOffset:o.byteOffset+(a.byteOffset||0)+(u.byteOffset||0),entryCount:u.count,isDenselyPacked:p===f,componentCount:s,componentByteSize:c,componentType:u.componentType,min:u.min,max:u.max,normalized:!!u.normalized});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getIndexData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.indices){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.getAccessor(t.indices,r);case 4:if(!(n=e.sent).isDenselyPacked){e.next=14;break}e.t0=n.componentType,e.next=e.t0===b.C.UNSIGNED_BYTE?9:e.t0===b.C.UNSIGNED_SHORT?10:e.t0===b.C.UNSIGNED_INT?11:12;break;case 9:return e.abrupt("return",new Uint8Array(n.raw,n.byteOffset,n.entryCount));case 10:return e.abrupt("return",new Uint16Array(n.raw,n.byteOffset,n.entryCount));case 11:return e.abrupt("return",new Uint32Array(n.raw,n.byteOffset,n.entryCount));case 12:e.next=20;break;case 14:e.t1=n.componentType,e.next=e.t1===b.C.UNSIGNED_BYTE?17:e.t1===b.C.UNSIGNED_SHORT?18:e.t1===b.C.UNSIGNED_INT?19:20;break;case 17:return e.abrupt("return",X(this._wrapAccessor(S.d,n)));case 18:return e.abrupt("return",X(this._wrapAccessor(S.g,n)));case 19:return e.abrupt("return",X(this._wrapAccessor(S.B,n)));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getPositionData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).errorUnsupportedIf(null==t.attributes.POSITION,"No POSITION vertex data found."),e.next=4,this.getAccessor(t.attributes.POSITION,r);case 4:return u=e.sent,e.abrupt("return",(n.errorUnsupportedIf(u.componentType!==b.C.FLOAT,"Expected type FLOAT for POSITION vertex attribute, but found "+Oe[u.componentType]),n.errorUnsupportedIf(3!==u.componentCount,"POSITION vertex attribute must have 3 components, but found "+u.componentCount.toFixed()),this._wrapAccessor(S.i,u)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNormalData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.NORMAL,"No NORMAL vertex data found."),e.next=4,this.getAccessor(t.attributes.NORMAL,r);case 4:return u=e.sent,e.abrupt("return",(n.errorUnsupportedIf(u.componentType!==b.C.FLOAT,"Expected type FLOAT for NORMAL vertex attribute, but found "+Oe[u.componentType]),n.errorUnsupportedIf(3!==u.componentCount,"NORMAL vertex attribute must have 3 components, but found "+u.componentCount.toFixed()),this._wrapAccessor(S.i,u)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTangentData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.TANGENT,"No TANGENT vertex data found."),e.next=4,this.getAccessor(t.attributes.TANGENT,r);case 4:return u=e.sent,e.abrupt("return",(n.errorUnsupportedIf(u.componentType!==b.C.FLOAT,"Expected type FLOAT for TANGENT vertex attribute, but found "+Oe[u.componentType]),n.errorUnsupportedIf(4!==u.componentCount,"TANGENT vertex attribute must have 4 components, but found "+u.componentCount.toFixed()),new S.c(u.raw,u.byteOffset,u.byteStride,u.byteOffset+u.byteStride*u.entryCount)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTextureCoordinates",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.TEXCOORD_0,"No TEXCOORD_0 vertex data found."),e.next=4,this.getAccessor(t.attributes.TEXCOORD_0,r);case 4:return u=e.sent,e.abrupt("return",(n.errorUnsupportedIf(2!==u.componentCount,"TEXCOORD_0 vertex attribute must have 2 components, but found "+u.componentCount.toFixed()),u.componentType===b.C.FLOAT?this._wrapAccessor(S.u,u):(n.errorUnsupportedIf(!u.normalized,"Integer component types are only supported for a normalized accessor for TEXCOORD_0."),Se(u))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getVertexColors",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this.errorContext).assert(null!=t.attributes.COLOR_0,"No COLOR_0 vertex data found."),e.next=4,this.getAccessor(t.attributes.COLOR_0,r);case 4:if(u=e.sent,n.errorUnsupportedIf(4!==u.componentCount&&3!==u.componentCount,"COLOR_0 attribute must have 3 or 4 components, but found "+u.componentCount.toFixed()),4!==u.componentCount){e.next=14;break}if(u.componentType!==b.C.FLOAT){e.next=8;break}return e.abrupt("return",this._wrapAccessor(S.c,u));case 8:if(u.componentType!==b.C.UNSIGNED_BYTE){e.next=10;break}return e.abrupt("return",this._wrapAccessor(S.x,u));case 10:if(u.componentType!==b.C.UNSIGNED_SHORT){e.next=12;break}return e.abrupt("return",this._wrapAccessor(S.L,u));case 12:e.next=21;break;case 14:if(3!==u.componentCount){e.next=21;break}if(u.componentType!==b.C.FLOAT){e.next=17;break}return e.abrupt("return",this._wrapAccessor(S.i,u));case 17:if(u.componentType!==b.C.UNSIGNED_BYTE){e.next=19;break}return e.abrupt("return",this._wrapAccessor(S.O,u));case 19:if(u.componentType!==b.C.UNSIGNED_SHORT){e.next=21;break}return e.abrupt("return",this._wrapAccessor(S.E,u));case 21:n.errorUnsupported("Unsupported component type for COLOR_0 attribute: "+Oe[u.componentType]);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"hasPositions",value:function(e){return void 0!==e.attributes.POSITION}},{key:"hasNormals",value:function(e){return void 0!==e.attributes.NORMAL}},{key:"hasVertexColors",value:function(e){return void 0!==e.attributes.COLOR_0}},{key:"hasTextureCoordinates",value:function(e){return void 0!==e.attributes.TEXCOORD_0}},{key:"hasTangents",value:function(e){return void 0!==e.attributes.TANGENT}},{key:"getMaterial",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r,n){var u,a,o,s,c,f,p,l,d,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=this.materialCache.get(t.material)){e.next=30;break}return a=null!=t.material?pe(this.json.materials[t.material]):pe(),o=a.pbrMetallicRoughness,s=this.hasVertexColors(t),c=this.getTexture(o.baseColorTexture,r),f=this.getTexture(a.normalTexture,r),p=n?this.getTexture(a.occlusionTexture,r):null,l=n?this.getTexture(a.emissiveTexture,r):null,d=n?this.getTexture(o.metallicRoughnessTexture,r):null,h=null!=t.material?t.material:-1,e.t0=a.alphaMode,e.t1=a.alphaCutoff,e.t2=o.baseColorFactor,e.t3=!!a.doubleSided,e.next=9,c;case 9:return e.t4=e.sent,e.next=12,f;case 12:return e.t5=e.sent,e.t6=a.name,e.t7=h,e.next=17,p;case 17:return e.t8=e.sent,e.next=20,l;case 20:return e.t9=e.sent,e.t10=a.emissiveFactor,e.t11=o.metallicFactor,e.t12=o.roughnessFactor,e.next=26,d;case 26:e.t13=e.sent,e.t14=s,e.t15=a.extras.ESRI_externalColorMixMode,u={alphaMode:e.t0,alphaCutoff:e.t1,color:e.t2,doubleSided:e.t3,colorTexture:e.t4,normalTexture:e.t5,name:e.t6,id:e.t7,occlusionTexture:e.t8,emissiveTexture:e.t9,emissiveFactor:e.t10,metallicFactor:e.t11,roughnessFactor:e.t12,metallicRoughnessTexture:e.t13,hasVertexColors:e.t14,ESRI_externalColorMixMode:e.t15};case 30:return e.abrupt("return",u);case 31:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getTexture",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u,a,o,s,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return this.errorContext.errorUnsupportedIf(0!==(t.texCoord||0),"Only TEXCOORD with index 0 is supported."),n=t.index,u=this.errorContext,a=this.json.textures[n],o=he(null!=a.sampler?this.json.samplers[a.sampler]:{}),u.errorUnsupportedIf(null==a.source,"Source is expected to be defined for a texture."),s=this.json.images[a.source],e.next=8,this._loadTextureImageData(n,a,r);case 8:return c=e.sent,e.abrupt("return",(0,v.ac)(this.textureCache,n,(function(){var e=function(e){return 33071===e||33648===e||10497===e},t=function(e){return u.error("Unexpected TextureSampler WrapMode: ".concat(e,". Using default REPEAT(10497).")),10497};return{data:c,wrapS:e(o.wrapS)?o.wrapS:t(o.wrapS),wrapT:e(o.wrapT)?o.wrapT:t(o.wrapT),minFilter:o.minFilter,name:s.name,id:n}})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNodeTransform",value:function(e){if(void 0===e)return ge;var t=this.nodeTransformCache.get(e);if(!t){var r=this.getNodeTransform(this._getNodeParent(e)),n=this.json.nodes[e];n.matrix?t=(0,w.u)((0,m.e)(),r,n.matrix):n.translation||n.rotation||n.scale?(t=(0,m.r)(r),n.translation&&(0,w.c)(t,t,n.translation),n.rotation&&(we[3]=(0,_.x)(we,n.rotation),(0,w.f)(t,t,we[3],we)),n.scale&&(0,w.i)(t,t,n.scale)):t=r,this.nodeTransformCache.set(e,t)}return t}},{key:"_wrapAccessor",value:function(e,t){return new e(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*(t.entryCount-1)+t.componentByteSize*t.componentCount)}},{key:"_resolveUri",value:function(e){return(0,d.Q)(e,this.baseUri)}},{key:"_getNodeParent",value:function(e){return this.nodeParentMap.get(e)}},{key:"_checkVersionSupported",value:function(){var e=g.r.parse(this.json.asset.version,"glTF");xe.validate(e)}},{key:"_checkRequiredExtensionsSupported",value:function(){var e=this.json,t=this.errorContext;e.extensionsRequired&&0!==e.extensionsRequired.length&&t.errorUnsupported("gltf loader was not able to load unsupported feature. Required extensions: "+e.extensionsRequired.join(", "))}},{key:"_computeNodeParents",value:function(){var e=this;this.json.nodes.forEach((function(t,r){t.children&&t.children.forEach((function(t){e.nodeParentMap.set(t,r)}))}))}},{key:"_loadTextureImageData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r,n){var u,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=this.textureLoaders.get(t))){e.next=3;break}return e.abrupt("return",u);case 3:return a=this._createTextureLoader(r,n),e.abrupt("return",(this.textureLoaders.set(t,a),a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_createTextureLoader",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.json.images[t.source]).uri){e.next=3;break}return e.abrupt("return",this.context.loadImage(this._resolveUri(n.uri),r));case 3:return(u=this.errorContext).errorUnsupportedIf(null==n.bufferView,"Image bufferView must be defined."),u.errorUnsupportedIf(null==n.mimeType,"Image mimeType must be defined."),a=this.json.bufferViews[n.bufferView],e.next=8,this.getBuffer(a.buffer,r);case 8:return o=e.sent,e.abrupt("return",(u.errorUnsupportedIf(null!=a.byteStride,"byteStride not supported for image buffer"),Ae(new Uint8Array(o.buffer,o.byteOffset+(a.byteOffset||0),a.byteLength),n.mimeType)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}],[{key:"load",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n,u,a){var o,s,c,f,p,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,d.X)(u)){t.next=13;break}if("model/gltf-binary"===(o=(0,d.n)(u)).mediaType){t.next=10;break}return t.prev=3,s=JSON.parse(o.isBase64?atob(o.data):o.data),t.abrupt("return",new e(r,n,u,s));case 8:t.prev=8,t.t0=t.catch(3);case 10:if(c=(0,d.Y)(u),!e._isGLBData(c)){t.next=13;break}return t.abrupt("return",this._fromGLBData(r,n,u,c));case 13:if(!u.endsWith(".gltf")){t.next=18;break}return t.next=16,r.loadJSON(u,a);case 16:return f=t.sent,t.abrupt("return",new e(r,n,u,f));case 18:return t.next=20,r.loadBinary(u,a);case 20:if(p=t.sent,!e._isGLBData(p)){t.next=23;break}return t.abrupt("return",this._fromGLBData(r,n,u,p));case 23:return t.next=25,r.loadJSON(u,a);case 25:return l=t.sent,t.abrupt("return",new e(r,n,u,l));case 27:case"end":return t.stop()}}),t,this,[[3,8]])})));return function(e,r,n,u){return t.apply(this,arguments)}}()},{key:"_isGLBData",value:function(e){var t=new ie(e);return t.remainingBytes()>=4&&t.readUint32()===ve}},{key:"_fromGLBData",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n,u,a){var o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._parseGLBData(n,a);case 2:return o=t.sent,t.abrupt("return",new e(r,n,u,o.json,o.binaryData));case 4:case"end":return t.stop()}}),t)})));return function(e,r,n,u){return t.apply(this,arguments)}}()},{key:"_parseGLBData",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,u,a,o,s,c,f,p,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new ie(r),t.assert(n.remainingBytes()>=12,"GLB binary data is insufficiently large."),u=n.readUint32(),a=n.readUint32(),o=n.readUint32(),t.assert(u===ve,"Magic first 4 bytes do not fit to expected GLB value."),t.assert(r.byteLength>=o,"GLB binary data is smaller than header specifies."),t.errorUnsupportedIf(2!==a,"An unsupported GLB container version was detected. Only version 2 is supported."),f=0;case 5:if(!(n.remainingBytes()>=8)){e.next=19;break}if(p=n.readUint32(),l=n.readUint32(),0!==f){e.next=15;break}return t.assert(l===ye,"First GLB chunk must be JSON."),t.assert(p>=0,"No JSON data found."),e.next=12,ke(n.readUint8Array(p));case 12:s=e.sent,e.next=16;break;case 15:1===f?(t.errorUnsupportedIf(l!==me,"Second GLB chunk expected to be BIN."),c=n.readUint8Array(p)):t.warnUnsupported("More than 2 GLB chunks detected. Skipping.");case 16:f+=1;case 17:e.next=5;break;case 19:return e.abrupt("return",(s||t.error("No GLB JSON chunk detected."),{json:s,binaryData:c}));case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),xe=new g.r(2,0,"glTF"),ge=(0,w.g)((0,m.e)(),Math.PI/2),we=(0,T.b)(),_e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},Te=(n={},(0,a.Z)(n,b.C.BYTE,1),(0,a.Z)(n,b.C.UNSIGNED_BYTE,1),(0,a.Z)(n,b.C.SHORT,2),(0,a.Z)(n,b.C.UNSIGNED_SHORT,2),(0,a.Z)(n,b.C.FLOAT,4),(0,a.Z)(n,b.C.UNSIGNED_INT,4),n);function Se(e){switch(e.componentType){case b.C.BYTE:return new S.V(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case b.C.UNSIGNED_BYTE:return new S.A(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case b.C.SHORT:return new S.q(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case b.C.UNSIGNED_SHORT:return new S.w(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case b.C.UNSIGNED_INT:return new S.F(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case b.C.FLOAT:return new S.u(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);default:return void(0,x.n)()}}function ke(e){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new Blob([t]),u=new FileReader;u.onload=function(){var t=u.result;e(JSON.parse(t))},u.onerror=function(e){r(e)},u.readAsText(n)})));case 1:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Ae(e,t){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var u=new Blob([t],{type:r}),a=URL.createObjectURL(u),o=new Image;o.addEventListener("load",(function(){URL.revokeObjectURL(a),"decode"in o?o.decode().then((function(){return e(o)}),(function(){return e(o)})):e(o)})),o.addEventListener("error",(function(e){URL.revokeObjectURL(a),n(e)})),o.src=a})));case 1:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}var Oe={5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5125:"UNSIGNED_INT",5126:"FLOAT"},Ee=0;function Be(e,t){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,a,o,c,f,p,l,d,h,v,x=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.length>2&&void 0!==x[2]?x[2]:{},a=!(x.length>3&&void 0!==x[3])||x[3],e.next=4,be.load(t,Pe,r,n);case 4:return o=e.sent,c="gltf_"+Ee++,f={lods:[],materials:new Map,textures:new Map,meta:Ue(o)},p=!(!o.json.asset.extras||"symbolResource"!==o.json.asset.extras.ESRI_type),l=new Map,e.next=11,Ze(o,function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r,u,s){var p,d,h,v,x,g,w,_,T,S,k,I,A;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=null!==(p=l.get(u))&&void 0!==p?p:0,l.set(u,d+1),h=void 0!==t.mode?t.mode:b.E.TRIANGLES,v=h===b.E.TRIANGLES||h===b.E.TRIANGLE_STRIP||h===b.E.TRIANGLE_FAN?h:null,!(0,y.t)(v)){e.next=5;break}return e.abrupt("return",void Pe.warnUnsupported("Unsupported primitive mode ("+De[h]+"). Skipping primitive."));case 5:if(o.hasPositions(t)){e.next=7;break}return e.abrupt("return",void Pe.warn("Skipping primitive without POSITION vertex attribute."));case 7:return x=o.getPositionData(t,n),g=o.getMaterial(t,n,a),w=o.hasNormals(t)?o.getNormalData(t,n):null,_=o.hasTangents(t)?o.getTangentData(t,n):null,T=o.hasTextureCoordinates(t)?o.getTextureCoordinates(t,n):null,S=o.hasVertexColors(t)?o.getVertexColors(t,n):null,k=o.getIndexData(t,n),e.t0=(0,m.r)(r),e.next=17,x;case 17:if(e.t1=e.sent,!w){e.next=24;break}return e.next=21,w;case 21:e.t2=e.sent,e.next=25;break;case 24:e.t2=null;case 25:if(e.t3=e.t2,!T){e.next=32;break}return e.next=29,T;case 29:e.t4=e.sent,e.next=33;break;case 32:e.t4=null;case 33:if(e.t5=e.t4,!S){e.next=40;break}return e.next=37,S;case 37:e.t6=e.sent,e.next=41;break;case 40:e.t6=null;case 41:if(e.t7=e.t6,!_){e.next=48;break}return e.next=45,_;case 45:e.t8=e.sent,e.next=49;break;case 48:e.t8=null;case 49:return e.t9=e.t8,e.t10={position:e.t1,normal:e.t3,texCoord0:e.t5,color:e.t7,tangent:e.t9},e.next=53,k;case 53:return e.t11=e.sent,e.t12=v,e.t13=Le,e.t14=f,e.next=59,g;case 59:e.t15=e.sent,e.t16=c,e.t17=(0,e.t13)(e.t14,e.t15,e.t16),I={transform:e.t0,attributes:e.t10,indices:e.t11,primitiveType:e.t12,material:e.t17},A=null,(0,y.r)(f.meta)&&(0,y.r)(f.meta.ESRI_lod)&&"screenSpaceRadius"===f.meta.ESRI_lod.metric&&(A=f.meta.ESRI_lod.thresholds[u]),f.lods[u]=f.lods[u]||{parts:[],name:s,lodThreshold:A},f.lods[u].parts[d]=I;case 65:case"end":return e.stop()}}),e)})));return function(t,r,n,u){return e.apply(this,arguments)}}());case 11:d=(0,u.Z)(f.lods);try{for(d.s();!(h=d.n()).done;)(v=h.value).parts=v.parts.filter((function(e){return!!e}))}catch(g){d.e(g)}finally{d.f()}return e.abrupt("return",{model:f,meta:{isEsriSymbolResource:p,uri:o.uri},customMeta:{}});case 14:case"end":return e.stop()}}),e)}))),Ne.apply(this,arguments)}function Ue(e){var t=e.json,r=null;return t.nodes.forEach((function(e){var t=e.extras;(0,y.r)(t)&&(t.ESRI_proxyEllipsoid||t.ESRI_lod)&&(r=t)})),r}function Ze(e,t){return Me.apply(this,arguments)}function Me(){return Me=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,a,o,c,f,p,l,d,h,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v=function(){return v=(0,s.Z)((0,i.Z)().mark((function e(a,o){var s,f,p,l,d,v,y,m,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.nodes[a],f=t.getNodeTransform(a),Pe.warnUnsupportedIf(null!=s.weights,"Morph targets are not supported."),null!=s.mesh){p=n.meshes[s.mesh],l=(0,u.Z)(p.primitives);try{for(l.s();!(d=l.n()).done;)v=d.value,c.push(r(v,f,o,p.name))}catch(i){l.e(i)}finally{l.f()}}y=(0,u.Z)(s.children||[]);try{for(y.s();!(m=y.n()).done;)b=m.value,c.push(h(b,o))}catch(i){y.e(i)}finally{y.f()}case 4:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)},h=function(e,t){return v.apply(this,arguments)},n=t.json,a=n.scenes[n.scene||0].nodes,o=a.length>1,c=[],f=(0,u.Z)(a);try{for(f.s();!(p=f.n()).done;)l=p.value,d=n.nodes[l],c.push(h(l,0)),Re(d)&&!o&&d.extensions.MSFT_lod.ids.forEach((function(e,t){return h(e,t+1)}))}catch(y){f.e(y)}finally{f.f()}return e.next=7,Promise.all(c);case 7:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}function Re(e){return e.extensions&&e.extensions.MSFT_lod&&Array.isArray(e.extensions.MSFT_lod.ids)}function Le(e,t,r){var n=function(t){var n="".concat(r,"_tex_").concat(t&&t.id).concat(t&&t.name?"_"+t.name:"");if(t&&!e.textures.has(n)){var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{data:e,parameters:(0,o.Z)({wrap:(0,o.Z)({s:b.D.REPEAT,t:b.D.REPEAT},t.wrap),noUnpackFlip:!0,mipmap:!1},t)}}(t.data,{wrap:{s:t.wrapS,t:t.wrapT},mipmap:Fe.includes(t.minFilter),noUnpackFlip:!0});e.textures.set(n,u)}return n},u="".concat(r,"_mat_").concat(t.id,"_").concat(t.name);if(!e.materials.has(u)){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.Z)({color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply"},e)}({color:[t.color[0],t.color[1],t.color[2]],opacity:t.color[3],alphaMode:t.alphaMode,alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,colorMixMode:t.ESRI_externalColorMixMode,textureColor:t.colorTexture?n(t.colorTexture):void 0,textureNormal:t.normalTexture?n(t.normalTexture):void 0,textureOcclusion:t.occlusionTexture?n(t.occlusionTexture):void 0,textureEmissive:t.emissiveTexture?n(t.emissiveTexture):void 0,textureMetallicRoughness:t.metallicRoughnessTexture?n(t.metallicRoughnessTexture):void 0,emissiveFactor:[t.emissiveFactor[0],t.emissiveFactor[1],t.emissiveFactor[2]],metallicFactor:t.metallicFactor,roughnessFactor:t.roughnessFactor});e.materials.set(u,a)}return u}var Pe=new ue,Fe=[b.L.LINEAR_MIPMAP_LINEAR,b.L.LINEAR_MIPMAP_NEAREST],De=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"];function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;return"number"==typeof e?t(e):(0,y.W)(e)||(0,y.V)(e)?new Uint32Array(e):e}function Ge(e){var t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);var r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e)for(var u=0,a=0;a<r;a+=1)a%2==0?(n[u++]=a,n[u++]=a+1,n[u++]=a+2):(n[u++]=a+1,n[u++]=a,n[u++]=a+2);else for(var o=0,i=0;i<r;i+=1)if(i%2==0){var s=e[i],c=e[i+1],f=e[i+2];n[o++]=s,n[o++]=c,n[o++]=f}else{var p=e[i+1],l=e[i],d=e[i+2];n[o++]=p,n[o++]=l,n[o++]=d}return n}function Ve(e){var t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);var r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){for(var u=0,a=0;a<r;++a)n[u++]=0,n[u++]=a+1,n[u++]=a+2;return n}for(var o=e[0],i=e[1],s=0,c=0;c<r;++c){var f=e[c+2];n[s++]=o,n[s++]=i,n[s++]=f,i=f}return n}var qe=2.1},52376:function(e,t,r){r.d(t,{r:function(){return i}});var n=r(29439),u=r(15671),a=r(43144),o=r(23132),i=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(0,u.Z)(this,e),this.major=t,this.minor=r,this._context=n}return(0,a.Z)(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major){var t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new o.a(t+"unsupported-version","Required major ".concat(r,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=t.split("."),a=(0,n.Z)(u,2),i=a[0],s=a[1],c=/^\s*\d+\s*$/;if(!i||!i.match||!i.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(c))throw new o.a((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var f=parseInt(i,10),p=parseInt(s,10);return new e(f,p,r)}}]),e}()},64296:function(e,t,r){r.d(t,{A:function(){return l},B:function(){return d},b:function(){return c},d:function(){return f},h:function(){return o},j:function(){return p},k:function(){return h},l:function(){return s},m:function(){return i},v:function(){return a}});var n=r(2760),u=r(44344);function a(e){return e?{origin:(0,n.h)(e.origin),vector:(0,n.h)(e.vector)}:{origin:(0,n.n)(),vector:(0,n.n)()}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return i(e.origin,e.vector,t)}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return(0,n.a)(r.origin,e),(0,n.a)(r.vector,t),r}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return(0,n.a)(r.origin,e),(0,n.e)(r.vector,t,e),r}function c(e,t){var r=(0,n.e)(u.c.get(),t,e.origin),a=(0,n.P)(e.vector,r),o=(0,n.P)(e.vector,e.vector),i=(0,n.o)(a/o,0,1),s=(0,n.e)(u.c.get(),(0,n.q)(u.c.get(),e.vector,i),r);return(0,n.P)(s,s)}function f(e,t,r){return l(e,t,0,1,r)}function p(e,t,r){return(0,n.u)(r,e.origin,(0,n.q)(r,e.vector,t))}function l(e,t,r,a,o){var i=e.vector,s=e.origin,c=(0,n.e)(u.c.get(),t,s),f=(0,n.P)(i,c)/(0,n.v)(i);return(0,n.q)(o,i,(0,n.o)(f,r,a)),(0,n.u)(o,o,e.origin)}function d(e,t){if(v(e,function(e,t){var r=m.get();return r.origin=e,r.vector=t,r}(t.origin,t.direction),!1,y)){var r=y.tA,a=y.pB,o=y.distance2;if(r>=0&&r<=1)return o;if(r<0)return(0,n.p)(e.origin,a);if(r>1)return(0,n.p)((0,n.u)(u.c.get(),e.origin,e.vector),a)}return null}function h(e,t,r){return!!v(e,t,!0,y)&&((0,n.a)(r,y.pA),!0)}function v(e,t,r,a){var o=1e-6,i=e.origin,s=(0,n.u)(u.c.get(),i,e.vector),c=t.origin,f=(0,n.u)(u.c.get(),c,t.vector),p=u.c.get(),l=u.c.get();if(p[0]=i[0]-c[0],p[1]=i[1]-c[1],p[2]=i[2]-c[2],l[0]=f[0]-c[0],l[1]=f[1]-c[1],l[2]=f[2]-c[2],Math.abs(l[0])<o&&Math.abs(l[1])<o&&Math.abs(l[2])<o)return!1;var d=u.c.get();if(d[0]=s[0]-i[0],d[1]=s[1]-i[1],d[2]=s[2]-i[2],Math.abs(d[0])<o&&Math.abs(d[1])<o&&Math.abs(d[2])<o)return!1;var h=p[0]*l[0]+p[1]*l[1]+p[2]*l[2],v=l[0]*d[0]+l[1]*d[1]+l[2]*d[2],y=p[0]*d[0]+p[1]*d[1]+p[2]*d[2],m=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],b=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*m-v*v;if(Math.abs(b)<o)return!1;var x=(h*v-y*m)/b,g=(h+v*x)/m;r&&(x=(0,n.o)(x,0,1),g=(0,n.o)(g,0,1));var w=u.c.get(),_=u.c.get();return w[0]=i[0]+x*d[0],w[1]=i[1]+x*d[1],w[2]=i[2]+x*d[2],_[0]=c[0]+g*l[0],_[1]=c[1]+g*l[1],_[2]=c[2]+g*l[2],a.tA=x,a.tB=g,a.pA=w,a.pB=_,a.distance2=(0,n.p)(w,_),!0}var y={tA:0,tB:0,pA:(0,n.n)(),pB:(0,n.n)(),distance2:0},m=new u.s((function(){return{origin:null,vector:null}}))},32990:function(e,t,r){r.d(t,{c:function(){return a},e:function(){return n},r:function(){return u},u:function(){return o}});r(75610);function n(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function u(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function a(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},84192:function(e,t,r){function n(){return[0,0]}function u(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=[0,0],r=Math.min(2,e.length),n=0;n<r;++n)t[n]=e[n];return t}function i(e,t){return new Float64Array(e,t,2)}function s(){return[0,0]}function c(){return a(1,1)}function f(){return a(1,0)}function p(){return a(0,1)}r.d(t,{e:function(){return o},f:function(){return l},i:function(){return d},n:function(){return n},o:function(){return i},r:function(){return a},t:function(){return u}});var l=[0,0],d=c(),h=f(),v=p();Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:u,fromValues:a,fromArray:o,createView:i,zeros:s,ones:c,unitX:f,unitY:p,ZEROS:l,ONES:d,UNIT_X:h,UNIT_Y:v},Symbol.toStringTag,{value:"Module"}))},44344:function(e,t,r){r.d(t,{c:function(){return m},f:function(){return x},o:function(){return g},r:function(){return b},s:function(){return l},t:function(){return y}});var n=r(15671),u=r(43144),a=r(23132),o=r(48561),i=r(71573),s=r(57952),c=r(84192),f=r(2760),p=r(3969),l=function(){function e(t){(0,n.Z)(this,e),this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}return(0,u.Z)(e,[{key:"get",value:function(){var e=this;return 0===this._itemsPtr&&(0,a.aa)((function(){return e._reset()})),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}},{key:"_reset",value:function(){var e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*d);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}},{key:"_grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this._items.length,d));e++)this._items.push(this.allocator())}}]),e}(),d=1024,h=function(){function e(t,r,u){(0,n.Z)(this,e),this.itemByteSize=t,this.itemCreate=r,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(u/this.itemByteSize)}return(0,u.Z)(e,[{key:"get",value:function(){var e=this;0===this._itemsPtr&&(0,a.aa)((function(){return e._reset()}));for(var t=Math.floor(this._itemsPtr/this._itemsPerBuffer);this._buffers.length<=t;){for(var r=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize),n=0;n<this._itemsPerBuffer;++n)this._items.push(this.itemCreate(r,n*this.itemByteSize));this._buffers.push(r)}return this._items[this._itemsPtr++]}},{key:"_reset",value:function(){for(var e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}},{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(16,c.o,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(24,f.y,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(32,p.u,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(72,i.n,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(128,s.n,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(32,i.a,t)}}]),e}(),v=4*o.o.KILOBYTES,y=h.createVec2f64(),m=h.createVec3f64(),b=h.createVec4f64();h.createMat3f64();var x=h.createMat4f64(),g=h.createQuatf64()}}]);
//# sourceMappingURL=1349.477a040b.chunk.js.map