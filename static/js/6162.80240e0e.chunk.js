"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[6162],{76162:function(e,t,r){r.r(t);var n=r(74165),a=r(37762),u=r(15861),s=r(15671),i=r(43144),o=r(23132),c=r(75610),p=r(30709),h=r(61495),l=r(86548),f=r(83712),y=r(20880),d=r(36659),g=r(21041),v=r(56069),_=r(55827),m=(r(21583),r(70441),r(30604),r(80262),r(36460),r(33642),r(80175),r(72820),r(78311),r(2760),r(62268),r(18392),r(86068),r(75370),r(63022),r(44455),r(57714),r(61340),r(33703),r(69953),r(7513),r(25316),r(1241),r(91204),r(73554),r(60912),r(47626),r(81019),r(68826),r(61212),r(29709),r(78674),r(66307),r(50448),r(22144),r(75955),r(50526),r(14739),r(10780),r(14181),r(77470),r(36551),r(43124),r(69797),function(){function e(){var t=this;(0,s.Z)(this,e),this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=function(){var e=(0,u.Z)((0,n.Z)().mark((function e(r){var u,s,i,l,y,_,m,w,x,Z,k;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t._queryEngine.objectIdField,e.next=3,(0,v.K)(t._getFeatureUrl,t._featureType.typeName,t._getFeatureOutputFormat,{customParameters:t._customParameters,dateFields:t._queryEngine.fieldsIndex.dateFields.map((function(e){return e.name})),signal:r});case 3:return s=e.sent,e.next=6,(0,d.O)(s);case 6:if((0,o.H)(r),i=(0,d.L)(s,{geometryType:t._queryEngine.geometryType,hasZ:!1,objectIdField:u}),!(0,p.E)(t._queryEngine.spatialReference,p.n)){l=(0,a.Z)(i);try{for(l.s();!(y=l.n()).done;)_=y.value,(0,c.r)(_.geometry)&&(_.geometry=(0,h.t)((0,f.g)((0,h.n)(_.geometry,t._queryEngine.geometryType,!1,!1),p.n,t._queryEngine.spatialReference)))}catch(n){l.e(n)}finally{l.f()}}m=1,w=(0,a.Z)(i);try{for(w.s();!(x=w.n()).done;)Z=x.value,k={},(0,g.m)(t._fieldsIndex,k,Z.attributes,!0),Z.attributes=k,null==Z.attributes[u]&&(Z.objectId=Z.attributes[u]=m++)}catch(n){w.e(n)}finally{w.f()}return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return(0,i.Z)(e,[{key:"destroy",value:function(){var e;null!==(e=this._queryEngine)&&void 0!==e&&e.destroy(),this._queryEngine=null}},{key:"load",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t,r){var a,u,s,i,p,h,f,d,g;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getFeatureUrl,u=t.getFeatureOutputFormat,s=t.spatialReference,i=t.fields,p=t.geometryType,h=t.featureType,f=t.objectIdField,d=t.customParameters,this._featureType=h,this._customParameters=d,this._getFeatureUrl=a,this._getFeatureOutputFormat=u,this._fieldsIndex=new _.d(i),e.next=8,this._checkProjection(s);case 8:return(0,o.H)(r),this._queryEngine=new y.Y({fields:i,geometryType:p,hasM:!1,hasZ:!1,objectIdField:f,spatialReference:s,timeInfo:null,featureStore:new l.u({geometryType:p,hasM:!1,hasZ:!1})}),e.next=12,this._snapshotFeatures((0,c.e)(r.signal));case 12:return g=e.sent,e.abrupt("return",(this._queryEngine.featureStore.addMany(g),{extent:this._queryEngine.fullExtent}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new o.a("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var t,r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var t,r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var t,r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var t,r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(t,r.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"querySnapping",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){var r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(t,r.signal));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){var r,a=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._customParameters=t,null!==(r=this._snapshotTask)&&void 0!==r&&r.abort(),this._snapshotTask=(0,o.al)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){a._queryEngine.featureStore.clear(),e&&a._queryEngine.featureStore.addMany(e)}),(function(e){a._queryEngine.featureStore.clear(),(0,o.u)(e)||o.s.getLogger("esri.layers.WFSLayer").error(new o.a("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.abrupt("return",{extent:this._queryEngine.fullExtent});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitSnapshotComplete",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_checkProjection",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.f)(p.n,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new o.a("unsupported-projection","Projection not supported",{spatialReference:t});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}());t.default=m}}]);
//# sourceMappingURL=6162.80240e0e.chunk.js.map