"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[8018],{77196:function(e,t,r){r.d(t,{o:function(){return c},s:function(){return p}});var n=r(43144),i=r(15671),a=r(97326),o=r(60136),u=r(29388),s=r(23132),l=0,p=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o)),Object.defineProperty((0,a.Z)(e),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l++}),e}return(0,n.Z)(r)}(e);return t=(0,s.e)([(0,s.n)("esri.core.Identifiable")],t)},c=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r)}(p(function(){return(0,n.Z)((function e(){(0,i.Z)(this,e)}))}()));c=(0,s.e)([(0,s.n)("esri.core.Identifiable")],c)},72763:function(e,t,r){r.d(t,{b:function(){return k}});var n=r(74165),i=r(15671),a=r(43144),o=r(60136),u=r(29388),s=r(15861),l=r(23132),p=(r(91204),r(57714)),c=r(80175),f=r(77196),y=r(79611),v=r(75610),h=r(80262),d=r(30709),g=l.s.getLogger("esri.layers.support.fromPortalItem");function m(){return m=(0,s.Z)((0,n.Z)().mark((function e(t){var i,a,o,u,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([r.e(1340),r.e(3022),r.e(8854),r.e(6498),r.e(9737)]).then(r.bind(r,76498));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromItem(i);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),o=i&&i.portalItem,u=o&&o.id||"unset",s=o&&o.portal&&o.portal.url||v.b.portalUrl,g.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+u+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),m.apply(this,arguments)}var b=0,Z=function(e){(0,o.Z)(c,e);var t=(0,u.Z)(c);function c(){var e;return(0,i.Z)(this,c),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new h.M(-180,-90,180,90,d.k.WGS84),e.id=Date.now().toString(16)+"-layer-"+b++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=d.k.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return(0,a.Z)(c,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var r,n;(0,l.u)(t)||l.s.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!==(r=e.title)&&void 0!==r?r:"no title","', id: '").concat(null!==(n=e.id)&&void 0!==n?n:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?(0,p.j)(e):null}},{key:"fetchAttributionData",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,(0,p.U)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new l.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?{url:t}:t,e.next=3,Promise.all([r.e(8854),r.e(8201)]).then(r.bind(r,38201));case 3:return e.abrupt("return",e.sent.fromUrl(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(e){return function(e){return m.apply(this,arguments)}(e)}}]),c}(c.n.EventedMixin((0,f.s)(y.m)));(0,l.e)([(0,l.d)({type:String})],Z.prototype,"attributionDataUrl",void 0),(0,l.e)([(0,l.d)({type:h.M})],Z.prototype,"fullExtent",void 0),(0,l.e)([(0,l.d)({readOnly:!0})],Z.prototype,"hasAttributionData",null),(0,l.e)([(0,l.d)({type:String,clonable:!1})],Z.prototype,"id",void 0),(0,l.e)([(0,l.d)({type:Boolean,nonNullable:!0})],Z.prototype,"legendEnabled",void 0),(0,l.e)([(0,l.d)({type:["show","hide","hide-children"]})],Z.prototype,"listMode",void 0),(0,l.e)([(0,l.d)({type:Number,range:{min:0,max:1},nonNullable:!0})],Z.prototype,"opacity",void 0),(0,l.e)([(0,l.d)({clonable:!1})],Z.prototype,"parent",void 0),(0,l.e)([(0,l.d)({readOnly:!0})],Z.prototype,"parsedUrl",null),(0,l.e)([(0,l.d)({type:Boolean})],Z.prototype,"popupEnabled",void 0),(0,l.e)([(0,l.d)({type:Boolean})],Z.prototype,"attributionVisible",void 0),(0,l.e)([(0,l.d)({type:d.k})],Z.prototype,"spatialReference",void 0),(0,l.e)([(0,l.d)({type:String})],Z.prototype,"title",void 0),(0,l.e)([(0,l.d)({readOnly:!0,json:{read:!1}})],Z.prototype,"type",void 0),(0,l.e)([(0,l.d)()],Z.prototype,"url",void 0),(0,l.e)([(0,l.d)({type:Boolean,nonNullable:!0})],Z.prototype,"visible",void 0);var k=Z=(0,l.e)([(0,l.n)("esri.layers.Layer")],Z)},9575:function(e,t,r){r.d(t,{O:function(){return m},S:function(){return b}});var n=r(37762),i=r(97326),a=r(60136),o=r(29388),u=r(93433),s=r(15671),l=r(43144),p=r(23132),c=r(75610),f=r(70441),y=function(){function e(){(0,s.Z)(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(p.a1),this._values=new Map,this.multipleOriginsSupported=!0}return(0,l.Z)(e,[{key:"clone",value:function(t){var r=this,n=new e,i=this._originStores[p.O.DEFAULTS];i&&i.forEach((function(e,t){n.set(t,(0,c.m)(e),p.O.DEFAULTS)}));for(var a=function(e){var i=r._originStores[e];i&&i.forEach((function(r,i){t&&t.has(i)||n.set(i,(0,c.m)(r),e)}))},o=p.O.SERVICE;o<p.a1;o++)a(o);return n}},{key:"get",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?(0,u.Z)(t.keys()):[]}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.O.USER,n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||(0,c.q)(this._propertyOriginMap.get(e))<=r){var i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.O.USER,r=this._originStores[t];if(r){var n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var i=t-1;i>=0;i--){var a=this._originStores[i];if(a&&a.has(e)){this._values.set(e,a.get(e)),this._propertyOriginMap.set(e,i);break}}}return n}}},{key:"has",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],n=r&&r.get(e),i=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),i!==n}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||p.O.DEFAULTS}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),v=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];e=t.call.apply(t,[this].concat(a));var u=(0,c.q)((0,p.Q)((0,i.Z)(e))),l=u.store,v=new y;return u.store=v,(0,f.e)(u,l,v),e}return(0,l.Z)(r,[{key:"read",value:function(e,t){(0,f.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var r=h(this),n=(0,p.X)(t);if("string"==typeof e)return r.get(e,n);var i={};return e.forEach((function(e){i[e]=r.get(e,n)})),i}},{key:"originOf",value:function(e){return(0,p.a2)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return h(this).originOf(e)}},{key:"revert",value:function(e,t){var r=h(this),n=(0,p.X)(t),i=(0,p.Q)(this);("string"==typeof e?"*"===e?r.keys(n):[e]:e).forEach((function(e){i.invalidate(e),r.revert(e,n),i.commit(e)}))}}]),r}(e);return t=(0,p.e)([(0,p.n)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function h(e){return(0,p.Q)(e).store}var d=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,l.Z)(r)}(v(p.y));d=(0,p.e)([(0,p.n)("esri.core.ReadOnlyMultiOriginJSONSupport")],d);function g(e){return(0,p.Q)(e).store}var m=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){(0,s.Z)(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.call.apply(t,[this].concat(n))}return(0,l.Z)(r)}(function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){(0,s.Z)(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.call.apply(t,[this].concat(n))}return(0,l.Z)(r,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return g(this).delete(e,(0,p.X)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,f.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,r){(0,p.Q)(this).setAtOrigin(e,t,(0,p.X)(r))}},{key:"removeOrigin",value:function(e){var t,r=g(this),i=(0,p.X)(e),a=r.keys(i),o=(0,n.Z)(a);try{for(o.s();!(t=o.n()).done;){var u=t.value;r.originOf(u)===i&&r.set(u,r.get(u,i),p.O.USER)}}catch(s){o.e(s)}finally{o.f()}}},{key:"updateOrigin",value:function(e,t){for(var r=g(this),n=(0,p.X)(t),i=this.get(e),a=n+1;a<p.a1;++a)r.delete(e,a);r.set(e,i,n)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),r}(e);return(t=(0,p.e)([(0,p.n)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t}(v(e)));return t=(0,p.e)([(0,p.n)("esri.core.MultiOriginJSONSupport")],t)},b=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,s.Z)(this,r),t.apply(this,arguments)}return(0,l.Z)(r)}(m(p.y));b=(0,p.e)([(0,p.n)("esri.core.MultiOriginJSONSupport")],b)},95254:function(e,t,r){r.d(t,{v:function(){return Z}});var n=r(1413),i=r(74165),a=r(15861),o=r(15671),u=r(43144),s=r(11752),l=r(61120),p=r(60136),c=r(29388),f=r(23132),y=r(57714),v=r(38304),h=r(75610),d=r(30709),g=r(79611),m=r(61099),b=f.s.getLogger("esri.layers.mixins.PortalLayer"),Z=function(e){var t=function(e){(0,p.Z)(d,e);var t=(0,c.Z)(d);function d(){var e;return(0,o.Z)(this,d),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e.userHasEditingPrivileges=!0,e}return(0,u.Z)(d,[{key:"destroy",value:function(){var e;null!==(e=this.portalItem)&&void 0!==e&&e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,r){if(t.itemId)return new m.default({id:t.itemId,portal:r&&r.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,Promise.all([r.e(8854),r.e(277)]).then(r.bind(r,50277)).then((function(e){return e.l}));case 4:return a=e.sent,(0,f.H)(n),e.next=8,a.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},n);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),(0,f.u)(e.t0)||b.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"finishLoadEditablePortalLayer",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this._fetchUserHasEditingPrivileges(t).catch((function(e){return(0,f.M)(e),!0}));case 3:e.t1=e.sent,e.t0._set.call(e.t0,"userHasEditingPrivileges",e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchUserHasEditingPrivileges",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.url?null===y.a||void 0===y.a?void 0:y.a.findCredential(this.url):null){e.next=3;break}return e.abrupt("return",!0);case 3:if(k.credential!==r){e.next=7;break}e.t0=k.user,e.next=10;break;case 7:return e.next=9,this._fetchEditingUser(t);case 9:e.t0=e.sent;case 10:return n=e.t0,e.abrupt("return",(k.credential=r,k.user=n,(0,h.t)(n)||null==n.privileges||n.privileges.includes("features:user:edit")));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchEditingUser",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n,a,o,u,s,l,p,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=null===(r=this.portalItem)||void 0===r||null===(n=r.portal)||void 0===n?void 0:n.user)){e.next=3;break}return e.abrupt("return",a);case 3:if(null!==(o=y.a.findServerInfo(this.url))&&void 0!==o&&o.owningSystemUrl){e.next=6;break}return e.abrupt("return",null);case 6:if(u="".concat(o.owningSystemUrl,"/sharing/rest"),!(s=g.B.getDefault())||!s.loaded||(0,y.F)(s.restUrl)!==(0,y.F)(u)){e.next=9;break}return e.abrupt("return",s.user);case 9:return l="".concat(u,"/community/self"),p=(0,h.r)(t)?t.signal:null,e.next=13,(0,v.a)((0,y.U)(l,{authMode:"no-prompt",query:{f:"json"},signal:p}));case 13:return c=e.sent,e.abrupt("return",c.ok?g.p.fromJSON(c.value.data):null);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),(0,s.Z)((0,l.Z)(d.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||g.B.getDefault());return r&&i&&!(0,y.N)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new f.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer"),{layer:this})),null):(0,s.Z)((0,l.Z)(d.prototype),"write",this).call(this,e,(0,n.Z)((0,n.Z)({},t),{},{layer:this}))}}]),d}(e);return(0,f.e)([(0,f.d)({type:m.default})],t.prototype,"portalItem",null),(0,f.e)([(0,d.o)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,f.e)([(0,d.r)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,f.e)([(0,f.d)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,f.e)([(0,f.d)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,f.e)([(0,f.n)("esri.layers.mixins.PortalLayer")],t),t},k={credential:null,user:null}},28018:function(e,t,r){r.r(t);var n=r(15671),i=r(43144),a=r(11752),o=r(61120),u=r(60136),s=r(29388),l=r(23132),p=r(9575),c=(r(75610),r(72763)),f=r(95254),y=(r(70441),r(21583),r(91204),r(80262),r(30709),r(36460),r(57714),r(80175),r(77196),r(79611),r(43920),r(38304),r(61099),r(33703),function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).resourceInfo=null,i.type="unknown",i}return(0,i.Z)(r,[{key:"initialize",value:function(){var e=this;this.addResolvingPromise(new Promise((function(t,r){(0,l.B)((function(){var t=e.resourceInfo&&(e.resourceInfo.layerType||e.resourceInfo.type),n="Unknown layer type";t&&(n+=" "+t),r(new l.a("layer:unknown-layer-type",n,{layerType:t}))}))})))}},{key:"read",value:function(e,t){(0,a.Z)((0,o.Z)(r.prototype),"read",this).call(this,{resourceInfo:e},t)}},{key:"write",value:function(){return null}}]),r}((0,f.v)((0,p.O)(c.b))));(0,l.e)([(0,l.d)({readOnly:!0})],y.prototype,"resourceInfo",void 0),(0,l.e)([(0,l.d)({type:["show","hide"]})],y.prototype,"listMode",void 0),(0,l.e)([(0,l.d)({json:{read:!1},readOnly:!0,value:"unknown"})],y.prototype,"type",void 0);var v=y=(0,l.e)([(0,l.n)("esri.layers.UnknownLayer")],y);t.default=v},91204:function(e,t,r){r.d(t,{a:function(){return s},i:function(){return p},t:function(){return l}});var n=r(23132),i=r(80262),a=r(30709),o=r(36460),u=r(57714),s=(0,u.o)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),l=(0,u.o)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),p={base:a.p,key:"type",typeMap:{extent:i.M,multipoint:o.a,point:a.j,polyline:o.m,polygon:o.v}};(0,n.N)(p)}}]);
//# sourceMappingURL=8018.232316fa.chunk.js.map