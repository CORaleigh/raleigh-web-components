"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5289],{57686:function(e,t,r){r.d(t,{s:function(){return a}});var n=r(37762),i=r(15671),s=r(43144),u=r(50165),a=function(){function e(t){(0,i.Z)(this,e),this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}return(0,s.Z)(e,[{key:"entries",get:function(){return this._buffer}},{key:"enqueue",value:function(e){if(this.size===this.maxSize){var t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return this._buffer[(this._start+this.size++)%this.maxSize]=e,null}},{key:"dequeue",value:function(){if(0===this.size)return null;var e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}},{key:"peek",value:function(){return 0===this.size?null:this._buffer[this._start]}},{key:"find",value:function(e){if(0===this.size)return null;var t,r=(0,n.Z)(this._buffer);try{for(r.s();!(t=r.n()).done;){var i=t.value;if((0,u.r)(i)&&e(i))return i}}catch(s){r.e(s)}finally{r.f()}return null}},{key:"clear",value:function(e){for(var t=this.dequeue();(0,u.r)(t);)e&&e(t),t=this.dequeue()}}]),e}()},85289:function(e,t,r){r.r(t);var n=r(74165),i=r(37762),s=r(15671),u=r(43144),a=r(15861),o=r(50165),l=r(79146),c=r(31278),f=r(7671),h=r(29173),p=r(53089),y=r(26784),v=(r(2760),r(96263),r(77322),r(32335),r(78664),r(30594),r(2326),r(35650),r(98643),r(73428),r(13994),r(40133),r(61340),r(61772),r(76375),r(7513),r(10489),r(33530),r(83172),r(79747),r(49961),r(31412),r(57686),r(22494),r(49796),r(87110),r(42),r(52155),r(72577),r(49510),r(18392),r(9330),r(89354),r(4483),r(77639),r(13089),r(39001),r(45578),r(6927),r(3441),r(6819),r(47692),r(26995),r(82909),o.s.getLogger("esri.views.2d.layers.features.support.whereUtils")),d={getAttribute:function(e,t){return e.field(t)}};function m(e,t){return _.apply(this,arguments)}function _(){return _=(0,a.Z)((0,n.Z)().mark((function e(t,i){var s,u,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2637).then(r.bind(r,92637));case 2:return s=e.sent,e.prev=3,(u=s.WhereClause.create(t,i)).isStandardized||(a=new o.a("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",u),v.error(a)),e.abrupt("return",(function(e){var t=e.readArcadeFeature();return u.testFeature(t,d)}));case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",(v.warn("mapview-bad-where-clause","Encountered an error when evaluating where clause",t),function(e){return!0}));case 12:case"end":return e.stop()}}),e,null,[[3,9]])}))),_.apply(this,arguments)}var b=o.s.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter"),g=function(){function e(t){(0,s.Z)(this,e),this._geometryBounds=(0,l.u)(),this._idToVisibility=new Map,this._serviceInfo=t}return(0,u.Z)(e,[{key:"hash",get:function(){return this._hash}},{key:"check",value:function(e){return this._applyFilter(e)}},{key:"clear",value:function(){var e=this._resetAllHiddenIds();return this.update(),{show:e,hide:[]}}},{key:"invalidate",value:function(){var e=this;this._idToVisibility.forEach((function(t,r){e._idToVisibility.set(r,0)}))}},{key:"setKnownIds",value:function(e){var t,r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._idToVisibility.set(n,1)}}catch(s){r.e(s)}finally{r.f()}}},{key:"setTrue",value:function(e){var t=this,r=[],n=[],i=new Set(e);return this._idToVisibility.forEach((function(e,s){var u=!!(1&t._idToVisibility.get(s)),a=i.has(s);!u&&a?r.push(s):u&&!a&&n.push(s),t._idToVisibility.set(s,a?3:0)})),{show:r,hide:n}}},{key:"createQuery",value:function(){var e=this.geometry,t=this.spatialRel,r=this.where,n=this.timeExtent,i=this.objectIds;return p.b.fromJSON({geometry:e,spatialRel:t,where:r,timeExtent:n,objectIds:i})}},{key:"update",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._hash=JSON.stringify(t),e.next=3,(0,h.v)(t,null,r);case 3:return i=e.sent,e.next=6,Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_setAttributeFilter",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.where){e.next=2;break}return e.abrupt("return",(this._clause=null,void(this.where=null)));case 2:return e.next=4,m(t.where,this._serviceInfo.fieldsIndex);case 4:this._clause=e.sent,this.where=t.where;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setIdFilter",value:function(e){this._idsToShow=e&&e.objectIds&&new Set(e.objectIds),this._idsToHide=e&&e.hiddenIds&&new Set(e.hiddenIds),this.objectIds=e&&e.objectIds}},{key:"_setGeometryFilter",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.geometry){e.next=2;break}return e.abrupt("return",(this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null)));case 2:return r=t.geometry,i=t.spatialRel||"esriSpatialRelIntersects",e.next=6,(0,f.v)(i,r,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);case 6:s=e.sent,(0,c.c)(this._geometryBounds,r),this._spatialQueryOperator=s,this.geometry=r,this.spatialRel=i;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setTimeFilter",value:function(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=(0,f.n)(this._serviceInfo.timeInfo,e.timeExtent,y.u);else{var t=new o.a("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",e.timeExtent);b.error(t)}}},{key:"_applyFilter",value:function(e){return this._filterByGeometry(e)&&this._filterById(e)&&this._filterByTime(e)&&this._filterByExpression(e)}},{key:"_filterByExpression",value:function(e){return!this.where||this._clause(e)}},{key:"_filterById",value:function(e){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(e.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(e.getObjectId()))}},{key:"_filterByGeometry",value:function(e){if(!this.geometry)return!0;var t=e.readHydratedGeometry();return!!t&&this._spatialQueryOperator(t)}},{key:"_filterByTime",value:function(e){return!!(0,o.t)(this._timeOperator)||this._timeOperator(e)}},{key:"_resetAllHiddenIds",value:function(){var e=this,t=[];return this._idToVisibility.forEach((function(r,n){1&r||(e._idToVisibility.set(n,1),t.push(n))})),t}}]),e}();t.default=g},7671:function(e,t,r){r.d(t,{I:function(){return T},P:function(){return I},n:function(){return G},t:function(){return F},v:function(){return k}});var n=r(74165),i=r(15861),s=r(37762),u=r(50165),a=r(96263),o=r(78664),l=r(77322),c=r(30594),f=r(2326),h=r(35650),p=r(29173);function y(e,t){return e?t?4:3:t?3:2}function v(e,t,r,n,i){if(!e)return!1;var u,a=y(t,r),o=e.coords,l=e.lengths,c=!1,f=0,h=(0,s.Z)(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;c=d(c,o,a,f,p,n,i),f+=p*a}}catch(v){h.e(v)}finally{h.f()}return c}function d(e,t,r,n,i,s,u){for(var a=e,o=n,l=n,c=n+i*r;l<c;l+=r){(o=l+r)===c&&(o=n);var f=t[l],h=t[l+1],p=t[o],y=t[o+1];(h<u&&y>=u||y<u&&h>=u)&&f+(u-h)/(y-h)*(p-f)<s&&(a=!a)}return a}var m="feature-store:unsupported-query",_={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},b={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},g={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},w={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function S(e){return!0===b[e]}function x(e){return!0===g[(0,o.v)(e)]}function R(e){return!0===w[e]}function k(e,t,n,i,s){if((0,o.c)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var u=(0,c.D)(new f.t,t,!1,!1);return Promise.resolve((function(e){return function(e,t,r,n){return v(e,t,r,n.coords[0],n.coords[1])}(u,!1,!1,e)}))}if((0,o.c)(t)&&"esriGeometryMultipoint"===n){var l=(0,c.D)(new f.t,t,!1,!1);if("esriSpatialRelContains"===e)return Promise.resolve((function(e){return function(e,t,r,n,i,s){var u=y(i,s),a=n.coords,o=n.lengths;if(!o)return!1;for(var l=0,c=0;l<o.length;l++,c+=u)if(!v(e,t,r,a[c],a[c+1]))return!1;return!0}(l,!1,!1,e,i,s)}))}if((0,o.s)(t)&&"esriGeometryPoint"===n&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return Promise.resolve((function(e){return(0,a.r)(t,(0,p.J)(n,i,s,e))}));if((0,o.s)(t)&&"esriGeometryMultipoint"===n&&"esriSpatialRelContains"===e)return Promise.resolve((function(e){return(0,a.i)(t,(0,p.J)(n,i,s,e))}));if((0,o.s)(t)&&"esriSpatialRelIntersects"===e){var h=function(e){return"mesh"===e?a.o:(0,a.Z)(e)}(n);return Promise.resolve((function(e){return h(t,(0,p.J)(n,i,s,e))}))}return Promise.all([r.e(6549),r.e(3111)]).then(r.bind(r,18422)).then((function(r){var u=r[_[e]].bind(null,t.spatialReference,t);return function(e){return u((0,p.J)(n,i,s,e))}}))}function I(e,t,r){return Z.apply(this,arguments)}function Z(){return Z=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.spatialRel,!(a=t.geometry)){e.next=11;break}if(S(s)){e.next=4;break}throw new u.a(m,"Unsupported query spatial relationship",{query:t});case 4:if(!(0,l.I)(a.spatialReference)||!(0,l.I)(i)){e.next=11;break}if(x(a)){e.next=7;break}throw new u.a(m,"Unsupported query geometry type",{query:t});case 7:if(R(r)){e.next=9;break}throw new u.a(m,"Unsupported layer geometry type",{query:t});case 9:if(!t.outSR){e.next=11;break}return e.abrupt("return",(0,h.f)(t.geometry&&t.geometry.spatialReference,t.outSR));case 11:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function T(e){if((0,o.s)(e))return!0;if((0,o.c)(e)){var t,r=(0,s.Z)(e.rings);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(5!==n.length)return!1;if(n[0][0]!==n[1][0]||n[0][0]!==n[4][0]||n[2][0]!==n[3][0]||n[0][1]!==n[3][1]||n[0][1]!==n[4][1]||n[1][1]!==n[2][1])return!1}}catch(i){r.e(i)}finally{r.f()}return!0}return!1}function F(e,t){if(!e)return null;var r=t.featureAdapter,n=e.startTimeField,i=e.endTimeField,s=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(n&&i)t.forEach((function(e){var t=r.getAttribute(e,n),a=r.getAttribute(e,i);null==t||isNaN(t)||(s=Math.min(s,t)),null==a||isNaN(a)||(u=Math.max(u,a))}));else{var a=n||i;t.forEach((function(e){var t=r.getAttribute(e,a);null==t||isNaN(t)||(s=Math.min(s,t),u=Math.max(u,t))}))}return{start:s,end:u}}function G(e,t,r){if(!t||!e)return null;var n=e.startTimeField,i=e.endTimeField;if(!n&&!i)return null;var s=t.start,u=t.end;return null===s&&null===u?null:void 0===s&&void 0===u?function(){return!1}:n&&i?function(e,t,r,n,i){return null!=n&&null!=i?function(s){var u=e.getAttribute(s,t),a=e.getAttribute(s,r);return(null==u||u<=i)&&(null==a||a>=n)}:null!=n?function(t){var i=e.getAttribute(t,r);return null==i||i>=n}:null!=i?function(r){var n=e.getAttribute(r,t);return null==n||n<=i}:void 0}(r,n,i,s,u):function(e,t,r,n){return null!=r&&null!=n&&r===n?function(n){return e.getAttribute(n,t)===r}:null!=r&&null!=n?function(i){var s=e.getAttribute(i,t);return s>=r&&s<=n}:null!=r?function(n){return e.getAttribute(n,t)>=r}:null!=n?function(r){return e.getAttribute(r,t)<=n}:void 0}(r,n||i,s,u)}},29173:function(e,t,r){r.d(t,{J:function(){return S},O:function(){return w},P:function(){return x},U:function(){return d},v:function(){return k},x:function(){return E}});var n=r(74165),i=r(15861),s=r(13994),u=r(50165),a=r(73428),o=r(31278),l=r(78664),c=r(10489),f=r(77322),h=r(30594),p=r(2326),y=r(35650),v=new s.s({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),d=Object.freeze({}),m=new p.t,_=new p.t,b=new p.t,g={esriGeometryPoint:h.G,esriGeometryPolyline:h.L,esriGeometryPolygon:h.C,esriGeometryMultipoint:h._};function w(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.hasZ,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.hasM;if((0,u.t)(t))return null;var s=e.hasZ&&n,a=e.hasM&&i;if(r){var o=(0,h.i)(b,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,i);return(0,h.G)(o,s,a)}return(0,h.G)(t,s,a)}function S(e,t,r,n,i,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r,l=t&&a,c=r&&o,f=(0,u.r)(n)?"coords"in n?n:n.geometry:null;if((0,u.t)(f))return null;if(i){var p=(0,h.f)(_,f,t,r,e,i,a,o);return s&&(p=(0,h.i)(b,p,l,c,e,s)),g[e](p,l,c)}if(s){var y=(0,h.i)(b,f,t,r,e,s,a,o);return g[e](y,l,c)}return(0,h.y)(m,f,t,r,a,o),g[e](m,l,c)}function x(e,t,r){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,u,a,o,l,c,f,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.outFields,u=t.orderByFields,a=t.groupByFieldsForStatistics,o=t.outStatistics,s)for(l=0;l<s.length;l++)s[l]=s[l].trim();if(u)for(c=0;c<u.length;c++)u[c]=u[c].trim();if(a)for(f=0;f<a.length;f++)a[f]=a[f].trim();if(o)for(h=0;h<o.length;h++)o[h].onStatisticField&&(o[h].onStatisticField=o[h].onStatisticField.trim());return e.abrupt("return",(t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),k(t,r,i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,r){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s,a,f,h,p,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(s=t.where,t.where=s=s&&s.trim(),(!s||/^1 *= *1$/.test(s)||r&&r===s)&&(t.where=null),t.geometry){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,Z(t);case 7:return a=e.sent,t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&(f=t.geometry.spatialReference,(a=(0,o.e)(a)).spatialReference=f),t.geometry=a,e.next=12,(0,y.f)(a.spatialReference,i);case 12:return e.next=14,(0,c.L)((0,l.d)(a));case 14:if(h=e.sent[0],!(0,u.t)(h)){e.next=17;break}throw d;case 17:return p=h.toJSON(),e.next=20,(0,y.g)(p,p.spatialReference,i);case 20:if(v=e.sent){e.next=23;break}throw d;case 23:return e.abrupt("return",(v.spatialReference=i,t.geometry=v,t));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,s,u,o,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.geometry,i=t.distance,s=t.units,null!=i&&!("vertexAttributes"in r)){e.next=3;break}return e.abrupt("return",r);case 3:if(u=r.spatialReference,o=s?v.fromJSON(s):(0,a.Z)(u),!u||!(0,f.h)(u)&&!(0,f.f)(u)){e.next=9;break}e.t0=r,e.next=12;break;case 9:return e.next=11,(0,y.f)(u,f.n).then((function(){return(0,y.g)(r,f.n)}));case 11:e.t0=e.sent;case 12:return l=e.t0,e.next=15,F();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t1)(l.spatialReference,l,i,o));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return G.apply(this,arguments)}function G(){return(G=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(6549),r.e(3111)]).then(r.bind(r,18422));case 2:return e.abrupt("return",e.sent.geodesicBuffer);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return e&&P in e?JSON.parse(JSON.stringify(e,A)):e}var P="_geVersion",A=function(e,t){return e!==P?t:void 0}}}]);
//# sourceMappingURL=5289.52b8145c.chunk.js.map