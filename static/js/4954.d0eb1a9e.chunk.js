"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[4954],{44954:function(t,e,i){i.d(e,{A:function(){return G},D:function(){return J},T:function(){return j},W:function(){return O},a:function(){return M},b:function(){return Z},c:function(){return T},f:function(){return b},g:function(){return y},h:function(){return A},i:function(){return x},j:function(){return H},k:function(){return I},o:function(){return g},p:function(){return B},r:function(){return w},s:function(){return k},w:function(){return R},x:function(){return C},y:function(){return F}});var r,n=i(93433),a=i(37762),l=i(29439),s=i(60136),h=i(29388),o=i(43144),u=i(15671),f=i(93661),c=i(48848),p=i(40114),v=(0,o.Z)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.Z)(this,t),this.minValue=e,this.maxValue=i,this.noDataValue=r})),d=r=function(t){(0,s.Z)(i,t);var e=(0,h.Z)(i);function i(t){var r;return(0,u.Z)(this,i),(r=e.call(this,t)).width=null,r.height=null,r.pixelType="f32",r.validPixelCount=null,r.mask=null,r.maskIsAlpha=!1,r.statistics=null,r}return(0,o.Z)(i,[{key:"castPixelType",value:function(t){if(!t)return"f32";var e=t.toLowerCase();return["u1","u2","u4"].includes(e)?e="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(e)||(e="f32"),e}},{key:"getPlaneCount",value:function(){var t;return null===(t=this.pixels)||void 0===t?void 0:t.length}},{key:"addData",value:function(t){var e;if(!t.pixels||t.pixels.length!==this.width*this.height)throw new c.s("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(null!==(e=t.statistics)&&void 0!==e?e:new v)}},{key:"getAsRGBA",value:function(){var t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}},{key:"getAsRGBAFloat",value:function(){var t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}},{key:"updateStatistics",value:function(){var t=this;if(this.pixels){this.statistics=this.pixels.map((function(e){return t._calculateBandStatistics(e,t.mask)}));var e=this.mask,i=0;if((0,f.r)(e))for(var r=0;r<e.length;r++)e[r]&&i++;else i=this.width*this.height;this.validPixelCount=i}}},{key:"clamp",value:function(t){if(t&&"f64"!==t&&"f32"!==t&&this.pixels){var e;switch(t){case"u8":e=[0,255];break;case"u16":e=[0,65535];break;case"u32":e=[0,4294967295];break;case"s8":e=[-128,127];break;case"s16":e=[-32768,32767];break;case"s32":e=[-2147483648,2147483647];break;default:e=[-34e38,34e38]}for(var i,n,a,s=e,h=(0,l.Z)(s,2),o=h[0],u=h[1],f=this.pixels,c=this.width*this.height,p=f.length,v=[],d=0;d<p;d++){a=r.createEmptyBand(t,c),i=f[d];for(var x=0;x<c;x++)n=i[x],a[x]=n>u?u:n<o?o:n;v.push(a)}this.pixels=v,this.pixelType=t}}},{key:"extractBands",value:function(t){var e=this.pixels,i=this.statistics;if((0,f.t)(t)||0===t.length||!e||0===e.length)return this;var n=e.length,a=t.some((function(t){return t>=e.length})),l=n===t.length&&!t.some((function(t,e){return t!==e}));return a||l?this:new r({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:t.map((function(t){return e[t]})),statistics:i&&t.map((function(t){return i[t]}))})}},{key:"clone",value:function(){var t,e=new r({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});(0,f.r)(this.mask)&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0));var i=r.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];var n=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=n?this.pixels[t].slice(0,this.pixels[t].length):new i(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=(0,f.y)(this.statistics[t]);return e}},{key:"_fillFrom8Bit",value:function(t){var e=this.mask,i=this.maskIsAlpha,r=this.pixels;if(t&&r&&r.length){var n,a,l,s;n=a=l=r[0],r.length>=3?(a=r[1],l=r[2]):2===r.length&&(a=r[1]);var h=new Uint32Array(t),o=this.width*this.height;if(n.length===o)if((0,f.r)(e)&&e.length===o)if(i)for(s=0;s<o;s++)e[s]&&(h[s]=e[s]<<24|l[s]<<16|a[s]<<8|n[s]);else for(s=0;s<o;s++)e[s]&&(h[s]=255<<24|l[s]<<16|a[s]<<8|n[s]);else for(s=0;s<o;s++)h[s]=255<<24|l[s]<<16|a[s]<<8|n[s];else c.a.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else c.a.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFromNon8Bit",value:function(t){var e=this.pixels,i=this.mask,r=this.statistics;if(t&&e&&e.length){var n=this.pixelType,l=1,s=0,h=1;if(r&&r.length>0){var o,u=(0,a.Z)(r);try{for(u.s();!(o=u.n()).done;){var p=o.value;if(null!=p.minValue&&(s=Math.min(s,p.minValue)),null!=p.maxValue&&null!=p.minValue){var v=p.maxValue-p.minValue;h=Math.max(h,v)}}}catch(M){u.e(M)}finally{u.f()}l=255/h}else{var d=255;"s8"===n?(s=-128,d=127):"u16"===n?d=65535:"s16"===n?(s=-32768,d=32767):"u32"===n?d=4294967295:"s32"===n?(s=-2147483648,d=2147483647):"f32"===n?(s=-34e38,d=34e38):"f64"===n&&(s=-Number.MAX_VALUE,d=Number.MAX_VALUE),l=255/(d-s)}var x,g,m,y,w,k=new Uint32Array(t),A=this.width*this.height;if((x=g=m=e[0]).length!==A)return c.a.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(e.length>=2)if(g=e[1],e.length>=3&&(m=e[2]),(0,f.r)(i)&&i.length===A)for(y=0;y<A;y++)i[y]&&(k[y]=255<<24|(m[y]-s)*l<<16|(g[y]-s)*l<<8|(x[y]-s)*l);else for(y=0;y<A;y++)k[y]=255<<24|(m[y]-s)*l<<16|(g[y]-s)*l<<8|(x[y]-s)*l;else if((0,f.r)(i)&&i.length===A)for(y=0;y<A;y++)w=(x[y]-s)*l,i[y]&&(k[y]=255<<24|w<<16|w<<8|w);else for(y=0;y<A;y++)w=(x[y]-s)*l,k[y]=255<<24|w<<16|w<<8|w}else c.a.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFrom32Bit",value:function(t){var e,i,r,n,a=this.pixels,l=this.mask;if(!t||!a||!a.length)return c.a.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");e=i=r=a[0],a.length>=3?(i=a[1],r=a[2]):2===a.length&&(i=a[1]);var s=this.width*this.height;if(e.length!==s)return c.a.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var h=0;if((0,f.r)(l)&&l.length===s)for(n=0;n<s;n++)t[h++]=e[n],t[h++]=i[n],t[h++]=r[n],t[h++]=1&l[n];else for(n=0;n<s;n++)t[h++]=e[n],t[h++]=i[n],t[h++]=r[n],t[h++]=1}},{key:"_calculateBandStatistics",value:function(t,e){var i,r=1/0,n=-1/0,a=t.length,l=0;if((0,f.r)(e))for(i=0;i<a;i++)e[i]&&(r=(l=t[i])<r?l:r,n=l>n?l:n);else for(i=0;i<a;i++)r=(l=t[i])<r?l:r,n=l>n?l:n;return new v(r,n)}}],[{key:"createEmptyBand",value:function(t,e){return new(r.getPixelArrayConstructor(t))(e)}},{key:"getPixelArrayConstructor",value:function(t){var e;switch(t){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":e=Float32Array;break;case"f64":e=Float64Array}return e}}]),i}(p.l);(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"width",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"height",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"pixelType",void 0),(0,c.e)([(0,c.c)("pixelType")],d.prototype,"castPixelType",null),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"validPixelCount",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"mask",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"maskIsAlpha",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"pixels",void 0),(0,c.e)([(0,c.y)({json:{write:!0}})],d.prototype,"statistics",void 0);var x,g,m,y=d=r=(0,c.e)([(0,c.n)("esri.layers.support.PixelBlock")],d);function w(t){return(0,f.r)(t)&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0}function k(t,e){if(null===e||void 0===e||!e.length||!w(t))return t;var i=t.pixels.length;return e&&e.some((function(t){return t>=i}))||1===i&&1===e.length&&0===e[0]?t:i!==e.length||e.some((function(t,e){return t!==e}))?new y({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:e.map((function(e){return t.pixels[e]})),statistics:t.statistics&&e.map((function(e){return t.statistics[e]}))}):t}function A(t){if(null===t||void 0===t||!t.length||t.some((function(t){return!w(t)})))return null;if(1===t.length)return(0,f.r)(t[0])?t[0].clone():null;var e=t,i=e[0],r=i.width,a=i.height,l=i.pixelType;if(e.some((function(t){return t.width!==r||t.height!==a})))return null;var s=e.map((function(t){return t.mask})).filter((function(t){return null!=t})),h=null;s.length&&((h=new Uint8Array(r*a)).set(s[0]),s.length>1&&S(s.slice(1),h));var o=[];e.forEach((function(t){var e=t.pixels;return o.push.apply(o,(0,n.Z)(e))}));var u=e.map((function(t){return t.statistics})).filter((function(t){return null===t||void 0===t?void 0:t.length})),c=[];return u.forEach((function(t){return c.push.apply(c,(0,n.Z)(t))})),new y({pixelType:l,width:r,height:a,mask:h,pixels:o,statistics:c.length?c:null})}function M(t){if(t){var e=t.colormap;if(e&&0!==e.length){var i=e.sort((function(t,e){return t[0]-e[0]})),r=0;i[0][0]<0&&(r=i[0][0]);var n,a=Math.max(256,i[i.length-1][0]-r+1),l=new Uint8Array(4*a),s=[],h=0,o=0,u=5===i[0].length;if(a>65536)return i.forEach((function(t){s[t[0]-r]=u?t.slice(1):t.slice(1).concat([255])})),{indexed2DColormap:s,offset:r,alphaSpecified:u};if(t.fillUnspecified)for(h=(n=i[o])[0]-r;h<a;h++)l[4*h]=n[1],l[4*h+1]=n[2],l[4*h+2]=n[3],l[4*h+3]=u?n[4]:255,h===n[0]-r&&(n=o===i.length-1?n:i[++o]);else for(h=0;h<i.length;h++)l[o=4*((n=i[h])[0]-r)]=n[1],l[o+1]=n[2],l[o+2]=n[3],l[o+3]=u?n[4]:255;return{indexedColormap:l,offset:r,alphaSpecified:u}}}}function b(t,e){if(!w(t))return t;if(!e||!e.indexedColormap&&!e.indexed2DColormap)return t;var i=t.clone(),r=i.pixels,n=i.mask,a=i.width*i.height;if(1!==r.length)return t;var l,s=e.indexedColormap,h=e.indexed2DColormap,o=e.offset,u=e.alphaSpecified,c=0,p=r[0],v=new Uint8Array(p.length),d=new Uint8Array(p.length),x=new Uint8Array(p.length),g=0;if(s){var m=s.length-1;if((0,f.r)(n))for(c=0;c<a;c++)n[c]&&((g=4*(p[c]-o))<o||g>m?n[c]=0:(v[c]=s[g],d[c]=s[g+1],x[c]=s[g+2],n[c]=s[g+3]));else{for(n=new Uint8Array(a),c=0;c<a;c++)(g=4*(p[c]-o))<o||g>m?n[c]=0:(v[c]=s[g],d[c]=s[g+1],x[c]=s[g+2],n[c]=s[g+3]);i.mask=n}}else if(h)if((0,f.r)(n))for(c=0;c<a;c++)n[c]&&(l=h[p[c]],v[c]=l[0],d[c]=l[1],x[c]=l[2],n[c]=l[3]);else{for(n=new Uint8Array(a),c=0;c<a;c++)l=h[p[c]],v[c]=l[0],d[c]=l[1],x[c]=l[2],n[c]=l[3];i.mask=n}return i.pixels=[v,d,x],i.statistics=null,i.pixelType="u8",i.maskIsAlpha=u,i}function T(t,e){if(!w(t))return null;var i=t.pixels,r=t.mask,n=i.length,a=e.lut,l=e.offset;a&&1===a[0].length&&(a=i.map((function(){return a})));for(var s=[],h=e.outputPixelType||"u8",o=0;o<n;o++){var u=U(i[o],r,a[o],l||0,h);s.push(u)}var f=new y({width:t.width,height:t.height,pixels:s,mask:r,pixelType:h});return f.updateStatistics(),f}function U(t,e,i,r,n){var a=t.length,l=y.createEmptyBand(n,a);if(e)for(var s=0;s<a;s++)e[s]&&(l[s]=i[t[s]-r]);else for(var h=0;h<a;h++)l[h]=i[t[h]-r];return l}function B(t,e){if(!w(t))return null;var i,r,n,a,l,s,h=t.clone(),o=h.pixels,u=h.width*h.height,f=e.length,c=Math.floor(f/2),p=e[Math.floor(c)],v=o[0],d=!1,x=new Uint8Array(u),g=new Uint8Array(u),m=new Uint8Array(u),y=h.mask,k=4===e[0].mappedColor.length;for(y||((y=new Uint8Array(u)).fill(k?255:1),h.mask=y),l=0;l<u;l++)if(y[l]){for(i=v[l],d=!1,s=c,r=p,n=0,a=f-1;a-n>1;){if(i===r.value){d=!0;break}i>r.value?n=s:a=s,s=Math.floor((n+a)/2),r=e[Math.floor(s)]}d||(i===e[n].value?(r=e[n],d=!0):i===e[a].value?(r=e[a],d=!0):i<e[n].value?(d=!1,r=null):i>e[n].value&&(i<e[a].value?(r=e[n],d=!0):a===f-1?(d=!1,r=null):(r=e[a],d=!0))),d?(x[l]=r.mappedColor[0],g[l]=r.mappedColor[1],m[l]=r.mappedColor[2],y[l]=r.mappedColor[3]):x[l]=g[l]=m[l]=y[l]=0}return h.pixels=[x,g,m],h.mask=y,h.pixelType="u8",h.maskIsAlpha=k,h}function C(t,e){if(!w(t))return null;var i=t.width,r=t.height,n=e.inputRanges,a=e.outputValues,l=e.outputPixelType,s=e.noDataRanges,h=e.allowUnmatched,o=t.pixels[0],u=y.createEmptyBand(l,o.length);h&&u.set(o);for(var f=t.mask,c=n.length/2,p=0;p<r;p++)for(var v=0;v<i;v++){var d=p*i+v;if(!f||f[d])for(var x=o[d],g=c-1;g>=0;g--)if(x>=n[2*g]&&x<=n[2*g+1]){u[d]=a[g];break}}var m=f;if(null!==s&&void 0!==s&&s.length){m=new Uint8Array(i*r),f&&m.set(f);for(var k=0;k<r;k++)for(var A=0;A<i;A++){var M=k*i+A;if(!f||f[M])for(var b=o[M],T=0;T<c;T+=2)if(b>=s[T]&&b<=s[T+1]){u[M]=0,m[M]=0;break}}}return new y({width:i,height:r,pixelType:l,pixels:[u],mask:m})}function P(t,e,i,r){for(var n=null!=i&&i.length>=2?new Set(i):null,a=1===(null===i||void 0===i?void 0:i.length)?i[0]:null,l=!(null===e||void 0===e||!e.length),s=0;s<t.length;s++)if(r[s]){var h=t[s];if(l){for(var o=!1,u=0;u<e.length;u+=2)if(h>=e[u]&&h<=e[u+1]){o=!0;break}o||(r[s]=0)}r[s]&&(h===a||(null===n||void 0===n?void 0:n.has(h)))&&(r[s]=0)}}function _(t,e){for(var i=t[0].length,r=0;r<i;r++)if(e[r]){for(var n=!1,a=0;a<t.length;a++)if(t[a][r]){n=!0;break}n||(e[r]=0)}}function S(t,e){for(var i=t[0].length,r=0;r<i;r++)if(e[r]){for(var n=!1,a=0;a<t.length;a++)if(0===t[a][r]){n=!0;break}n&&(e[r]=0)}}function F(t,e){if(!w(t))return null;var i=t.width,r=t.height,n=t.pixels,a=i*r,l=new Uint8Array(a);t.mask?l.set(t.mask):l.fill(255);var s=n.length,h=e.includedRanges,o=e.noDataValues,u=e.outputPixelType,f=e.matchAll,c=e.lookup;if(c){for(var p=[],v=0;v<s;v++){var d=U(n[v],l,c.lut,c.offset||0,"u8");p.push(d)}1===p.length?l.set(p[0]):f?_(p,l):S(p,l)}else if(f){for(var x=[],g=0;g<s;g++){var m=new Uint8Array(a);m.set(l),P(n[g],h,o,m),x.push(m)}1===x.length?l.set(x[0]):_(x,l)}else for(var k=0;k<s;k++)P(n[k],h,o,l);return new y({width:i,height:r,pixelType:u,pixels:n,mask:l})}function R(t,e,i){if("u8"!==t&&"s8"!==t&&"u16"!==t&&"s16"!==t)return null;for(var r=t.includes("16")?65536:256,n=t.includes("s")?-r/2:0,a=y.createEmptyBand(t,r),l=0;l<e.length;l++)for(var s=i[l],h=Math.ceil(e[2*l]-n),o=Math.floor(e[2*l+1]-n),u=h;u<=o;u++)a[u]=s;return{lut:a,offset:n}}function I(t,e,i){if("u8"!==t&&"s8"!==t&&"u16"!==t&&"s16"!==t)return null;var r=t.includes("16")?65536:256,n=t.includes("s")?-r/2:0,a=new Uint8Array(r);if(e)for(var l=0;l<e.length;l++)for(var s=Math.ceil(e[2*l]-n),h=Math.floor(e[2*l+1]-n),o=s;o<=h;o++)a[o]=255;if(i)for(var u=0;u<i.length;u++)a[i[u]-n]=0;return{lut:a,offset:n}}function G(t,e){if(!t||0===t.length)return null;var i=t.find((function(t){return t.pixelBlock}));if(!i||(0,f.t)(i.pixelBlock))return null;var r=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,n=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,a=.01*Math.min(r,n),l=t.sort((function(t,e){return Math.abs(t.extent.ymax-e.extent.ymax)>a?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>a?t.extent.xmin-e.extent.xmin:0})),s=Math.min.apply(null,l.map((function(t){return t.extent.xmin}))),h=Math.min.apply(null,l.map((function(t){return t.extent.ymin}))),o=Math.max.apply(null,l.map((function(t){return t.extent.xmax}))),u=Math.max.apply(null,l.map((function(t){return t.extent.ymax}))),c={x:Math.round((e.xmin-s)/r),y:Math.round((u-e.ymax)/n)},p={width:Math.round((o-s)/r),height:Math.round((u-h)/n)},v={width:Math.round((e.xmax-e.xmin)/r),height:Math.round((e.ymax-e.ymin)/n)};return Math.round(p.width/i.pixelBlock.width)*Math.round(p.height/i.pixelBlock.height)!==l.length||c.x<0||c.y<0||p.width<v.width||p.height<v.height?null:{extent:e,pixelBlock:j(l.map((function(t){return t.pixelBlock})),p,{clipOffset:c,clipSize:v})}}function V(t,e,i,r,n,a){var l=i.block,s=l.width,h=l.height,o=i.offset,u=o.x,f=o.y,c=i.mosaic,p=c.width,v=function(t,e,i,r,n,a,l,s){return{xmin:n<=i*t?0:n<i*t+t?n-i*t:t,ymin:a<=r*e?0:a<r*e+e?a-r*e:e,xmax:n+l<=i*t?0:n+l<i*t+t?n+l-i*t:t,ymax:a+s<=r*e?0:a+s<r*e+e?a+s-r*e:e}}(s,h,r,n,u,f,p,c.height),d=0,x=0;if(a){var g,m=a.hasGCSSShiftTransform?360:null!==(g=a.halfWorldWidth)&&void 0!==g?g:0,y=s*a.resolutionX,w=a.startX+r*y;w<m&&w+y>m?x=a.rightPadding:w>=m&&(d=a.leftMargin-a.rightPadding,x=0)}if(v.xmax-=x,"number"!=typeof e)for(var k=v.ymin;k<v.ymax;k++)for(var A=(n*h+k-f)*p+(r*s-u)+d,M=k*s,b=v.xmin;b<v.xmax;b++)t[A+b]=e[M+b];else for(var T=v.ymin;T<v.ymax;T++)for(var U=(n*h+T-f)*p+(r*s-u)+d,B=v.xmin;B<v.xmax;B++)t[U+B]=e}function j(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.clipOffset,n=i.clipSize,a=i.alignmentInfo,l=i.blockWidths;if(l)return E(t,e,{blockWidths:l});var s=t.find((function(t){return w(t)}));if((0,f.t)(s))return null;for(var h,o,u=n?n.width:e.width,c=n?n.height:e.height,p=s.width,v=s.height,d=e.width/p,x=e.height/v,g={offset:r||{x:0,y:0},mosaic:n||e,block:{width:p,height:v}},m=s.pixelType,k=y.getPixelArrayConstructor(m),A=s.pixels.length,M=[],b=0;b<A;b++){h=new k(u*c);for(var T=0;T<x;T++)for(var U=0;U<d;U++){var B=t[T*d+U];w(B)&&V(h,B.pixels[b],g,U,T,a)}M.push(h)}if(t.some((function(t){return(0,f.t)(t)||(0,f.r)(t.mask)&&t.mask.length>0}))){o=new Uint8Array(u*c);for(var C=0;C<x;C++)for(var P=0;P<d;P++){var _=t[C*d+P],S=(0,f.r)(_)?_.mask:null;(0,f.r)(S)?V(o,S,g,P,C,a):V(o,_?1:0,g,P,C,a)}}var F=new y({width:u,height:c,pixels:M,pixelType:m,mask:o});return F.updateStatistics(),F}function E(t,e,i){var r=t.find((function(t){return(0,f.r)(t)}));if((0,f.t)(r))return null;var n=t.some((function(t){return!(0,f.r)(t)||!!t.mask})),a=e.width,l=e.height,s=n?new Uint8Array(a*l):null,h=i.blockWidths,o=[],u=r.getPlaneCount(),c=y.getPixelArrayConstructor(r.pixelType);if(n)for(var p=0,v=0;p<t.length;v+=h[p],p++){var d=t[p];if(w(d))for(var x=(0,f.e)(d.mask),g=0;g<l;g++)for(var m=0;m<h[p];m++)s[g*a+m+v]=null==x?255:x[g*d.width+m]}for(var k=0;k<u;k++){for(var A=new c(a*l),M=0,b=0;M<t.length;b+=h[M],M++){var T=t[M];if(w(T)){var U=T.pixels[k];if(null!=U)for(var B=0;B<l;B++)for(var C=0;C<h[M];C++)A[B*a+C+b]=U[B*T.width+C]}}o.push(A)}var P=new y({width:a,height:l,mask:s,pixels:o,pixelType:r.pixelType});return P.updateStatistics(),P}function Z(t,e,i){if(!w(t))return null;var r=t.width,n=t.height,a=e.x,l=e.y,s=i.width+a,h=i.height+l;if(a<0||l<0||s>r||h>n)return t;if(0===a&&0===l&&s===r&&h===n)return t;t.mask||(t.mask=new Uint8Array(r*n));for(var o=t.mask,u=0;u<n;u++)for(var f=u*r,c=0;c<r;c++)o[f+c]=u<l||u>=h||c<a||c>=s?0:1;return t.updateStatistics(),t}function L(t){if(!w(t))return null;for(var e=t.clone(),i=t.width,r=t.height,n=t.pixels[0],a=e.pixels[0],l=(0,f.e)(t.mask),s=2;s<r-1;s++){for(var h=new Map,o=s-2;o<s+2;o++)for(var u=0;u<4;u++){var c=o*i+u;N(h,n[c],l?l[c]:1)}a[s*i]=W(h),a[s*i+1]=a[s*i+2]=a[s*i];for(var p=3;p<i-1;p++){var v=(s-2)*i+p+1;N(h,n[v],l?l[v]:1),N(h,n[v=(s-1)*i+p+1],l?l[v]:1),N(h,n[v=s*i+p+1],l?l[v]:1),N(h,n[v=(s+1)*i+p+1],l?l[v]:1),D(h,n[v=(s-2)*i+p-3],l?l[v]:1),D(h,n[v=(s-1)*i+p-3],l?l[v]:1),D(h,n[v=s*i+p-3],l?l[v]:1),D(h,n[v=(s+1)*i+p-3],l?l[v]:1),a[s*i+p]=W(h)}a[s*i+p+1]=a[s*i+p]}for(var d=0;d<i;d++)a[d]=a[i+d]=a[2*i+d],a[(r-1)*i+d]=a[(r-2)*i+d];return e.updateStatistics(),e}function W(t){if(0===t.size)return 0;for(var e=0,i=-1,r=0,n=t.keys(),a=n.next();!a.done;)(r=t.get(a.value))>e&&(i=a.value,e=r),a=n.next();return i}function D(t,e,i){if(0!==i){var r=t.get(e);1===r?t.delete(e):t.set(e,r-1)}}function N(t,e,i){0!==i&&t.set(e,t.has(e)?t.get(e)+1:1)}function X(t,e,i){var r=e.x,n=e.y,a=i.width,l=i.height;if(0===r&&0===n&&l===t.height&&a===t.width)return t;var s=t.width,h=t.height,o=Math.max(0,n),u=Math.max(0,r),c=Math.min(r+a,s),p=Math.min(n+l,h);if(c<0||p<0||!w(t))return null;r=Math.max(0,-r),n=Math.max(0,-n);for(var v=t.pixels,d=a*l,x=v.length,g=[],m=0;m<x;m++){for(var k=v[m],A=y.createEmptyBand(t.pixelType,d),M=o;M<p;M++)for(var b=M*s,T=(M+n-o)*a+r,U=u;U<c;U++)A[T++]=k[b+U];g.push(A)}for(var B=new Uint8Array(d),C=(0,f.e)(t.mask),P=o;P<p;P++)for(var _=P*s,S=(P+n-o)*a+r,F=u;F<c;F++)B[S++]=C?C[_+F]:1;var R=new y({width:i.width,height:i.height,pixelType:t.pixelType,pixels:g,mask:B});return R.updateStatistics(),R}function z(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!w(t))return null;for(var i=t.pixels,r=t.width,n=t.height,a=t.mask,l=t.pixelType,s=[],h=Math.round(r/2),o=Math.round(n/2),u=n-1,c=r-1,p=0;p<i.length;p++){for(var v=i[p],d=y.createEmptyBand(l,h*o),x=0,g=0;g<n;g+=2)for(var m=0;m<r;m+=2){var k=v[g*r+m];if(e){var A=m===c?k:v[g*r+m+1],M=g===u?k:v[g*r+m+r],b=m===c?M:g===u?A:v[g*r+m+r+1];d[x++]=(k+A+M+b)/4}else d[x++]=k}s.push(d)}var T=null;if((0,f.r)(a)){T=new Uint8Array(h*o);for(var U=0,B=0;B<n;B+=2)for(var C=0;C<r;C+=2){var P=a[B*r+C];if(e){var _=C===c?P:a[B*r+C+1],S=B===u?P:a[B*r+C+r],F=C===c?S:B===u?_:a[B*r+C+r+1];T[U++]=P*_*S*F?1:0}else T[U++]=P}}return new y({width:h,height:o,pixelType:l,pixels:s,mask:T})}function O(t,e,i){if(!w(t))return null;for(var r=e.width,n=e.height,a=t.width,l=t.height,s=new Map,h={x:0,y:0},o=null==i?1:1+i,u=t,f=0;f<o;f++){for(var c=Math.ceil(a/r),p=Math.ceil(l/n),v=0;v<p;v++){h.y=v*n;for(var d=0;d<c;d++){h.x=d*r;var x=X(u,h,e);s.set("".concat(f,"/").concat(v,"/").concat(d),x)}}f<o-1&&(u=z(u)),a=Math.round(a/2),l=Math.round(l/2)}return s}function q(t,e,i,r){for(var n,a,l,s,h,o,u,f,c,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,v=t.width,d=t.height,x=e.width,g=e.height,m=r.cols,y=r.rows,w=Math.ceil(x/m-.1/m),k=Math.ceil(g/y-.1/y),A=w*m,M=A*k*y,b=new Float32Array(M),T=new Float32Array(M),U=new Uint32Array(M),B=new Uint32Array(M),C=0,P=0;P<k;P++)for(var _=0;_<w;_++){a=i[n=12*(P*w+_)],l=i[n+1],s=i[n+2],h=i[n+3],o=i[n+4],u=i[n+5];for(var S=0;S<y;S++){C=(P*y+S)*A+_*m,c=(S+.5)/y;for(var F=0;F<S;F++)f=(F+.5)/m,b[C+F]=(a*f+l*c+s)*v-p,T[C+F]=(h*f+o*c+u)*d-p,U[C+F]=Math.round(b[C+F]),B[C+F]=Math.round(T[C+F])}a=i[n+=6],l=i[n+1],s=i[n+2],h=i[n+3],o=i[n+4],u=i[n+5];for(var R=0;R<y;R++){C=(P*y+R)*A+_*m,c=(R+.5)/y;for(var I=R;I<m;I++)f=(I+.5)/m,b[C+I]=(a*f+l*c+s)*v-p,T[C+I]=(h*f+o*c+u)*d-p,U[C+I]=Math.round(b[C+I]),B[C+I]=Math.round(T[C+I])}}return{offsets_x:b,offsets_y:T,offsets_xi:U,offsets_yi:B,gridWidth:A}}function H(t,e){for(var i=e.coefficients,r=e.spacing,n=q(t,t,i,{rows:r[0],cols:r[1]},.5),a=n.offsets_x,l=n.offsets_y,s=n.gridWidth,h=t.width,o=t.height,u=new Float32Array(h*o),f=180/Math.PI,c=0;c<o;c++)for(var p=0;p<h;p++){var v=c*s+p,d=0===c?v:v-s,x=c===o-1?v:v+s,g=a[d]-a[x],m=l[x]-l[d];if(isNaN(g)||isNaN(m))u[c*h+p]=90;else{var y=Math.atan2(m,g)*f;y=(360+y)%360,u[c*h+p]=y}}return u}function J(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nearest";if(!w(t))return null;"majority"===n&&(t=L(t));for(var a=t,l=a.pixels,s=a.mask,h=a.pixelType,o=t.width,u=t.height,c=y.getPixelArrayConstructor(h),p=l.length,v=e.width,d=e.height,x=!1,g=0;g<i.length;g+=3)-1===i[g]&&-1===i[g+1]&&-1===i[g+2]&&(x=!0);for(var m,k,A=q({width:o,height:u},e,i,r,"majority"===n?0:.5),M=A.offsets_x,b=A.offsets_y,T=A.offsets_xi,U=A.offsets_yi,B=A.gridWidth,C=function(t,e,i){for(var r=t instanceof Float32Array||t instanceof Float64Array?0:.5,n=0;n<d;n++){m=n*B;for(var a=0;a<v;a++){if(M[m]<0||b[m]<0)t[n*v+a]=0;else if(i)t[n*v+a]=e[T[m]+U[m]*o];else{var l=Math.floor(M[m]),h=Math.floor(b[m]),u=Math.ceil(M[m]),f=Math.ceil(b[m]),c=M[m]-l,p=b[m]-h;if(!s||s[l+h*o]&&s[l+h*o]&&s[l+f*o]&&s[u+f*o]){var x=(1-c)*e[l+h*o]+c*e[u+h*o],g=(1-c)*e[l+f*o]+c*e[u+f*o];t[n*v+a]=(1-p)*x+p*g+r}else t[n*v+a]=e[T[m]+U[m]*o]}m++}}},P=[],_=0;_<p;_++)C(k=new c(v*d),l[_],"nearest"===n||"majority"===n),P.push(k);var S=new y({width:v,height:d,pixelType:h,pixels:P});if((0,f.r)(s))S.mask=new Uint8Array(v*d),C(S.mask,s,!0);else if(x){S.mask=new Uint8Array(v*d);for(var F=0;F<v*d;F++)S.mask[F]=M[F]<0||b[F]<0?0:1}return S.updateStatistics(),S}(m=x||(x={}))[m.matchAny=0]="matchAny",m[m.matchAll=1]="matchAll",function(t){t[t.bestMatch=0]="bestMatch",t[t.fail=1]="fail"}(g||(g={}))}}]);
//# sourceMappingURL=4954.d0eb1a9e.chunk.js.map