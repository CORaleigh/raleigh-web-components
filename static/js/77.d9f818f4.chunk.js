"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[77],{36584:function(e,t,i){i.d(t,{m:function(){return d}});var n,r=i(15671),a=i(43144),o=i(60136),s=i(29388),l=i(48848),u=i(89794),h=i(40114),c=i(93661),f=n=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).color=new u.l([0,0,0,1]),n}return(0,a.Z)(i,[{key:"clone",value:function(){return new n((0,c.y)({color:this.color}))}}]),i}(h.l);(0,l.e)([(0,l.y)({type:u.l,json:{write:!0}})],f.prototype,"color",void 0);var d=f=n=(0,l.e)([(0,l.n)("esri.webmap.background.ColorBackground")],f)},21932:function(e,t,i){i.r(t),i.d(t,{M:function(){return Je},e:function(){return Ee}});var n=i(29439),r=i(74165),a=i(93433),o=i(1413),s=i(15861),l=i(4942),u=i(11752),h=i(61120),c=i(37762),f=i(97326),d=i(60136),p=i(29388),v=i(15671),y=i(43144),m=i(48848),g=i(64998),_=i(17455),w=i(93314),k=i(90316),x=i(93661),b=i(50690),M=i(77956),T=i(85113),S=i(46817),Z=i(82474),I=i(95249),C=i(3356),P=i(32043),V=i(74384),R=i(15870),O=i(92072),z=i(29048),D=i(13239),E=(i(97880),i(65703)),N=(i(51732),i(5430)),L=i(89794),F=i(36584),q=function(){function e(t,i,n,r){(0,v.Z)(this,e);var a=t.targetGeometry,o=i.targetGeometry;r?"string"==typeof r&&(r=(0,R.r)(r)||R.t.ease):r=R.t.ease,this.easing=r,this.duration=n,this.sCenterX=a.x,this.sCenterY=a.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}return(0,y.Z)(e,[{key:"applyRatio",value:function(e,t){var i,n,r,a,o=this.easing(t);t>=1?(i=this.tCenterX,n=this.tCenterY,r=this.tRotation,a=this.tScale):(i=this.sCenterX+o*this.dCenterX,n=this.sCenterY+o*this.dCenterY,r=this.sRotation+o*this.dRotation,a=this.sScale+o*this.dScale),e.targetGeometry.x=i,e.targetGeometry.y=n,e.scale=a,e.rotation=r}}]),e}(),B=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e)).duration=200,n.transition=null,n.easing=R.t.ease,n.view=null,n.viewpoint=null,n.viewpoint=new _.u({targetGeometry:new Z.w,scale:0,rotation:0}),n._updateTask=(0,m.a7)({postRender:n._postRender.bind((0,f.Z)(n))}),n._updateTask.pause(),n}return(0,y.Z)(i,[{key:"destroy",value:function(){this._updateTask.remove(),this._updateTask=null}},{key:"animate",value:function(e,t,i){var n=this;this.stop();var r=this.viewpoint;(0,P.Z)(r,t),this.transition=new q(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);var a=function(){n.animation===e&&n._updateTask&&("finished"===e.state&&(n.transition.applyRatio(n.viewpoint,1),n.view.state&&(n.view.state.viewpoint=n.viewpoint.clone())),n.animation=null,n.updateFunction=null)};return e.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}},{key:"animateContinous",value:function(e,t){var i=this;this.stop(),this.updateFunction=t,this.viewpoint=e;var n=new P.p({target:e.clone()}),r=function(){i.animation===n&&i._updateTask&&(i.animation=null,i.updateFunction=null)};return n.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}},{key:"_postRender",value:function(e){var t=this.animation;if(t&&t.state!==P.p.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{var i=(performance.now()-this._startTime)/this.transition.duration,n=i>=1;this.transition.applyRatio(this.viewpoint,i),n&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}}]),i}(m.m);(0,m.e)([(0,m.y)()],B.prototype,"animation",void 0),(0,m.e)([(0,m.y)()],B.prototype,"duration",void 0),(0,m.e)([(0,m.y)()],B.prototype,"transition",void 0),(0,m.e)([(0,m.y)()],B.prototype,"easing",void 0),(0,m.e)([(0,m.y)()],B.prototype,"view",void 0),(0,m.e)([(0,m.y)()],B.prototype,"viewpoint",void 0);var Y=B=(0,m.e)([(0,m.n)("esri.views.2d.AnimationManager")],B),A=function(){function e(t){var i=this;(0,v.Z)(this,e),this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=function(){i._updateParameters.state=i.view.state,i._updateParameters.stationary=i.view.stationary,i._updateParameters.pixelRatio=window.devicePixelRatio,i._updateParameters.renderingOptions=i.view.renderingOptions},this.update=function(){i._updateRequested=!1;var e=i.view,t=e.basemapView,n=e.graphicsView,r=e.labelManager,a=e.layerViews,o=e.state.id;t.baseLayerViews.forEach(i._updateLayerView,i),a.forEach(i._updateLayerView,i),t.referenceLayerViews.forEach(i._updateLayerView,i),(0,x.r)(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(i._updateParameters)),(0,x.r)(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(i._updateParameters)),i.view.graphicsTileStore.setViewState(i._updateParameters.state),i.animationInProgress||i._updateRequested||i._frameTaskHandle.pause()}}return(0,y.Z)(e,[{key:"destroy",value:function(){this.stop()}},{key:"start",value:function(){var e=this;if(!this._frameTaskHandle){var t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=(0,b.l)((function(){return t.stationary}),(function(t){e.stationary=t,e.requestFrame()})),this._frameTaskHandle=(0,m.a7)(this),this.requestUpdate()}}},{key:"stop",value:function(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}},{key:"requestUpdate",value:function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}},{key:"requestFrame",value:function(){this._frameTaskHandle&&this._frameTaskHandle.resume()}},{key:"_updateLayerView",value:function(e){var t=this.view.state,i=e.lastUpdateId;null!=i&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}}]),e}();function X(){return Promise.all([Promise.all([i.e(5833),i.e(1698),i.e(2312),i.e(5988)]).then(i.bind(i,35988)),Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(285),i.e(3623),i.e(3830),i.e(3322)]).then(i.bind(i,83322))])}var G=function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(5540),i.e(9381),i.e(7717)]).then(i.bind(i,17717))}))},j=function(){return X().then((function(){return Promise.all([i.e(5833),i.e(4233),i.e(4234),i.e(9370),i.e(2017),i.e(469),i.e(3565),i.e(4545)]).then(i.bind(i,54545))}))},U={"base-dynamic":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(8759),i.e(9514)]).then(i.bind(i,49514))}))},"base-tile":G,"bing-maps":G,csv:j,"geo-rss":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(7115)]).then(i.bind(i,67115))}))},feature:j,geojson:j,graphics:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(7604)]).then(i.bind(i,27604))}))},group:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(6130),i.e(2896)]).then(i.bind(i,52896))}))},imagery:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(1532),i.e(3669),i.e(8759),i.e(7963),i.e(9509)]).then(i.bind(i,79509))}))},"imagery-tile":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(1532),i.e(3669),i.e(7963),i.e(3926)]).then(i.bind(i,3926))}))},kml:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(1532),i.e(8759),i.e(285),i.e(4308)]).then(i.bind(i,34308))}))},"map-image":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(8759),i.e(7650),i.e(5954)]).then(i.bind(i,25954))}))},"map-notes":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(6130),i.e(2047)]).then(i.bind(i,51933))}))},media:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(7528)]).then(i.bind(i,97528))}))},"ogc-feature":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(4233),i.e(4234),i.e(9370),i.e(2017),i.e(469),i.e(3565),i.e(4545),i.e(6459)]).then(i.bind(i,86459))}))},"open-street-map":G,"oriented-imagery":j,route:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(647),i.e(396)]).then(i.bind(i,10396))}))},stream:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(4233),i.e(4234),i.e(9370),i.e(2017),i.e(469),i.e(3565),i.e(4545),i.e(5739)]).then(i.bind(i,32959))}))},"subtype-group":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(4233),i.e(4234),i.e(9370),i.e(2017),i.e(469),i.e(3565),i.e(4545),i.e(8551)]).then(i.bind(i,28551))}))},tile:G,"vector-tile":function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(4495),i.e(7340),i.e(4965)]).then(i.bind(i,34965))}))},wcs:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(1532),i.e(3669),i.e(7963),i.e(3926)]).then(i.bind(i,3926))}))},"web-tile":G,wfs:j,wms:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(8759),i.e(9910)]).then(i.bind(i,19910))}))},wmts:function(){return X().then((function(){return Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(5540),i.e(9381),i.e(4447)]).then(i.bind(i,14447))}))},"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var H,K=function(e){return(0,x.r)(U[e.type])},W=function(e){var t=U[e.type];if((0,x.t)(t))throw function(e){var t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new m.s("".concat(i,":view-not-supported"),"".concat(t," is not supported in 2D"))}(e);return t(e)};var J,Q=H=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e)).geometry=null,n.spatialReference=null,n}return(0,y.Z)(i,[{key:"normalizedGeometry",get:function(){if((0,x.t)(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,I.r)(this.geometry,this.spatialReference)}catch(Ne){return m.a.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:Ne}),null}return this.geometry}},{key:"constrain",value:function(e,t){if((0,x.t)(this.normalizedGeometry))return e;var i=e.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,S.r)(this.normalizedGeometry,i):(0,S.c)(this.normalizedGeometry,i))return e;var n=function(e,t){var i,n=t.spatialReference,r=[t.x,t.y],a=Number.POSITIVE_INFINITY,o=0,s=0,l=[0,0],u="extent"===e.type?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings,h=(0,c.Z)(u);try{for(h.s();!(i=h.n()).done;)for(var f=i.value,d=0;d<f.length-1;d++){(0,V.b)(l,r,f,d);var p=(0,z.m)(r,l);p<a&&(a=p,o=l[0],s=l[1])}}catch(v){h.e(v)}finally{h.f()}return{coordinate:new Z.w({x:o,y:s,spatialReference:n}),distance:a}}(this.normalizedGeometry,i),r=n.coordinate;return r?(e.targetGeometry=r,e):e}},{key:"clone",value:function(){var e,t;return new H({geometry:null===(e=this.geometry)||void 0===e?void 0:e.clone(),spatialReference:null===(t=this.spatialReference)||void 0===t?void 0:t.clone()})}}]),i}((0,O.i)(m.m));(0,m.e)([(0,m.y)({constructOnly:!0})],Q.prototype,"geometry",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],Q.prototype,"normalizedGeometry",null),(0,m.e)([(0,m.y)({constructOnly:!0})],Q.prototype,"spatialReference",void 0),Q=H=(0,m.e)([(0,m.n)("esri.views.2d.constraints.GeometryConstraint")],Q);var $=J=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(){var e;return(0,v.Z)(this,i),(e=t.apply(this,arguments)).enabled=!0,e.rotationEnabled=!0,e}return(0,y.Z)(i,[{key:"constrain",value:function(e,t){return this.enabled&&t?(this.rotationEnabled||(e.rotation=t.rotation),e):e}},{key:"clone",value:function(){return new J({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}}]),i}((0,O.i)(m.m));(0,m.e)([(0,m.y)()],$.prototype,"enabled",void 0),(0,m.e)([(0,m.y)()],$.prototype,"rotationEnabled",void 0);var ee,te=$=J=(0,m.e)([(0,m.n)("esri.views.2d.constraints.RotationConstraint")],$),ie=ee=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e))._lodByScale={},n._scales=[],n.effectiveLODs=null,n.effectiveMinZoom=-1,n.effectiveMaxZoom=-1,n.effectiveMinScale=0,n.effectiveMaxScale=0,n.lods=null,n.minZoom=-1,n.maxZoom=-1,n.minScale=0,n.maxScale=0,n.snapToZoom=!0,n}return(0,y.Z)(i,[{key:"initialize",value:function(){var e,t,i,n=this,r=this.lods,a=this.minScale,o=this.maxScale,s=this.minZoom,l=this.maxZoom,u=-1,h=-1,f=!1,d=!1;if(0!==a&&0!==o&&a<o&&(a=(e=[o,a])[0],o=e[1]),!r||!r.length)return this._set("effectiveMinScale",a),void this._set("effectiveMaxScale",o);r=r.map((function(e){return e.clone()})),r.sort((function(e,t){return t.scale-e.scale})),r.forEach((function(e,t){return e.level=t}));var p,v=(0,c.Z)(r);try{for(v.s();!(p=v.n()).done;){var y=p.value;!f&&a>0&&a>=y.scale&&(u=y.level,f=!0),!d&&o>0&&o>=y.scale&&(h=i?i.level:-1,d=!0),i=y}}catch(m){v.e(m)}finally{v.f()}-1===s&&(s=0===a?0:u),-1===l&&(l=0===o?r.length-1:h),s=Math.max(s,0),s=Math.min(s,r.length-1),l=Math.max(l,0),s>(l=Math.min(l,r.length-1))&&(s=(t=[l,s])[0],l=t[1]),a=r[s].scale,o=r[l].scale,r.splice(0,s),r.splice(l-s+1,r.length),r.forEach((function(e,t){n._lodByScale[e.scale]=e,n._scales[t]=e.scale})),this._set("effectiveLODs",r),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",l),this._set("effectiveMinScale",a),this._set("effectiveMaxScale",o)}},{key:"constrain",value:function(e,t){if(t&&e.scale===t.scale)return e;var i=this.effectiveMinScale,n=this.effectiveMaxScale,r=e.targetGeometry,a=t&&t.targetGeometry,o=0!==n&&e.scale<n,s=0!==i&&e.scale>i;if(o||s){var l=s?i:n;if(t&&a){var u=(l-t.scale)/(e.scale-t.scale);r.x=a.x+(r.x-a.x)*u,r.y=a.y+(r.y-a.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}},{key:"fit",value:function(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);var t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}},{key:"zoomToScale",value:function(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);var t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var i=Math.round(e-.5),n=Math.round(e);return t[n]+(n-e)*(t[i]-t[n])}},{key:"scaleToZoom",value:function(e){if(!this.effectiveLODs)return-1;var t,i,n=this._scales;if(e>=n[0])return this.effectiveMinZoom;if(e<=n[n.length-1])return this.effectiveMaxZoom;for(var r=0;r<n.length-1;r++){if(t=n[r],(i=n[r+1])===e)return r+this.effectiveMinZoom+1;if(t>e&&i<e)return r+this.effectiveMinZoom+1-(e-i)/(t-i)}return-1}},{key:"snapToClosestScale",value:function(e){if(!this.effectiveLODs)return e;var t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}},{key:"snapToNextScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(!this.effectiveLODs)return e*t;var i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}},{key:"snapToPreviousScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!this.effectiveLODs)return e*t;var i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}},{key:"clone",value:function(){return new ee({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}},{key:"_getClosestScale",value:function(e){return this._lodByScale[e]||(e=this._scales.reduce((function(t,i){return Math.abs(i-e)<=Math.abs(t-e)?i:t}),this._scales[0])),this._lodByScale[e].scale}}]),i}((0,O.i)(m.m));(0,m.e)([(0,m.y)({readOnly:!0})],ie.prototype,"effectiveLODs",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],ie.prototype,"effectiveMinZoom",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],ie.prototype,"effectiveMaxZoom",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],ie.prototype,"effectiveMinScale",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],ie.prototype,"effectiveMaxScale",void 0),(0,m.e)([(0,m.y)()],ie.prototype,"lods",void 0),(0,m.e)([(0,m.y)()],ie.prototype,"minZoom",void 0),(0,m.e)([(0,m.y)()],ie.prototype,"maxZoom",void 0),(0,m.e)([(0,m.y)()],ie.prototype,"minScale",void 0),(0,m.e)([(0,m.y)()],ie.prototype,"maxScale",void 0),(0,m.e)([(0,m.y)()],ie.prototype,"snapToZoom",void 0);var ne=ie=ee=(0,m.e)([(0,m.n)("esri.views.2d.constraints.ZoomConstraint")],ie),re={base:null,key:"type",typeMap:{extent:S.w,polygon:V.v}},ae=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e)).lods=null,n.minScale=0,n.maxScale=0,n.minZoom=-1,n.maxZoom=-1,n.rotationEnabled=!0,n.snapToZoom=!0,n}return(0,y.Z)(i,[{key:"destroy",value:function(){this.view=null}},{key:"effectiveLODs",get:function(){return this._zoom.effectiveLODs}},{key:"effectiveMinScale",get:function(){return this._zoom.effectiveMinScale}},{key:"effectiveMaxScale",get:function(){return this._zoom.effectiveMaxScale}},{key:"effectiveMinZoom",get:function(){return this._zoom.effectiveMinZoom}},{key:"effectiveMaxZoom",get:function(){return this._zoom.effectiveMaxZoom}},{key:"geometry",set:function(e){e?this._set("geometry",e):this._set("geometry",null)}},{key:"version",get:function(){var e,t,i;return"".concat(null===(e=this._zoom)||void 0===e?void 0:e.uid,"/").concat(null===(t=this._rotation)||void 0===t?void 0:t.uid,"/").concat(null===(i=this._geometry)||void 0===i?void 0:i.uid)}},{key:"_defaultLODs",get:function(){var e,t,i,n=null===(e=this.view)||void 0===e||null===(t=e.defaultsFromMap)||void 0===t?void 0:t.tileInfo,r=null===(i=this.view)||void 0===i?void 0:i.spatialReference;return n&&r&&n.spatialReference.equals(r)?n.lods:null}},{key:"_geometry",get:function(){var e;return new Q({geometry:this.geometry,spatialReference:null===(e=this.view)||void 0===e?void 0:e.spatialReference})}},{key:"_rotation",get:function(){return new te({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){var e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,n=this.maxZoom,r=this.minScale,a=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===n&&e.minScale===r&&e.maxScale===a&&e.snapToZoom===o?e:new ne({lods:t,minZoom:i,maxZoom:n,minScale:r,maxScale:a,snapToZoom:o})}},{key:"canZoomInTo",value:function(e){var t=this.effectiveMaxScale;return 0===t||e>=t}},{key:"canZoomOutTo",value:function(e){var t=this.effectiveMinScale;return 0===t||e<=t}},{key:"constrain",value:function(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}},{key:"constrainByGeometry",value:function(e){return this._geometry.constrain(e)}},{key:"fit",value:function(e){return this._zoom.fit(e)}},{key:"zoomToScale",value:function(e){return this._zoom.zoomToScale(e)}},{key:"scaleToZoom",value:function(e){return this._zoom.scaleToZoom(e)}},{key:"snapScale",value:function(e){return this._zoom.snapToClosestScale(e)}},{key:"snapToNextScale",value:function(e){return this._zoom.snapToNextScale(e)}},{key:"snapToPreviousScale",value:function(e){return this._zoom.snapToPreviousScale(e)}}]),i}(m.m);(0,m.e)([(0,m.y)({readOnly:!0})],ae.prototype,"effectiveLODs",null),(0,m.e)([(0,m.y)({readOnly:!0})],ae.prototype,"effectiveMinScale",null),(0,m.e)([(0,m.y)({readOnly:!0})],ae.prototype,"effectiveMaxScale",null),(0,m.e)([(0,m.y)({readOnly:!0})],ae.prototype,"effectiveMinZoom",null),(0,m.e)([(0,m.y)({readOnly:!0})],ae.prototype,"effectiveMaxZoom",null),(0,m.e)([(0,m.y)({types:re,value:null})],ae.prototype,"geometry",null),(0,m.e)([(0,m.y)({type:[C.p]})],ae.prototype,"lods",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"minScale",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"maxScale",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"minZoom",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"maxZoom",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"rotationEnabled",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"snapToZoom",void 0),(0,m.e)([(0,m.y)()],ae.prototype,"view",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],ae.prototype,"version",null),(0,m.e)([(0,m.y)()],ae.prototype,"_defaultLODs",null),(0,m.e)([(0,m.y)({type:Q})],ae.prototype,"_geometry",null),(0,m.e)([(0,m.y)({type:te})],ae.prototype,"_rotation",null),(0,m.e)([(0,m.y)({readOnly:!0,type:ne})],ae.prototype,"_zoom",null);var oe,se,le=ae=(0,m.e)([(0,m.n)("esri.views.2d.MapViewConstraints")],ae),ue=oe=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(){var e;return(0,v.Z)(this,i),(e=t.apply(this,arguments)).left=0,e.top=0,e.right=0,e.bottom=0,e}return(0,y.Z)(i,[{key:"clone",value:function(){return new oe({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}}]),i}(m.m);(0,m.e)([(0,m.y)()],ue.prototype,"left",void 0),(0,m.e)([(0,m.y)()],ue.prototype,"top",void 0),(0,m.e)([(0,m.y)()],ue.prototype,"right",void 0),(0,m.e)([(0,m.y)()],ue.prototype,"bottom",void 0),ue=oe=(0,m.e)([(0,m.n)("esri.views.2d.PaddedViewState.Padding")],ue);var he=se=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(){var e;(0,v.Z)(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).paddedViewState=new P.U,e._updateContent=function(){var t=(0,D.n)();return function(){var i=e._get("size"),n=e._get("padding");if(i&&n){var r=e.paddedViewState;(0,z.r)(t,n.left+n.right,n.top+n.bottom),(0,z.o)(t,i,t),(0,z.a)(r.size,t);var a=r.viewpoint;a&&(e.viewpoint=a)}}}(),e.addHandles((0,b.l)((function(){return[e.size,e.padding]}),(function(){return e._updateContent()}),b.U)),e.padding=new ue,e.size=[0,0],e}return(0,y.Z)(i,[{key:"padding",set:function(e){this._set("padding",e||new ue)}},{key:"viewpoint",set:function(e){if(e){var t=e.clone();this.paddedViewState.viewpoint=e,(0,P.g)(t,e,this._get("size"),this._get("padding"));var i=this._viewpoint2D,n=t.targetGeometry;i.center[0]=n.x,i.center[1]=n.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=n.spatialReference,this._update()}}},{key:"clone",value:function(){return new se({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}}]),i}(P.U);(0,m.e)([(0,m.y)()],he.prototype,"paddedViewState",void 0),(0,m.e)([(0,m.y)({type:ue})],he.prototype,"padding",null),(0,m.e)([(0,m.y)()],he.prototype,"viewpoint",null);var ce,fe=he=se=(0,m.e)([(0,m.n)("esri.views.2d.PaddedViewState")],he),de=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n){var r;return(0,v.Z)(this,i),(r=t.call(this,!0))._view=e,r.registerIncoming("double-click",n,(function(e){return r._handleDoubleClick(e,n)})),r}return(0,y.Z)(i,[{key:"_handleDoubleClick",value:function(e,t){(0,P.t)(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}}]),i}(P.i),pe=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n,r){var a;return(0,v.Z)(this,i),(a=t.call(this,!0)).view=e,a.pointerType=n,a.registerIncoming("double-tap-drag",r,(function(e){return a._handleDoubleTapDrag(e)})),a}return(0,y.Z)(i,[{key:"_handleDoubleTapDrag",value:function(e){var t=e.data;if(t.pointerType===this.pointerType){e.stopPropagation();var i=t.action,n=t.delta,r=this.view,a=r.mapViewNavigation;switch(i){case"begin":var o=r.scale;this._startScale=o,this._currentScale=o,this._previousDelta=n,a.begin();break;case"update":if(this._previousDelta.y===n.y)return;this._previousDelta=n;var s=Math.pow(1.015,n.y),l=this._startScale*s,u=l/this._currentScale;a.setViewpointImmediate(u),this._currentScale=l;break;case"end":var h=r.constraints,c=h.effectiveLODs;if(!h.snapToZoom||!c)return void a.end();var f=h.snapScale(this._currentScale),d=(n.y>0?Math.max(f,h.snapToPreviousScale(this._startScale)):Math.min(f,h.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(d)}}}}]),i}(P.i),ve=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n,r){var a;return(0,v.Z)(this,i),(a=t.call(this,!0)).view=e,a.pointerAction=n,a.registerIncoming("drag",r,(function(e){return a._handleDrag(e)})),a.registerIncoming("pointer-down",(function(){return a.stopMomentumNavigation()})),a}return(0,y.Z)(i,[{key:"onInstall",value:function(e){var t=this;(0,u.Z)((0,h.Z)(i.prototype),"onInstall",this).call(this,e),this._dragEventSeparator=new P.a({start:function(e,i){t.view.mapViewNavigation.pan.begin(t.view,i.data),i.stopPropagation()},update:function(e,i){t.view.mapViewNavigation.pan.update(t.view,i.data),i.stopPropagation()},end:function(e,i){t.view.mapViewNavigation.pan.end(t.view,i.data),i.stopPropagation()},condition:function(e,i){return 1===e&&(0,P.t)(i.data,t.pointerAction)}})}},{key:"_handleDrag",value:function(e){var t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}},{key:"stopMomentumNavigation",value:function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}]),i}(P.i),ye=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n,r){var a;(0,v.Z)(this,i),(a=t.call(this,!0))._view=e,a.pointerAction=n;var o=a._view.mapViewNavigation;return a._dragEventSeparator=new P.a({start:function(e,t){o.rotate.begin(a._view,t.data),t.stopPropagation()},update:function(e,t){o.rotate.update(a._view,t.data),t.stopPropagation()},end:function(e,t){o.rotate.end(),t.stopPropagation()},condition:function(e,t){return 1===e&&(0,P.t)(t.data,a.pointerAction)}}),a.registerIncoming("drag",r,(function(e){return a._dragEventSeparator.handle(e)})),a}return(0,y.Z)(i)}(P.i),me=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,!0))._view=e,n._frameTask=null,n._watchHandles=new m.X,n._currentDevice=null,n._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},n._handle=n.registerIncoming("gamepad",(function(e){return n._handleGamePadEvent(e)})),n._handle.pause(),n}return(0,y.Z)(i,[{key:"onInstall",value:function(e){var t=this;(0,u.Z)((0,h.Z)(i.prototype),"onInstall",this).call(this,e),this._watchHandles.add([(0,b.l)((function(){var e;return null===(e=t._view.navigation.gamepad)||void 0===e?void 0:e.enabled}),(function(e){e?(t._handle.resume(),t._frameTask||(t._frameTask=(0,m.a7)({update:function(e){return t._frameUpdate(e.deltaTime)}}))):(t._handle.pause(),t._frameTask&&(t._frameTask.remove(),t._frameTask=null))}),b.h)])}},{key:"onUninstall",value:function(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),(0,u.Z)((0,h.Z)(i.prototype),"onUninstall",this).call(this)}},{key:"_handleGamePadEvent",value:function(e){var t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||("end"===e.data.action?(this._currentDevice=null,(0,P.b)(this._transformation)):(this._currentDevice=e.data.device,(0,P.c)(e.data,this._view.navigation.gamepad,this._transformation)))}},{key:"_frameUpdate",value:function(e){var t=this._transformation;if(!(0,P.s)(t)){var i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,r=_e*n*e;(0,P.S)(i,i,[t.translation[0]*r,-t.translation[1]*r]);var a=1+t.translation[2]*we*e,o=this._view.constraints.rotationEnabled?-t.heading*ge*e:0,s=this._view.size,l=[s[0]/2,s[1]];(0,P.G)(i,i,a,o,l,s);var u=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=u}}}]),i}(P.i),ge=.06,_e=.7,we=6e-4,ke=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n,r){var a,o;return(0,v.Z)(this,i),(o=t.call(this,!0)).view=e,o.keys=n,o._pressed=!1,o._keyMap=(a={},(0,l.Z)(a,n.left,"left"),(0,l.Z)(a,n.right,"right"),(0,l.Z)(a,n.up,"up"),(0,l.Z)(a,n.down,"down"),a),o.registerIncoming("key-down",r,(function(e){return o._handleKeyDown(e)})),o.registerIncoming("key-up",r,(function(e){return o._handleKeyUp(e)})),o.registerIncoming("blur",r,(function(){return o._handleBlur()})),o}return(0,y.Z)(i,[{key:"_handleKeyDown",value:function(e){e.data.repeat||this._handleKey(e,!0)}},{key:"_handleKeyUp",value:function(e){this._handleKey(e,!1)}},{key:"_handleBlur",value:function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}},{key:"_handleKey",value:function(e,t){var i=this._keyMap[e.data.key];if(this._pressed=null!=i,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}]),i}(P.i),xe=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n,r){var a,o;return(0,v.Z)(this,i),(o=t.call(this,!0)).view=e,o.keys=n,o._pressed=!1,o._keyToDirection=(a={},(0,l.Z)(a,n.clockwiseOption1,"clockwise"),(0,l.Z)(a,n.clockwiseOption2,"clockwise"),(0,l.Z)(a,n.counterClockwiseOption1,"counterClockwise"),(0,l.Z)(a,n.counterClockwiseOption2,"counterClockwise"),(0,l.Z)(a,n.resetOption1,"reset"),(0,l.Z)(a,n.resetOption2,"reset"),a),o.registerIncoming("key-down",r,(function(e){return o._handleKeyDown(e)})),o.registerIncoming("key-up",r,(function(e){return o._handleKeyUp(e)})),o.registerIncoming("blur",r,(function(){return o._handleBlur()})),o}return(0,y.Z)(i,[{key:"_handleKeyDown",value:function(e){e.data.repeat||this._handleKey(e,!0)}},{key:"_handleKeyUp",value:function(e){this._handleKey(e,!1)}},{key:"_handleBlur",value:function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}},{key:"_handleKey",value:function(e,t){var i=e.modifiers;if(!(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)){var n=this._keyToDirection[e.data.key];if(this._pressed=null!=n,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}}]),i}(P.i);!function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"}(ce||(ce={}));var be=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n,r){var a;return(0,v.Z)(this,i),(a=t.call(this,!0)).view=e,a.keys=n,a._keysToZoomAction={},a.registerIncoming("key-down",r,(function(e){return a._handleKeyDown(e)})),n.zoomIn.forEach((function(e){return a._keysToZoomAction[e]=ce.IN})),n.zoomOut.forEach((function(e){return a._keysToZoomAction[e]=ce.OUT})),a}return(0,y.Z)(i,[{key:"_handleKeyDown",value:function(e){this._handleKey(e)}},{key:"_handleKey",value:function(e){var t=e.modifiers;if(!(t.size>0)||t.has("Shift")){var i=e.data.key;if(i in this._keysToZoomAction){var n=this._keysToZoomAction[i],r=this.view.mapViewNavigation,a=null;switch(n){case ce.IN:a=r.zoomIn();break;case ce.OUT:a=r.zoomOut();break;default:return}r.begin(),a.then((function(){return r.end()})),e.stopPropagation()}}}}]),i}(P.i),Me=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e,n){var r;return(0,v.Z)(this,i),(r=t.call(this,!0))._view=e,r._canZoom=!0,r.registerIncoming("mouse-wheel",n,(function(e){return r._handleMouseWheel(e)})),r}return(0,y.Z)(i,[{key:"_handleMouseWheel",value:function(e){var t=this;if(this._view.navigation.mouseWheelZoomEnabled&&(e.preventDefault(),e.stopPropagation(),this._canZoom)){var i=this._view.mapViewNavigation,n=e.data,r=n.x,a=n.y,o=n.deltaY,s=1/Math.pow(.6,1/60*o),l=i.zoom(s,[r,a]);l&&(this._canZoom=!1,l.catch((function(){})).then((function(){t._canZoom=!0,i.end()})))}}}]),i}(P.i),Te=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;(0,v.Z)(this,i),(n=t.call(this,!0)).view=e,n.registerIncoming("drag",(function(e){return n._handleDrag(e)})),n.registerIncoming("pointer-down",(function(){return n._stopMomentumNavigation()}));var r=n.view.mapViewNavigation;return n._dragEventSeparator=new P.a({start:function(e,t){r.pinch.begin(n.view,t.data),t.stopPropagation()},update:function(e,t){r.pinch.update(n.view,t.data),t.stopPropagation()},end:function(e,t){r.pinch.end(n.view),t.stopPropagation()},condition:function(e){return e>=2}}),n}return(0,y.Z)(i,[{key:"_handleDrag",value:function(e){this._dragEventSeparator.handle(e)}},{key:"_stopMomentumNavigation",value:function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}]),i}(P.i),Se=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.l.maximumDoubleClickDelay,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.l.maximumDoubleClickDistance,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P.l.maximumDoubleTouchDelay,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P.l.maximumDoubleTouchDistance,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m.a8;return(0,v.Z)(this,i),(e=t.call(this,!1))._maximumDoubleClickDelay=n,e._maximumDoubleClickDistance=r,e._maximumDoubleTouchDelay=a,e._maximumDoubleTouchDistance=o,e._clock=s,e._doubleTapDragReady=!1,e._doubleTapDragActive=!1,e._dragStartCenter=(0,M.c)(0,0),e._pointerState=new Map,e._doubleTapDrag=e.registerOutgoing("double-tap-drag"),e._dragEventSeparator=new P.a({start:function(t,i){return e._dragStart(t,i)},update:function(t,i){return e._dragUpdate(i)},end:function(t,i){return e._dragEnd(i)}}),e.registerIncoming("drag",(function(t){return e._dragEventSeparator.handle(t)})),e.registerIncoming("pointer-down",(function(t){return e._handlePointerDown(t)})),e.registerIncoming("pointer-up",(function(){return e._handlePointerUp()})),e}return(0,y.Z)(i,[{key:"onUninstall",value:function(){this._pointerState.forEach((function(e){e.doubleTapTimeout=(0,x.f)(e.doubleTapTimeout)}))}},{key:"hasPendingInputs",get:function(){return(0,m.a9)(this._pointerState,(function(e){return null!=e.doubleTapTimeout}))}},{key:"_clearPointerDown",value:function(e){var t=this._pointerState.get(e);t&&(t.doubleTapTimeout=(0,x.f)(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}},{key:"_createDoubleTapDragData",value:function(e,t,i){return{action:e,delta:t,button:i.button,buttons:i.buttons,pointer:i.pointer,pointers:i.pointers,pointerType:i.pointerType,timestamp:i.timestamp}}},{key:"_dragStart",value:function(e,t){if(this._doubleTapDragReady&&1===e){this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;var i=t.data,n=t.modifiers,r=i.center;this._dragStartCenter=r;var a=this._createDoubleTapDragData("begin",(0,M.c)(0,0),i);this._doubleTapDrag.emit(a,void 0,n),t.stopPropagation()}}},{key:"_dragUpdate",value:function(e){if(this._doubleTapDragActive){var t=e.data,i=e.modifiers,n=t.center,r=(0,M.c)(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("update",r,t);this._doubleTapDrag.emit(a,void 0,i),e.stopPropagation()}}},{key:"_dragEnd",value:function(e){if(this._doubleTapDragActive){var t=e.data,i=e.modifiers,n=t.center,r=(0,M.c)(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),a=this._createDoubleTapDragData("end",r,t);this._doubleTapDrag.emit(a,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}}},{key:"_handlePointerDown",value:function(e){var t=e.data,i=(0,P.d)(t),n=this._pointerState.get(i),r=t.native.pointerType;if(n){var a="touch"===r?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),(0,P.e)(n.event.data,t)>a?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}},{key:"_handlePointerUp",value:function(){this._doubleTapDragReady=!1}},{key:"_storePointerDown",value:function(e){var t=this,i=e.data,n=i.native.pointerType,r=(0,P.d)(i),a="touch"===n?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout((function(){return t._clearPointerDown(r)}),a);this._pointerState.set(r,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}]),i}(P.i),Ze="Ctrl",Ie={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},Ce={zoomIn:["=","+"],zoomOut:["-","_"]},Pe={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"},Ve=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(){var e;return(0,v.Z)(this,i),(e=t.apply(this,arguments))._handles=new m.X,e}return(0,y.Z)(i,[{key:"initialize",value:function(){var e=this,t=function(){var t;return null===(t=e.view)||void 0===t?void 0:t.ready};this._handles.add([(0,b.f)((function(){return!t()}),(function(){return e._disconnect()})),(0,b.f)(t,(function(){return e._connect()}))])}},{key:"destroy",value:function(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}},{key:"latestPointerType",get:function(){var e;return null===(e=this._inputManager)||void 0===e?void 0:e.latestPointerType}},{key:"latestPointerLocation",get:function(){var e;return null===(e=this._inputManager)||void 0===e?void 0:e.latestPointerLocation}},{key:"multiTouchActive",get:function(){var e,t;return null!==(e=null===(t=this._inputManager)||void 0===t?void 0:t.multiTouchActive)&&void 0!==e&&e}},{key:"_disconnect",value:function(){this.view.viewEvents.disconnect(),this._inputManager=(0,x.g)(this._inputManager)}},{key:"_connect",value:function(){var e=this,t=this.view.surface,i=new P.u(t,this.view.input),n=[new P.m,new P.r,new P.f,new P.h(this.view.navigation),new Se],r=new P.j({eventSource:i,recognizers:n});r.installHandlers("prevent-context-menu",[new P.k],P.P.INTERNAL),r.installHandlers("navigation",[new Te(this.view),new me(this.view),new Me(this.view),new de(this.view),new de(this.view,[Ze]),new ve(this.view,"primary"),new ke(this.view,Ie),new be(this.view,Ce),new xe(this.view,Pe),new ye(this.view,"secondary"),new pe(this.view,"touch")],P.P.INTERNAL),this.view.viewEvents.connect(r),this._source=i,this._inputManager=r,(0,b.l)((function(){var t,i;return null===(t=e.view)||void 0===t||null===(i=t.navigation)||void 0===i?void 0:i.browserTouchPanEnabled}),(function(t){e._source&&(e._source.browserTouchPanningEnabled=!t)}),b.h)}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]),i}(m.m);(0,m.e)([(0,m.y)()],Ve.prototype,"view",void 0),(0,m.e)([(0,m.y)()],Ve.prototype,"latestPointerType",null),(0,m.e)([(0,m.y)()],Ve.prototype,"latestPointerLocation",null),(0,m.e)([(0,m.y)()],Ve.prototype,"multiTouchActive",null);var Re=Ve=(0,m.e)([(0,m.n)("esri.views.2d.input.MapViewInputManager")],Ve),Oe=0,ze=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(){var e;return(0,v.Z)(this,i),(e=t.apply(this,arguments)).color=new L.l([0,255,255]),e.haloOpacity=1,e.fillOpacity=.25,e}return(0,y.Z)(i,[{key:"version",get:function(){return Oe++}}]),i}(m.m);(0,m.e)([(0,m.y)({readOnly:!0})],ze.prototype,"version",null),(0,m.e)([(0,m.y)({type:L.l})],ze.prototype,"color",void 0),(0,m.e)([(0,m.y)({type:L.l})],ze.prototype,"haloColor",void 0),(0,m.e)([(0,m.y)()],ze.prototype,"haloOpacity",void 0),(0,m.e)([(0,m.y)()],ze.prototype,"fillOpacity",void 0);var De=ze=(0,m.e)([(0,m.n)("esri.views.2d.support.HighlightOptions")],ze),Ee=function(){function e(){(0,v.Z)(this,e),this._names=new Map}return(0,y.Z)(e,[{key:"begin",value:function(e){this._names.has(e)||(this._names.set(e,!1),e.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri.".concat(e,".Start")))}},{key:"end",value:function(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark("Esri.".concat(e,".End")))}},{key:"record",value:function(e){this._names.has(e)||(this._names.set(e,!0),performance.mark("Esri.".concat(e)))}}]),e}();var Ne=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e)).components=["attribution","zoom"],n}return(0,y.Z)(i)}(P.n);(0,m.e)([(0,m.y)()],Ne.prototype,"components",void 0);var Le,Fe,qe,Be,Ye,Ae,Xe=Ne=(0,m.e)([(0,m.n)("esri.views.ui.2d.DefaultUI2D")],Ne);function Ge(){return Ge=(0,s.Z)((0,r.Z)().mark((function e(){var t,a,o,s,l,u,h,c,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all([i.e(5833),i.e(1698),i.e(2312),i.e(5988)]).then(i.bind(i,35988)),Promise.all([i.e(5833),i.e(1698),i.e(4954),i.e(4233),i.e(4234),i.e(2312),i.e(8090),i.e(9172),i.e(9370),i.e(2017),i.e(3565),i.e(309),i.e(3504),i.e(2399),i.e(5496),i.e(9250),i.e(285),i.e(3623),i.e(3830),i.e(3322)]).then(i.bind(i,83322))]);case 2:t=e.sent,a=(0,n.Z)(t,2),o=a[1],s=o.GraphicsView2D,l=o.GraphicContainer,u=o.LabelManager,h=o.MapViewNavigation,c=o.MagnifierView2D,f=o.Stage,Fe=s,qe=l,Be=u,Ye=h,Ae=c,Le=f;case 12:case"end":return e.stop()}}),e)}))),Ge.apply(this,arguments)}var je=function(e){(0,d.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,v.Z)(this,i),(n=t.call(this,e))._magnifierView=null,n._stage=null,n._resolveWhenReady=[],n.rootLayerViews=new k.l({getCollections:function(){var e,t;return[null===(e=n.basemapView)||void 0===e?void 0:e.baseLayerViews,n.layerViews,null===(t=n.basemapView)||void 0===t?void 0:t.referenceLayerViews]},getChildrenFunction:function(){return null}}),n.featuresTilingScheme=null,n.fullOpacity=1,n.graphicsView=null,n.labelManager=null,n.mapViewNavigation=null,n.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},n.rendering=!1,n.supersampleScreenshotsEnabled=!1,n.supportsGround=!1,n._stationaryTimer=null,n.frameTask=new A((0,f.Z)(n)),n._pePromise=null,n.floors=new w.j,n.highlightOptions=new De,n.inputManager=new Re({view:(0,f.Z)(n)}),n.map=null,n.resizeAlign="center",n.spatialReferenceLocked=!1,n.timeline=new Ee,n.type="2d",n.ui=new Xe,n._pixelFormat={flipY:!0,premultipliedAlpha:!0},n.constraints=new le,n.padding={top:0,right:0,bottom:0,left:0},n.handles.add([(0,b.l)((function(){return n.viewpoint}),(function(){n._lastStationaryEventTimestamp=performance.now(),n._flipStationary(160)}),b.U),n.on("resize",(function(e){return n._resizeHandler(e)})),(0,b.l)((function(){var e;return null===(e=n.animationManager)||void 0===e?void 0:e.animation}),(function(e){n.animation=e}))]),(0,T.l)(),n}return(0,y.Z)(i,[{key:"destroy",value:function(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}},{key:"graphicsTileStore",get:function(){return new N.d(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){var e,t=this.scale,i=this.constraints,n=this.center,r=this.viewpoint,a=this.extent,o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&null!==(e=this.map.initialViewProperties)&&void 0!==e&&e.viewpoint)&&!a&&(null!==i&&void 0!==i&&i.effectiveLODs||(o=-1),(!n||0===t&&-1===o)&&(!r||!(0,x.r)(r.targetGeometry)||"extent"!==r.targetGeometry.type&&!r.scale))}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){var e=this;return!!(0,I.e)()||(this._pePromise||(this._pePromise=(0,I.t)().finally((function(){e._pePromise=null}))),!1)}},{key:"typeSpecificPreconditionsReady",get:function(){var e=this._getDefaultViewpoint();if(!e)return!1;var t=this.spatialReference,i=(0,x.e)(e.targetGeometry);return!!(0,I.A)(i.spatialReference,t)||this._projectionEngineLoaded}},{key:"animation",set:function(e){var t=this,i=this._get("animation");if(e!==i)if(i&&i.stop(),e&&!e.isFulfilled()){this._set("animation",e),this.frameTask.animationInProgress=!0;var n=function(){var i;e===t._get("animation")&&(t._set("animation",null),null!==(i=t.frameTask)&&void 0!==i&&i.requestFrame()),t.frameTask&&(t.frameTask.animationInProgress=!1)};e.when(n,n)}else this._set("animation",null)}},{key:"background",get:function(){return function(e){return"esri.WebMap"===(null===e||void 0===e?void 0:e.declaredClass)}(this.map)?this.map.initialViewProperties.background:null},set:function(e){this._override("background",e)}},{key:"center",get:function(){if(!this.ready)return this._get("center");var e=this.state.paddedViewState,t=e.center,i=e.spatialReference;return new Z.w({x:t[0],y:t[1],spatialReference:i})},set:function(e){if(null!=e){if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");var t;try{t=this._project(e,this.spatialReference)}catch(n){return void m.a.getLogger(this.declaredClass).error(new m.s("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}var i=this.viewpoint;(0,P.x)(i,i,t),this.viewpoint=i}}},{key:"constraints",set:function(e){var t=this,i=this._get("constraints");i&&(this.handles.remove("map-view-constraints"),i.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add((0,b.l)((function(){return e.version}),(function(){t.ready&&t.state&&(t.state.viewpoint=e.fit(t.state.paddedViewState.viewpoint))}),b.U),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(e){if(null!=e)if(e.width&&e.height){if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");var t;try{t=this._project(e,this.spatialReference)}catch(n){return void m.a.getLogger(this.declaredClass).error(new m.s("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}var i=this.viewpoint;(0,P.q)(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}else m.a.getLogger(this.declaredClass).error(new m.s("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(e){if(!isNaN(e))if(this.ready){var t=this.viewpoint;(0,P.v)(t,t,e),this.viewpoint=t}else this._set("rotation",e)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(e){if(e&&!isNaN(e)){if(!this.ready){this._set("scale",e),this._set("zoom",-1);var t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}var i=this.viewpoint;(0,P.y)(i,i,e),this.viewpoint=i}}},{key:"stationary",get:function(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}},{key:"updating",get:function(){var e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some((function(e){return!e.destroyed&&!("layerViews"in e)&&!0===e.updating})));if((0,x.h)("esri-2d-log-updating")){var t,i,n,r=this.allLayerViews.reduce((function(e,t){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},t.layer.id,!t.destroyed&&!("layerViews"in t)&&t.updating))}),{});console.log("Updating MapView: ".concat(e,"\n-> Null LayerViewManager: ").concat(!this.layerViewManager,"\n-> Null LabelManager: ").concat(!this.labelManager,"\n-> Null GraphicsView: ").concat(!this.graphicsView,"\n-> layerViewManager.updating: ").concat(null===(t=this.layerViewManager)||void 0===t?void 0:t.updating,"\n-> labelManager.updating: ").concat(null===(i=this.labelManager)||void 0===i?void 0:i.updating,"\n-> graphicsView.updating: ").concat(null===(n=this.graphicsView)||void 0===n?void 0:n.updating,"\n-> allLayerViews: ").concat(JSON.stringify(r),"\n"))}return e}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");var e=this.state.paddedViewState;return e&&e.viewpoint.clone()},set:function(e){if(null!=e){if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");var t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new m.s("mapview:invalid-viewpoint","invalid scale value of ".concat(e.scale)):(0,x.t)(e.targetGeometry)&&(i=new m.s("mapview:invalid-viewpoint","geometry not defined"))}catch(Te){i=new m.s("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:Te})}if(i)m.a.getLogger(this.declaredClass).error(i);else{this._scaleBeforeChangingSpatialReference=null;var n=new _.u({targetGeometry:new Z.w,scale:0,rotation:0});(0,P.Z)(n,t),this.constraints.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this.frameTask.requestFrame(),this._set("viewpoint",n)}}}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(e){if(null!=e){if(!this.ready){this._set("zoom",e),this._set("scale",0);var t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}if(this.constraints.effectiveLODs){var i=this.viewpoint;(0,P.y)(i,i,this.constraints.zoomToScale(e)),this.viewpoint=i,this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1)}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}},{key:"goTo",value:function(e,t){var i=this;if(e)return this.animation&&(this.animation=null),this._createAnimation(),(0,b.j)((function(){return i.ready}),t).then((function(){var n=(0,o.Z)({animate:!0},t),r=(0,P.Y)(e,i);return i.animation.update(r),i._gotoTask={},n.animate?i._gotoAnimated(r,n):i._gotoImmediate(r,n)}));m.a.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}},{key:"hitTest",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,i){var n,o,s,l,u,h,c,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,P.A)(t)?(0,P.B)(this,t):t,this.ready&&!isNaN(n.x)&&!isNaN(n.y)){e.next=3;break}return e.abrupt("return",{screenPoint:n,results:[]});case 3:return o=new Set,s=!1,l=null,u=null,null!==i&&void 0!==i&&i.include?We(i.include,Ke(this,(function(e){return o.add(e)}),(function(e){l||(l=new Set),l.add(e)}),(function(e){return o.add(e)}),(function(){return s=!0}))):(s=!0,o=new Set(this.allLayerViews)),(null===i||void 0===i?void 0:i.exclude)&&We(i.exclude,Ke(this,(function(e){return o.delete(e)}),(function(e){u||(u=new Set),u.add(e)}))),h=this.allLayerViews.filter((function(e){return!e.suspended&&o.has(e)})).reverse(),c=this.toMap(n),e.t0=[],e.t1=(0,a.Z)(s?this.graphicsView.hitTest(c).map((function(e){return{type:"graphic",graphic:e,layer:null,mapPoint:c}})):[]),e.t2=a.Z,e.next=11,Promise.all(h.map((function(e){return e.hitTest(c,n)})).toArray());case 11:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),f=e.t0.concat.call(e.t0,e.t1,e.t4).filter(x.r).flat().filter(x.r),e.abrupt("return",(l&&(f=f.filter((function(e){return!("graphic"in e)||!e.graphic||l.has(He(e.graphic))}))),u&&(f=f.filter((function(e){return!("graphic"in e)||!e.graphic||u.has(He(e.graphic))}))),{screenPoint:n,results:f}));case 15:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"takeScreenshot",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var i,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._createScreenshotPlan(t),e.next=3,this._stage.takeScreenshot(i);case 3:return n=e.sent,e.abrupt("return",(0,P.C)(n,{format:i.format,quality:i.quality,rotation:0,disableDecorations:!1},this._pixelFormat));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_takeScreenshot",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var i,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._createScreenshotPlan(t),e.next=3,this._stage.takeScreenshot(i);case 3:return n=e.sent,e.abrupt("return",(0,P.D)(n,this._pixelFormat));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createScreenshotPlan",value:function(e){var t=this;e=e||{};var i,n=this.supersampleScreenshotsEnabled?Math.min(4,(0,P.K)(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;e.layers?(i=[],e.layers.forEach((function(e){var n=t.allLayerViews.find((function(t){return t.layer.id===e.id}));n&&"container"in n&&n.container&&i.push(n.container)}))):i=this._stage.children;var r=(0,P.L)(e.format,e.quality),a=r.format,o=r.quality;return function(e,t,i,n,r,a,o,s){var l;e.ignorePadding&&(n={left:0,right:0,top:0,bottom:0}),null!=e.width&&null!=e.height?l=[e.width,e.height]:null==e.width&&null!=e.height?l=[e.height,e.height]:null!=e.width&&null==e.height?l=[e.width,e.width]:null==e.width&&null==e.height&&(l=null);var u,h,c=i[0]-(n.left+n.right),f=i[1]-(n.top+n.bottom),d=e.area||{x:0,y:0,width:c,height:f};if(l){var p=c/f,v=l[0]/l[1];if(v>p){var y=d.width/v;d={x:d.x,y:Math.round(d.y+(d.height-y)/2),width:d.width,height:Math.round(y)}}else{var m=d.height*v;d={x:Math.round(d.x+(d.width-m)/2),y:d.y,width:Math.round(m),height:d.height}}}else l=[d.width,d.height];return l[0]>d.width?(u=Math.min(l[0]/d.width,t),h=l[0]/d.width/u):(u=1,h=l[0]/d.width),{resolutionScale:u,cropArea:{x:Math.round((d.x+n.left)*u),y:Math.round((d.y+n.top)*u),width:Math.round(d.width*u),height:Math.round(d.height*u)},outputScale:h,format:r,quality:a,children:o,rotation:s}}(e,n,this.size,this.padding,a,o,i,e.rotation)}},{key:"test",get:function(){var e=this;return{takeScreenshot:function(t){return e._takeScreenshot(t)}}}},{key:"toMap",value:function(e){if(!this.ready)return null;var t=(0,P.A)(e)?(0,P.B)(this,e):e,i=this.state.toMap([0,0],[t.x,t.y]),r=(0,n.Z)(i,2),a=r[0],o=r[1],s=this.spatialReference;return new Z.w({x:a,y:o,spatialReference:s})}},{key:"toScreen",value:function(e){if(!this.ready)return null;var t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),(0,M.c)(i[0],i[1])}},{key:"on",value:function(e,t,n,r){return this.inputManager&&this.viewEvents.on(e,t,n,r)||(0,u.Z)((0,h.Z)(i.prototype),"on",this).call(this,e,t)}},{key:"hasEventListener",value:function(e){return(0,u.Z)((0,h.Z)(i.prototype),"hasEventListener",this).call(this,e)||this.viewEvents.hasHandler(e)}},{key:"whenLayerView",value:function(e){return(0,u.Z)((0,h.Z)(i.prototype),"whenLayerView",this).call(this,e)}},{key:"graphicChanged",value:function(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}},{key:"whenReady",value:function(){var e=this;return new Promise((function(t){e.ready?t(e):e._resolveWhenReady.push(t)}))}},{key:"forceDOMReadyCycle",value:function(){this.forceReadyCycle()}},{key:"getDefaultSpatialReference",value:function(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&(null===(e=this.map)||void 0===e||null===(t=e.initialViewProperties)||void 0===t?void 0:t.spatialReference)||(null===(i=this.defaultsFromMap)||void 0===i?void 0:i.spatialReference)||null}},{key:"hasLayerViewModule",value:function(e){return K(e)}},{key:"importLayerView",value:function(e){return W(e)}},{key:"pixelSizeAt",value:function(){return this.ready?this.state.resolution:(m.a.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}},{key:"popupHitTest",value:function(e){var t=this;return this.hitTest(e).then((function(i){return(0,o.Z)((0,o.Z)({},i),{},{mapPoint:t.toMap(e)})}))}},{key:"requestUpdate",value:function(){this.ready&&this.frameTask.requestUpdate()}},{key:"validate",value:function(){var e=(0,P.E)(this.type);return(0,x.h)("safari")&&(0,x.h)("safari")<9&&(e=new m.s("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,x.h)("safari")})),(0,x.r)(e)?(m.a.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):function(){return Ge.apply(this,arguments)}()}},{key:"_createAnimation",value:function(){return this.animation&&!this.animation.done||(this.animation=new P.p),this.animation}},{key:"_cancellableGoTo",value:function(e,t,i){var n=this,r=function(){return e===n._gotoTask},a=i.then((function(){r()&&(n.animation=null)})).catch((function(e){throw r()&&(n.animation=null,t.done||(t.stop(),n.frameTask.animationInProgress=!1)),e})),o=new Promise((function(e){return e(a)}));return t.when().catch((function(){r()&&o.cancel&&o.cancel()})),o}},{key:"_gotoImmediate",value:function(e,t){var i=this,n=this._gotoTask,r=this.animation,a=e.then((function(e){if((0,m.f)(t),n!==i._gotoTask)throw new m.s("view:goto-interrupted","Goto was interrupted");i.viewpoint=r.target=e,r.finish()}));return this._cancellableGoTo(n,r,a)}},{key:"_flipStationary",value:function(e){var t=this;return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout((function(){t._stationaryTimer=null;var e=performance.now()-t._lastStationaryEventTimestamp;e<160&&(t._stationaryTimer=t._flipStationary(e))}),e)),this._stationaryTimer}},{key:"_getDefaultViewpoint",value:function(){var e,t,i,n,r=this.constraints,a=this.initialExtent,o=this.map,s=this.padding,l=this.size;if(!r)return null;var u=o&&"initialViewProperties"in o&&o.initialViewProperties,h={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};r.effectiveLODs?-1!==h.zoom&&(h.scale=r.zoomToScale(h.zoom)):h.zoom=-1;var c=null,f=null,d=0,p=h.viewpoint&&h.viewpoint.rotation,v=h.viewpoint&&h.viewpoint.targetGeometry;(0,x.r)(v)&&("extent"===v.type?c=v:"point"===v.type&&(f=v,d=h.viewpoint.scale));var y=h.extent||c||(null===(e=(0,x.e)(null===u||void 0===u||null===(t=u.viewpoint)||void 0===t?void 0:t.targetGeometry))||void 0===e?void 0:e.extent)||a,m=h.center||f||(null===y||void 0===y?void 0:y.center),g=h.scale||d||(null===u||void 0===u||null===(i=u.viewpoint)||void 0===i?void 0:i.scale)||y&&(0,P.H)(y,[l[0]-s.left-s.right,l[1]-s.top-s.bottom]),w=h.rotation||p||(null===u||void 0===u||null===(n=u.viewpoint)||void 0===n?void 0:n.rotation)||0;return m&&g?new _.u({targetGeometry:m,scale:g,rotation:w}):null}},{key:"_gotoAnimated",value:function(e,t){var i=this,n=this._gotoTask,r=this.animation,a=e.then((function(e){if((0,m.f)(t),n!==i._gotoTask)throw new m.s("view:goto-interrupted","Goto was interrupted");return r.update(e),i.animationManager.animate(r,i.viewpoint,t),r.when().then((function(){}),(function(){}))}));return this._cancellableGoTo(n,r,a)}},{key:"_project",value:function(e,t){var i,n=e&&e.targetGeometry||e;if(!t)return e;if(!n)return null;if(t.imageCoordinateSystem||null!==(i=n.spatialReference)&&void 0!==i&&i.imageCoordinateSystem)return e;if((0,Z.E)(t,n.spatialReference))return e;var r=(0,I.r)(n,t);if(!r)throw new m.s("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:t});return function(e){return e&&"esri.Viewpoint"===e.declaredClass}(e)?(e.targetGeometry=r,e):r}},{key:"_resizeHandler",value:function(e){if(this.ready){var t=this.state,i=this.state.paddedViewState.viewpoint,n=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],(0,P.F)(i,i,n,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}}},{key:"_startup",value:function(){var e,t=this;this.timeline.begin("MapView Startup");var i=this._getDefaultViewpoint(),n=i.targetGeometry;try{this._project(i,this.spatialReference)}catch(h){var r;m.a.getLogger(this.declaredClass).warn(new m.l("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:this.spatialReference,error:h})),i.targetGeometry=(null===(r=this.defaultsFromMap.extent)||void 0===r?void 0:r.center)||new Z.w({x:0,y:0,spatialReference:this.spatialReference})}null!==(e=this.constraints)&&void 0!==e&&e.fit(i),this._set("state",new fe({padding:this._get("padding"),size:this.size,viewpoint:i})),this.graphics.owner=this;var a=new Le(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=a,this._magnifierView=new Ae,this._magnifierView.magnifier=this.magnifier;var o=new Be({view:this});this._set("labelManager",o);var s=new Y({view:this});this._set("animationManager",s);var l=new Ye({view:this,animationManager:s});this._set("mapViewNavigation",l),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",(function(){return t._updateStageChildren()})),a.on("post-render",(function(){return t._set("rendering",a.renderRequested)})),a.on("will-render",(function(){return t._set("rendering",a.renderRequested)})),a.on("webgl-error",(function(e){return t.fatalError=e.error})),(0,b.l)((function(){return t.stationary}),(function(e){return a.stationary=e}),b.w),(0,b.l)((function(){return t.background}),(function(e){a.background=e,t._magnifierView.background=e}),b.w),(0,b.l)((function(){return t.magnifier}),(function(e){return t._magnifierView.magnifier=e}),b.w),(0,b.l)((function(){return t.renderingOptions}),(function(e){return a.renderingOptions=e}),b.w),(0,b.l)((function(){return t.highlightOptions}),(function(e){return a.highlightOptions=e}),b.w),(0,b.l)((function(){return t.state.id}),(function(){return a.state=t.state}),b.w)],"map-view"),this._updateStageChildren();var u=this._resolveWhenReady;this._resolveWhenReady=[],u.forEach((function(e){return e(t)})),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}},{key:"_teardown",value:function(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);var e=this.state.paddedViewState,t=(0,n.Z)(e.center,2),i=t[0],r=t[1],a=e.spatialReference,o=e.rotation,s=e.scale,l=new Z.w({x:i,y:r,spatialReference:a});this._set("viewpoint",null),this._set("extent",null),this._set("center",l),this._set("zoom",-1),this._set("rotation",o),this._set("scale",s),this._set("spatialReference",a),this._set("state",null),this.animation=null}},{key:"_updateStageChildren",value:function(){var e=this;this._stage.removeAllChildren(),this.rootLayerViews.forEach((function(t){e._stage.addChild(t.container)}));var t=this.graphicsView;this._stage.addChild(t.container),this._stage.addChild(this._magnifierView)}},{key:"_setupSpatialReferenceDependentProperties",value:function(){var e=this,t=new E.h(C.j.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);var i=new Fe({view:this,graphics:this.graphics,requestUpdateCallback:function(){return e.requestUpdate()},container:new qe(t)});this.frameTask.graphicsView=i,this._set("graphicsView",i)}},{key:"_destroySpatialReferenceDependentProperties",value:function(){var e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}},{key:"_spatialReferenceChanged",value:function(e){if(this.ready){this.frameTask.stop();var t,i=(0,c.Z)(this.allLayerViews);try{for(i.s();!(t=i.n()).done;){t.value.processDetach()}}catch(S){i.e(S)}finally{i.f()}this._destroySpatialReferenceDependentProperties();var r=this.state.paddedViewState.clone();if((0,x.t)(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=r.scale;else{var a=r.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=a}var o=r.clone(),s=(0,n.Z)(r.center,2),l=s[0],u=s[1],h=null;try{h=this._project(new Z.w({x:l,y:u,spatialReference:r.spatialReference}),e)}catch(Xe){(0,I.e)()||m.a.getLogger(this.declaredClass).warn(new m.l("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:h.toJSON(),spatialReference:e,error:Xe}))}h||(h=new Z.w({x:0,y:0,spatialReference:e}));var f=(0,P.x)(new _.u({targetGeometry:new Z.w,scale:0,rotation:0}),r.viewpoint,h);o.viewpoint=f;try{var d=[r.size[0]/2,r.size[1]/2],p=[d[0]+20,d[1]],v=r.toMap([0,0],p),y=this._project(new Z.w({x:v[0],y:v[1],spatialReference:r.spatialReference}),e),g=y.x,w=y.y;v[0]=g,v[1]=w,o.toScreen(v,v);var k=(0,P.I)(d,v,p),b=Math.hypot(v[0]-d[0],v[1]-d[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(f.rotation=0,f.targetGeometry=new Z.w({x:0,y:0,spatialReference:e})):(f.scale*=b,f.scale>(0,x.h)("mapview-srswitch-adjust-rotation-scale-threshold")?f.rotation=0:f.rotation+=Number.isFinite(k)?k:0)}catch(C){}this._get("constraints").constrain(f,null),this._get("state").viewpoint=f,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();var M,T=(0,c.Z)(this.allLayerViews);try{for(T.s();!(M=T.n()).done;){M.value.processAttach()}}catch(S){T.e(S)}finally{T.f()}this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}}]),i}((0,P.w)((0,P.z)((0,P.o)(P.J))));je.type="2d",(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"animationManager",void 0),(0,m.e)([(0,m.y)({constructOnly:!0})],je.prototype,"deactivatedWebGLExtensions",void 0),(0,m.e)([(0,m.y)({constructOnly:!0})],je.prototype,"debugWebGLExtensions",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"featuresTilingScheme",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"fullOpacity",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"graphicsTileStore",null),(0,m.e)([(0,m.y)()],je.prototype,"graphicsView",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"state",void 0),(0,m.e)([(0,m.y)()],je.prototype,"initialExtentRequired",null),(0,m.e)([(0,m.y)()],je.prototype,"labelManager",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"resourceManager",null),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"textureManager",null),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"mapViewNavigation",void 0),(0,m.e)([(0,m.y)({constructOnly:!0})],je.prototype,"renderCanvas",void 0),(0,m.e)([(0,m.y)()],je.prototype,"renderingOptions",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"rendering",void 0),(0,m.e)([(0,m.y)({constructOnly:!0})],je.prototype,"supersampleScreenshotsEnabled",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"supportsGround",void 0),(0,m.e)([(0,m.y)()],je.prototype,"_stationaryTimer",void 0),(0,m.e)([(0,m.y)()],je.prototype,"_defaultsFromMapSettings",null),(0,m.e)([(0,m.y)()],je.prototype,"_pePromise",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"typeSpecificPreconditionsReady",null),(0,m.e)([(0,m.y)()],je.prototype,"animation",null),(0,m.e)([(0,m.y)({type:F.m})],je.prototype,"background",null),(0,m.e)([(0,m.y)({value:null,type:Z.w,dependsOn:["state.id","ready"]})],je.prototype,"center",null),(0,m.e)([(0,m.y)({type:le})],je.prototype,"constraints",null),(0,m.e)([(0,m.y)({value:null,type:S.w,dependsOn:["state.id","ready"]})],je.prototype,"extent",null),(0,m.e)([(0,m.y)()],je.prototype,"floors",void 0),(0,m.e)([(0,m.y)({type:De})],je.prototype,"highlightOptions",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"inputManager",void 0),(0,m.e)([(0,m.y)()],je.prototype,"map",void 0),(0,m.e)([(0,m.y)({value:{top:0,right:0,bottom:0,left:0},cast:function(e){return(0,o.Z)({top:0,right:0,bottom:0,left:0},e)}})],je.prototype,"padding",null),(0,m.e)([(0,m.y)()],je.prototype,"resizeAlign",void 0),(0,m.e)([(0,m.y)({readOnly:!0,dependsOn:["state.id"]})],je.prototype,"resolution",null),(0,m.e)([(0,m.y)({value:0,type:Number,dependsOn:["state.id","ready"]})],je.prototype,"rotation",null),(0,m.e)([(0,m.y)({value:0,type:Number,dependsOn:["state.id","ready"]})],je.prototype,"scale",null),(0,m.e)([(0,m.y)({constructOnly:!0})],je.prototype,"spatialReferenceLocked",void 0),(0,m.e)([(0,m.y)()],je.prototype,"stationary",null),(0,m.e)([(0,m.y)({type:Ee,readOnly:!0})],je.prototype,"timeline",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"type",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"updating",null),(0,m.e)([(0,m.y)({value:null,type:_.u,dependsOn:["state.id","ready"]})],je.prototype,"viewpoint",null),(0,m.e)([(0,m.y)({value:-1,dependsOn:["state.id","ready"]})],je.prototype,"zoom",null),(0,m.e)([(0,m.y)({readOnly:!0})],je.prototype,"navigating",null),(0,m.e)([(0,m.y)({type:Xe})],je.prototype,"ui",void 0);var Ue=je=(0,m.e)([(0,m.n)("esri.views.MapView")],je);function He(e){var t,i,n,r,a=e.getObjectId();return a?"".concat(null!==(t=null!==(i=null===(n=e.layer)||void 0===n?void 0:n.uid)&&void 0!==i?i:null===(r=e.sourceLayer)||void 0===r?void 0:r.uid)&&void 0!==t?t:"MapView","/").concat(a):'"MapView/'.concat(e.uid)}function Ke(e,t,i,n,r){return function(a){if(a instanceof g.g){if(a.layer===e)null===r||void 0===r||r();else{var o=e.allLayerViews.find((function(e){return e.layer===a.layer}));o&&(null===n||void 0===n||n(o))}i(He(a))}else{var s=e.allLayerViews.find((function(e){return e.layer===a}));s&&t(s)}}}function We(e,t){if(e)if((0,m.aa)(e)){var i,n=(0,c.Z)(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if((0,m.aa)(r)){var a,o=(0,c.Z)(r);try{for(o.s();!(a=o.n()).done;){t(a.value)}}catch(s){o.e(s)}finally{o.f()}}else t(r)}}catch(s){n.e(s)}finally{n.f()}}else t(e)}var Je=Object.freeze({__proto__:null,default:Ue})},65703:function(e,t,i){i.d(t,{h:function(){return k},l:function(){return y}});var n=i(29439),r=i(37762),a=i(15671),o=i(43144),s=i(82474),l=i(93661),u=i(51732),h=i(48848);function c(e,t){return[e,t]}function f(e,t,i){return e[0]=t,e[1]=i,e}function d(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e}var p=new u.e("0/0/0/0"),v=function(){function e(t,i,n,r,o,s,l,u,h,c,f,d){(0,a.Z)(this,e),this.level=t,this.resolution=i,this.scale=n,this.origin=r,this.first=o,this.last=s,this.size=l,this.norm=u,this.worldStart=h,this.worldEnd=c,this.worldSize=f,this.wrap=d}return(0,o.Z)(e,[{key:"normalizeCol",value:function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t}},{key:"denormalizeCol",value:function(e,t){return this.wrap?this.worldSize[0]*t+e:e}},{key:"getWorldForColumn",value:function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}},{key:"getFirstColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]}},{key:"getLastColumnForWorld",value:function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}},{key:"getColumnForX",value:function(e){return(e-this.origin[0])/this.norm[0]}},{key:"getXForColumn",value:function(e){return this.origin[0]+e*this.norm[0]}},{key:"getRowForY",value:function(e){return(this.origin[1]-e)/this.norm[1]}},{key:"getYForRow",value:function(e){return this.origin[1]-e*this.norm[1]}},{key:"getTileBounds",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p.set(t);var n=i?p.col:this.denormalizeCol(p.col,p.world),r=p.row;return d(e,this.getXForColumn(n),this.getYForRow(r+1),this.getXForColumn(n+1),this.getYForRow(r)),e}},{key:"getTileCoords",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p.set(t);var n=i?p.col:this.denormalizeCol(p.col,p.world);return Array.isArray(e)?f(e,this.getXForColumn(n),this.getYForRow(p.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(p.row)),e}}],[{key:"create",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,s.a)(t.spatialReference),a=i.origin||c(t.origin.x,t.origin.y),o=c(t.size[0]*i.resolution,t.size[1]*i.resolution),u=c(-1/0,-1/0),h=c(1/0,1/0),d=c(1/0,1/0);(0,l.r)(n)&&(f(u,Math.max(0,Math.floor((n.xmin-a[0])/o[0])),Math.max(0,Math.floor((a[1]-n.ymax)/o[1]))),f(h,Math.max(0,Math.floor((n.xmax-a[0])/o[0])),Math.max(0,Math.floor((a[1]-n.ymin)/o[1]))),f(d,h[0]-u[0]+1,h[1]-u[1]+1));var p,v,y,m,g=i.cols,_=i.rows;return!n&&g&&_&&(f(u,g[0],_[0]),f(h,g[1],_[1]),f(d,g[1]-g[0]+1,_[1]-_[0]+1)),t.isWrappable?(p=c(Math.ceil(Math.round((r.valid[1]-r.valid[0])/i.resolution)/t.size[0]),d[1]),v=c(Math.floor((r.origin[0]-a[0])/o[0]),u[1]),y=c(p[0]+v[0]-1,h[1]),m=!0):(v=u,y=h,p=d,m=!1),new e(i.level,i.resolution,i.scale,a,u,h,d,o,v,y,p,m)}}]),e}(),y=function(){function e(){(0,a.Z)(this,e),this.spans=[]}return(0,o.Z)(e,[{key:"acquire",value:function(e){this.lodInfo=e}},{key:"release",value:function(){this.lodInfo=null,this.spans.length=0}},{key:"forEach",value:function(e,t){var i=this.spans,n=this.lodInfo,a=n.level;if(0!==i.length){var o,s=(0,r.Z)(i);try{for(s.s();!(o=s.n()).done;)for(var l=o.value,u=l.row,h=l.colFrom,c=l.colTo,f=h;f<=c;f++)e.call(t,a,u,n.normalizeCol(f),n.getWorldForColumn(f))}catch(d){s.e(d)}finally{s.f()}}}}]),e}();y.pool=new h.h(y);var m=(0,o.Z)((function e(t,i,n){(0,a.Z)(this,e),this.row=t,this.colFrom=i,this.colTo=n})),g=new u.e("0/0/0/0"),_=function(){function e(t,i,n,r,o,s,l,u){(0,a.Z)(this,e),this.x=t,this.ymin=i,this.ymax=n,this.invM=r,this.leftAdjust=o,this.rightAdjust=s,this.leftBound=l,this.rightBound=u}return(0,o.Z)(e,[{key:"incrRow",value:function(){this.x+=this.invM}},{key:"getLeftCol",value:function(){return Math.max(this.x+this.leftAdjust,this.leftBound)}},{key:"getRightCol",value:function(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}],[{key:"create",value:function(t,i){var r;t[1]>i[1]&&(t=(r=[i,t])[0],i=r[1]);var a=t,o=(0,n.Z)(a,2),s=o[0],l=o[1],u=i,h=(0,n.Z)(u,2),c=h[0],f=h[1],d=c-s,p=f-l,v=0!==p?d/p:0,y=(Math.ceil(l)-l)*v,m=(Math.floor(l)-l)*v;return new e(s,Math.floor(l),Math.ceil(f),v,d<0?y:m,d<0?m:y,d<0?c:s,d<0?s:c)}}]),e}(),w=[[0,0],[0,0],[0,0],[0,0]],k=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,a.Z)(this,e),this.tileInfo=t,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};var r=t.lods.slice();r.sort((function(e,t){return t.scale-e.scale}));var o=this._lodInfos=r.map((function(e){return v.create(t,e,n)}));r.forEach((function(e,t){i._infoByLevel[e.level]=o[t],i._infoByScale[e.scale]=o[t],i.scales[t]=e.scale}),this),this._wrap=t.isWrappable}return(0,o.Z)(e,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}},{key:"getLODInfoAt",value:function(e){return this._infoByLevel["number"==typeof e?e:e.level]}},{key:"getTileBounds",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g.set(t);var n=this._infoByLevel[g.level];return n?n.getTileBounds(e,g,i):e}},{key:"getTileCoords",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g.set(t);var n=this._infoByLevel[g.level];return n?n.getTileCoords(e,g,i):e}},{key:"getTileCoverage",value:function(e){var t,i,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:192,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"closest",s="closest"===o?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),l=y.pool.acquire(s),u=this._wrap,h=1/0,c=-1/0,f=l.spans;w[0][0]=w[0][1]=w[1][1]=w[3][0]=-a,w[1][0]=w[2][0]=e.size[0]+a,w[2][1]=w[3][1]=e.size[1]+a;var d,p=(0,r.Z)(w);try{for(p.s();!(d=p.n()).done;){var v=d.value;e.toMap(v,v),v[0]=s.getColumnForX(v[0]),v[1]=s.getRowForY(v[1])}}catch(V){p.e(V)}finally{p.f()}for(var g=[],k=3,x=0;x<4;x++)if(w[x][1]!==w[k][1]){var b=_.create(w[x],w[k]);h=Math.min(b.ymin,h),c=Math.max(b.ymax,c),void 0===g[b.ymin]&&(g[b.ymin]=[]),g[b.ymin].push(b),k=x}else k=x;if(null==h||null==c||c-h>100)return null;var M=[];for(t=h;t<c;){null!=g[t]&&(M=M.concat(g[t])),i=1/0,n=-1/0;for(var T=M.length-1;T>=0;T--){var S=M[T];i=Math.min(i,S.getLeftCol()),n=Math.max(n,S.getRightCol())}if(i=Math.floor(i),n=Math.floor(n),t>=s.first[1]&&t<=s.last[1])if(u)if(s.size[0]<s.worldSize[0])for(var Z=Math.floor(n/s.worldSize[0]),I=Math.floor(i/s.worldSize[0]);I<=Z;I++)f.push(new m(t,Math.max(s.getFirstColumnForWorld(I),i),Math.min(s.getLastColumnForWorld(I),n)));else f.push(new m(t,i,n));else i>s.last[0]||n<s.first[0]||(i=Math.max(i,s.first[0]),n=Math.min(n,s.last[0]),f.push(new m(t,i,n)));t+=1;for(var C=M.length-1;C>=0;C--){var P=M[C];P.ymax>=t?P.incrRow():M.splice(C,1)}}return l}},{key:"getTileParentId",value:function(e){g.set(e);var t=this._infoByLevel[g.level],i=this._lodInfos.indexOf(t)-1;return i<0?null:(this._getTileIdAtLOD(g,this._lodInfos[i],g),g.id)}},{key:"getTileResolution",value:function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}},{key:"getTileScale",value:function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1}},{key:"intersects",value:function(e,t){g.set(t);var i=this._infoByLevel[g.level],a=e.lodInfo;if(a.resolution>i.resolution){this._getTileIdAtLOD(g,a,g);var o,s=a.denormalizeCol(g.col,g.world),l=(0,r.Z)(e.spans);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u.row===g.row&&u.colFrom<=s&&u.colTo>=s)return!0}}catch(b){l.e(b)}finally{l.f()}}if(a.resolution<i.resolution){var h=e.spans.reduce((function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e}),[1/0,-1/0,1/0,-1/0]),c=(0,n.Z)(h,4),f=c[0],d=c[1],p=c[2],v=c[3],y=i.denormalizeCol(g.col,g.world),m=a.getColumnForX(i.getXForColumn(y)),_=a.getRowForY(i.getYForRow(g.row)),w=a.getColumnForX(i.getXForColumn(y+1))-1,k=a.getRowForY(i.getYForRow(g.row+1))-1;return!(m>v||w<p||_>d||k<f)}var x=a.denormalizeCol(g.col,g.world);return e.spans.some((function(e){return e.row===g.row&&e.colFrom<=x&&e.colTo>=x}))}},{key:"normalizeBounds",value:function(e,t,i){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var n=(0,s.a)(this.tileInfo.spatialReference),r=-i*(n.valid[1]-n.valid[0]);e[0]+=r,e[2]+=r}return e}},{key:"getSmallestInfoForScale",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(var i=1;i<t.length-1;i++)if(e>t[i]+1e-6)return this._infoByScale[t[i-1]];return this._infoByScale[t[t.length-1]]}},{key:"getClosestInfoForScale",value:function(e){var t=this.scales;return this._infoByScale[e]||(e=t.reduce((function(t,i){return Math.abs(i-e)<Math.abs(t-e)?i:t}),t[0])),this._infoByScale[e]}},{key:"scaleToLevel",value:function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var i=t.length-1;i>=0;i--)if(e<t[i])return i===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[i]].level+(t[i]-e)/(t[i]-t[i+1]);return this._infoByScale[t[0]].level}},{key:"scaleToZoom",value:function(e){return this.tileInfo.scaleToZoom(e)}},{key:"_getTileIdAtLOD",value:function(e,t,i){var n=this._infoByLevel[i.level];return e.set(i),t.resolution<n.resolution?null:(t.resolution===n.resolution||(e.level=t.level,e.col=Math.floor(i.col*n.resolution/t.resolution+.01),e.row=Math.floor(i.row*n.resolution/t.resolution+.01)),e)}}]),e}()},5430:function(e,t,i){i.d(t,{d:function(){return F},i:function(){return w},l:function(){return _}});var n=i(37762),r=i(60136),a=i(29388),o=i(43144),s=i(15671),l=i(93661),u=i(48848),h=i(85113),c=i(37856),f=i(53921),d=i(46817),p=i(25456),v=i(35237),y=i(51732),m=i(65703),g=(0,o.Z)((function e(t,i){(0,s.Z)(this,e),this.item=t,this.controller=i,this.promise=null})),_=function(){function e(t){(0,s.Z)(this,e),this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new h.e(t.peeker),this.process=t.process;var i=t.scheduler;t.priority&&(0,l.r)(i)&&(this._task=i.registerTask(t.priority,this))}return(0,o.Z)(e,[{key:"destroy",value:function(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}},{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"abort",value:function(e){var t=this._controllers.get(e);t&&t.abort()}},{key:"clear",value:function(){this._queue.clear();var e=[];this._controllers.forEach((function(t){return e.push(t)})),this._controllers.clear(),e.forEach((function(e){return e.abort()})),this._processingItems.clear(),this._cancelNext()}},{key:"forEach",value:function(e){this._deferreds.forEach((function(t,i){return e(i)}))}},{key:"get",value:function(e){var t=this._deferreds.get(e);return t?t.promise:void 0}},{key:"isOngoing",value:function(e){return this._processingItems.has(e)}},{key:"has",value:function(e){return this._deferreds.has(e)}},{key:"pause",value:function(){this._isPaused||(this._isPaused=!0,this._cancelNext())}},{key:"push",value:function(e,t){var i=this,n=this.get(e);if(n)return n;var r=new AbortController,a=null;t&&(a=(0,u.v)(t,(function(){return r.abort()})));var o=function(){s.remove(),(0,l.r)(a)&&a.remove(),i._deferreds.delete(e),i._controllers.delete(e),i._queue.remove(e),i._processingItems.delete(e),i._scheduleNext()},s=(0,u.o)(r.signal,(function(){var t=i._processingItems.get(e);t&&t.controller.abort(),o(),h.reject((0,u.d)())})),h=(0,u.A)();return this._deferreds.set(e,h),this._controllers.set(e,r),h.promise.then(o,o),this._queue.push(e),this._scheduleNext(),h.promise}},{key:"last",value:function(){return this._queue.last()}},{key:"peek",value:function(){return this._queue.peek()}},{key:"popLast",value:function(){return this._queue.popLast()}},{key:"reset",value:function(){var e=[];this._processingItems.forEach((function(t){return e.push(t)})),this._processingItems.clear();for(var t=0,i=e;t<i.length;t++){var n=i[t];this._queue.push(n.item),n.controller.abort()}this._scheduleNext()}},{key:"resume",value:function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}},{key:"takeAll",value:function(){for(var e=[];this._queue.length;)e.push(this._queue.pop());return this.clear(),e}},{key:"running",get:function(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}},{key:"runTask",value:function(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}},{key:"_scheduleNext",value:function(){var e=this;this._task||this._isPaused||this._schedule||(this._schedule=(0,u.k)((function(){e._schedule=null,e._next()})))}},{key:"_next",value:function(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}},{key:"_cancelNext",value:function(){this._schedule&&(this._schedule.remove(),this._schedule=null)}},{key:"_processResult",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}},{key:"_processError",value:function(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}},{key:"_canProcessFulfillment",value:function(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}},{key:"_process",value:function(e){var t=this;if(!(0,l.t)(e)){var i,n=new AbortController,r=new g(e,n);this._processingItems.set(e,r);try{i=this.process(e,n.signal)}catch(S){this._processError(r,S)}(0,u.V)(i)?(r.promise=i,i.then((function(e){return t._processResult(r,e)}),(function(e){return t._processError(r,e)}))):this._processResult(r,i)}}},{key:"test",get:function(){var e=this;return{update:function(t){return e.runTask(t)}}}}]),e}();function w(e,t){if(!(this instanceof w))return new w(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function k(e,t,i){if(!i)return t.indexOf(e);for(var n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function x(e,t){b(e,0,e.children.length,t,e)}function b(e,t,i,n,r){r||(r=O(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var a,o=t;o<i;o++)a=e.children[o],M(r,e.leaf?n(a):a);return r}function M(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function T(e,t){return e.minX-t.minX}function S(e,t){return e.minY-t.minY}function Z(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function I(e){return e.maxX-e.minX+(e.maxY-e.minY)}function C(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function P(e,t){var i=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),r=Math.min(e.maxX,t.maxX),a=Math.min(e.maxY,t.maxY);return Math.max(0,r-i)*Math.max(0,a-n)}function V(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function R(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function O(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z(e,t,i,n,r){for(var a,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=n||(a=t+Math.ceil((i-t)/n/2)*n,(0,f.a)(e,a,t,i,r),o.push(t,a,a,i))}w.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],n=this.toBBox;if(!R(e,t))return i;for(var r,a,o,s,l=[];t;){for(r=0,a=t.children.length;r<a;r++)o=t.children[r],R(e,s=t.leaf?n(o):o)&&(t.leaf?i.push(o):V(e,s)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!R(e,t))return!1;for(var n,r,a,o,s=[];t;){for(n=0,r=t.children.length;n<r;n++)if(a=t.children[n],R(e,o=t.leaf?i(a):a)){if(t.leaf||V(e,o))return!0;s.push(a)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=O([]),this},remove:function(e,t){if(!e)return this;for(var i,n,r,a,o=this.data,s=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],i=u.pop(),a=!0),o.leaf&&-1!==(r=k(e,o.children,t)))return o.children.splice(r,1),l.push(o),this._condense(l),this;a||o.leaf||!V(o,s)?n?(i++,o=n.children[i],a=!1):o=null:(l.push(o),u.push(i),i=0,n=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:T,compareMinY:S,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,n){var r,a=i-t+1,o=this._maxEntries;if(a<=o)return x(r=O(e.slice(t,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,n-1))),(r=O([])).leaf=!1,r.height=n;var s,l,u,h,c=Math.ceil(a/o),f=c*Math.ceil(Math.sqrt(o));for(z(e,t,i,f,this.compareMinX),s=t;s<=i;s+=f)for(z(e,s,u=Math.min(s+f-1,i),c,this.compareMinY),l=s;l<=u;l+=c)h=Math.min(l+c-1,u),r.children.push(this._build(e,l,h,n-1));return x(r,this.toBBox),r},_chooseSubtree:function(e,t,i,n){for(var r,a,o,s,l,u,h,c;n.push(t),!t.leaf&&n.length-1!==i;){for(h=c=1/0,r=0,a=t.children.length;r<a;r++)l=Z(o=t.children[r]),(u=C(e,o)-l)<c?(c=u,h=l<h?l:h,s=o):u===c&&l<h&&(h=l,s=o);t=s||t.children[0]}return t},_insert:function(e,t,i){var n=this.toBBox,r=i?e:n(e),a=[],o=this._chooseSubtree(r,this.data,t,a);for(o.children.push(e),M(o,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)},_split:function(e,t){var i=e[t],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var a=this._chooseSplitIndex(i,r,n),o=O(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,x(i,this.toBBox),x(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=O([e,t]),this.data.height=e.height+1,this.data.leaf=!1,x(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var n,r,a,o,s,l,u,h;for(l=u=1/0,n=t;n<=i-t;n++)o=P(r=b(e,0,n,this.toBBox),a=b(e,n,i,this.toBBox)),s=Z(r)+Z(a),o<l?(l=o,h=n,u=s<u?s:u):o===l&&s<u&&(u=s,h=n);return h},_chooseSplitAxis:function(e,t,i){var n=e.leaf?this.compareMinX:T,r=e.leaf?this.compareMinY:S;this._allDistMargin(e,t,i,n)<this._allDistMargin(e,t,i,r)&&e.children.sort(n)},_allDistMargin:function(e,t,i,n){e.children.sort(n);var r,a,o=this.toBBox,s=b(e,0,t,o),l=b(e,i-t,i,o),u=I(s)+I(l);for(r=t;r<i-t;r++)a=e.children[r],M(s,e.leaf?o(a):a),u+=I(s);for(r=i-t-1;r>=t;r--)a=e.children[r],M(l,e.leaf?o(a):a),u+=I(l);return u},_adjustParentBBoxes:function(e,t,i){for(var n=i;n>=0;n--)M(t[n],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():x(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var D=function(){function e(t,i){(0,s.Z)(this,e),this.key=new y.e(0,0,0,0),this.bounds=(0,p.u)(),this.objectIds=new Set,this.key.set(i);var n=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.scale=n.scale,this.level=n.level}return(0,o.Z)(e,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return d.w.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}},{key:"createChildTiles",value:function(){for(var t=this.key.getChildKeys(),i=u.t.acquire(),n=0;n<t.length;n++)i[n]=new e(this.tileInfoView,t[n]);return i}},{key:"getQuantizationParameters",value:function(){return v.a.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}]),e}(),E={added:[],removed:[]},N=new Set,L=new y.e(0,0,0,0),F=function(e){(0,r.Z)(i,e);var t=(0,a.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this))._tiles=new Map,n._index=w(9,(0,l.h)("esri-csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),n.tiles=[],n.tileScheme=e,n}return(0,o.Z)(i,[{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}},{key:"has",value:function(e){return this._tiles.has(e)}},{key:"get",value:function(e){return this._tiles.get(e)}},{key:"boundsIntersections",value:function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}},{key:"updateTiles",value:function(e){var t,i=this,r={added:[],removed:[]},a=(0,n.Z)(e.added);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!this.has(o)){var s=new D(this.tileScheme,o);this._tiles.set(o,s),this._index.insert(s),r.added.push(s)}}}catch(f){a.e(f)}finally{a.f()}var l,u=(0,n.Z)(e.removed);try{for(u.s();!(l=u.n()).done;){var h=l.value;if(this.has(h)){var c=this.get(h);this._tiles.delete(h),this._index.remove(c),r.removed.push(c)}}}catch(f){u.e(f)}finally{u.f()}this.tiles.length=0,this._tiles.forEach((function(e){return i.tiles.push(e)})),(r.added.length||r.removed.length)&&this.emit("update",r)}},{key:"setViewState",value:function(e){var t=this.tileScheme.getTileCoverage(e,0);if(t){var i=t.spans,r=t.lodInfo,a=r.level;if(i.length>0){var o,s=(0,n.Z)(i);try{for(s.s();!(o=s.n()).done;)for(var l=o.value,u=l.row,h=l.colFrom,c=l.colTo,f=h;f<=c;f++){var d=L.set(a,u,r.normalizeCol(f),r.getWorldForColumn(f)).id;if(N.add(d),!this.has(d)){var p=new D(this.tileScheme,d);this._tiles.set(d,p),this._index.insert(p),this.tiles.push(p),E.added.push(p)}}}catch(g){s.e(g)}finally{s.f()}}for(var v=this.tiles.length-1;v>=0;v--){var y=this.tiles[v];N.has(y.id)||(this._tiles.delete(y.id),this.tiles.splice(v,1),this._index.remove(y),E.removed.push(y))}(E.added.length||E.removed.length)&&this.emit("update",E),m.l.pool.release(t),N.clear(),E.added.length=0,E.removed.length=0}}}]),i}(c.n)},97880:function(e,t,i){i.d(t,{r:function(){return R},y:function(){return T}});var n=i(37762),r=i(15671),a=i(43144),o=i(60136),s=i(29388),l=i(48848),u=i(93661),h=i(29048),c=i(5430),f=i(25456),d=i(65703),p=i(51732);var v=new Set,y=[],m=new Map,g=[0,0],_=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e))._keyToItem=new Map,n.concurrency=6,n.strategy="scale-first",n.tileInfoView=null,n}return(0,a.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.concurrency,i=this.process;this._queue=new c.l({concurrency:t,process:function(t,n){var r=e._keyToItem.get(t);return i(r,{signal:n})},peeker:function(e){return e.values().next().value}})}},{key:"destroy",value:function(){this.clear(),this._queue=(0,u.g)(this._queue)}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return this.length>0||this.onGoingCount>0}},{key:"abort",value:function(e){var t="string"==typeof e?e:e.id;this._queue.abort(t)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}},{key:"has",value:function(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e,t){var i=this,n=e.key.id+"-"+t;if(this.has(n))return this.get(n);var r=this._queue.push(n),a=function(){i._keyToItem.delete(n),i.notifyChange("updating")};return this._keyToItem.set(n,e),r.then(a,a),this.notifyChange("updating"),r}},{key:"reset",value:function(){this._queue.reset(),this.notifyChange("updating")}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var i=this.tileInfoView,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((function(e){var i=t._keyToItem.get(e),a=t.tileInfoView.getTileScale(i.key);m.has(a)||(m.set(a,[]),n=Math.max(a,n),r=Math.min(a,r)),m.get(a).push(i.key),v.add(a)}));var a=this.state.scale;m.has(a)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(y,v),y.sort((function(e,t){return e-t})),a=y.reduce((function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}),y[0])),a=Math.min(a,n),a=Math.max(a,r);var o=m.get(a),s=i.getClosestInfoForScale(a),l=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return o.sort((function(e,t){var i=s.denormalizeCol(e.col,e.world),n=s.denormalizeCol(t.col,t.world);return Math.sqrt((l-i)*(l-i)+(u-e.row)*(u-e.row))-Math.sqrt((l-n)*(l-n)+(u-t.row)*(u-t.row))})),v.clear(),m.clear(),o[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var i,n=this.tileInfoView,r=this.state.center,a=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o=t._keyToItem.get(e);n.getTileCoords(g,o.key);var s=(0,h.m)(g,r);s<a&&(a=s,i=o.key)})),i.id}}]),i}(l.m);(0,l.e)([(0,l.y)({constructOnly:!0})],_.prototype,"concurrency",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],_.prototype,"process",void 0),(0,l.e)([(0,l.y)()],_.prototype,"state",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],_.prototype,"strategy",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],_.prototype,"tileInfoView",void 0),(0,l.e)([(0,l.y)({readOnly:!0})],_.prototype,"updating",null),_=(0,l.e)([(0,l.n)("esri.views.2d.tiling.PagedTileQueue")],_);var w=new Set,k=[],x=new Map,b=[0,0],M=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e))._keyToItem=new Map,n.concurrency=6,n.strategy="scale-first",n.tileInfoView=null,n}return(0,a.Z)(i,[{key:"initialize",value:function(){var e=this,t=this.concurrency,i=this.process,n=this.strategy;this._queue=new c.l({concurrency:t,process:function(t,n){var r=e._keyToItem.get(t);return i(r,{signal:n})},peeker:"scale-first"===n?function(t){return e._peekByScaleFirst(t)}:function(t){return e._peekByCenterFirst(t)}})}},{key:"destroy",value:function(){this.clear(),this._queue=(0,u.g)(this._queue)}},{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return this.length>0||this.onGoingCount>0}},{key:"abort",value:function(e){var t="string"==typeof e?e:e.id;this._queue.abort(t)}},{key:"clear",value:function(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}},{key:"has",value:function(e){return"string"==typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}},{key:"isOngoing",value:function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}},{key:"pause",value:function(){this._queue.pause()}},{key:"push",value:function(e){var t=this,i=e.key.id;if(this._queue.has(i))return this._queue.get(i);var n=this._queue.push(i),r=function(){t._keyToItem.delete(i),t.notifyChange("updating")};return this._keyToItem.set(i,e),n.then(r,r),this.notifyChange("updating"),n}},{key:"reset",value:function(){this._queue.reset()}},{key:"resume",value:function(){this._queue.resume()}},{key:"_peekByScaleFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var i=this.tileInfoView,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach((function(e){var i=t._keyToItem.get(e),a=t.tileInfoView.getTileScale(i.key);x.has(a)||(x.set(a,[]),n=Math.max(a,n),r=Math.min(a,r)),x.get(a).push(i.key),w.add(a)}));var a=this.state.scale;x.has(a)||(function(e,t){e.length=0,t.forEach((function(t){return e.push(t)}))}(k,w),k.sort((function(e,t){return e-t})),a=k.reduce((function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}),k[0])),a=Math.min(a,n),a=Math.max(a,r);var o=x.get(a),s=i.getClosestInfoForScale(a),l=s.getColumnForX(this.state.center[0]),u=s.getRowForY(this.state.center[1]);return o.sort((function(e,t){var i=s.denormalizeCol(e.col,e.world),n=s.denormalizeCol(t.col,t.world);return Math.sqrt((l-i)*(l-i)+(u-e.row)*(u-e.row))-Math.sqrt((l-n)*(l-n)+(u-t.row)*(u-t.row))})),w.clear(),x.clear(),o[0].id}},{key:"_peekByCenterFirst",value:function(e){var t=this;if(!this.state)return e.values().next().value;var i,n=this.tileInfoView,r=this.state.center,a=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o=t._keyToItem.get(e);n.getTileCoords(b,o.key);var s=(0,h.m)(b,r);s<a&&(a=s,i=o.key)})),i.id}}]),i}(l.m);(0,l.e)([(0,l.y)({constructOnly:!0})],M.prototype,"concurrency",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],M.prototype,"process",void 0),(0,l.e)([(0,l.y)()],M.prototype,"state",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],M.prototype,"strategy",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],M.prototype,"tileInfoView",void 0),(0,l.e)([(0,l.y)({readOnly:!0})],M.prototype,"updating",null);var T=M=(0,l.e)([(0,l.n)("esri.views.2d.tiling.TileQueue")],M),S=function(){function e(t,i,n){(0,r.Z)(this,e),this.maxSize=t,this._tileInfoView=i,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}return(0,a.Z)(e,[{key:"has",value:function(e){return this._tilePerId.has(e)}},{key:"get",value:function(e){return this._tilePerId.get(e)}},{key:"pop",value:function(e){var t=this._tilePerId.get(e);if(t){var i=t.key.level,n=this._tileKeysPerLevel[i];Z(this._tilePerId,e);for(var r=0;r<n.length;r++)if(n[r].id===e){n.splice(r,1);break}return t.visible=!0,t}}},{key:"add",value:function(e){e.visible=!1;var t=e.key,i=t.id;if(!this._tilePerId.has(i)){this._tilePerId.set(i,e);var n=t.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(t)}}},{key:"prune",value:function(e,t,i){var n=this._tilePerId.size;if(!(n<=this.maxSize)){for(var r=this._tileKeysPerLevel.length-1;n>this.maxSize&&r>=0;)r!==e&&(n=this._pruneAroundCenterTile(n,t,i,r)),r--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,t,i,e))}}},{key:"_pruneAroundCenterTile",value:function(e,t,i,n){var r=this._tileKeysPerLevel[n];if(!r||0===r.length)return e;var a=this._tileInfoView.tileInfo,o=a.size,s=a.origin,l=i*o[0],u=i*o[1],c=[0,0],f=[0,0];for(r.sort((function(e,i){return c[0]=s.x+l*(e.col+.5),c[1]=s.y-u*(e.row+.5),f[0]=s.x+l*(i.col+.5),f[1]=s.y-u*(i.row+.5),(0,h.b)(c,t)-(0,h.b)(f,t)}));r.length>0;){var d=r.pop();if(this._removeTile(d.id),--e===this.maxSize)break}return e}},{key:"_removeTile",value:function(e){var t=this._tilePerId.get(e);this._removedFunc&&t&&this._removedFunc(t),Z(this._tilePerId,e)}}]),e}();function Z(e,t){e.delete(t)}var I=new p.e(0,0,0,0),C=new Map,P=[],V=[],R=function(){function e(t){var i=this;(0,r.Z)(this,e),this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=null==t.resampling||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),null!=t.buffer&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new S(t.cacheSize,this.tileInfoView,(function(e){i.releaseTile(e)})))}return(0,a.Z)(e,[{key:"destroy",value:function(){this.tileIndex.clear()}},{key:"update",value:function(e){var t=this,i=this.resampling,r=this.tileIndex,a=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(V.length=0,P.length=0,C.clear(),a){var o=this.tileInfoView.tileInfo,s=o.minScale,l=o.maxScale,u=a.spans,h=a.lodInfo,c=h.level,f=e.state,p=f.scale,v=f.center,y=f.resolution,m=!e.stationary&&p>this._previousScale;if(this._previousScale=p,this.tiles.length=0,!i&&(p>s||p<l))return this.tiles.length=0,C.clear(),r.forEach((function(e){t.releaseTile(e)})),r.clear(),V.length=0,P.length=0,C.clear(),d.l.pool.release(a),!0;r.forEach((function(e){return e.visible=!0}));var g=0,_=0;if(u.length>0){var w,k=(0,n.Z)(u);try{for(k.s();!(w=k.n()).done;)for(var x=w.value,b=x.row,M=x.colFrom,T=x.colTo,S=M;S<=T;S++){g++;var Z=I.set(c,b,h.normalizeCol(S),h.getWorldForColumn(S)).id;if(r.has(Z)){var R=r.get(Z);R.isReady?(C.set(Z,R),_++):m||this._addParentTile(Z,C)}else{var O=void 0;if(this._tileCache&&this._tileCache.has(Z)){if(O=this._tileCache.pop(Z),this.tileIndex.set(Z,O),O.isReady){C.set(Z,O),_++;continue}}else O=this.acquireTile(I),this.tileIndex.set(Z,O);m||this._addParentTile(Z,C)}}}catch(A){k.e(A)}finally{k.f()}}var z=_===g;r.forEach((function(e,i){if(I.set(i),!C.has(i)){var n=t.tileInfoView.intersects(a,I),r="purge"===t.cachePolicy?I.level!==c:I.level>c;!n||!m&&z?!r&&n||P.push(i):e.isReady?r&&"purge"===t.cachePolicy&&t._hasReadyAncestor(I,c)?P.push(i):V.push(i):r&&P.push(i)}}));var D,E=(0,n.Z)(V);try{for(E.s();!(D=E.n()).done;){var N=D.value,L=r.get(N);L&&L.isReady&&C.set(N,L)}}catch(A){E.e(A)}finally{E.f()}var F,q=(0,n.Z)(P);try{for(q.s();!(F=q.n()).done;){var B=F.value,Y=r.get(B);this._tileCache?this._tileCache.add(Y):this.releaseTile(Y),r.delete(B)}}catch(A){q.e(A)}finally{q.f()}return C.forEach((function(e){return t.tiles.push(e)})),r.forEach((function(e){C.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(c,v,y),d.l.pool.release(a),C.clear(),z}}},{key:"clear",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this.tileIndex;t&&i.forEach((function(t){e.releaseTile(t)})),i.clear()}},{key:"updateCacheSize",value:function(e){this._tileCache&&(this._tileCache.maxSize=e)}},{key:"_addParentTile",value:function(e,t){for(var i=e,n=null;i=this.tileInfoView.getTileParentId(i);)if(this.tileIndex.has(i)){if((n=this.tileIndex.get(i))&&n.isReady){t.has(n.key.id)||t.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n&&n.isReady)){t.has(n.key.id)||t.set(n.key.id,n);break}}},{key:"_hasReadyAncestor",value:function(e,t){var i=(0,f.u)();this.tileInfoView.getTileBounds(i,e,!0);var r,a=(0,n.Z)(this.tileIndex.values());try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.isReady&&o.key.level>=t&&o.key.level<e.level){var s=(0,f.u)();if(this.tileInfoView.getTileBounds(s,o.key,!0),(0,f.R)(s,i))return!0}}}catch(l){a.e(l)}finally{a.f()}return!1}}]),e}()},17332:function(e,t,i){var n;function r(e){return"global"===e?n.Global:n.Local}function a(e){return e===n.Global?"global":"local"}i.d(t,{a:function(){return a},l:function(){return n},o:function(){return r}}),function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"}(n||(n={}))},26313:function(e,t,i){i.d(t,{B:function(){return w},M:function(){return c},a:function(){return r},b:function(){return p},c:function(){return u},f:function(){return d},g:function(){return g},h:function(){return f},i:function(){return h},l:function(){return v},o:function(){return s},p:function(){return y},r:function(){return o},s:function(){return a},u:function(){return l},y:function(){return m}});var n=i(71802);function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e,t,i,n,r,a,o,s,l,u){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(e,t){if(e===t){var i=t[1],n=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=n,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function l(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=h*o-s*u,f=-h*a+s*l,d=u*a-o*l,p=i*c+n*f+r*d;return p?(p=1/p,e[0]=c*p,e[1]=(-h*n+r*u)*p,e[2]=(s*n-r*o)*p,e[3]=f*p,e[4]=(h*i-r*l)*p,e[5]=(-s*i+r*a)*p,e[6]=d*p,e[7]=(-u*i+n*l)*p,e[8]=(o*i-n*a)*p,e):null}function u(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],h=t[8];return e[0]=o*h-s*u,e[1]=r*u-n*h,e[2]=n*s-r*o,e[3]=s*l-a*h,e[4]=i*h-r*l,e[5]=r*a-i*s,e[6]=a*u-o*l,e[7]=n*l-i*u,e[8]=i*o-n*a,e}function h(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],f=i[0],d=i[1],p=i[2],v=i[3],y=i[4],m=i[5],g=i[6],_=i[7],w=i[8];return e[0]=f*n+d*o+p*u,e[1]=f*r+d*s+p*h,e[2]=f*a+d*l+p*c,e[3]=v*n+y*o+m*u,e[4]=v*r+y*s+m*h,e[5]=v*a+y*l+m*c,e[6]=g*n+_*o+w*u,e[7]=g*r+_*s+w*h,e[8]=g*a+_*l+w*c,e}function c(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],f=i[0],d=i[1];return e[0]=n,e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=f*n+d*o+u,e[7]=f*r+d*s+h,e[8]=f*a+d*l+c,e}function f(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],f=Math.sin(i),d=Math.cos(i);return e[0]=d*n+f*o,e[1]=d*r+f*s,e[2]=d*a+f*l,e[3]=d*o-f*n,e[4]=d*s-f*r,e[5]=d*l-f*a,e[6]=u,e[7]=h,e[8]=c,e}function d(e,t,i){var n=i[0],r=i[1],a=i[2];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=a*t[6],e[7]=a*t[7],e[8]=a*t[8],e}function p(e,t,i){var n=i[0],r=i[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e}function v(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function y(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=i+i,s=n+n,l=r+r,u=i*o,h=n*o,c=n*s,f=r*o,d=r*s,p=r*l,v=a*o,y=a*s,m=a*l;return e[0]=1-c-p,e[3]=h-m,e[6]=f+y,e[1]=h+m,e[4]=1-u-p,e[7]=d-v,e[2]=f-y,e[5]=d+v,e[8]=1-u-c,e}function m(e,t){var i=t[0],n=t[1],r=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],h=t[10],c=h*o-s*u,f=-h*a+s*l,d=u*a-o*l,p=i*c+n*f+r*d;if(!p)return null;var v=1/p;return e[0]=c*v,e[1]=(-h*n+r*u)*v,e[2]=(s*n-r*o)*v,e[3]=f*v,e[4]=(h*i-r*l)*v,e[5]=(-s*i+r*a)*v,e[6]=d*v,e[7]=(-u*i+n*l)*v,e[8]=(o*i-n*a)*v,e}function g(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=t[9],f=t[10],d=t[11],p=t[12],v=t[13],y=t[14],m=t[15],g=i*s-n*o,_=i*l-r*o,w=i*u-a*o,k=n*l-r*s,x=n*u-a*s,b=r*u-a*l,M=h*v-c*p,T=h*y-f*p,S=h*m-d*p,Z=c*y-f*v,I=c*m-d*v,C=f*m-d*y,P=g*C-_*I+w*Z+k*S-x*T+b*M;return P?(P=1/P,e[0]=(s*C-l*I+u*Z)*P,e[1]=(l*S-o*C-u*T)*P,e[2]=(o*I-s*S+u*M)*P,e[3]=(r*I-n*C-a*Z)*P,e[4]=(i*C-r*S+a*T)*P,e[5]=(n*S-i*I-a*M)*P,e[6]=(v*b-y*x+m*k)*P,e[7]=(y*w-p*b-m*_)*P,e[8]=(p*x-v*w+m*g)*P,e):null}function _(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function w(e){var t=(0,n.d)(),i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8];return Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(r*r+s*s+h*h))<=t&&Math.abs(1-(a*a+l*l+c*c))<=t}var k=h,x=_;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:r,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:a,identity:o,transpose:s,invert:l,adjoint:u,determinant:function(e){var t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-o*l)+i*(-u*r+o*s)+n*(l*r-a*s)},multiply:h,translate:c,rotate:f,scale:d,scaleByVec2:p,fromTranslation:v,fromRotation:function(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=0,e[3]=-i,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:y,normalFromMat4Legacy:m,normalFromMat4:g,projection:function(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},add:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e},subtract:_,multiplyScalar:function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e},multiplyScalarAndAdd:function(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e[4]=t[4]+i[4]*n,e[5]=t[5]+i[5]*n,e[6]=t[6]+i[6]*n,e[7]=t[7]+i[7]*n,e[8]=t[8]+i[8]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8],f=t[0],d=t[1],p=t[2],v=t[3],y=t[4],m=t[5],g=t[6],_=t[7],w=t[8],k=(0,n.d)();return Math.abs(i-f)<=k*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(r-d)<=k*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-p)<=k*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-v)<=k*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-y)<=k*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-m)<=k*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-g)<=k*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(h-_)<=k*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(c-w)<=k*Math.max(1,Math.abs(c),Math.abs(w))},isOrthoNormal:w,mul:k,sub:x},Symbol.toStringTag,{value:"Module"}))},53921:function(e,t,i){i.d(t,{a:function(){return s}});var n,r,a,o={exports:{}};n=o,r=function(){function e(i,n,r,a,o){for(;a>r;){if(a-r>600){var s=a-r+1,l=n-r+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(l-s/2<0?-1:1);e(i,n,Math.max(r,Math.floor(n-l*h/s+c)),Math.min(a,Math.floor(n+(s-l)*h/s+c)),o)}var f=i[n],d=r,p=a;for(t(i,r,n),o(i[a],f)>0&&t(i,r,a);d<p;){for(t(i,d,p),d++,p--;o(i[d],f)<0;)d++;for(;o(i[p],f)>0;)p--}0===o(i[r],f)?t(i,r,p):t(i,++p,a),p<=n&&(r=p+1),n<=p&&(a=p-1)}}function t(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function i(e,t){return e<t?-1:e>t?1:0}return function(t,n,r,a,o){e(t,n,r||0,a||t.length-1,o||i)}},void 0!==(a=r())&&(n.exports=a);var s=o.exports},15870:function(e,t,i){function n(e,t,i,n){var r=3*e,a=3*(i-e)-r,o=1-r-a,s=3*t,l=3*(n-t)-s,u=1-s-l;function h(e){return((o*e+a)*e+r)*e}function c(e){return((u*e+l)*e+s)*e}function f(e){return(3*o*e+2*a)*e+r}function d(e,t){var i,n,r,a,o,s;for(r=e,s=0;s<8;s++){if(a=h(r)-e,Math.abs(a)<t)return r;if(o=f(r),Math.abs(o)<1e-6)break;r-=a/o}if((r=e)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(a=h(r),Math.abs(a-e)<t)return r;e>a?i=r:n=r,r=.5*(n-i)+i}return r}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;return c(d(e,t))}}i.d(t,{e:function(){return n},r:function(){return o},t:function(){return a}});var r=/^cubic-bezier\((.*)\)/,a={};function o(e){var t=a[e]||null;if(!t){var i=r.exec(e);if(i){var o=i[1].split(",").map((function(e){return parseFloat(e.trim())}));4!==o.length||o.some((function(e){return isNaN(e)}))||(t=n.apply(n,o))}}return t}a.ease=n(.25,.1,.25,1),a.linear=n(0,0,1,1),a.easeIn=a["ease-in"]=n(.42,0,1,1),a.easeOut=a["ease-out"]=n(0,0,.58,1),a.easeInOut=a["ease-in-out"]=n(.42,0,.58,1)},13239:function(e,t,i){function n(){return[0,0]}function r(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=[0,0],i=Math.min(2,e.length),n=0;n<i;++n)t[n]=e[n];return t}function s(e,t){return new Float64Array(e,t,2)}function l(){return[0,0]}function u(){return a(1,1)}function h(){return a(1,0)}function c(){return a(0,1)}i.d(t,{e:function(){return o},f:function(){return f},i:function(){return d},n:function(){return n},o:function(){return s},r:function(){return a},t:function(){return r}});var f=[0,0],d=u(),p=h(),v=c();Object.freeze(Object.defineProperty({__proto__:null,create:n,clone:r,fromValues:a,fromArray:o,createView:s,zeros:l,ones:u,unitX:h,unitY:c,ZEROS:f,ONES:d,UNIT_X:p,UNIT_Y:v},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=77.d9f818f4.chunk.js.map