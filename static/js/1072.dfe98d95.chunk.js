"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[1072],{59155:function(e,t,n){n.d(t,{m:function(){return y}});var r=n(74165),a=n(15861),i=n(15671),u=n(43144),s=n(11752),o=n(61120),p=n(60136),l=n(29388),c=n(48848),d=n(93661),f=n(82474),h=n(12953),m=n(35237),v=n(31303),y=function(e){var t=function(e){(0,p.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).view=null,e}return(0,u.Z)(n,[{key:"fetchPopupFeatures",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,u,s,o,p,l,h,y,w,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.layer,t){e.next=3;break}throw new c.s("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a});case 3:if(i=a.popupEnabled,u=(0,v.s)(a,n),i&&!(0,d.t)(u)){e.next=6;break}throw new c.s("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:i,popupTemplate:u});case 6:return e.next=8,u.getRequiredFields();case 8:return s=e.sent,(o=new m.x).timeExtent=this.timeExtent,o.geometry=t,o.outFields=s,o.outSpatialReference=t.spatialReference,p=this.view.resolution,l="2d"===this.view.type?new f.w(p,p,this.view.spatialReference):new f.w(.5*p,.5*p,this.view.spatialReference),h=u.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},y=h.returnTopmostRaster,w=h.showNoDataRecords,x={returnDomainValues:!0,returnTopmostRaster:y,pixelSize:l,showNoDataRecords:w,signal:(0,d.r)(n)?n.signal:null},e.abrupt("return",a.queryVisibleRasters(o,x).then((function(e){return e})));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e;return!!(0,s.Z)((0,o.Z)(n.prototype),"canResume",this).call(this)&&!(null!==(e=this.timeExtent)&&void 0!==e&&e.isEmpty)}}]),n}(e);return(0,c.e)([(0,c.y)()],t.prototype,"layer",void 0),(0,c.e)([(0,c.y)()],t.prototype,"suspended",void 0),(0,c.e)([(0,c.y)(h.g)],t.prototype,"timeExtent",void 0),(0,c.e)([(0,c.y)()],t.prototype,"view",void 0),t=(0,c.e)([(0,c.n)("esri.views.layers.ImageryLayerView")],t)}},61072:function(e,t,n){n.r(t);var r=n(74165),a=n(15861),i=n(15671),u=n(43144),s=n(60136),o=n(29388),p=n(48848),l=n(93661),c=n(50690),d=n(23602),f=n(59155),h=(n(59389),n(46817),n(82474),n(40114),n(25456),n(71802),n(28390),n(17455),n(62610),n(1500),n(74384),n(40558),n(56162),n(64998),n(25577),n(93314),n(37856),n(15751),n(59984),n(20302),n(53586),n(65094),n(60369),n(92072),n(37944),n(86086),n(21385),n(89794),n(48200),n(85253),n(93209),n(46337),n(81556),n(93116),n(42467),n(46737),n(52113),n(75255),n(42667),n(61118),n(85113),n(23585),n(630),n(82396),n(47855),n(95249),n(79557),n(65415),n(25747),n(26313),n(37077),n(49228),n(41723),n(64772),n(91681),n(43955),n(76291),n(13239),n(24093),n(6189),n(17332),n(87750),n(20846),n(67430),n(87424),n(10464),n(32043),n(98598),n(19941),n(39994),n(49871),n(63212),n(69717),n(53409),n(35182),n(62466),n(51816),n(68781),n(69641),n(15436),n(35237),n(89181),n(69768),n(35865),n(51219),n(66577),n(95643),n(33795),n(43976),n(6762),n(2959),n(2821),n(33794),n(71147),n(84186),n(15529),n(70449),n(22603),n(56546),n(39926),n(8141),n(26151),n(90429),n(52559),n(95399),n(98987),n(99795),n(87753),n(29130),n(1685),n(12953),n(74797),n(45999),n(72973),n(62710),n(52721),n(61903),n(23444),n(40811),n(51920),n(63393),n(90442),n(64854),n(24623),n(64264),n(6379),n(21015),n(23341),n(41820),n(20086),n(92982),n(61416),n(77880),n(74494),n(77755),n(71645),n(89311),n(67066),n(39769),n(70607),n(85700),n(3719),n(32161),n(37686),n(16641),n(62642),n(90316),n(19891),n(47748),n(70522),n(43066),n(29048),n(68136),n(50253),n(27205),n(16263),n(3356),n(70381),n(20675),n(85026),n(33973),n(42233),n(93122),n(70288),n(95414),n(57791),n(43345),n(75833),n(31698),n(94777),n(4937),n(87440),n(21744),n(18936),n(4397),n(25217),n(43406),n(45184),n(72361),n(22159),n(73911),n(87917),n(46018),n(70863),n(62312),n(24648),n(63999),n(1797),n(5526),n(2473),n(59929),n(2467),n(75257),n(26789),n(64095),n(51732),n(2851),n(70285),n(72770),n(3393),n(42947),n(52195),n(35264),n(31303),function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).type="imagery-3d",e.redrawDebounced=(0,p.a1)(function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.redraw((function(t,n){return e._redrawImage(t,n)}),n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),2e3),e}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.handles.add([(0,c.f)((function(){return e.view.basemapTerrain.ready}),(function(){return e._initializeMaximumDataResolution()}),{once:!0,initial:!0}),this.layer.on("redraw",(function(){return e.updatingHandles.addPromise(e.redrawDebounced())}))]),this.updatingHandles.add((function(){var t,n;return null===(t=e.layer)||void 0===t||null===(n=t.exportImageServiceParameters)||void 0===n?void 0:n.version}),(function(){e.updatingHandles.addPromise(e.refreshDebounced())})),this.updatingHandles.add((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.renderer}),(function(){e.updatingHandles.addPromise(e.refreshDebounced())})),this.updatingHandles.add((function(){return e.timeExtent}),(function(){return e.updatingHandles.addPromise(e.refreshDebounced())}))}},{key:"_initializeMaximumDataResolution",value:function(){this.maximumDataResolution=this.layer.loaded?this.layer.serviceRasterInfo.pixelSize:null}},{key:"getFetchOptions",value:function(){return{timeExtent:this.timeExtent}}},{key:"processResult",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.imageOrCanvasElement){e.next=4;break}t.image=n.imageOrCanvasElement,e.next=8;break;case 4:return t.image=document.createElement("canvas"),t.pixelData=n.pixelData,e.next=8,this._redrawImage(t,a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_redrawImage",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i,u,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.image instanceof HTMLCanvasElement&&!(0,l.t)(t.pixelData)){e.next=2;break}throw new Error;case 2:return a=t.image,i=a.getContext("2d"),e.next=6,this.layer.applyRenderer(t.pixelData,{signal:n});case 6:if(u=e.sent,s=this.layer.applyFilter(u).pixelBlock,!(0,l.t)(s)){e.next=10;break}throw new Error;case 10:a.width=s.width,a.height=s.height,(o=i.createImageData(s.width,s.height)).data.set(s.getAsRGBA()),i.putImageData(o,0,0);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}((0,f.m)(d.F))),m=h=(0,p.e)([(0,p.n)("esri.views.3d.layers.ImageryLayerView3D")],h);t.default=m},31303:function(e,t,n){n.d(t,{d:function(){return o},s:function(){return l}});var r=n(74165),a=n(93433),i=n(15861),u=n(93661),s=n(59984);function o(e){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,p,l,c,d,f,h,m=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:t.popupTemplate,!(0,u.t)(n)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.getRequiredFields(t.fieldsIndex);case 5:if(i=e.sent,o=n.lastEditInfoEnabled,p=t.objectIdField,l=t.typeIdField,c=t.globalIdField,d=t.relationships,!i.includes("*")){e.next=13;break}return e.abrupt("return",["*"]);case 13:if(!o){e.next=19;break}return e.next=16,(0,s.C)(t);case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=[];case 20:return f=e.t0,h=(0,s.T)(t.fieldsIndex,[].concat((0,a.Z)(i),(0,a.Z)(f))),e.abrupt("return",(l&&h.push(l),h&&p&&t.fieldsIndex.has(p)&&!h.includes(p)&&h.push(p),h&&c&&t.fieldsIndex.has(c)&&!h.includes(c)&&h.push(c),d&&d.forEach((function(e){var n=e.keyField;h&&n&&t.fieldsIndex.has(n)&&!h.includes(n)&&h.push(n)})),h));case 23:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function l(e,t){return e.popupTemplate?e.popupTemplate:(0,u.r)(t)&&t.defaultPopupTemplateEnabled&&(0,u.r)(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}}]);
//# sourceMappingURL=1072.dfe98d95.chunk.js.map