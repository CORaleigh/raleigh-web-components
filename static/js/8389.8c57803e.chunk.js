"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[8389],{873:function(e,t,n){n.d(t,{a:function(){return p},c:function(){return f},l:function(){return d},u:function(){return u}});var r=n(4942),i=n(1413),a=n(50165),s=n(14739),o=n(50338);function u(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.l:"esriGeometryPolyline"===e?o.o:o.S}}}var c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,l=1;function p(e,t){if((0,a.c)("esri-csp-restrictions"))return function(){return(0,i.Z)((0,r.Z)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var s in e)n+="this".concat(c.test(s)?".".concat(s):'["'.concat(s,'"]')," = ").concat(JSON.stringify(e[s]),";");var o=new Function("\n      return class AttributesClass$".concat(l++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new o}}catch(o){return function(){return(0,i.Z)((0,r.Z)({},t,null),e)}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,a.m)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.t,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},50338:function(e,t,n){n.d(t,{S:function(){return o},e:function(){return r},i:function(){return i},l:function(){return a},o:function(){return s},r:function(){return c},s:function(){return l},t:function(){return u},y:function(){return p}});var r=[252,146,31,255],i=[153,153,153,255],a={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},u={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},8389:function(e,t,n){n.d(t,{F:function(){return w},I:function(){return v},N:function(){return M},S:function(){return I},T:function(){return k},j:function(){return b},k:function(){return F},q:function(){return q},v:function(){return O},x:function(){return j}});var r=n(74165),i=n(37762),a=n(1413),s=n(70804),o=n(15861),u=(n(33530),n(13994)),c=n(50165),l=n(77322),p=n(30594),d=n(9e4),f=n(40853),y=n(873),m=n(39001),g=n(31412),h=c.s.getLogger("esri.layers.graphics.sources.ogcfeature"),b="http://www.opengis.net/def/crs/",w="".concat(b,"OGC/1.3/CRS84");function v(e,t){return S.apply(this,arguments)}function S(){return S=(0,o.Z)((0,r.Z)().mark((function e(t,n){var s,o,l,p,d,b,w,v,S,k,Z,F,x,I,T,j,C,M,q,N,O,A=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=A.length>2&&void 0!==A[2]?A[2]:{},o=A.length>3&&void 0!==A[3]?A[3]:5,l=t.links,p=U(l,"items","application/geo+json")||U(l,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!(0,c.t)(p)){e.next=5;break}throw new c.a("ogc-feature-layer:missing-items-page","Missing items url");case 5:return e.next=7,(0,u.U)(p.href,{signal:s.signal,query:(0,a.Z)((0,a.Z)({limit:o},s.customParameters),{},{token:s.apiKey}),headers:{accept:"application/geo+json"}});case 7:return d=e.sent,b=d.data,e.next=11,(0,f.O)(b);case 11:if(w=(0,f.T)(b,{geometryType:n.geometryType}),v=n.fields||w.fields||[],S=null!=n.hasZ?n.hasZ:w.hasZ,k=w.geometryType,Z=n.objectIdField||w.objectIdFieldName||"OBJECTID",F=n.timeInfo,x=v.find((function(e){return e.name===Z}))){e.next=20;break}if(w.objectIdFieldType){e.next=17;break}throw new c.a("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");case 17:v.unshift({name:Z,alias:Z,type:"esriFieldTypeOID",editable:!1,nullable:!1}),e.next=21;break;case 20:x.type="esriFieldTypeOID",x.editable=!1,x.nullable=!1;case 21:Z!==w.objectIdFieldName&&(I=v.find((function(e){return e.name===w.objectIdFieldName})))&&(I.type="esriFieldTypeInteger"),v===w.fields&&w.unknownFields.length>0&&h.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:w.unknownFields}}),T=(0,i.Z)(v),e.prev=24,T.s();case 26:if((j=T.n()).done){e.next=34;break}if(null==(C=j.value).name&&(C.name=C.alias),null==C.alias&&(C.alias=C.name),"esriFieldTypeOID"!==C.type&&"esriFieldTypeGlobalID"!==C.type&&(C.editable=null==C.editable||!!C.editable,C.nullable=null==C.nullable||!!C.nullable),C.name){e.next=30;break}throw new c.a("ogc-feature-layer:invalid-field-name","field name is missing",{field:C});case 30:if(g.i.jsonValues.includes(C.type)){e.next=32;break}throw new c.a("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(C.name,'"'),{field:C});case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),T.e(e.t0);case 39:return e.prev=39,T.f(),e.finish(39);case 42:return F&&(M=new m.d(v),F.startTimeField&&((q=M.get(F.startTimeField))?(F.startTimeField=q.name,q.type="esriFieldTypeDate"):F.startTimeField=null),F.endTimeField&&((N=M.get(F.endTimeField))?(F.endTimeField=N.name,N.type="esriFieldTypeDate"):F.endTimeField=null),F.trackIdField&&((O=M.get(F.trackIdField))?F.trackIdField=O.name:(F.trackIdField=null,h.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:F}}))),F.startTimeField||F.endTimeField||(h.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:F}}),F=null)),e.abrupt("return",{drawingInfo:k?(0,y.u)(k):null,geometryType:k,fields:v,hasZ:!!S,objectIdField:Z,timeInfo:F});case 44:case"end":return e.stop()}}),e,null,[[24,36,39,42]])}))),S.apply(this,arguments)}function k(e){return Z.apply(this,arguments)}function Z(){return Z=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,l,p,d,f,y=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:{},i=t.links,s=U(i,"data","application/json")||U(i,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json"),!(0,c.t)(s)){e.next=4;break}throw new c.a("ogc-feature-layer:missing-collections-page","Missing collections url");case 4:return o=n.apiKey,l=n.customParameters,p=n.signal,e.next=9,(0,u.U)(s.href,{signal:p,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},l),{},{token:o})});case 9:return d=e.sent,f=d.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function F(e){return x.apply(this,arguments)}function x(){return x=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,l,p,d,f,y=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:{},i=t.links,s=U(i,"conformance","application/json")||U(i,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json"),!(0,c.t)(s)){e.next=4;break}throw new c.a("ogc-feature-layer:missing-conformance-page","Missing conformance url");case 4:return o=n.apiKey,l=n.customParameters,p=n.signal,e.next=9,(0,u.U)(s.href,{signal:p,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},l),{},{token:o})});case 9:return d=e.sent,f=d.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return T=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,c,l,p=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},i=n.apiKey,s=n.customParameters,o=n.signal,e.next=6,(0,u.U)(t,{signal:o,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},s),{},{token:i})});case 6:return c=e.sent,l=c.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function j(e){return C.apply(this,arguments)}function C(){return C=(0,o.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,l,p,d,f,y=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:{},i="application/vnd.oai.openapi+json;version=3.0",s=U(t.links,"service-desc",i),!(0,c.t)(s)){e.next=4;break}return e.abrupt("return",(h.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null));case 4:return o=n.apiKey,l=n.customParameters,p=n.signal,e.next=9,(0,u.U)(s.href,{signal:p,headers:{accept:i},query:(0,a.Z)((0,a.Z)({},l),{},{token:o})});case 9:return d=e.sent,f=d.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function M(e){var t,n=null===(t=(0,s.Z)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e))||void 0===t?void 0:t.groups;if(!n)return null;var r=n.authority,i=n.code;switch(r.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return l.k.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return l.k.WGS84.wkid;default:return null}case"esri":case"epsg":var a=Number.parseInt(i,10);return Number.isNaN(a)?null:a;default:return null}}function q(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,n,i);case 2:return a=e.sent,e.abrupt("return",(0,p.s)(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){return A.apply(this,arguments)}function A(){return A=(0,o.Z)((0,r.Z)().mark((function e(t,n,s){var o,y,m,g,h,b,w,v,S,k,Z,F,x,I,T,j,C,M,q,N,O,A,L,W,z,_,B,K,E,Q,$,J,H,V,X,Y,ee,te,ne,re,ie,ae;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.capabilities.query.maxRecordCount,y=t.collection,m=t.layerDefinition,g=t.queryParameters,h=g.apiKey,b=g.customParameters,w=t.spatialReference,v=t.supportedCrs,S=y.links,k=U(S,"items","application/geo+json")||U(S,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!(0,c.t)(k)){e.next=3;break}throw new c.a("ogc-feature-layer:missing-items-page","Missing items url");case 3:if(Z=n.geometry,F=n.num,x=n.start,I=n.timeExtent,T=n.where,!n.objectIds){e.next=6;break}throw new c.a("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");case 6:return j=l.k.fromJSON(w),C=(0,c.af)(n.outSpatialReference,j),M=C.isWGS84?null:G(C,v),q=D(Z,v),N=R(I),O=P(T),A=null!==F&&void 0!==F?F:null!=x&&void 0!==x?10:o,e.next=15,(0,u.U)(k.href,(0,a.Z)((0,a.Z)({},s),{},{query:(0,a.Z)((0,a.Z)((0,a.Z)({},b),q),{},{crs:M,datetime:N,query:O,limit:A,startindex:x,token:h}),headers:{accept:"application/geo+json"}}));case 15:if(L=e.sent,W=L.data,z=!1,W.links&&(_=W.links.find((function(e){return"next"===e.rel})),z=!!_),!z&&Number.isInteger(W.numberMatched)&&Number.isInteger(W.numberReturned)&&(z=W.numberReturned<W.numberMatched),B=m.fields,K=m.globalIdField,E=m.hasM,Q=m.hasZ,$=m.objectIdField,J=m.geometryType,H=(0,f.L)(W,{geometryType:J,hasZ:Q,objectIdField:$}),!M&&C.isWebMercator){V=(0,i.Z)(H);try{for(V.s();!(X=V.n()).done;)Y=X.value,(0,c.r)(Y.geometry)&&((ee=(0,p.n)(Y.geometry,J,Q,!1)).spatialReference=l.k.WGS84,Y.geometry=(0,p.t)((0,l.M)(ee,C)))}catch(r){V.e(r)}finally{V.f()}}te=(0,i.Z)(H);try{for(te.s();!(ne=te.n()).done;)(re=ne.value).objectId=re.attributes[$]}catch(r){te.e(r)}finally{te.f()}return ie=M||!M&&C.isWebMercator?C.toJSON():l.n,ae=new d.e,e.abrupt("return",(ae.exceededTransferLimit=z,ae.features=H,ae.fields=B,ae.geometryType=J,ae.globalIdFieldName=K,ae.hasM=E,ae.hasZ=Q,ae.objectIdFieldName=$,ae.spatialReference=ie,ae));case 26:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function G(e,t){var n,r,i,a=e.isWebMercator;if(!e.wkid)return null;var s=a?null!==(n=null!==(r=null!==(i=t[3857])&&void 0!==i?i:t[102100])&&void 0!==r?r:t[102113])&&void 0!==n?n:t[900913]:t[e.wkid];return s?"".concat(b).concat(s):null}function L(e){if((0,c.t)(e))return"";var t=e.xmin,n=e.ymin,r=e.xmax,i=e.ymax;return"".concat(t,",").concat(n,",").concat(r,",").concat(i)}function R(e){if((0,c.t)(e))return null;var t=e.start,n=e.end;return"".concat((0,c.r)(t)?t.toISOString():"..","/").concat((0,c.r)(n)?n.toISOString():"..")}function P(e){return(0,c.t)(e)||!e||"1=1"===e?null:e}function D(e,t){if(!function(e){return(0,c.r)(e)&&"extent"===e.type}(e))return null;var n=e.spatialReference;if(!n||n.isWGS84)return{bbox:L(e)};var r=G(n,t);return(0,c.r)(r)?{bbox:L(e),"bbox-crs":r}:n.isWebMercator?{bbox:L((0,l.M)(e,l.k.WGS84))}:null}function U(e,t,n){return e.find((function(e){return e.rel===t&&e.type===n}))||e.find((function(e){return e.rel===t&&!e.type}))}}}]);
//# sourceMappingURL=8389.8c57803e.chunk.js.map