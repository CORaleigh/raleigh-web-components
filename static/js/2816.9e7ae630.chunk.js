"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[2816],{82816:function(e,t,r){r.r(t);var n=r(74165),i=r(15861),a=r(1413),o=r(15671),s=r(43144),c=r(11752),l=r(61120),u=r(60136),p=r(29388),d=r(50165),y=r(73627),h=r(82046),f=r(36893),v=r(88533);r(33530),r(96263),r(77322),r(32335),r(31278),r(13994),r(89031),r(98496),r(40133),r(4483),r(79747),r(42),r(52155),r(75662),r(17493),r(62980),r(16377),r(9887),r(88406),r(66307),r(2760),r(42488),r(9330),r(79146),r(3029),r(42687),r(78330),r(78697),r(78664),r(49961),r(31412),r(3096),r(36235),r(61340),r(56389),r(83172),r(53089),r(49350),r(84539),r(89354),r(16897),r(47642),r(63334),r(73428),r(38419),r(84231),r(97823),r(38665),r(32717),r(59075),r(17691),r(39853),r(94872),r(3969),r(86738),r(69205),r(50338),r(45578),r(35744),r(14527),r(68634),r(69738),r(73393),r(87110),r(72577),r(61772),r(92870),r(26079),r(22984),r(15508),r(48561),r(55269),r(86931),r(51613),r(80392),r(10489),r(62298),r(2815),r(2326),r(90339),r(76375),r(66270),r(60418),r(75366),r(5233),r(57439),r(43895),r(30594),r(73267),r(22628),r(24982),r(46584),r(7093),r(85966),r(28003),r(49796),r(58428),r(8049),r(80933),r(40858),r(95076),r(33074),r(31134),r(41524),r(68668),r(55916),r(66319),r(24781),r(2329),r(37243),r(97345),r(39001),r(84913),r(84823),r(9411),r(14826),r(64620),r(22225),r(75272),r(4197),r(86905),r(64997),r(26208),r(2816),r(46237),r(98428),r(5792),r(42094),r(67871),r(75097),r(47672),r(98643),r(83745),r(96401),r(87833),r(21523),r(84192),r(99057),r(26995),r(99797),r(51386),r(3441),r(6819),r(47692),r(66281),r(27969),r(77372),r(82909),r(81044),r(33265),r(20592),r(44365),r(77006),r(20422),r(38969),r(75105),r(40100),r(22494),r(49510),r(18392),r(61490),r(33117),r(60470),r(1894);function m(e,t){if((0,d.t)(e)&&(0,d.t)(t))return null;var r={};return(0,d.r)(t)&&(r.geometry=t.toJSON()),(0,d.r)(e)&&(r.where=e),r}var _=function(e){(0,u.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;return(0,o.Z)(this,r),(e=t.apply(this,arguments))._enabledDataReceived=!1,e.errorString=null,e.connectionStatus="disconnected",e}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this;this.handles.add([(0,y.l)((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.purgeOptions}),(function(){return e._update()})),(0,y.l)((function(){return e.suspended}),(function(t){t?e._proxy.pauseStream():e._proxy.resumeStream()}))])}},{key:"connectionError",get:function(){if(this.errorString)return new d.a("stream-controller",this.errorString)}},{key:"on",value:function(e,t){"data-received"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent("data-received",!0));var n=(0,c.Z)((0,l.Z)(r.prototype),"on",this).call(this,e,t),i=this;return{remove:function(){n.remove(),"data-received"===e&&(i._proxy.closed||i.hasEventListener("data-received")||i._proxy.enableEvent("data-received",!1))}}}},{key:"queryLatestObservations",value:function(e,t){var r=this;if(!this.layer.timeInfo.endField&&!this.layer.timeInfo.startField)throw new d.a("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((function(e){var t=h.default.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))}},{key:"detach",value:function(){(0,c.Z)((0,l.Z)(r.prototype),"detach",this).call(this),this.connectionStatus="disconnected"}},{key:"_createClientOptions",value:function(){var e=this;return(0,a.Z)((0,a.Z)({},(0,c.Z)((0,l.Z)(r.prototype),"_createClientOptions",this).call(this)),{},{setProperty:function(t){e.set(t.propertyName,t.value)}})}},{key:"_createTileRendererHash",value:function(e){var t="".concat(JSON.stringify(this.layer.purgeOptions),".").concat(JSON.stringify(m(this.layer.definitionExpression,this.layer.geometryDefinition)),")");return(0,c.Z)((0,l.Z)(r.prototype),"_createTileRendererHash",this).call(this,e)+t}},{key:"_createServiceOptions",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,a,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.layer,r=t.objectIdField,i=t.fields.map((function(e){return e.toJSON()})),a=(0,v.e)(t.geometryType),o=t.timeInfo&&t.timeInfo.toJSON()||null,s=t.spatialReference?t.spatialReference.toJSON():null,e.abrupt("return",{type:"stream",fields:i,geometryType:a,objectIdField:r,timeInfo:o,source:this.layer.parsedUrl,serviceFilter:m(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:s,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:t.customParameters});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(f.default);(0,d.e)([(0,d.d)()],_.prototype,"errorString",void 0),(0,d.e)([(0,d.d)({readOnly:!0})],_.prototype,"connectionError",null),(0,d.e)([(0,d.d)()],_.prototype,"connectionStatus",void 0);var O=_=(0,d.e)([(0,d.n)("esri.views.2d.layers.StreamLayerView2D")],_);t.default=O}}]);
//# sourceMappingURL=2816.9e7ae630.chunk.js.map