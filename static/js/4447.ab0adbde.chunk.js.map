{"version":3,"file":"static/js/4447.ab0adbde.chunk.js","mappings":"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","sources":["../node_modules/raleigh-map-components/dist/esm/WMTSLayerView2D-d420c57e.js"],"sourcesContent":["import { j, a as s, e as e$1, y as y$3, n as n$1 } from './cast-c3f45b36.js';\nimport { l } from './reactiveUtils-f60c7d41.js';\nimport './config-1ffdf45e.js';\nimport { E } from './Point-6cb878d9.js';\nimport { t, n } from './imageUtils-694ef1e1.js';\nimport { y as y$1 } from './LayerView2D-2afdec46.js';\nimport { h } from './TileInfoView-83c82d40.js';\nimport { e } from './TileKey-cf11edbc.js';\nimport { y as y$2, r } from './TileStrategy-23d335df.js';\nimport { u } from './LayerView-2def927c.js';\nimport { i } from './RefreshableLayerView-faf61099.js';\nimport './JSONSupport-db08a3d3.js';\nimport './BitmapTileContainer-0a498921.js';\nimport './aaBoundingRect-9f5a81b4.js';\nimport './mathUtils-2bc3dc3d.js';\nimport './Extent-f175f54a.js';\nimport './mat3f32-42811e80.js';\nimport './Bitmap-0be40819.js';\nimport './mat3-8b5f2a3e.js';\nimport './vec2f32-bf50d22f.js';\nimport './DisplayObject-7536b955.js';\nimport './Evented-cb187462.js';\nimport './context-util-2cfc3c15.js';\nimport './enums-39ca0456.js';\nimport './Texture-eb557a77.js';\nimport './TiledDisplayObject-1902681f.js';\nimport './WGLContainer-f08d17e7.js';\nimport './WGLBrushVTLSymbol-9caebd62.js';\nimport './DefaultVertexAttributeLayouts-628c4128.js';\nimport './vec2f64-2b32ef68.js';\nimport './VertexElementDescriptor-26861b4e.js';\nimport './enums-c5b71a5c.js';\nimport './enums-4e89dbf5.js';\nimport './number-de709571.js';\nimport './FramebufferObject-3c39c713.js';\nimport './StyleDefinition-6a097509.js';\nimport './config-9a7f1231.js';\nimport './GeometryUtils-076a114e.js';\nimport './pixelUtils-40f4c842.js';\nimport './Utils-1a809a7a.js';\nimport './ShaderCompiler-c3d24077.js';\nimport './ProgramTemplate-4896e910.js';\nimport './Program-cfc2ac6a.js';\nimport './MaterialKey-22699fef.js';\nimport './alignmentUtils-c331d95e.js';\nimport './utils-659f8fa4.js';\nimport './EffectView-71028bb0.js';\nimport './jsonUtils-455358fc.js';\nimport './colorUtils-a7d54473.js';\nimport './screenUtils-bb784636.js';\nimport './mat4-7a77be1b.js';\nimport './heatmapUtils-aeff2740.js';\nimport './vec4f64-0cbfbafc.js';\nimport './Color-037179a4.js';\nimport './heatmapTextureUtils-d24c7be6.js';\nimport './earcut-d7f8e4d3.js';\nimport './vec2-c45237df.js';\nimport './featureConversionUtils-02732a82.js';\nimport './jsonUtils-470c2f30.js';\nimport './geometry-af7a1990.js';\nimport './jsonMap-ad5a21ba.js';\nimport './OptimizedFeature-be5c501a.js';\nimport './OptimizedFeatureSet-0aa3ab12.js';\nimport './TileContainer-22067bde.js';\nimport './Collection-4ef916ef.js';\nimport './SimpleObservable-8d982b09.js';\nimport './collectionUtils-7fc43c51.js';\nimport './TileStore-fac6ac70.js';\nimport './workers-bf2fb148.js';\nimport './assets-746d5f3f.js';\nimport './intl-bb87b713.js';\nimport './number-4308b0e0.js';\nimport './locale-3aaf7fdb.js';\nimport './messages-27a8a537.js';\nimport './quickselect-92d4264c.js';\nimport './Query-780641ee.js';\nimport './TimeExtent-d95e7159.js';\nimport './enumeration-76da1a7a.js';\nimport './Field-043c648d.js';\nimport './fieldType-9178e8c8.js';\nimport './FullTextSearch-934480e3.js';\nimport './Clonable-79c9df5b.js';\nimport './HandleOwner-f847f884.js';\nimport './Identifiable-8ce6a5f3.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nconst y=[102113,102100,3857,3785,900913],_=[0,0];let w=class extends(i(t(y$1(u)))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this._tileRequests=new Map,this.layer=null;}get tileMatrixSet(){const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(e.id!==this.layer.activeLayer.tileMatrixSetId&&(this.layer.activeLayer.tileMatrixSetId=e.id),e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();}attach(){if(!this.tileMatrixSet)return;const{tileInfo:e}=this.tileMatrixSet;this._tileInfoView=new h(e),this._fetchQueue=new y$2({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new r({cachePolicy:\"keep\",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.handles.add(l((()=>[this.layer?.activeLayer?.styleId,this.tileMatrixSet]),(()=>this._refresh())),this.declaredClass),super.attach();}detach(){super.detach(),this.handles.remove(this.declaredClass),this._tileStrategy?.destroy(),this._fetchQueue?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null;}moveStart(){this.requestUpdate();}viewChange(){this.requestUpdate();}moveEnd(){this.requestUpdate();}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate();}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return [i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}async doRefresh(){!this.attached||this.updateRequested||this.suspended||this._refresh();}isUpdating(){return this._fetchQueue?.updating??!1}async fetchTile(e$1,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e$1,r);const l=new e(0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e$1.level,e$1.row,e$1.col,l,{signal:r}),o=await this._fetchImage(l,r);}catch(h){if(j(h))throw h;if(a<3){const i=this._tileInfoView.getTileParentId(e$1.id);if(i){const s=new e(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return n(this._tileInfoView,r,s,e$1)}}throw h}return n(this._tileInfoView,o,l,e$1)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}supportsSpatialReference(e){return this.layer.activeLayer.tileMatrixSets.some((t=>E(t.tileInfo.spatialReference,e)))}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()));}catch(s$1){j(s$1)||s.getLogger(this.declaredClass).error(s$1);}this.requestUpdate();}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}_refresh(){this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>{if(!e.bitmap.source)return;const t={id:e.key.id,fulfilled:!1,promise:this._fetchQueue.push(e.key).then((t=>{e.bitmap.source=t;})).catch((t=>{j(t)||(e.bitmap.source=null);})).finally((()=>{e.requestRender(),t.fulfilled=!0;}))};this._tileRequests.set(e,t);}));}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>E(e.tileInfo.spatialReference,t)));return !i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>y.includes(e.tileInfo.spatialReference.wkid)))),i}};e$1([y$3()],w.prototype,\"_fetchQueue\",void 0),e$1([y$3({readOnly:!0})],w.prototype,\"tileMatrixSet\",null),w=e$1([n$1(\"esri.views.2d.layers.WMTSLayerView2D\")],w);const g=w;\n\nexport default g;\n"],"names":["y","_","w","arguments","_tileStrategy","_fetchQueue","_tileRequests","Map","layer","e","this","_getTileMatrixSetBySpatialReference","activeLayer","id","tileMatrixSetId","pause","state","update","resume","tileMatrixSet","tileInfo","_tileInfoView","h","y$2","tileInfoView","concurrency","process","t","fetchTile","r","cachePolicy","resampling","acquireTile","releaseTile","handles","add","l","styleId","_refresh","declaredClass","remove","destroy","requestUpdate","abort","key","_bitmapView","removeChild","once","createTile","i","bitmap","getTileCoords","x","resolution","getTileResolution","size","width","height","_enqueueTileFetch","addChild","attached","updateRequested","suspended","updating","e$1","a","s","tilemapCache","signal","resamplingLevel","_fetchImage","fetchAvailabilityUpsample","level","row","col","o","j","getTileParentId","n","tileMatrixSets","some","E","spatialReference","has","push","source","error","fetchImageBitmapTile","reset","tiles","forEach","fulfilled","promise","then","catch","finally","requestRender","set","view","find","isWebMercator","includes","wkid","y$1","u","y$3","prototype","readOnly","g","n$1"],"sourceRoot":""}