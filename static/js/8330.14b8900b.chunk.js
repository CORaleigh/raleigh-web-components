"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[8330],{78330:function(e,t,r){r.r(t),r.d(t,{B:function(){return z},P:function(){return H},d:function(){return C},m:function(){return q},p:function(){return J}});var o,n=r(74165),a=r(15861),u=r(37762),l=r(1413),i=r(15671),s=r(43144),d=r(97326),p=r(60136),c=r(29388),y=r(50165),v=r(13994),h=r(32335),f=r(52155),m=r(77322),g=r(96263),S="not-loaded",_="loading",O="failed",P="loaded",k=function(e){var t=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n)))._loadController=null,e.loadError=null,e.loadStatus="not-loaded",e._set("loadWarnings",[]),e.addResolvingPromise(new Promise((function(t){var r=e.load.bind((0,d.Z)(e));e.load=function(o){var n=new Promise((function(t,r){var n=(0,y.Z)(o,r);e.destroyed&&r(new y.a("load:instance-destroyed","Instance of '".concat(e.declaredClass||e.constructor.name,"' is already destroyed"),{instance:(0,d.Z)(e)})),e._promiseProps.when(t,r).finally((function(){n&&n.remove()}))}));if(e.loadStatus===S){e._set("loadStatus",_);var a=e._loadController=new AbortController;r({signal:a.signal}),(0,y.x)(a.signal,(function(){e._promiseProps.abort()}))}return t(),n}}))),e.when((function(){e._set("loadStatus",P),e._loadController=null}),(function(t){e._set("loadStatus",O),e._set("loadError",t),e._loadController=null})),e}return(0,s.Z)(r,[{key:"loaded",get:function(){return this.loadStatus===P}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}},{key:"load",value:function(){return null}},{key:"cancelLoad",value:function(){var e;return this.isFulfilled()||(this._set("loadError",new y.a("load:cancelled","Cancelled")),null!==(e=this._loadController)&&void 0!==e&&e.abort()),this}}]),r}(e);return(0,y.e)([(0,y.d)({readOnly:!0})],t.prototype,"loaded",null),(0,y.e)([(0,y.d)({readOnly:!0})],t.prototype,"loadError",void 0),(0,y.e)([(0,y.d)({clonable:!1})],t.prototype,"loadStatus",void 0),(0,y.e)([(0,y.d)({type:[y.V],readOnly:!0})],t.prototype,"loadWarnings",null),t=(0,y.e)([(0,y.n)("esri.core.Loadable")],t)},b=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}(k(f._));b=(0,y.e)([(0,y.n)("esri.core.Loadable")],b),(o=b||(b={})).LoadableMixin=k,o.isLoadable=function(e){return!(!e||!e.load)};var w,q=b,G=new v.s({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"}),U=w=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).categories=null,o.disableExtraQuery=!1,o.extent=null,o.filter=null,o.num=10,o.query=null,o.sortField=null,o.start=1,o}return(0,s.Z)(r,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}},{key:"clone",value:function(){return new w({categories:this.categories?(0,y.m)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}},{key:"toRequestOptions",value:function(e,t){var r,o;if(this.categories&&(r=this.categories.map((function(e){return Array.isArray(e)?JSON.stringify(e):e}))),this.extent){var n=(0,m.M)(this.extent,m.k.WGS84);(0,y.r)(n)&&(o="".concat(n.xmin,",").concat(n.ymin,",").concat(n.xmax,",").concat(n.ymax))}var a=this.query;!this.disableExtraQuery&&e.extraQuery&&(a="("+a+")"+e.extraQuery);var u={categories:r,bbox:o,q:a,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(u.sortField=this.sortField.split(",").map((function(e){return G.toJSON(e.trim())})).join(","),u.sortOrder=this.sortOrder),{query:(0,l.Z)((0,l.Z)({},t),u)}}}]),r}(y.y);(0,y.e)([(0,y.d)()],U.prototype,"categories",void 0),(0,y.e)([(0,y.d)()],U.prototype,"disableExtraQuery",void 0),(0,y.e)([(0,y.d)({type:g.M})],U.prototype,"extent",void 0),(0,y.e)([(0,y.d)()],U.prototype,"filter",void 0),(0,y.e)([(0,y.d)()],U.prototype,"num",void 0),(0,y.e)([(0,y.d)()],U.prototype,"query",void 0),(0,y.e)([(0,y.d)()],U.prototype,"sortField",void 0),(0,y.e)([(0,y.d)()],U.prototype,"sortOrder",null),(0,y.e)([(0,y.d)()],U.prototype,"start",void 0);var C=U=w=(0,y.e)([(0,y.n)("esri.portal.PortalQueryParams")],U),I=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).nextQueryParams=null,o.queryParams=null,o.results=null,o.total=null,o}return(0,s.Z)(r)}(y.y);(0,y.e)([(0,y.d)()],I.prototype,"nextQueryParams",void 0),(0,y.e)([(0,y.d)()],I.prototype,"queryParams",void 0),(0,y.e)([(0,y.d)()],I.prototype,"results",void 0),(0,y.e)([(0,y.d)()],I.prototype,"total",void 0);var Q=I=(0,y.e)([(0,y.n)("esri.portal.PortalQueryResult")],I),Z=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).created=null,o.id=null,o.portal=null,o.title=null,o.username=null,o}return(0,s.Z)(r,[{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username,"/").concat(this.id):null}},{key:"toJSON",value:function(){throw new y.a("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}}]),r}(h.l);(0,y.e)([(0,y.d)({type:Date})],Z.prototype,"created",void 0),(0,y.e)([(0,y.d)()],Z.prototype,"id",void 0),(0,y.e)([(0,y.d)()],Z.prototype,"portal",void 0),(0,y.e)([(0,y.d)()],Z.prototype,"title",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],Z.prototype,"url",null),(0,y.e)([(0,y.d)()],Z.prototype,"username",void 0);var x=Z=(0,y.e)([(0,y.n)("esri.portal.PortalFolder")],Z),D=function(e){(0,p.Z)(r,e);var t=(0,c.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).access=null,o.created=null,o.description=null,o.id=null,o.isInvitationOnly=!1,o.modified=null,o.owner=null,o.portal=null,o.snippet=null,o.sortField=null,o.sortOrder=null,o.tags=null,o.title=null,o}return(0,s.Z)(r,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}},{key:"fetchCategorySchema",value:function(e){var t=this;return this.portal._request(this.url+"/categorySchema",e).then((function(r){var o=r.categorySchema||[];return o.some((function(e){return"contentCategorySetsGroupQuery.LivingAtlas"===e.source}))?t._fetchCategorySchemaSet("LivingAtlas",e):o}))}},{key:"fetchMembers",value:function(e){return this.portal._request(this.url+"/users",e)}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"toJSON",value:function(){throw new y.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}},{key:"queryItems",value:function(e,t){var r=(0,y.b)(C,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new C,this.portal._queryPortal("/content/groups/".concat(this.id,"/search"),r,"PortalItem",t)):((r=r?r.clone():new C).query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}},{key:"_fetchCategorySchemaSet",value:function(e,t){var r=this;return this.portal._fetchSelf(this.portal.authMode,!0,t).then((function(e){var o=e.contentCategorySetsGroupQuery;if(o){var n=new C;return n.disableExtraQuery=!0,n.num=1,n.query=o,r.portal.queryGroups(n,t)}throw new y.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")})).then((function(r){if(r.total){var o=r.results[0],n=new C;return n.num=1,n.query='typekeywords:"'.concat(e,'"'),o.queryItems(n,t)}throw new y.a("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")})).then((function(e){return e.total?e.results[0].fetchData("json",t).then((function(e){var t=e&&e.categorySchema;return t&&t.length?t:[]})):[]}))}}]),r}(h.l);(0,y.e)([(0,y.d)()],D.prototype,"access",void 0),(0,y.e)([(0,y.d)({type:Date})],D.prototype,"created",void 0),(0,y.e)([(0,y.d)()],D.prototype,"description",void 0),(0,y.e)([(0,y.d)()],D.prototype,"id",void 0),(0,y.e)([(0,y.d)()],D.prototype,"isInvitationOnly",void 0),(0,y.e)([(0,y.d)({type:Date})],D.prototype,"modified",void 0),(0,y.e)([(0,y.d)()],D.prototype,"owner",void 0),(0,y.e)([(0,y.d)()],D.prototype,"portal",void 0),(0,y.e)([(0,y.d)()],D.prototype,"snippet",void 0),(0,y.e)([(0,y.d)()],D.prototype,"sortField",void 0),(0,y.e)([(0,y.d)()],D.prototype,"sortOrder",void 0),(0,y.e)([(0,y.d)()],D.prototype,"tags",void 0),(0,y.e)([(0,y.d)()],D.prototype,"thumbnail",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],D.prototype,"thumbnailUrl",null),(0,y.e)([(0,y.d)()],D.prototype,"title",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],D.prototype,"url",null);var N,M=D=(0,y.e)([(0,y.n)("esri.portal.PortalGroup")],D),B=Object.freeze({__proto__:null,default:M}),A=N=function(e){(0,p.Z)(o,e);var t=(0,c.Z)(o);function o(){var e;(0,i.Z)(this,o);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).access=null,e.created=null,e.culture=null,e.description=null,e.email=null,e.fullName=null,e.modified=null,e.orgId=null,e.portal=null,e.preferredView=null,e.privileges=null,e.region=null,e.role=null,e.roleId=null,e.sourceJSON=null,e.units=null,e.username=null,e.userType=null,e}return(0,s.Z)(o,[{key:"thumbnailUrl",get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl("".concat(e,"/info/").concat(t,"?f=json")):null}},{key:"userContentUrl",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/content/users/").concat(this.username):null}},{key:"url",get:function(){var e=this.get("portal.restUrl");return e?"".concat(e,"/community/users/").concat(this.username):null}},{key:"addItem",value:function(e){var t=this,r=e&&e.item,o=e&&e.data,n=e&&e.folder,a={method:"post"};r&&(a.query=r.createPostQuery(),null!=o&&("string"==typeof o?a.query.text=o:"object"==typeof o&&(a.query.text=JSON.stringify(o))));var u=this.userContentUrl;return n&&(u+="/"+("string"==typeof n?n:n.id)),this.portal._request(u+"/addItem",a).then((function(e){return r.id=e.id,r.portal=t.portal,r.loaded?r.reload():r.load()}))}},{key:"deleteItem",value:function(e){var t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+"/items/".concat(e.id,"/delete"),{method:"post"}).then((function(){e.id=null,e.portal=null}))}},{key:"deleteItems",value:function(e){var t=this.userContentUrl+"/deleteItems",r=e.map((function(e){return e.id}));if(r.length){var o={method:"post",query:{items:r.join(",")}};return this.portal._request(t,o).then((function(){e.forEach((function(e){e.id=null,e.portal=null}))}))}return Promise.resolve(void 0)}},{key:"fetchFolders",value:function(){var e=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then((function(t){return t&&t.folders?t.folders.map((function(t){var r=x.fromJSON(t);return r.portal=e.portal,r})):[]}))}},{key:"fetchGroups",value:function(){var e=this;return this.portal._request(this.url).then((function(t){return t&&t.groups?t.groups.map((function(t){var r=M.fromJSON(t);return r.portal=e.portal,r})):[]}))}},{key:"fetchItems",value:function(e){var t=this;e||(e={});var o,n=this.userContentUrl;return e.folder&&(n+="/"+e.folder.id),Promise.all([r.e(8668),r.e(1772)]).then(r.bind(r,68668)).then((function(r){var a=r.default;o=a;var u={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return t.portal._request(n,{query:u})})).then((function(e){var r;return e&&e.items?(r=e.items.map((function(e){var r=o.fromJSON(e);return r.portal=t.portal,r})),Promise.all(r.map((function(e){return e.load()}))).catch((function(e){return e})).then((function(){return{items:r,nextStart:e.nextStart,total:e.total}}))):{items:[],nextStart:-1,total:0}}))}},{key:"fetchTags",value:function(){return this.portal._request(this.url+"/tags").then((function(e){return e.tags}))}},{key:"getThumbnailUrl",value:function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w=".concat(e)),t}},{key:"queryFavorites",value:function(e){return this.favGroupId?(this._favGroup||(this._favGroup=new M({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new y.a("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}},{key:"toJSON",value:function(){throw new y.a("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}}],[{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");var t=new N;return t.sourceJSON=e,t.read(e),t}}]),o}(h.l);(0,y.e)([(0,y.d)()],A.prototype,"access",void 0),(0,y.e)([(0,y.d)({type:Date})],A.prototype,"created",void 0),(0,y.e)([(0,y.d)()],A.prototype,"culture",void 0),(0,y.e)([(0,y.d)()],A.prototype,"description",void 0),(0,y.e)([(0,y.d)()],A.prototype,"email",void 0),(0,y.e)([(0,y.d)()],A.prototype,"favGroupId",void 0),(0,y.e)([(0,y.d)()],A.prototype,"fullName",void 0),(0,y.e)([(0,y.d)({type:Date})],A.prototype,"modified",void 0),(0,y.e)([(0,y.d)()],A.prototype,"orgId",void 0),(0,y.e)([(0,y.d)()],A.prototype,"portal",void 0),(0,y.e)([(0,y.d)()],A.prototype,"preferredView",void 0),(0,y.e)([(0,y.d)()],A.prototype,"privileges",void 0),(0,y.e)([(0,y.d)()],A.prototype,"region",void 0),(0,y.e)([(0,y.d)()],A.prototype,"role",void 0),(0,y.e)([(0,y.d)()],A.prototype,"roleId",void 0),(0,y.e)([(0,y.d)()],A.prototype,"sourceJSON",void 0),(0,y.e)([(0,y.d)()],A.prototype,"thumbnail",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],A.prototype,"thumbnailUrl",null),(0,y.e)([(0,y.d)()],A.prototype,"units",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],A.prototype,"userContentUrl",null),(0,y.e)([(0,y.d)({readOnly:!0})],A.prototype,"url",null),(0,y.e)([(0,y.d)()],A.prototype,"username",void 0),(0,y.e)([(0,y.d)()],A.prototype,"userType",void 0);var E,T,J=A=N=(0,y.e)([(0,y.n)("esri.portal.PortalUser")],A),F=Object.freeze({__proto__:null,default:J}),L={PortalGroup:function(){return Promise.resolve().then((function(){return B}))},PortalItem:function(){return Promise.all([r.e(8668),r.e(1772)]).then(r.bind(r,68668))},PortalUser:function(){return Promise.resolve().then((function(){return F}))}},j=E=function(e){(0,p.Z)(o,e);var t=(0,c.Z)(o);function o(e){var r;return(0,i.Z)(this,o),(r=t.call(this,e)).access=null,r.allSSL=!1,r.authMode="auto",r.authorizedCrossOriginDomains=null,r.basemapGalleryGroupQuery=null,r.bingKey=null,r.canListApps=!1,r.canListData=!1,r.canListPreProvisionedItems=!1,r.canProvisionDirectPurchase=!1,r.canSearchPublic=!0,r.canShareBingPublic=!1,r.canSharePublic=!1,r.canSignInArcGIS=!1,r.canSignInIDP=!1,r.colorSetsGroupQuery=null,r.commentsEnabled=!1,r.created=null,r.culture=null,r.customBaseUrl=null,r.defaultBasemap=null,r.defaultDevBasemap=null,r.defaultExtent=null,r.defaultVectorBasemap=null,r.description=null,r.devBasemapGalleryGroupQuery=null,r.eueiEnabled=null,r.featuredGroups=null,r.featuredItemsGroupQuery=null,r.galleryTemplatesGroupQuery=null,r.livingAtlasGroupQuery=null,r.hasCategorySchema=!1,r.helperServices=null,r.homePageFeaturedContent=null,r.homePageFeaturedContentCount=null,r.httpPort=null,r.httpsPort=null,r.id=null,r.ipCntryCode=null,r.isPortal=!1,r.isReadOnly=!1,r.layerTemplatesGroupQuery=null,r.maxTokenExpirationMinutes=null,r.modified=null,r.name=null,r.portalHostname=null,r.portalMode=null,r.portalProperties=null,r.region=null,r.rotatorPanels=null,r.showHomePageDescription=!1,r.sourceJSON=null,r.supportsHostedServices=!1,r.symbolSetsGroupQuery=null,r.templatesGroupQuery=null,r.units=null,r.url=y.f.portalUrl,r.urlKey=null,r.user=null,r.useStandardizedQuery=!1,r.useVectorBasemaps=!1,r.vectorBasemapGalleryGroupQuery=null,r}return(0,s.Z)(o,[{key:"normalizeCtorArgs",value:function(e){return"string"==typeof e?{url:e}:e}},{key:"destroy",value:function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}},{key:"readAuthorizedCrossOriginDomains",value:function(e){if(e){var t,r=(0,u.Z)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;y.f.request.trustedServers.includes(o)||y.f.request.trustedServers.push(o)}}catch(n){r.e(n)}finally{r.f()}}return e}},{key:"readDefaultBasemap",value:function(e){return this._readBasemap(e)}},{key:"readDefaultDevBasemap",value:function(e){return this._readBasemap(e)}},{key:"readDefaultVectorBasemap",value:function(e){return this._readBasemap(e)}},{key:"extraQuery",get:function(){var e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?" AND orgid:".concat(this.id):null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){var e=this.url;if(e){var t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}},{key:"thumbnailUrl",get:function(){var e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}},{key:"readUrlKey",value:function(e){return e?e.toLowerCase():e}},{key:"readUser",value:function(e){var t=null;return e&&((t=J.fromJSON(e)).portal=this),t}},{key:"load",value:function(e){var t=this,o=Promise.all([r.e(133),r.e(8668),r.e(4997)]).then(r.bind(r,64997)).then((function(e){return e.B})).then((function(t){var r=t.default;(0,y.W)(e),T=r})).then((function(){return t.sourceJSON?t.sourceJSON:t._fetchSelf(t.authMode,!1,e)})).then((function(e){if(v.a){var r=v.a;t.credential=r.findCredential(t.restUrl),t.credential||t.authMode!==E.AUTH_MODE_AUTO||(t._esriId_credentialCreateHandle=r.on("credential-create",(function(){r.findCredential(t.restUrl)&&t._signIn()})))}t.sourceJSON=e,t.read(e)}));return this.addResolvingPromise(o),Promise.resolve(this)}},{key:"createElevationLayers",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return t=this._getHelperService("defaultElevationLayers"),e.next=5,Promise.all([r.e(6626),r.e(6857),r.e(2850),r.e(9796),r.e(133),r.e(1278),r.e(8668),r.e(4834),r.e(7216),r.e(9986)]).then(r.bind(r,27216));case 5:return o=e.sent.default,e.abrupt("return",t?t.map((function(e){return new o({id:e.id,url:e.url})})):[]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBasemaps",value:function(e,t){var r=new C;return r.query=e||(y.f.apiKey&&(0,v.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then((function(e){if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',e.total){var o=e.results[0];return r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc",o.queryItems(r,t)}return null})).then((function(e){return e&&e.total?e.results.filter((function(e){return"Web Map"===e.type})).map((function(e){return new T({portalItem:e})})):[]}))}},{key:"fetchCategorySchema",value:function(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then((function(e){return e.categorySchema})):(0,y.u)(e)?Promise.reject((0,y.v)()):Promise.resolve([])}},{key:"fetchFeaturedGroups",value:function(e){var t=this.featuredGroups,r=new C;if(r.num=100,r.sortField="title",t&&t.length){var o,n=[],a=(0,u.Z)(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;n.push('(title:"'.concat(l.title,'" AND owner:').concat(l.owner,")"))}}catch(i){a.e(i)}finally{a.f()}return r.query=n.join(" OR "),this.queryGroups(r,e).then((function(e){return e.results}))}return(0,y.u)(e)?Promise.reject((0,y.v)()):Promise.resolve([])}},{key:"fetchRegions",value:function(e){var t,r=(null===(t=this.user)||void 0===t?void 0:t.culture)||this.culture||(0,f.l)();return this._request(this.restUrl+"/portals/regions",(0,l.Z)((0,l.Z)({},e),{},{query:{culture:r}}))}},{key:"fetchSettings",value:function(e){var t,r=(null===(t=this.user)||void 0===t?void 0:t.culture)||this.culture||(0,f.l)();return this._request(this.restUrl+"/portals/self/settings",(0,l.Z)((0,l.Z)({},e),{},{query:{culture:r}}))}},{key:"queryGroups",value:function(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}},{key:"queryItems",value:function(e,t){return this._queryPortal("/search",e,"PortalItem",t)}},{key:"queryUsers",value:function(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}},{key:"toJSON",value:function(){throw new y.a("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}},{key:"_getHelperService",value:function(e){var t=this.helperServices&&this.helperServices[e];if(!t)throw new y.a("portal:service-not-found",'The `helperServices` do not include an entry named "'.concat(e,'"'));return t}},{key:"_getHelperServiceUrl",value:function(e){var t=this._getHelperService(e);if(!t.url)throw new y.a("portal:service-url-not-found",'The `helperServices` entry "'.concat(e,'" does not include a `url` value'));return t.url}},{key:"_fetchSelf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.authMode,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,o=this.restUrl+"/portals/self",n=(0,l.Z)({authMode:e,query:{culture:(0,f.l)().toLowerCase()}},r);return"auto"===n.authMode&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(o,n)}},{key:"_queryPortal",value:function(e,t,r,o){var n=this,a=(0,y.b)(C,t),u=function(t){return n._request(n.restUrl+e,(0,l.Z)((0,l.Z)({},a.toRequestOptions(n)),o)).then((function(e){var r=a.clone();return r.start=e.nextStart,new Q({nextQueryParams:r,queryParams:a,total:e.total,results:E._resultsToTypedArray(t,{portal:n},e,o)})})).then((function(e){return Promise.all(e.results.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return e}),(function(t){return(0,y._)(t),e}))}))};return r&&L[r]?L[r]().then((function(e){var t=e.default;return(0,y.W)(o),u(t)})):u()}},{key:"_signIn",value:function(){var e=this;if(this.authMode===E.AUTH_MODE_ANONYMOUS)return Promise.reject(new y.a("portal:invalid-auth-mode",'Current "authMode"\' is "'.concat(this.authMode,'"')));if("failed"===this.loadStatus)return Promise.reject(this.loadError);var t=function(t){return Promise.resolve().then((function(){return"not-loaded"===e.loadStatus?(t||(e.authMode="immediate"),e.load().then((function(){return null}))):"loading"===e.loadStatus?e.load().then((function(){return e.credential?null:(e.credential=t,e._fetchSelf("immediate"))})):e.user&&e.credential===t?null:(e.credential=t,e._fetchSelf("immediate"))})).then((function(t){t&&(e.sourceJSON=t,e.read(t))}))};return v.a?v.a.getCredential(this.restUrl).then((function(e){return t(e)})):t(this.credential)}},{key:"_normalizeSSL",value:function(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}},{key:"_normalizeUrl",value:function(e){var t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}},{key:"_requestToTypedArray",value:function(e,t,r){var o=this;return this._request(e,t).then((function(e){var t=E._resultsToTypedArray(r,{portal:o},e);return Promise.all(t.map((function(t){return"function"==typeof t.when?t.when():e}))).then((function(){return t}),(function(){return t}))}))}},{key:"_readBasemap",value:function(e){if(e){var t=T.fromJSON(e);return t.portalItem={portal:this},t}return null}},{key:"_request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,l.Z)({f:"json"},t.query),o=t.authMode,n=void 0===o?this.authMode===E.AUTH_MODE_ANONYMOUS?"anonymous":"auto":o,a=t.body,u=void 0===a?null:a,i=t.cacheBust,s=void 0!==i&&i,d=t.method,p=void 0===d?"auto":d,c=t.responseType,y=void 0===c?"json":c,h=t.signal,f={authMode:n,body:u,cacheBust:s,method:p,query:r,responseType:y,timeout:0,signal:h};return(0,v.U)(this._normalizeSSL(e),f).then((function(e){return e.data}))}}],[{key:"getDefault",value:function(){return E._default&&!E._default.destroyed||(E._default=new E),E._default}},{key:"fromJSON",value:function(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new E({sourceJSON:e})}},{key:"_resultsToTypedArray",value:function(e,t,r,o){var n;if(r){var a=(0,y.r)(o)?o.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map((function(r){var o=Object.assign(e?e.fromJSON(r):r,t);return"function"==typeof o.load&&o.load(a),o})))}else n=[];return n}}]),o}((0,h.u)(q));j.AUTH_MODE_ANONYMOUS="anonymous",j.AUTH_MODE_AUTO="auto",j.AUTH_MODE_IMMEDIATE="immediate",(0,y.e)([(0,y.d)()],j.prototype,"access",void 0),(0,y.e)([(0,y.d)()],j.prototype,"allSSL",void 0),(0,y.e)([(0,y.d)()],j.prototype,"authMode",void 0),(0,y.e)([(0,y.d)()],j.prototype,"authorizedCrossOriginDomains",void 0),(0,y.e)([(0,m.o)("authorizedCrossOriginDomains")],j.prototype,"readAuthorizedCrossOriginDomains",null),(0,y.e)([(0,y.d)()],j.prototype,"basemapGalleryGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"bingKey",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canListApps",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canListData",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canListPreProvisionedItems",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canProvisionDirectPurchase",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canSearchPublic",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canShareBingPublic",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canSharePublic",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canSignInArcGIS",void 0),(0,y.e)([(0,y.d)()],j.prototype,"canSignInIDP",void 0),(0,y.e)([(0,y.d)()],j.prototype,"colorSetsGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"commentsEnabled",void 0),(0,y.e)([(0,y.d)({type:Date})],j.prototype,"created",void 0),(0,y.e)([(0,y.d)()],j.prototype,"credential",void 0),(0,y.e)([(0,y.d)()],j.prototype,"culture",void 0),(0,y.e)([(0,y.d)()],j.prototype,"currentVersion",void 0),(0,y.e)([(0,y.d)()],j.prototype,"customBaseUrl",void 0),(0,y.e)([(0,y.d)()],j.prototype,"defaultBasemap",void 0),(0,y.e)([(0,m.o)("defaultBasemap")],j.prototype,"readDefaultBasemap",null),(0,y.e)([(0,y.d)()],j.prototype,"defaultDevBasemap",void 0),(0,y.e)([(0,m.o)("defaultDevBasemap")],j.prototype,"readDefaultDevBasemap",null),(0,y.e)([(0,y.d)({type:g.M})],j.prototype,"defaultExtent",void 0),(0,y.e)([(0,y.d)()],j.prototype,"defaultVectorBasemap",void 0),(0,y.e)([(0,m.o)("defaultVectorBasemap")],j.prototype,"readDefaultVectorBasemap",null),(0,y.e)([(0,y.d)()],j.prototype,"description",void 0),(0,y.e)([(0,y.d)()],j.prototype,"devBasemapGalleryGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"eueiEnabled",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],j.prototype,"extraQuery",null),(0,y.e)([(0,y.d)()],j.prototype,"featuredGroups",void 0),(0,y.e)([(0,y.d)()],j.prototype,"featuredItemsGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"galleryTemplatesGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"livingAtlasGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"hasCategorySchema",void 0),(0,y.e)([(0,y.d)()],j.prototype,"helpBase",void 0),(0,y.e)([(0,y.d)()],j.prototype,"helperServices",void 0),(0,y.e)([(0,y.d)()],j.prototype,"helpMap",void 0),(0,y.e)([(0,y.d)()],j.prototype,"homePageFeaturedContent",void 0),(0,y.e)([(0,y.d)()],j.prototype,"homePageFeaturedContentCount",void 0),(0,y.e)([(0,y.d)()],j.prototype,"httpPort",void 0),(0,y.e)([(0,y.d)()],j.prototype,"httpsPort",void 0),(0,y.e)([(0,y.d)()],j.prototype,"id",void 0),(0,y.e)([(0,y.d)()],j.prototype,"ipCntryCode",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],j.prototype,"isOrganization",null),(0,y.e)([(0,y.d)()],j.prototype,"isPortal",void 0),(0,y.e)([(0,y.d)()],j.prototype,"isReadOnly",void 0),(0,y.e)([(0,y.d)()],j.prototype,"layerTemplatesGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"maxTokenExpirationMinutes",void 0),(0,y.e)([(0,y.d)({type:Date})],j.prototype,"modified",void 0),(0,y.e)([(0,y.d)()],j.prototype,"name",void 0),(0,y.e)([(0,y.d)()],j.prototype,"portalHostname",void 0),(0,y.e)([(0,y.d)()],j.prototype,"portalMode",void 0),(0,y.e)([(0,y.d)()],j.prototype,"portalProperties",void 0),(0,y.e)([(0,y.d)()],j.prototype,"region",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],j.prototype,"restUrl",null),(0,y.e)([(0,y.d)()],j.prototype,"rotatorPanels",void 0),(0,y.e)([(0,y.d)()],j.prototype,"showHomePageDescription",void 0),(0,y.e)([(0,y.d)()],j.prototype,"sourceJSON",void 0),(0,y.e)([(0,y.d)()],j.prototype,"staticImagesUrl",void 0),(0,y.e)([(0,y.d)({json:{name:"2DStylesGroupQuery"}})],j.prototype,"stylesGroupQuery2d",void 0),(0,y.e)([(0,y.d)({json:{name:"stylesGroupQuery"}})],j.prototype,"stylesGroupQuery3d",void 0),(0,y.e)([(0,y.d)()],j.prototype,"supportsHostedServices",void 0),(0,y.e)([(0,y.d)()],j.prototype,"symbolSetsGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"templatesGroupQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"thumbnail",void 0),(0,y.e)([(0,y.d)({readOnly:!0})],j.prototype,"thumbnailUrl",null),(0,y.e)([(0,y.d)()],j.prototype,"units",void 0),(0,y.e)([(0,y.d)()],j.prototype,"url",void 0),(0,y.e)([(0,y.d)()],j.prototype,"urlKey",void 0),(0,y.e)([(0,m.o)("urlKey")],j.prototype,"readUrlKey",null),(0,y.e)([(0,y.d)()],j.prototype,"user",void 0),(0,y.e)([(0,m.o)("user")],j.prototype,"readUser",null),(0,y.e)([(0,y.d)()],j.prototype,"useStandardizedQuery",void 0),(0,y.e)([(0,y.d)()],j.prototype,"useVectorBasemaps",void 0),(0,y.e)([(0,y.d)()],j.prototype,"vectorBasemapGalleryGroupQuery",void 0);var z=j=E=(0,y.e)([(0,y.n)("esri.portal.Portal")],j),H=Object.freeze({__proto__:null,default:z})}}]);
//# sourceMappingURL=8330.14b8900b.chunk.js.map