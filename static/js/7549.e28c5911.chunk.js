"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[7549],{75662:function(e,t,n){n.d(t,{a:function(){return v},b:function(){return m},c:function(){return f}});var r,i=n(15671),a=n(43144),o=n(60136),u=n(29388),s=n(50165),l=n(17493),c=r=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).active=!1,r.className=null,r.disabled=!1,r.id=null,r.indicator=!1,r.title=null,r.type=null,r.visible=!0,r}return(0,a.Z)(n,[{key:"clone",value:function(){return new r({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}}]),n}((0,l.s)(s.y));(0,s.e)([(0,s.d)()],c.prototype,"active",void 0),(0,s.e)([(0,s.d)()],c.prototype,"className",void 0),(0,s.e)([(0,s.d)()],c.prototype,"disabled",void 0),(0,s.e)([(0,s.d)()],c.prototype,"id",void 0),(0,s.e)([(0,s.d)()],c.prototype,"indicator",void 0),(0,s.e)([(0,s.d)()],c.prototype,"title",void 0),(0,s.e)([(0,s.d)()],c.prototype,"type",void 0),(0,s.e)([(0,s.d)()],c.prototype,"visible",void 0);var h,f=c=r=(0,s.e)([(0,s.n)("esri.support.actions.ActionBase")],c),p=h=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).image=null,r.type="button",r}return(0,a.Z)(n,[{key:"clone",value:function(){return new h({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}}]),n}(f);(0,s.e)([(0,s.d)()],p.prototype,"image",void 0);var d,v=p=h=(0,s.e)([(0,s.n)("esri.support.Action.ActionButton")],p),y=d=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).image=null,r.type="toggle",r.value=!1,r}return(0,a.Z)(n,[{key:"clone",value:function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}}]),n}(f);(0,s.e)([(0,s.d)()],y.prototype,"image",void 0),(0,s.e)([(0,s.d)()],y.prototype,"value",void 0);var m=y=d=(0,s.e)([(0,s.n)("esri.support.Action.ActionToggle")],y)},88406:function(e,t,n){n.d(t,{l:function(){return h}});var r=n(15671),i=n(43144),a=n(66307),o=n(2760),u=n(50165);function s(e){return(0,o.o)((0,u.ae)(e),0,255)}function l(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}var c=function(){function e(t){(0,r.Z)(this,e),this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}return(0,i.Z)(e,[{key:"isBright",get:function(){return.299*this.r+.587*this.g+.114*this.b>=127}},{key:"setColor",value:function(t){var n,r,i,a;return"string"==typeof t?e.fromString(t,this):Array.isArray(t)?e.fromArray(t,this):(this._set(null!==(n=t.r)&&void 0!==n?n:0,null!==(r=t.g)&&void 0!==r?r:0,null!==(i=t.b)&&void 0!==i?i:0,null!==(a=t.a)&&void 0!==a?a:1),t instanceof e||this._sanitize()),this}},{key:"toRgb",value:function(){return[this.r,this.g,this.b]}},{key:"toRgba",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toHex",value:function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return"#".concat(e.length<2?"0"+e:e).concat(t.length<2?"0"+t:t).concat(n.length<2?"0"+n:n)}},{key:"toCss",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.r+", "+this.g+", "+this.b;return e?"rgba(".concat(t,", ").concat(this.a,")"):"rgb(".concat(t,")")}},{key:"toString",value:function(){return this.toCss(!0)}},{key:"toJSON",value:function(){return this.toArray()}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.AlphaMode.ALWAYS,n=s(this.r),r=s(this.g),i=s(this.b);return t===e.AlphaMode.ALWAYS||1!==this.a?[n,r,i,s(255*this.a)]:[n,r,i]}},{key:"clone",value:function(){return new e(this.toRgba())}},{key:"hash",value:function(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}},{key:"equals",value:function(e){return(0,u.r)(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}},{key:"_sanitize",value:function(){return this.r=Math.round(l(this.r,0,255)),this.g=Math.round(l(this.g,0,255)),this.b=Math.round(l(this.b,0,255)),this.a=l(this.a,0,1),this}},{key:"_set",value:function(e,t,n,r){this.r=e,this.g=t,this.b=n,this.a=r}}],[{key:"blendColors",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new e;return i.r=Math.round(t.r+(n.r-t.r)*r),i.g=Math.round(t.g+(n.g-t.g)*r),i.b=Math.round(t.b+(n.b-t.b)*r),i.a=t.a+(n.a-t.a)*r,i._sanitize()}},{key:"fromRgb",value:function(t,n){var r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){var i=r[2].split(/\s*,\s*/),o=r[1];if("rgb"===o&&3===i.length||"rgba"===o&&4===i.length){var u=i[0];if("%"===u.charAt(u.length-1)){var s=i.map((function(e){return 2.56*parseFloat(e)}));return 4===i.length&&(s[3]=parseFloat(i[3])),e.fromArray(s,n)}return e.fromArray(i.map((function(e){return parseFloat(e)})),n)}if("hsl"===o&&3===i.length||"hsla"===o&&4===i.length)return e.fromArray((0,a.o)(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),n)}return null}},{key:"fromHex",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;if(4!==t.length&&7!==t.length||"#"!==t[0])return null;var r=4===t.length?4:8,i=(1<<r)-1,a=Number("0x"+t.substr(1));return isNaN(a)?null:(["b","g","r"].forEach((function(e){var t=a&i;a>>=r,n[e]=4===r?17*t:t})),n.a=1,n)}},{key:"fromArray",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e;return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}},{key:"fromString",value:function(t,n){var r=(0,a.r)(t)?(0,a.l)(t):null;return r&&e.fromArray(r,n)||e.fromRgb(t,n)||e.fromHex(t,n)}},{key:"fromJSON",value:function(t){return t&&new e([t[0],t[1],t[2],t[3]/255])}},{key:"toUnitRGB",value:function(e){return(0,u.r)(e)?[e.r/255,e.g/255,e.b/255]:null}},{key:"toUnitRGBA",value:function(e){return(0,u.r)(e)?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}}]),e}();c.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(c||(c={}));var h=c},89031:function(e,t,n){n.d(t,{g:function(){return b}});var r=n(1413),i=n(4942),a=n(15671),o=n(43144),u=n(97326),s=n(60136),l=n(29388),c=n(50165),h=n(33530),f=n(98496),p=n(62980),d=n(78697),v=n(32335),y=n(78664);function m(e){if(!(0,c.r)(e))return null;var t={};for(var n in e){var r=e[n];r&&(t[n]=r.toJSON())}return 0!==Object.keys(t).length?t:null}var g=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).isAggregate=!1,e.layer=null,e.popupTemplate=null,e.sourceLayer=null,Object.defineProperty((0,u.Z)(e),"uid",{value:(0,c.Q)(),configurable:!0}),e}return(0,o.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t,n,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:n,popupTemplate:r}}},{key:"aggregateGeometries",set:function(e){var t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}},{key:"attributes",set:function(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}},{key:"geometry",set:function(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}},{key:"symbol",set:function(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}},{key:"visible",set:function(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}},{key:"getEffectivePopupTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.popupTemplate)return this.popupTemplate;for(var t=0,n=[this.sourceLayer,this.layer];t<n.length;t++){var r=n[t];if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&(0,c.r)(r.defaultPopupTemplate))return r.defaultPopupTemplate}}return null}},{key:"getAttribute",value:function(e){return this.attributes&&this.attributes[e]}},{key:"setAttribute",value:function(e,t){if(this.attributes){var n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes=(0,i.Z)({},e,t),this._notifyLayer("attributes",void 0,t,e)}},{key:"getObjectId",value:function(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}},{key:"toJSON",value:function(){return{aggregateGeometries:m(this.aggregateGeometries),geometry:(0,c.r)(this.geometry)?this.geometry.toJSON():null,symbol:(0,c.r)(this.symbol)?this.symbol.toJSON():null,attributes:(0,r.Z)({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}},{key:"notifyGeometryChanged",value:function(){this._notifyLayer("geometry",this.geometry,this.geometry)}},{key:"notifyMeshTransformChanged",value:function(){(0,c.r)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}},{key:"_notifyLayer",value:function(e,t,n,r){if(this.layer&&"graphicChanged"in this.layer){var i={graphic:this,property:e,oldValue:t,newValue:n};"attributes"===e&&(i.attributeName=r),this.layer.graphicChanged(i)}}}]),n}((0,d.l)(v.l));(0,c.e)([(0,c.d)({value:null,json:{read:function(e){if(!e)return null;var t={};for(var n in e){var r=(0,y.d)(e[n]);r&&(t[n]=r)}return 0!==Object.keys(t).length?t:null}}})],g.prototype,"aggregateGeometries",null),(0,c.e)([(0,c.d)({value:null})],g.prototype,"attributes",null),(0,c.e)([(0,c.d)({value:null,types:h.i,json:{read:y.d}})],g.prototype,"geometry",null),(0,c.e)([(0,c.d)({type:Boolean})],g.prototype,"isAggregate",void 0),(0,c.e)([(0,c.d)({clonable:"reference"})],g.prototype,"layer",void 0),(0,c.e)([(0,c.d)({type:f.B})],g.prototype,"popupTemplate",void 0),(0,c.e)([(0,c.d)({clonable:"reference"})],g.prototype,"sourceLayer",void 0),(0,c.e)([(0,c.d)({value:null,types:p.j})],g.prototype,"symbol",null),(0,c.e)([(0,c.d)({type:Boolean,value:!0})],g.prototype,"visible",null),g=(0,c.e)([(0,c.n)("esri.Graphic")],g),(g||(g={})).generateUID=c.Q;var b=g},85966:function(e,t,n){n.d(t,{v:function(){return M}});var r,i=n(1413),a=n(15671),o=n(43144),u=n(11752),s=n(61120),l=n(60136),c=n(29388),h=n(50165),f=n(13994),p=n(32335),d=n(73428),v=n(77322),y=(0,f.o)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),m=y.jsonValues.slice();(0,h.au)(m,"orthometric");var g=(0,f.o)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"}),b=r=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).heightModel="gravity-related-height",r.heightUnit="meters",r.vertCRS=null,r}return(0,o.Z)(n,[{key:"writeHeightModel",value:function(e,t,n){return y.write(e,t,n)}},{key:"readHeightModel",value:function(e,t,n){return y.read(e)||(n&&n.messages&&n.messages.push(function(e,t){return new h.V("height-model:unsupported","Height model of value '".concat(e,"' is not supported"),t)}(e,{context:n})),null)}},{key:"readHeightUnit",value:function(e,t,n){return g.read(e)||(n&&n.messages&&n.messages.push(w(e,{context:n})),null)}},{key:"readHeightUnitService",value:function(e,t,n){return(0,d.H)(e)||g.read(e)||(n&&n.messages&&n.messages.push(w(e,{context:n})),null)}},{key:"readVertCRS",value:function(e,t){return t.vertCRS||t.ellipsoid||t.geoid}},{key:"clone",value:function(){return new r({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}},{key:"equals",value:function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}},{key:"write",value:function(e,t){return t=(0,i.Z)({origin:"web-scene"},t),(0,u.Z)((0,s.Z)(n.prototype),"write",this).call(this,e,t)}}],[{key:"deriveUnitFromSR",value:function(e,t){var n=(0,d.$)(t);return new r({heightModel:e.heightModel,heightUnit:n,vertCRS:e.vertCRS})}},{key:"fromJSON",value:function(e){if(!e)return null;var t=new r;return t.read(e,{origin:"web-scene"}),t}}]),n}(p.l);function w(e,t){return new h.V("height-unit:unsupported","Height unit of value '".concat(e,"' is not supported"),t)}(0,h.e)([(0,h.d)({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:m,default:"ellipsoidal"}}}})],b.prototype,"heightModel",void 0),(0,h.e)([(0,v.r)("web-scene","heightModel")],b.prototype,"writeHeightModel",null),(0,h.e)([(0,v.o)(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",null),(0,h.e)([(0,h.d)({type:g.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g.jsonValues,write:g.write}}}})],b.prototype,"heightUnit",void 0),(0,h.e)([(0,v.o)("web-scene","heightUnit")],b.prototype,"readHeightUnit",null),(0,h.e)([(0,v.o)("service","heightUnit")],b.prototype,"readHeightUnitService",null),(0,h.e)([(0,h.d)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0),(0,h.e)([(0,v.o)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,"readVertCRS",null);var M=b=r=(0,h.e)([(0,h.n)("esri.geometry.HeightModelInfo")],b)},28003:function(e,t,n){n.d(t,{b:function(){return w}});var r=n(74165),i=n(15671),a=n(43144),o=n(60136),u=n(29388),s=n(15861),l=n(50165),c=(n(33530),n(13994)),h=n(40133),f=n(17493),p=n(78330),d=n(96263),v=n(77322),y=l.s.getLogger("esri.layers.support.fromPortalItem");function m(){return m=(0,s.Z)((0,r.Z)().mark((function e(t){var i,a,o,u,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([n.e(1340),n.e(8643),n.e(1056),n.e(4314),n.e(5487)]).then(n.bind(n,4314));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromItem(i);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),o=i&&i.portalItem,u=o&&o.id||"unset",s=o&&o.portal&&o.portal.url||l.f.portalUrl,y.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+u+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),m.apply(this,arguments)}var g=0,b=function(e){(0,o.Z)(h,e);var t=(0,u.Z)(h);function h(){var e;return(0,i.Z)(this,h),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new d.M(-180,-90,180,90,v.k.WGS84),e.id=Date.now().toString(16)+"-layer-"+g++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=v.k.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return(0,a.Z)(h,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var n,r;(0,l.I)(t)||l.s.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!==(n=e.title)&&void 0!==n?n:"no title","', id: '").concat(null!==(r=e.id)&&void 0!==r?r:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){var e=this.url;return e?(0,c.j)(e):null}},{key:"fetchAttributionData",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,(0,c.U)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new l.a("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?{url:t}:t,e.next=3,Promise.all([n.e(1056),n.e(4574)]).then(n.bind(n,4574));case 3:return e.abrupt("return",e.sent.fromUrl(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(e){return function(e){return m.apply(this,arguments)}(e)}}]),h}(h.n.EventedMixin((0,f.s)(p.m)));(0,l.e)([(0,l.d)({type:String})],b.prototype,"attributionDataUrl",void 0),(0,l.e)([(0,l.d)({type:d.M})],b.prototype,"fullExtent",void 0),(0,l.e)([(0,l.d)({readOnly:!0})],b.prototype,"hasAttributionData",null),(0,l.e)([(0,l.d)({type:String,clonable:!1})],b.prototype,"id",void 0),(0,l.e)([(0,l.d)({type:Boolean,nonNullable:!0})],b.prototype,"legendEnabled",void 0),(0,l.e)([(0,l.d)({type:["show","hide","hide-children"]})],b.prototype,"listMode",void 0),(0,l.e)([(0,l.d)({type:Number,range:{min:0,max:1},nonNullable:!0})],b.prototype,"opacity",void 0),(0,l.e)([(0,l.d)({clonable:!1})],b.prototype,"parent",void 0),(0,l.e)([(0,l.d)({readOnly:!0})],b.prototype,"parsedUrl",null),(0,l.e)([(0,l.d)({type:Boolean})],b.prototype,"popupEnabled",void 0),(0,l.e)([(0,l.d)({type:Boolean})],b.prototype,"attributionVisible",void 0),(0,l.e)([(0,l.d)({type:v.k})],b.prototype,"spatialReference",void 0),(0,l.e)([(0,l.d)({type:String})],b.prototype,"title",void 0),(0,l.e)([(0,l.d)({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0),(0,l.e)([(0,l.d)()],b.prototype,"url",void 0),(0,l.e)([(0,l.d)({type:Boolean,nonNullable:!0})],b.prototype,"visible",void 0);var w=b=(0,l.e)([(0,l.n)("esri.layers.Layer")],b)},9887:function(e,t,n){n.d(t,{a:function(){return m}});var r=n(74165),i=n(15861),a=n(15671),o=n(43144),u=n(60136),s=n(29388),l=n(50165),c=n(88406),h=n(13994),f=n(32335),p=n(77322),d=new h.s({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),v=0,y=function(e){(0,u.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).id="sym"+v++,r.type=null,r.color=new c.l([0,0,0,1]),r}return(0,o.Z)(n,[{key:"readColor",value:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e}},{key:"collectRequiredFields",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"hash",value:function(){return JSON.stringify(this.toJSON())}},{key:"clone",value:function(){}}]),n}(f.l);(0,l.e)([(0,l.d)({type:d.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:d.write}}})],y.prototype,"type",void 0),(0,l.e)([(0,l.d)({type:c.l,json:{write:{allowNull:!0}}})],y.prototype,"color",void 0),(0,l.e)([(0,p.o)("color")],y.prototype,"readColor",null);var m=y=(0,l.e)([(0,l.n)("esri.symbols.Symbol")],y)},83172:function(e,t,n){n.d(t,{g:function(){return v},n:function(){return p},y:function(){return b}});var r,i=n(15671),a=n(43144),o=n(60136),u=n(29388),s=n(50165),l=n(32335),c=n(77322),h={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},f={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function p(e,t,n){var r=new Date(e.getTime());if(t&&n){var i=f[n],a=i.getter,o=i.setter,u=i.multiplier;if("months"===n){var s=function(e,t){var n=new Date(e,t+1,1);return n.setDate(0),n.getDate()}(r.getFullYear(),r.getMonth()+t);r.getDate()>s&&r.setDate(s)}r[o](r[a]()+t*u)}return r}function d(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function v(e,t,n){return 0===e?0:e*h[t]/h[n]}var y=r=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).end=null,r.start=null,r}return(0,a.Z)(n,[{key:"readEnd",value:function(e,t){return null!=t.end?new Date(t.end):null}},{key:"writeEnd",value:function(e,t){t.end=e?e.getTime():null}},{key:"isAllTime",get:function(){return this.equals(r.allTime)}},{key:"isEmpty",get:function(){return this.equals(r.empty)}},{key:"readStart",value:function(e,t){return null!=t.start?new Date(t.start):null}},{key:"writeStart",value:function(e,t){t.start=e?e.getTime():null}},{key:"clone",value:function(){return new r({end:this.end,start:this.start})}},{key:"equals",value:function(e){if(!e)return!1;var t=(0,s.r)(this.start)?this.start.getTime():this.start,n=(0,s.r)(this.end)?this.end.getTime():this.end,r=(0,s.r)(e.start)?e.start.getTime():e.start,i=(0,s.r)(e.end)?e.end.getTime():e.end;return t===r&&n===i}},{key:"expandTo",value:function(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=(0,s.aq)(this.start,(function(t){return d(t,e)})),n=(0,s.aq)(this.end,(function(t){return p(d(t,e),1,e)}));return new r({start:t,end:n})}},{key:"intersection",value:function(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return r.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var t,n,i=(0,s.ar)(this.start,-1/0,(function(e){return e.getTime()})),a=(0,s.ar)(this.end,1/0,(function(e){return e.getTime()})),o=(0,s.ar)(e.start,-1/0,(function(e){return e.getTime()})),u=(0,s.ar)(e.end,1/0,(function(e){return e.getTime()}));if(o>=i&&o<=a?t=o:i>=o&&i<=u&&(t=i),a>=o&&a<=u?n=a:u>=i&&u<=a&&(n=u),!isNaN(t)&&!isNaN(n)){var l=new r;return l.start=t===-1/0?null:new Date(t),l.end=n===1/0?null:new Date(n),l}return r.empty}},{key:"offset",value:function(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var n=new r,i=this.start,a=this.end;return(0,s.r)(i)&&(n.start=p(i,e,t)),(0,s.r)(a)&&(n.end=p(a,e,t)),n}},{key:"union",value:function(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return m.clone();var t=(0,s.r)(this.start)&&(0,s.r)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=(0,s.r)(this.end)&&(0,s.r)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new r({start:t,end:n})}}],[{key:"allTime",get:function(){return m}},{key:"empty",get:function(){return g}}]),n}(l.l);(0,s.e)([(0,s.d)({type:Date,json:{write:{allowNull:!0}}})],y.prototype,"end",void 0),(0,s.e)([(0,c.o)("end")],y.prototype,"readEnd",null),(0,s.e)([(0,c.r)("end")],y.prototype,"writeEnd",null),(0,s.e)([(0,s.d)({readOnly:!0,json:{read:!1}})],y.prototype,"isAllTime",null),(0,s.e)([(0,s.d)({readOnly:!0,json:{read:!1}})],y.prototype,"isEmpty",null),(0,s.e)([(0,s.d)({type:Date,json:{write:{allowNull:!0}}})],y.prototype,"start",void 0),(0,s.e)([(0,c.o)("start")],y.prototype,"readStart",null),(0,s.e)([(0,c.r)("start")],y.prototype,"writeStart",null);var m=new(y=r=(0,s.e)([(0,s.n)("esri.TimeExtent")],y)),g=new y({start:void 0,end:void 0}),b=y},74021:function(e,t,n){n.d(t,{M:function(){return y},c:function(){return h},e:function(){return l},f:function(){return d},g:function(){return b},h:function(){return v},i:function(){return p},k:function(){return w},l:function(){return m},m:function(){return g},s:function(){return c},u:function(){return f}});var r=n(15671),i=n(43144),a=n(84192),o=n(2760),u=(0,n(3969).n)(),s=function(){function e(t){(0,r.Z)(this,e),this.message=t}return(0,i.Z)(e,[{key:"toString",value:function(){return"AssertException: ".concat(this.message)}}]),e}();function l(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new s(t)}function c(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function h(e,t,n,r){var i,a=(n[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];a>o&&(i=a,a=o,o=i);var u=(n[1]-e[1])/t[1],s=(r[1]-e[1])/t[1];if(u>s&&(i=u,u=s,s=i),a>s||u>o)return!1;u>a&&(a=u),s<o&&(o=s);var l=(n[2]-e[2])/t[2],c=(r[2]-e[2])/t[2];return l>c&&(i=l,l=c,c=i),!(a>c||l>o)&&(c<o&&(o=c),!(o<0))}function f(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,a.n)(),u=(r[i]-n[i])*(t[0]-e[0])-(r[0]-n[0])*(t[i]-e[i]),s=(r[0]-n[0])*(e[i]-n[i])-(r[i]-n[i])*(e[0]-n[0]);if(0===u)return!1;var l=s/u;return o[0]=e[0]+l*(t[0]-e[0]),o[1]=e[i]+l*(t[i]-e[i]),!0}function p(e,t,n,r,i){i||(i=e),u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=1,(0,o.w)(u,u,t),i.length>2&&(i[2]=-u[2]),(0,o.w)(u,u,n),l(0!==u[3]),i[0]=u[0]/u[3],i[1]=u[1]/u[3],i[2]=u[2]/u[3],i[0]=(.5*i[0]+.5)*r[2]+r[0],i[1]=(.5*i[1]+.5)*r[3]+r[1]}function d(e,t){return Math.log(e)/Math.log(t)}function v(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}function y(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function m(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/t)}function g(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/n)}function b(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+n*n))}function w(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/Math.sqrt(t*t+n*n))}},47672:function(e,t,n){var r;function i(e){return"global"===e?r.Global:r.Local}function a(e){return e===r.Global?"global":"local"}n.d(t,{a:function(){return a},l:function(){return r},o:function(){return i}}),function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"}(r||(r={}))},65879:function(e,t,n){n.r(t);var r,i=n(37762),a=n(11752),o=n(61120),u=n(29439),s=n(74165),l=n(15861),c=n(1413),h=n(15671),f=n(43144),p=n(60136),d=n(29388),v=n(50165),y=n(13994),m=n(86905),g=n(83745),b=n(40133),w=n(69738),M=n(78330),k=n(26208),_=n(46584),S=n(52155),x=n(77322),A=n(81905),Z=n(32335),I=n(96263),T=n(85966),L=n(98643),O=n(75097),R=n(78664),U=n(68668),V=n(31966),P=n(47672),j=n(44217),E=n(64972),C=n(42687),N=n(64997),F=n(5233),q=n(73627),D=n(2760),z=n(28003),B=n(33074),G=n(67871),H=n(42488),Y=n(12989);n(88406),n(66307),n(46237),n(79747),n(98428),n(22984),n(5792),n(78697),n(55269),n(33530),n(31278),n(73428),n(61340),n(61772),n(79146),n(76375),n(80933),n(3029),n(31412),n(62980),n(16377),n(4483),n(9887),n(9330),n(89031),n(98496),n(42),n(75662),n(17493),n(96401),n(71573),n(57952),n(15820),n(40438),n(48561),n(84192),n(3969),n(64747),n(12317),n(20838),n(6243),n(37783),n(74021),n(56864),n(66339),n(92870),n(54077),n(39853),n(72577),n(2816),n(63334),n(83172);function W(){return new v.a("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")}function J(e){return new v.a("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:e})}var K=r=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,h.Z)(this,n),(r=t.call(this,e)).viewing=null,r}return(0,f.Z)(n,[{key:"clone",value:function(){return new r({viewing:this.viewing?this.viewing.clone():null})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:V.i,json:{write:!0}})],K.prototype,"viewing",void 0);var X,$=K=r=(0,v.e)([(0,v.n)("esri.webscene.ApplicationProperties")],K),Q=X=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,h.Z)(this,n),(r=t.call(this,e)).environment=new j.y,r.spatialReference=null,r.viewpoint=null,r}return(0,f.Z)(n,[{key:"viewingMode",set:function(e){this._set("viewingMode",e)}},{key:"clone",value:function(){return new X({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:j.y,json:{write:{isRequired:!0}}})],Q.prototype,"environment",void 0),(0,v.e)([(0,v.d)({type:x.k})],Q.prototype,"spatialReference",void 0),(0,v.e)([(0,v.d)({type:["local","global"]})],Q.prototype,"viewingMode",null),(0,v.e)([(0,v.d)({type:g.u,json:{write:{isRequired:!0}}})],Q.prototype,"viewpoint",void 0);var ee,te=Q=X=(0,v.e)([(0,v.n)("esri.webscene.InitialViewProperties")],Q),ne=ee=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,h.Z)(this,n),(e=t.apply(this,arguments)).text="",e}return(0,f.Z)(n,[{key:"clone",value:function(){return new ee({text:this.text})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:String,json:{write:!0}})],ne.prototype,"text",void 0);var re,ie,ae=ne=ee=(0,v.e)([(0,v.n)("esri.webscene.support.Description")],ne),oe=re=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,h.Z)(this,n),(e=t.apply(this,arguments)).lighting=new j.p,e.weather=new j.n,e}return(0,f.Z)(n,[{key:"clone",value:function(){return new re({lighting:(0,v.m)(this.lighting),weather:(0,v.m)(this.weather)})}}]),n}(Z.l);(0,v.e)([(0,v.d)({types:j.i,json:{write:!0}})],oe.prototype,"lighting",void 0),(0,v.e)([(0,v.d)({types:j.a,json:{write:!0}})],oe.prototype,"weather",void 0),oe=re=(0,v.e)([(0,v.n)("esri.webscene.Environment")],oe);var ue=ie=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,h.Z)(this,n),(e=t.apply(this,arguments)).opacity=null,e}return(0,f.Z)(n,[{key:"clone",value:function(){return new ie({opacity:this.opacity})}},{key:"cloneAndApplyTo",value:function(e){return null==this.opacity||((e=null!=e?e.clone():new m.A).opacity=this.opacity),e}}],[{key:"fromGround",value:function(e){return new ie({opacity:e.opacity})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:Number,json:{type:v.S,read:{reader:H.r,source:"transparency"},write:{writer:function(e,t){t.transparency=(0,H.n)(e)},target:"transparency"}}})],ue.prototype,"opacity",void 0);var se,le,ce=ue=ie=(0,v.e)([(0,v.n)("esri.webscene.support.SlideGround")],ue),he=se=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,h.Z)(this,n),(r=t.call(this,e)).id="",r.sublayerIds=null,r}return(0,f.Z)(n,[{key:"clone",value:function(){return new se({id:this.id,sublayerIds:(0,v.m)(this.sublayerIds)})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:String,json:{write:!0}})],he.prototype,"id",void 0),(0,v.e)([(0,v.d)({type:[v.S],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],he.prototype,"sublayerIds",void 0),he=se=(0,v.e)([(0,v.n)("esri.webscene.support.SlideVisibleLayer")],he);var fe=le=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,h.Z)(this,n),(e=t.apply(this,arguments)).text="",e}return(0,f.Z)(n,[{key:"clone",value:function(){return new le({text:this.text})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:String,json:{write:{isRequired:!0}}})],fe.prototype,"text",void 0);var pe=fe=le=(0,v.e)([(0,v.n)("esri.webscene.support.Title")],fe),de=0,ve=b.j.ofType(he),ye=v.s.getLogger("esri.webscene.Slide"),me=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,h.Z)(this,n),(r=t.call(this,e)).id=Date.now().toString(16)+"-slide-"+de++,r.title=new pe,r.description=new ae,r.thumbnail=new V.p,r.viewpoint=null,r.basemap=null,r.ground=null,r.environment=new oe,r.visibleLayers=new ve,r}return(0,f.Z)(n,[{key:"destroy",value:function(){this.visibleLayers.removeAll(),this.basemap=null,this.thumbnail&&this.thumbnail.destroy(),this.description=null,this.title=null,this.thumbnail=null}},{key:"castTitle",value:function(e){return"string"==typeof e?new pe({text:e}):(0,v.b)(pe,e)}},{key:"castDescription",value:function(e){return"string"==typeof e?new ae({text:e}):(0,v.b)(ae,e)}},{key:"castThumbnail",value:function(e){return"string"==typeof e?new V.p({url:e}):(0,v.b)(V.p,e)}},{key:"castBasemap",value:function(e){return(0,m.m)(e)}},{key:"visibleLayers",set:function(e){this._set("visibleLayers",(0,C.n)(e,this._get("visibleLayers"),ve))}},{key:"castVisibleLayers",value:function(e){return e&&"function"==typeof e.map?e.map((function(e){if("string"==typeof e)return{id:e};if(e instanceof z.b){var t=be(e);return{id:e.id,sublayerIds:t}}return e.id?{id:e.id,sublayerIds:e.sublayerIds}:(ye.warn('Invalid visible layer, expected { id }, Layer or "id"'),e)})):null}},{key:"clone",value:function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})}},{key:"_updateVisibleLayersFrom",value:function(e){var t=this,n=[];return(0,v.E)(this._getLayers(e.map).map((function(t){return e.whenLayerView(t).then((function(e){if(e.visible){var r=be(t);n.push(new he({id:e.layer.id,sublayerIds:r}))}}))})).toArray()).then((function(){t.visibleLayers.removeAll(),t.visibleLayers.addMany(n)}))}},{key:"updateFrom",value:function(e,t){var n=this;return t={screenshot:(0,c.Z)({format:"png",quality:80,width:120,height:75,disableDecorations:!0},t&&t.screenshot)},e.when((function(){return n.viewpoint=e.viewpoint.clone(),n.environment.lighting="virtual"===e.environment.lighting.type?j.b.prototype.clone.apply(e.environment.lighting):j.p.prototype.clone.apply(e.environment.lighting),n.environment.weather=e.environment.weather.clone(),n.basemap=e.map.basemap&&e.map.basemap.clone()||null,n.ground=e.map.ground?ce.fromGround(e.map.ground):null,n._updateVisibleLayersFrom(e)})).then((function(){return e.takeScreenshot(t.screenshot)})).then((function(e){return n.thumbnail=new V.p({url:e.dataUrl}),n}))}},{key:"applyTo",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){var r,i,a,o,u,h,f=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.r)(this._applyToController)&&this._applyToController.abort(),r=new AbortController,this._applyToController=r,i=(0,v.Z)(n,(function(){return r.abort()})),a=t.resourceController.scheduler.registerTask(G.L.SLIDE),o=!1,n=(0,c.Z)((0,c.Z)({animate:!0},n),{},{signal:this._applyToController.signal}),u=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.schedule((function(){return o=f._setViewpointOfInterest(t,n)})),a.schedule((function(){return f._applyBasemap(t,n)}),n.signal)]);case 2:return e.next=4,Promise.all([a.schedule((function(){return f._applyLayerVisibility(t)}),n.signal),a.schedule((function(){return f._applyGround(t)}),n.signal),a.schedule((function(){return f._applyViewpoint(t,n)}),n.signal)]);case 4:return e.next=6,a.schedule((function(){return t.environment.weather=f.environment.weather.clone()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=9,(0,F.a)(t.addUpdatingPromise(u()));case 9:if(h=e.sent,o&&(t.contentCamera=null),a.remove(),this._applyToController===r&&(this._applyToController=null),r=null,null!==i&&void 0!==i&&i.remove(),!1!==h.ok){e.next=12;break}throw h.error;case 12:return e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_applyBasemap",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.basemap){e.next=11;break}return e.prev=1,e.next=4,this.basemap.load(n);case 4:e.next=10;break;case 6:if(e.prev=6,e.t0=e.catch(1),!(0,v.I)(e.t0)){e.next=10;break}throw e.t0;case 10:t.map.basemap=(0,m.d)(this.basemap,t.map.basemap);case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_applyGround",value:function(e){this.ground&&(e.map.ground=this.ground.cloneAndApplyTo(e.map.ground))}},{key:"_getLayers",value:function(e){var t=new b.j;return this._collectLayers(e,t),this._collectLayers(e.ground,t),t}},{key:"_collectLayers",value:function(e,t){var n=this;e.layers.forEach((function(e){(0,B.u)(e)&&(t.add(e),"layers"in e&&n._collectLayers(e,t))}))}},{key:"_applyLayerVisibility",value:function(e){var t=this;this.visibleLayers&&this._getLayers(e.map).forEach((function(e){var n=t.visibleLayers.find((function(t){return t.id===e.id}));e.visible=null!=n;var r=n&&n.sublayerIds,i=ge(e);r&&i&&i.forEach((function(e){return e.visible=r.includes(e.id)}))}))}},{key:"_setViewpointOfInterest",value:function(e,t){if(e.state.fixedContentCamera||!this.viewpoint||t.ignoreViewpoint||!t.useDestinationCamera)return!1;var n=(0,j.c)(e,this.viewpoint);return e.contentCamera=n,(0,v.r)(n)}},{key:"_applyViewpoint",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.viewpoint||n.ignoreViewpoint){e.next=11;break}if((0,v.r)(this.viewpoint.camera)&&(this.viewpoint.camera.fov=t.camera.fov),!n.animate||!this.get("environment.lighting.date")){e.next=5;break}return e.next=4,this._animateToLighting(t,n);case 4:return e.abrupt("return",void e.sent);case 5:if(e.t0=n.animate,!e.t0){e.next=10;break}return t.environment.applyLighting(this.environment.lighting.clone()),e.next=10,t.goTo(this.viewpoint,n);case 10:t.viewpoint=this.viewpoint;case 11:t.environment.applyLighting(this.environment.lighting.clone());case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_animateToLighting",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){var r,i=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,"sun"===t.environment.lighting.type&&"sun"===this.environment.lighting.type&&("global"===t.viewingMode&&(r=this._animateLightingWithCamera(t,t.environment.lighting,this.environment.lighting)),t.environment.lighting.cameraTrackingEnabled=!1),t.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled,"virtual"===this.environment.lighting.type||"virtual"===t.environment.lighting.type?(t.environment.applyLighting(this.environment.lighting.clone()),"sun"===t.environment.lighting.type&&(t.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(t.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset),e.abrupt("return",t.goTo(this.viewpoint,n).then((function(){return t.environment.applyLighting(i.environment.lighting.clone())})).finally((function(){(0,v.z)(r),"sun"===t.environment.lighting.type&&(t.environment.lighting.cameraTrackingEnabled=!0)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getTime",value:function(e){return[e.getTime(),3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds()]}},{key:"_setTime",value:function(e,t,n){return e.setTime(t),e.setUTCHours(n/3600),e.setUTCMinutes(n%3600/60),e.setUTCSeconds(n%3600%60),e}},{key:"_animateLightingWithCamera",value:function(e,t,n){var r=this,i=new Date(t.date.toString()),a=this._getTime(i),o=(0,u.Z)(a,2),s=o[0],l=o[1],c=this._getTime(n.date),h=(0,u.Z)(c,2),f=h[0],p=h[1],d=function(e,t){var n=t-e;return n>Me&&(n-=we),n<-Me&&(n+=we),n}(l,p),y=e.renderCoordsHelper,m=(0,D.n)();y.toRenderCoords(e.camera.position,m);var g=(0,D.n)(),b=(0,D.n)();(0,v.r)(this.viewpoint.camera)&&y.toRenderCoords(this.viewpoint.camera.position,g);var w=new Date;return(0,q.l)((function(){return e.camera}),(function(e){y.toRenderCoords(e.position,b);var n=(0,D.p)(m,b),i=(0,D.p)(g,b),a=0;n+i!==0&&(a=n/(n+i));var o=s+(f-s)*a,u=function(e,t){return(0,j.j)(e+t,we)}(l,d*a);t.date=r._setTime(w,o,u)}))}}],[{key:"createFrom",value:function(e,t){return(new this).updateFrom(e,t)}}]),n}(Z.l);function ge(e){if("building-scene"===e.type||"map-image"===e.type)return e.allSublayers.toArray()}function be(e){var t=ge(e);if(t)return t.filter((function(e){return e.visible})).map((function(e){return e.id}))}(0,v.e)([(0,v.d)({type:String,json:{write:{isRequired:!0}}})],me.prototype,"id",void 0),(0,v.e)([(0,v.d)({type:pe,json:{default:function(){return new pe({text:""})},write:{isRequired:!0}}})],me.prototype,"title",void 0),(0,v.e)([(0,v.H)("title")],me.prototype,"castTitle",null),(0,v.e)([(0,v.d)({type:ae,json:{write:{overridePolicy:function(e){return{enabled:!(!e||!e.text)}}}}})],me.prototype,"description",void 0),(0,v.e)([(0,v.H)("description")],me.prototype,"castDescription",null),(0,v.e)([(0,v.d)({type:V.p,json:{default:function(){return new V.p({url:""})},write:{isRequired:!0}}})],me.prototype,"thumbnail",void 0),(0,v.e)([(0,v.H)("thumbnail")],me.prototype,"castThumbnail",null),(0,v.e)([(0,v.d)({type:g.u,nonNullable:!0,json:{write:{isRequired:!0}}})],me.prototype,"viewpoint",void 0),(0,v.e)([(0,v.d)({type:N.x,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],me.prototype,"basemap",void 0),(0,v.e)([(0,v.H)("basemap")],me.prototype,"castBasemap",null),(0,v.e)([(0,v.d)({type:ce,json:{write:!0}})],me.prototype,"ground",void 0),(0,v.e)([(0,v.d)({type:ve,json:{write:{isRequired:!0}}})],me.prototype,"visibleLayers",null),(0,v.e)([(0,v.H)("visibleLayers")],me.prototype,"castVisibleLayers",null),(0,v.e)([(0,v.d)({type:oe,json:{write:!0}})],me.prototype,"environment",void 0),me=(0,v.e)([(0,v.n)("esri.webscene.Slide")],me);var we=86400,Me=43200;var ke=me,_e=b.j.ofType(ke),Se=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;return(0,h.Z)(this,n),(r=t.call(this,e)).slides=new _e,r}return(0,f.Z)(n,[{key:"destroy",value:function(){this.slides.forEach((function(e){return e.destroy()})),this.slides.removeAll()}},{key:"slides",set:function(e){e&&(e=e.filter((function(e){return!!e.viewpoint}))),this._set("slides",(0,C.n)(e,this._get("slides"),_e))}},{key:"clone",value:function(){return new this.constructor({slides:this.slides.clone()})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:_e,nonNullable:!0,json:{write:!0}}),(0,v.H)(C.t)],Se.prototype,"slides",null);var xe,Ae=Se=(0,v.e)([(0,v.n)("esri.webscene.Presentation")],Se),Ze=xe=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,h.Z)(this,n),t.call(this,e)}return(0,f.Z)(n,[{key:"clone",value:function(){return new xe({name:this.name,path:this.path,title:this.title})}}]),n}(Z.l);(0,v.e)([(0,v.d)({type:String,json:{write:!0}})],Ze.prototype,"name",void 0),(0,v.e)([(0,v.d)({type:String,json:{write:!0}})],Ze.prototype,"path",void 0),(0,v.e)([(0,v.d)({type:String,json:{write:!0}})],Ze.prototype,"title",void 0);var Ie,Te=Ze=xe=(0,v.e)([(0,v.n)("esri.webscene.TransportationNetwork")],Ze),Le=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){return(0,h.Z)(this,n),t.call(this,e,r,"webscene")}return(0,f.Z)(n,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]),n}(Y.r),Oe=v.s.getLogger("esri.WebScene"),Re=new Le(1,28),Ue="Web Scene",Ve="ViewingMode-Local",Pe=function(e){(0,p.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,h.Z)(this,r),(n=t.call(this,e))._handles=new w.u,n.applicationProperties=null,n.clippingArea=null,n.clippingEnabled=!1,n.floorInfo=null,n.heightModelInfo=null,n.sourceVersion=null,n.transportationNetworks=null,n.presentation=new Ae,n.initialViewProperties=new te,n.portalItem=null,n.resourceInfo=null,n._debouncedSaveOperations=(0,v.B)(function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,r,i){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Ie.SAVE?3:e.t0===Ie.SAVE_AS?4:5;break;case 3:return e.abrupt("return",n._saveImpl(r));case 4:return e.abrupt("return",n._saveAsImpl(i,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),n.resourceReferences={portalItem:null,paths:[]},n.authoringApp=null,n.authoringAppVersion=null,n._isAuthoringAppSetByUser=!1,n._isAuthoringAppVersionSetByUser=!1,n}return(0,f.Z)(r,[{key:"initialize",value:function(){var e=this;if(this.when().catch((function(e){Oe.error("#load()","Failed to load web scene",e)})),this.resourceInfo){var t;try{t=this._validateJSON(this.resourceInfo)}catch(Le){return void this.addResolvingPromise(Promise.reject(Le))}this.read(t),this.addResolvingPromise(this._validateSpatialReference()),this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",(function(){return e._scheduleLayersIdGC()})))}},{key:"destroy",value:function(){this._unscheduleLayersIdGC(),this._handles.destroy(),this.presentation&&this.presentation.destroy();var e=this.portalItem;this.portalItem=null,null===e||void 0===e||e.destroy()}},{key:"writeClippingArea",value:function(e,t){t.clippingArea||(t.clippingArea={}),t.clippingArea.geometry=e.toJSON()}},{key:"readClippingEnabled",value:function(e,t){return!!t.clippingArea&&!!t.clippingArea.clip}},{key:"writeClippingEnabled",value:function(e,t){this.clippingArea&&(t.clippingArea||(t.clippingArea={}),t.clippingArea.clip=e)}},{key:"writeLayers",value:function(e,t,n,r){var i=this,a=(0,c.Z)((0,c.Z)({},r),{},{layerContainerType:"operational-layers"}),o=e.map((function(e){return i.verifyWriteLayer(e,r)?e.write({},a):null})).filter((function(e){return!!e}));t[n]=o.toArray()}},{key:"verifyWriteLayer",value:function(e,t){return"write"in e||(t&&t.messages&&t.messages.push(new v.a("layer:unsupported","Layers (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' cannot be persisted in web scenes"),{layer:e})),!1)}},{key:"readSourceVersion",value:function(e,t){var n=t.version.split("."),r=(0,u.Z)(n,2),i=r[0],a=r[1];return new Le(parseInt(i,10),parseInt(a,10))}},{key:"writeSourceVersion",value:function(e,t,n){t[n]="".concat(Re.major,".").concat(Re.minor)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(e){e?this._override("thumbnailUrl",e):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}},{key:"writeAuthoringApp",value:function(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp="ArcGIS API for JavaScript"}},{key:"authoringAppVersion",set:function(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}},{key:"writeAuthoringAppVersion",value:function(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=y.c}},{key:"writeGround",value:function(e,t,n,r){t[n]=e?e.write({},r):{transparency:0,layers:[]}}},{key:"readInitialViewProperties",value:function(e,t){var n={};return t.initialState&&t.initialState.environment&&(n.environment=j.y.fromJSON(t.initialState.environment)),t.spatialReference?n.spatialReference=x.k.fromJSON(t.spatialReference):n.spatialReference=x.k.WebMercator,n.viewingMode=t.viewingMode||"global",t.initialState&&t.initialState.viewpoint&&(n.viewpoint=g.u.fromJSON(t.initialState.viewpoint)),new te(n)}},{key:"spatialReference",get:function(){var e,t;return null!==(e=null===(t=this.initialViewProperties)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:x.k.WebMercator}},{key:"viewingMode",get:function(){var e,t;return null!==(e=null===(t=this.initialViewProperties)||void 0===t?void 0:t.viewingMode)&&void 0!==e?e:"global"}},{key:"load",value:function(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return(0,k.n)(this,(function(t){var n=e.presentation&&e.presentation.slides;t(e.ground,e.basemap,e.layers,n&&n.map((function(e){return e.basemap})))}))}},{key:"read",value:function(e,t){var n=this;t=(0,c.Z)((0,c.Z)({},t),{},{origin:"web-scene"});var i=this._isAuthoringAppVersionSetByUser,u=this._isAuthoringAppSetByUser;if((0,Z.d)(this,e,(function(t){return(0,a.Z)((0,o.Z)(r.prototype),"read",n).call(n,e,t)}),t),u||(this._isAuthoringAppSetByUser=!1),i||(this._isAuthoringAppVersionSetByUser=!1),e.baseMap&&Array.isArray(e.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){var s=e.baseMap.elevationLayers.map((function(e){return{id:e.id}})),l=this.presentation.slides,h=s.filter((function(e){return!l.some((function(t){return function(e,t){return e.visibleLayers.some((function(e){return e.id===t}))}(t,e.id)}))}));l.forEach((function(e){e.visibleLayers.addMany(h)}))}}},{key:"_writeBasemapElevationLayers",value:function(e){var t=e.ground&&e.ground.layers;!e.baseMap&&t&&t.length&&(e.baseMap={title:"Basemap",baseMapLayers:[]}),e.baseMap&&(e.baseMap.elevationLayers=(0,v.m)(t))}},{key:"write",value:function(e,t){var n;if("loaded"!==this.loadStatus){var i=new v.a("webscene:not-loaded","Web scene must be loaded before it can be serialized");throw Oe.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),i}this._runLayersIdGC();var u=!(null!==(n=t)&&void 0!==n&&n.messages);t=(0,c.Z)((0,c.Z)({messages:[]},t),{},{origin:"web-scene"});var s=(0,a.Z)((0,o.Z)(r.prototype),"write",this).call(this,e,t);if(u){var l=t.messages.filter((function(e){return"web-document-write:property-required"===e.name}));if(l.length){var h=new v.a("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:l});throw Oe.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",l),h}}return this._writeBasemapElevationLayers(s),s}},{key:"save",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(Ie.SAVE,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_saveImpl",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.portalItem,e.t0){e.next=5;break}return Oe.error("save(): requires the .portalItem property to be set"),e.next=5,Promise.reject(new v.a("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene"));case 5:if(e.t1=this.portalItem.type!==Ue,!e.t1){e.next=9;break}return e.next=9,Promise.reject(new v.a("webscene:portal-item-wrong-type",'Portal item needs to have type "'.concat(Ue,'"')));case 9:return n=this._updateFromPromise,e.next=12,this._ensureLoadBeforeSave();case 12:return r=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&(0,y.j)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||M.B.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),i=this.write({},r),e.next=15,Promise.all(r.resources.pendingOperations);case 15:return e.next=17,this._verifySave(i,r,t);case 17:return this._updateTypeKeywords(this.portalItem),e.next=20,this.portalItem.update({data:i});case 20:return e.next=22,(0,E.a)(this.resourceReferences,r,null);case 22:if((0,A.i)(r),e.t2=n,!e.t2){e.next=27;break}return e.next=27,n;case 27:return e.next=29,this._saveThumbnail();case 29:return e.abrupt("return",this.portalItem);case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(Ie.SAVE_AS,n,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_saveAsImpl",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){var r,i,a,o,u,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=U.default.from(t),e.t0=r,e.t0){e.next=6;break}return Oe.error("saveAs(portalItem): requires a portal item parameter"),e.next=6,Promise.reject(new v.a("webscene:portal-item-required","saveAs requires a portal item to save to"));case 6:return r.id&&((r=r.clone()).id=null),i=r.portal||M.B.getDefault(),e.next=10,this._ensureLoadBeforeSave();case 10:return r.type=Ue,r.portal=i,a=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:i,portalItem:r,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),o=this.write({},a),e.next=15,Promise.all(a.resources.pendingOperations);case 15:return e.next=17,this._verifySaveAs(o,a,n);case 17:return u=this.thumbnailUrl,l=!this._isOverridden("thumbnailUrl"),this._updateTypeKeywords(r),e.next=21,i._signIn();case 21:return e.next=23,i.user.addItem({item:r,folder:n&&n.folder,data:o});case 23:return e.next=25,(0,E.a)(this.resourceReferences,a,null);case 25:return this.portalItem=r,_.S.prototype.read.call(this,{version:o.version,authoringApp:o.authoringApp,authoringAppVersion:o.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:r.itemUrl&&(0,y.j)(r.itemUrl)}),(0,A.i)(a),u&&(this.thumbnailUrl=l?(0,y.S)(u,"w","8192"):u),a.portalItem=r,e.next=32,this._saveThumbnail();case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_saveThumbnail",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._isOverridden("thumbnailUrl"),!e.t0){e.next=6;break}return e.next=4,this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl});case 4:this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_verifySave",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(0,x.A)(this.spatialReference))return Promise.reject(new v.a("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));var a,o=t.messages.filter((function(e){return"error"===e.type})).map((function(e){return new v.a(e.name,e.message,e.details)}));t.blockedRelativeUrls&&(o=o.concat(t.blockedRelativeUrls.map((function(e){return new v.a("url:unsupported","Relative url '".concat(e,"' is not supported in Web Scene"))})))),r&&r.ignoreUnsupported&&(o=o.filter((function(e){return"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name}))),(null===r||void 0===r?void 0:r.requiredPropertyChecksDisabled)&&(o=o.filter((function(e){return"web-document-write:property-required"!==e.name})));var u=r&&r.strictSchemaValidationEnabled;return a=u?Promise.all([n.e(8095),n.e(3936)]).then(n.bind(n,3936)).then((function(t){var n=t.validate(e);if(n.length>0){var r="webscene did not validate:\n".concat(n.join("\n"));Oe.error("".concat(i?"saveAs":"save","(): ").concat(r))}return n.map((function(e){return new v.a("webscene:schema-validation",e)}))})).then((function(e){if(u&&e.length>0)throw J(e.concat(o));return o})):Promise.resolve(o),a.then((function(e){if(e.length>0)throw new v.a("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:e})}))}},{key:"_verifySaveAs",value:function(e,t,n){return this.canNotSaveAs(t)?Promise.reject(W()):this._verifySave(e,t,n,!0)}},{key:"verifySaveAs",value:function(e){var t=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),n=this.write({},t);return this._verifySaveAs(n,t,e)}},{key:"canNotSaveAs",value:function(e){return e||(e=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write({},e)),e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.length>0}},{key:"updateFrom",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},r=this._updateFrom(t,n),this._updateFromPromise=r,e.next=5,r;case 5:this._updateFromPromise===r&&(this._updateFromPromise=null);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateFrom",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,u,l=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,t.whenReady();case 3:if(!n.environmentExcluded&&t.environment&&(this.initialViewProperties.environment=j.y.prototype.clone.apply(t.environment)),!n.viewpointExcluded&&t.viewpoint&&(this.initialViewProperties.viewpoint=t.viewpoint.clone()),this.initialViewProperties.spatialReference=t.spatialReference.clone(),this.initialViewProperties.viewingMode=t.viewingMode,(0,v.r)(t.clippingArea)?t.clippingArea!==this.clippingArea&&(this.clippingArea=t.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1,t.heightModelInfo&&(this.heightModelInfo=t.heightModelInfo.clone()),t.map!==this){e.next=12;break}r=(0,i.Z)(t.allLayerViews);try{for(r.s();!(a=r.n()).done;)o=a.value,(u="visible")in o&&u in o.layer&&o._isOverridden(u)&&(o.layer[u]=o[u])}catch(s){r.e(s)}finally{r.f()}case 12:if(e.t0=!1===n.thumbnailExcluded||null==n.thumbnailExcluded&&!n.viewpointExcluded,!e.t0){e.next=16;break}return e.next=16,this._updateFromThumbnail(t,n.thumbnailSize||void 0);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateFromThumbnail",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,n){var r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,V.a)(t,n),e.next=3,t.takeScreenshot({format:"jpg",width:r.width,height:r.height,disableDecorations:!0});case 3:i=e.sent,this.thumbnailUrl=i.dataUrl;case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_loadFromSource",value:function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}},{key:"_readAndLoadFromJSON",value:function(e,t){var n=this._validateJSON(e);return this.read(n,t),this._loadFromJSON(n,t)}},{key:"_extractOperationalLayers",value:function(e){var t=this,n=[];if(!this.sourceVersion.supportsGround&&e.baseMap&&Array.isArray(e.baseMap.elevationLayers)){var r,a=(0,i.Z)(e.baseMap.elevationLayers);try{for(a.s();!(r=a.n()).done;){var o=r.value;n.push(o)}}catch(s){a.e(s)}finally{a.f()}}var u=[];return{operationalLayers:e.operationalLayers?e.operationalLayers.filter((function e(n){return n.layers&&(n.layers=n.layers.filter(e)),"ArcGISTiledElevationServiceLayer"!==n.layerType||(t.sourceVersion.supportsGround||u.push(n),!1)})):[],operationalElevationLayers:u,basemapElevationLayers:n}}},{key:"_loadFromJSON",value:function(e,t){var r=this,i=new b.j;return this._validateSpatialReference().then((function(){return r._validateHeightModelInfo()})).then((function(){return Promise.all([n.e(1056),n.e(4314),n.e(8893)]).then(n.bind(n,42174))})).then((function(n){var a=n.populateOperationalLayers,o=r._extractOperationalLayers(e),u=o.operationalLayers,s=o.operationalElevationLayers,l=o.basemapElevationLayers,h=[],f={context:(0,c.Z)((0,c.Z)({},t),{},{layerContainerType:"operational-layers"})};if(r.portalItem&&(f.context.portal=r.portalItem.portal||M.B.getDefault()),l.length>0){var p=(0,c.Z)((0,c.Z)({},f),{},{context:(0,c.Z)((0,c.Z)({},f.context),{},{layerContainerType:"ground"})});p.defaultLayerType="ArcGISTiledElevationServiceLayer",h.push(a(r.ground.layers,l,p))}if(s.length>0){var d=(0,c.Z)((0,c.Z)({},f),{},{context:(0,c.Z)((0,c.Z)({},f.context),{},{layerContainerType:"ground"})});d.defaultLayerType="ArcGISTiledElevationServiceLayer",h.push(a(i,s,d))}return u&&u.length>0&&h.push(a(r.layers,u,f)),(0,v.E)(h).then((function(){}))})).then((function(){return r._loadObjectsWithLayers()})).then((function(){r.ground.layers.addMany(i)}))}},{key:"_ensureLoadBeforeSave",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t,n,r,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return e.next=4,this._loadObjectsWithLayers();case 4:t=[],n=(0,i.Z)(this.allLayers.items);try{for(n.s();!(r=n.n()).done;)"beforeSave"in(a=r.value)&&"function"==typeof a.beforeSave&&(o=a.beforeSave())&&t.push(o)}catch(u){n.e(u)}finally{n.f()}return e.next=9,(0,v.E)(t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadObjectsWithLayers",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.ground&&t.push(this.ground.load()),this.basemap&&t.push(this.basemap.load()),this.presentation.slides.forEach((function(e){e.basemap&&t.push(e.basemap.load())})),e.next=6,(0,v.E)(t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadFromItem",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load().catch((function(e){throw new v.a("webscene:load-portal-item","Failed to load portal item",{error:e})}));case 2:if("Web Scene"===t.type){e.next=4;break}throw new v.a("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:t.type});case 4:return e.next=6,t.fetchData();case 6:return n=e.sent,this.resourceInfo=n,r={origin:"web-scene",url:(0,y.j)(t.itemUrl),portal:t.portal||M.B.getDefault(),portalItem:t,readResourcePaths:[]},e.next=11,this._readAndLoadFromJSON(n,r);case 11:this.resourceReferences={portalItem:t,paths:r.readResourcePaths};case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_validateSpatialReference",value:function(){var e,t=this.initialViewProperties,n=this._sceneSpatialReference;if("local"!==t.viewingMode){if(!(0,j.r)(n,P.l.Global))return Promise.reject(new v.a("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:n,viewingMode:t.viewingMode}));e=function(e){return!e||(0,L.A)(e,n)}}else{if(!(0,j.r)(n,P.l.Local))return Promise.reject(new v.a("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:n,viewingMode:t.viewingMode}));e=function(e){return!e||e.equals(n)}}var r=function(e){return e&&((0,v.r)(e.camera)&&e.camera.position&&e.camera.position.spatialReference||(0,v.r)(e.targetGeometry)&&e.targetGeometry.spatialReference)},i=t.viewpoint,a=r(i);if(a&&!e(a))return Promise.reject(new v.a("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:a,sceneSpatialReference:n,viewingMode:t.viewingMode}));var o=this.presentation.slides.find((function(t){return!e(r(t.viewpoint))}));if(o){var u=r(o.viewpoint);return Promise.reject(new v.a("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:u,sceneSpatialReference:n,viewingMode:t.viewingMode}))}return Promise.resolve()}},{key:"_validateHeightModelInfo",value:function(){var e=this._sceneSpatialReference,t=(0,O.r)(this.heightModelInfo,e);return t?Promise.reject(t):Promise.resolve()}},{key:"_validateJSON",value:function(e){var t=Le.parse(e.version||"","webscene");return Re.validate(t),e.version="".concat(t.major,".").concat(t.minor),1===t.major&&t.minor<=2&&(e.spatialReference=x.k.WebMercator.toJSON()),e}},{key:"_updateTypeKeywords",value:function(e){"local"===this.initialViewProperties.viewingMode?e.typeKeywords?e.typeKeywords.includes(Ve)||e.typeKeywords.push(Ve):e.typeKeywords=[Ve]:"global"===this.initialViewProperties.viewingMode&&e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((function(e){return e!==Ve}))),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((function(e,t,n){return n.indexOf(e)===t})))}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||x.k.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?(0,y.j)(this.portalItem.itemUrl).path:null}},{key:"_enableVerifyItemRelativeUrls",value:function(e){var t=this._verifyItemRelativeRootPath;return t&&(e.verifyItemRelativeUrls={rootPath:t,writtenUrls:[]}),e}},{key:"_unscheduleLayersIdGC",value:function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}},{key:"_scheduleLayersIdGC",value:function(){var e=this;this._unscheduleLayersIdGC(),this._layersIdGCTimeoutId=setTimeout((function(){e._layersIdGCTimeoutId=0,e._runLayersIdGC()}),3e3)}},{key:"_runLayersIdGC",value:function(){var e=this;this._unscheduleLayersIdGC();var t=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search,n=function(t){return e.allLayers.some((function(e){return e.id===t}))};t&&t.layers&&(t.layers=t.layers.filter((function(e){return n(e.id)})));var r=this.presentation&&this.presentation.slides;r&&r.forEach((function(e){e.visibleLayers&&(e.visibleLayers=e.visibleLayers.filter((function(e){return n(e.id)})))}))}}],[{key:"fromJSON",value:function(e){if(!e)throw new v.a("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:e})}}]),r}(M.m.LoadableMixin((0,S.m)((0,_.O)(m.L))));Pe.VERSION=Re,(0,v.e)([(0,v.d)({type:$,json:{write:!0}})],Pe.prototype,"applicationProperties",void 0),(0,v.e)([(0,v.d)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Pe.prototype,"basemap",void 0),(0,v.e)([(0,v.d)({type:I.M,json:{read:{source:"clippingArea.geometry",reader:R.d},write:{target:"clippingArea.geometry"}}})],Pe.prototype,"clippingArea",void 0),(0,v.e)([(0,x.r)("clippingArea")],Pe.prototype,"writeClippingArea",null),(0,v.e)([(0,v.d)({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],Pe.prototype,"clippingEnabled",void 0),(0,v.e)([(0,x.o)("clippingEnabled",["clippingArea"])],Pe.prototype,"readClippingEnabled",null),(0,v.e)([(0,x.r)("clippingEnabled")],Pe.prototype,"writeClippingEnabled",null),(0,v.e)([(0,v.d)({type:V.l,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],Pe.prototype,"floorInfo",void 0),(0,v.e)([(0,v.d)({type:T.v,json:{write:!0}})],Pe.prototype,"heightModelInfo",void 0),(0,v.e)([(0,v.d)({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],Pe.prototype,"layers",void 0),(0,v.e)([(0,x.r)("layers")],Pe.prototype,"writeLayers",null),(0,v.e)([(0,v.d)({readOnly:!0,type:Le,json:{type:function(){for(var e=[],t=Re.major,n=8;n<=Re.minor;n++)e.push("".concat(t,".").concat(n));return e}(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:function(){return{enabled:!0,allowNull:!0,ignoreOrigin:!0}}}}})],Pe.prototype,"sourceVersion",void 0),(0,v.e)([(0,x.o)("sourceVersion",["version"])],Pe.prototype,"readSourceVersion",null),(0,v.e)([(0,x.r)("sourceVersion")],Pe.prototype,"writeSourceVersion",null),(0,v.e)([(0,v.d)({json:{read:!1,write:!1}})],Pe.prototype,"tables",void 0),(0,v.e)([(0,v.d)()],Pe.prototype,"thumbnailUrl",null),(0,v.e)([(0,v.d)({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],Pe.prototype,"authoringApp",null),(0,v.e)([(0,x.r)("authoringApp")],Pe.prototype,"writeAuthoringApp",null),(0,v.e)([(0,v.d)({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],Pe.prototype,"authoringAppVersion",null),(0,v.e)([(0,x.r)("authoringAppVersion")],Pe.prototype,"writeAuthoringAppVersion",null),(0,v.e)([(0,v.d)({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],Pe.prototype,"ground",void 0),(0,v.e)([(0,x.r)("ground")],Pe.prototype,"writeGround",null),(0,v.e)([(0,v.d)({type:b.j.ofType(Te),json:{write:!0}})],Pe.prototype,"transportationNetworks",void 0),(0,v.e)([(0,v.d)({type:Ae,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:function(e,t,n,r){if(e.slides&&e.slides.length>0){var i=(0,c.Z)((0,c.Z)({},r),{},{isPresentation:!0});t.presentation=e.write({},i)}}}}})],Pe.prototype,"presentation",void 0),(0,v.e)([(0,v.d)({type:te,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:function(){return new te({viewingMode:"global",spatialReference:x.k.WebMercator})}}})],Pe.prototype,"initialViewProperties",void 0),(0,v.e)([(0,x.o)("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],Pe.prototype,"readInitialViewProperties",null),(0,v.e)([(0,v.d)({type:x.k,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],Pe.prototype,"spatialReference",null),(0,v.e)([(0,v.d)({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],Pe.prototype,"viewingMode",null),(0,v.e)([(0,v.d)({type:U.default})],Pe.prototype,"portalItem",void 0),(0,v.e)([(0,v.d)()],Pe.prototype,"resourceInfo",void 0),Pe=(0,v.e)([(0,v.n)("esri.WebScene")],Pe),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(Ie||(Ie={}));var je=Pe;t.default=je},9330:function(e,t,n){n.d(t,{A:function(){return L},B:function(){return O},C:function(){return C},D:function(){return N},E:function(){return k},F:function(){return w},G:function(){return R},H:function(){return F},I:function(){return v},M:function(){return f},N:function(){return m},O:function(){return U},R:function(){return x},S:function(){return P},V:function(){return A},Y:function(){return Z},a:function(){return o},b:function(){return _},c:function(){return c},f:function(){return l},g:function(){return g},h:function(){return h},j:function(){return S},k:function(){return j},l:function(){return d},m:function(){return s},p:function(){return b},q:function(){return I},s:function(){return p},u:function(){return u},v:function(){return E},w:function(){return T},y:function(){return y},z:function(){return M}});var r=n(50165),i=n(96263),a=n(79146);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return[e[0],e[1],e[2],e[3],e[4],e[5]]}function u(e,t,n,r,i,a){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o();return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u}function s(e,t){var n=isFinite(e[2])||isFinite(e[5]);return new i.M(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function h(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function f(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length/3,i=e[0],a=e[1],o=e[2],u=e[3],s=e[4],l=e[5],c=0;c<r;c++)i=Math.min(i,t[n+3*c]),a=Math.min(a,t[n+3*c+1]),o=Math.min(o,t[n+3*c+2]),u=Math.max(u,t[n+3*c]),s=Math.max(s,t[n+3*c+1]),l=Math.max(l,t[n+3*c+2]);e[0]=i,e[1]=a,e[2]=o,e[3]=u,e[4]=s,e[5]=l}function p(e,t,n){var r=t.length,i=e[0],a=e[1],o=e[2],u=e[3],s=e[4],l=e[5];if(n)for(var c=0;c<r;c++){var h=t[c];i=Math.min(i,h[0]),a=Math.min(a,h[1]),o=Math.min(o,h[2]),u=Math.max(u,h[0]),s=Math.max(s,h[1]),l=Math.max(l,h[2])}else for(var f=0;f<r;f++){var p=t[f];i=Math.min(i,p[0]),a=Math.min(a,p[1]),u=Math.max(u,p[0]),s=Math.max(s,p[1])}e[0]=i,e[1]=a,e[2]=o,e[3]=u,e[4]=s,e[5]=l}function d(e){for(var t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function v(e){return e[0]>=e[3]?0:e[3]-e[0]}function y(e){return e[1]>=e[4]?0:e[4]-e[1]}function m(e){return e[2]>=e[5]?0:e[5]-e[2]}function g(e){var t=v(e),n=m(e),r=y(e);return Math.sqrt(t*t+n*n+r*r)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=e[0]+v(e)/2,t[1]=e[1]+y(e)/2,t[2]=e[2]+m(e)/2,t}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return t[0]=v(e),t[1]=y(e),t[2]=m(e),t}function M(e){return Math.max(v(e),m(e),y(e))}function k(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function _(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]}function S(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function x(e,t){return!!(0,r.t)(t)||S(e,t)}function A(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e;return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=e[0]+v(e)/2,i=e[1]+y(e)/2,a=e[2]+m(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=a+(e[2]-a)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=a+(e[5]-a)*t,n}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function L(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function O(e){return e?L(e,N):o(N)}function R(e,t){return t||(t=(0,a.u)()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function U(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function V(e){return 6===e.length}function P(e){return 0===v(e)&&0===y(e)&&0===m(e)}function j(e,t,n){if((0,r.t)(e)||(0,r.t)(t))return e===t;if(!V(e)||!V(t))return!1;if(n){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function E(e,t,n,r,i,a){return u(e,t,n,r,i,a,q)}var C=[-1/0,-1/0,-1/0,1/0,1/0,1/0],N=[1/0,1/0,1/0,-1/0,-1/0,-1/0],F=[0,0,0,0,0,0],q=o()},79146:function(e,t,n){n.d(t,{D:function(){return O},E:function(){return A},F:function(){return _},H:function(){return U},I:function(){return V},J:function(){return P},K:function(){return j},M:function(){return v},R:function(){return Z},U:function(){return I},a:function(){return s},b:function(){return w},c:function(){return c},d:function(){return T},e:function(){return u},f:function(){return h},g:function(){return M},h:function(){return p},j:function(){return k},l:function(){return m},m:function(){return f},o:function(){return l},p:function(){return b},q:function(){return x},s:function(){return y},u:function(){return o},w:function(){return S},x:function(){return d},y:function(){return g},z:function(){return L}});var r=n(50165),i=n(2760),a=n(96263);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return[e[0],e[1],e[2],e[3]]}function u(e){return[e[0],e[1],e[2],e[3]]}function s(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function l(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o();return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function h(e,t){return new a.M({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function f(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function p(e,t,n){if((0,r.t)(t))s(n,e);else if("length"in t)R(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}}function d(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.length,i=e[0],a=e[1],o=e[2],u=e[3],s=0;s<r;s++){var l=t[s];i=Math.min(i,l[0]),a=Math.min(a,l[1]),o=Math.max(o,l[0]),u=Math.max(u,l[1])}return n[0]=i,n[1]=a,n[2]=o,n[3]=u,n}function v(e){for(var t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function y(e){return(0,r.t)(e)||e[0]>=e[2]?0:e[2]-e[0]}function m(e){return e[1]>=e[3]?0:e[3]-e[1]}function g(e){return y(e)*m(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function w(e,t){return S(e,t[0],t[1])}function M(e,t){var n=t[3],r=.5*(e[0]+e[2]),i=Math.abs(t[0]-r),a=.5*(e[2]-e[0]);if(i>n+a)return!1;var o=.5*(e[1]+e[3]),u=.5*(e[3]-e[1]),s=Math.abs(t[1]-o);if(s>n+u)return!1;if(i<a||s<u)return!0;var l=i-a,c=s-u;return l*l+c*c<=n*n}function k(e,t,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=t.x,s=t.y,l=n.x,c=n.y,h=function(e,t){return(c-s)*e+(u-l)*t+(l*s-u*c)<0},f=h(r,o),p=h(a,o),d=h(a,i),v=h(r,i);return!(f===p&&p===d&&d===v&&v===f||u<r&&l<r||u>a&&l>a||s>o&&c>o||s<i&&c<i)}function _(e,t){return S(e,t.x,t.y)}function S(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function x(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[0]<=e[2]+n&&t[1]<=e[3]+n}function A(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Z(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function I(e,t,n){if((0,r.t)(t))return s(n,e);var a=t[0],o=t[1],u=t[2],l=t[3];return n[0]=(0,i.o)(e[0],a,u),n[1]=(0,i.o)(e[1],o,l),n[2]=(0,i.o)(e[2],a,u),n[3]=(0,i.o)(e[3],o,l),n}function T(e,t){var n=(e[0]+e[2])/2,r=(e[1]+e[3])/2,i=Math.max(Math.abs(t[0]-n)-y(e)/2,0),a=Math.max(Math.abs(t[1]-r)-m(e)/2,0);return Math.sqrt(i*i+a*a)}function L(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return r[0]=e[0]+t,r[1]=e[1]+n,r[2]=e[2]+t,r[3]=e[3]+n,r}function O(e){return e?s(e,j):o(j)}function R(e){return null!=e&&4===e.length}function U(e){return!(0!==y(e)&&isFinite(e[0])||0!==m(e)&&isFinite(e[1]))}function V(e,t){return R(e)&&R(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}var P=[-1/0,-1/0,1/0,1/0],j=[1/0,1/0,-1/0,-1/0],E=[0,0,0,0]},48561:function(e,t,n){function r(e){return 32+e.length}function i(){return 16}function a(e){if(!e)return 0;var t=32;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];switch(typeof i){case"string":t+=r(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function o(e,t){return 32+e.length*t}var u;n.d(t,{e:function(){return o},n:function(){return r},o:function(){return u},r:function(){return a},t:function(){return i}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(u||(u={}))},66307:function(e,t,n){n.d(t,{a:function(){return u},i:function(){return c},l:function(){return o},o:function(){return l},r:function(){return a}});var r=n(93433),i={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function a(e){return i[e]||i[e.toLowerCase()]}function o(e){var t;return null!==(t=i[e])&&void 0!==t?t:i[e.toLowerCase()]}function u(e){return(0,r.Z)(o(e))}function s(e,t,n){n<0&&++n,n>1&&--n;var r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=(e%360+360)%360/360,a=n<=.5?n*(t+1):n+t-n*t,o=2*n-a;return[Math.round(255*s(o,a,i+1/3)),Math.round(255*s(o,a,i)),Math.round(255*s(o,a,i-1/3)),r]}function c(e){var t=e.length>5,n=t?8:4,r=(1<<n)-1,i=t?1:17,a=t?9===e.length:5===e.length,o=Number("0x"+e.substr(1));if(isNaN(o))return null;var u,s=[0,0,0,1];return a&&(u=o&r,o>>=n,s[3]=i*u/255),u=o&r,o>>=n,s[2]=i*u,u=o&r,o>>=n,s[1]=i*u,u=o&r,o>>=n,s[0]=i*u,s}},39853:function(e,t,n){n.d(t,{r:function(){return o},s:function(){return u}});var r=n(50165),i=new Set;function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n&&i.has(t)||(n&&i.add(t),e.warn("\ud83d\uded1 DEPRECATED - ".concat(t)))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((0,r.c)("esri-deprecation-warnings")){var i=n.moduleName;u(e,"Property: ".concat((i?i+"::":"")+t),n)}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((0,r.c)("esri-deprecation-warnings")){var i=n.replacement,o=n.version,u=n.see,s=n.warnOnce,l=t;i&&(l+="\n\t\ud83d\udee0\ufe0f Replacement: ".concat(i)),o&&(l+="\n\t\u2699\ufe0f Version: ".concat(o)),u&&(l+="\n\t\ud83d\udd17 See ".concat(u," for more details.")),a(e,l,s)}}},56864:function(e,t,n){function r(e,t,n){for(var r=0;r<n;++r)t[2*r]=e[r],t[2*r+1]=e[r]-t[2*r]}function i(e,t){for(var n=e.length,r=0;r<n;++r)o[0]=e[r],t[r]=o[0];return t}function a(e,t){for(var n=e.length,r=0;r<n;++r)o[0]=e[r],o[1]=e[r]-o[0],t[r]=o[1];return t}n.d(t,{o:function(){return i},r:function(){return a},t:function(){return r}});var o=new Float32Array(2)},75097:function(e,t,n){n.d(t,{g:function(){return y},h:function(){return f},o:function(){return l},r:function(){return s}});var r,i,a=n(50165),o=n(85966),u=n(80933);function s(e,t){if(!e)return null;if(!h(e))return new a.a("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:e});var n=e.heightUnit,r=o.v.deriveUnitFromSR(e,t).heightUnit;return n!==r?new a.a("webscene:incompatible-height-unit","The vertical units of the scene (".concat(n,") must match the horizontal units of the scene (").concat(r,")"),{verticalUnit:n,horizontalUnit:r}):null}function l(e,t,n){var i,u=f(e),s=t,l=c(u,s,n);if(u){var h=o.v.deriveUnitFromSR(u,e.spatialReference).heightUnit;if(!n&&h!==u.heightUnit){var p=new a.a("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units (".concat(h,")"),{horizontalUnit:h});return new a.a("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:u,error:p})}}if(!("heightModelInfo"in(i=e)&&null!=i.heightModelInfo||null!=i.spatialReference)&&v(i)||l===r.Unsupported)return new a.a("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:u});switch(l){case r.Units:var d=u.heightUnit||"unknown",y=s.heightUnit||"unknown",m=new a.a("layerview:incompatible-height-unit","The vertical units of the layer (".concat(d,") must match the vertical units of the scene (").concat(y,")"),{layerUnit:d,sceneUnit:y});return new a.a("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:u,sceneHeightModelInfo:s,error:m});case r.HeightModel:var g=u.heightModel||"unknown",b=s.heightModel||"unknown",w=new a.a("layerview:incompatible-height-model","The height model of the layer (".concat(g,") must match the height model of the scene (").concat(b,")"),{layerHeightModel:g,sceneHeightModel:b});return new a.a("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:u,sceneHeightModelInfo:s,error:w});case r.CRS:var M=u.vertCRS||"unknown",k=s.vertCRS||"unknown",_=new a.a("layerview:incompatible-vertical-datum","The vertical datum of the layer (".concat(M,") must match the vertical datum of the scene (").concat(k,")"),{layerDatum:M,sceneDatum:k});return new a.a("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:u,sceneHeightModelInfo:s,error:_})}return null}function c(e,t,n){if(!h(e)||!h(t))return r.Unsupported;if(null==e||null==t)return r.Ok;if(!n&&e.heightUnit!==t.heightUnit)return r.Units;if(e.heightModel!==t.heightModel)return r.HeightModel;switch(e.heightModel){case"gravity-related-height":return r.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?r.Ok:r.CRS;default:return r.Unsupported}}function h(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function f(e){var t=e.url&&(0,u.m)(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&(0,a.r)(t)&&"ImageServer"===t.serverType||!p(e)||!e.heightModelInfo?v(e)?o.v.deriveUnitFromSR(g,e.spatialReference):null:e.heightModelInfo}function p(e){return"heightModelInfo"in e}function d(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function v(e){return d(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):m(e)}function y(e){return null!=e.layers||m(e)||d(e)||p(e)}function m(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(i=r||(r={}))[i.Ok=0]="Ok",i[i.Units=1]="Units",i[i.HeightModel=2]="HeightModel",i[i.CRS=3]="CRS",i[i.Unsupported=4]="Unsupported";var g=new o.v({heightModel:"gravity-related-height"})},12317:function(e,t,n){n.d(t,{A:function(){return f},B:function(){return p},b:function(){return l},d:function(){return c},h:function(){return o},j:function(){return h},k:function(){return d},l:function(){return s},m:function(){return u},v:function(){return a}});var r=n(2760),i=n(40438);function a(e){return e?{origin:(0,r.h)(e.origin),vector:(0,r.h)(e.vector)}:{origin:(0,r.n)(),vector:(0,r.n)()}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return u(e.origin,e.vector,t)}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return(0,r.a)(n.origin,e),(0,r.a)(n.vector,t),n}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return(0,r.a)(n.origin,e),(0,r.e)(n.vector,t,e),n}function l(e,t){var n=(0,r.e)(i.c.get(),t,e.origin),a=(0,r.P)(e.vector,n),o=(0,r.P)(e.vector,e.vector),u=(0,r.o)(a/o,0,1),s=(0,r.e)(i.c.get(),(0,r.q)(i.c.get(),e.vector,u),n);return(0,r.P)(s,s)}function c(e,t,n){return f(e,t,0,1,n)}function h(e,t,n){return(0,r.u)(n,e.origin,(0,r.q)(n,e.vector,t))}function f(e,t,n,a,o){var u=e.vector,s=e.origin,l=(0,r.e)(i.c.get(),t,s),c=(0,r.P)(u,l)/(0,r.v)(u);return(0,r.q)(o,u,(0,r.o)(c,n,a)),(0,r.u)(o,o,e.origin)}function p(e,t){if(v(e,function(e,t){var n=m.get();return n.origin=e,n.vector=t,n}(t.origin,t.direction),!1,y)){var n=y.tA,a=y.pB,o=y.distance2;if(n>=0&&n<=1)return o;if(n<0)return(0,r.p)(e.origin,a);if(n>1)return(0,r.p)((0,r.u)(i.c.get(),e.origin,e.vector),a)}return null}function d(e,t,n){return!!v(e,t,!0,y)&&((0,r.a)(n,y.pA),!0)}function v(e,t,n,a){var o=1e-6,u=e.origin,s=(0,r.u)(i.c.get(),u,e.vector),l=t.origin,c=(0,r.u)(i.c.get(),l,t.vector),h=i.c.get(),f=i.c.get();if(h[0]=u[0]-l[0],h[1]=u[1]-l[1],h[2]=u[2]-l[2],f[0]=c[0]-l[0],f[1]=c[1]-l[1],f[2]=c[2]-l[2],Math.abs(f[0])<o&&Math.abs(f[1])<o&&Math.abs(f[2])<o)return!1;var p=i.c.get();if(p[0]=s[0]-u[0],p[1]=s[1]-u[1],p[2]=s[2]-u[2],Math.abs(p[0])<o&&Math.abs(p[1])<o&&Math.abs(p[2])<o)return!1;var d=h[0]*f[0]+h[1]*f[1]+h[2]*f[2],v=f[0]*p[0]+f[1]*p[1]+f[2]*p[2],y=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],m=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],g=(p[0]*p[0]+p[1]*p[1]+p[2]*p[2])*m-v*v;if(Math.abs(g)<o)return!1;var b=(d*v-y*m)/g,w=(d+v*b)/m;n&&(b=(0,r.o)(b,0,1),w=(0,r.o)(w,0,1));var M=i.c.get(),k=i.c.get();return M[0]=u[0]+b*p[0],M[1]=u[1]+b*p[1],M[2]=u[2]+b*p[2],k[0]=l[0]+w*f[0],k[1]=l[1]+w*f[1],k[2]=l[2]+w*f[2],a.tA=b,a.tB=w,a.pA=M,a.pB=k,a.distance2=(0,r.p)(M,k),!0}var y={tA:0,tB:0,pA:(0,r.n)(),pB:(0,r.n)(),distance2:0},m=new i.s((function(){return{origin:null,vector:null}}))},96401:function(e,t,n){n.d(t,{M:function(){return c},a:function(){return i},b:function(){return p},f:function(){return f},h:function(){return h},i:function(){return l},j:function(){return m},l:function(){return d},o:function(){return u},p:function(){return v},r:function(){return o},s:function(){return a},u:function(){return s},y:function(){return y},z:function(){return b}});var r=n(2760);function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e,t,n,r,i,a,o,u,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=u,e[7]=s,e[8]=l,e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function u(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function s(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],l=t[7],c=t[8],h=c*o-u*l,f=-c*a+u*s,p=l*a-o*s,d=n*h+r*f+i*p;return d?(d=1/d,e[0]=h*d,e[1]=(-c*r+i*l)*d,e[2]=(u*r-i*o)*d,e[3]=f*d,e[4]=(c*n-i*s)*d,e[5]=(-u*n+i*a)*d,e[6]=p*d,e[7]=(-l*n+r*s)*d,e[8]=(o*n-r*a)*d,e):null}function l(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=n[0],p=n[1],d=n[2],v=n[3],y=n[4],m=n[5],g=n[6],b=n[7],w=n[8];return e[0]=f*r+p*o+d*l,e[1]=f*i+p*u+d*c,e[2]=f*a+p*s+d*h,e[3]=v*r+y*o+m*l,e[4]=v*i+y*u+m*c,e[5]=v*a+y*s+m*h,e[6]=g*r+b*o+w*l,e[7]=g*i+b*u+w*c,e[8]=g*a+b*s+w*h,e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=u,e[5]=s,e[6]=f*r+p*o+l,e[7]=f*i+p*u+c,e[8]=f*a+p*s+h,e}function h(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*o,e[1]=p*i+f*u,e[2]=p*a+f*s,e[3]=p*o-f*r,e[4]=p*u-f*i,e[5]=p*s-f*a,e[6]=l,e[7]=c,e[8]=h,e}function f(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=a*t[6],e[7]=a*t[7],e[8]=a*t[8],e}function p(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function v(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,u=r+r,s=i+i,l=n*o,c=r*o,h=r*u,f=i*o,p=i*u,d=i*s,v=a*o,y=a*u,m=a*s;return e[0]=1-h-d,e[3]=c-m,e[6]=f+y,e[1]=c+m,e[4]=1-l-d,e[7]=p-v,e[2]=f-y,e[5]=p+v,e[8]=1-l-h,e}function y(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],u=t[6],s=t[8],l=t[9],c=t[10],h=c*o-u*l,f=-c*a+u*s,p=l*a-o*s,d=n*h+r*f+i*p;if(!d)return null;var v=1/d;return e[0]=h*v,e[1]=(-c*r+i*l)*v,e[2]=(u*r-i*o)*v,e[3]=f*v,e[4]=(c*n-i*s)*v,e[5]=(-u*n+i*a)*v,e[6]=p*v,e[7]=(-l*n+r*s)*v,e[8]=(o*n-r*a)*v,e}function m(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],l=t[7],c=t[8],h=t[9],f=t[10],p=t[11],d=t[12],v=t[13],y=t[14],m=t[15],g=n*u-r*o,b=n*s-i*o,w=n*l-a*o,M=r*s-i*u,k=r*l-a*u,_=i*l-a*s,S=c*v-h*d,x=c*y-f*d,A=c*m-p*d,Z=h*y-f*v,I=h*m-p*v,T=f*m-p*y,L=g*T-b*I+w*Z+M*A-k*x+_*S;return L?(L=1/L,e[0]=(u*T-s*I+l*Z)*L,e[1]=(s*A-o*T-l*x)*L,e[2]=(o*I-u*A+l*S)*L,e[3]=(i*I-r*T-a*Z)*L,e[4]=(n*T-i*A+a*x)*L,e[5]=(r*A-n*I-a*S)*L,e[6]=(v*_-y*k+m*M)*L,e[7]=(y*w-d*_-m*b)*L,e[8]=(d*k-v*w+m*g)*L,e):null}function g(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function b(e){var t=r.t,n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8];return Math.abs(1-(n*n+o*o+l*l))<=t&&Math.abs(1-(i*i+u*u+c*c))<=t&&Math.abs(1-(a*a+s*s+h*h))<=t}var w=l,M=g;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:i,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:a,identity:o,transpose:u,invert:s,adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=o*c-u*l,e[1]=i*l-r*c,e[2]=r*u-i*o,e[3]=u*s-a*c,e[4]=n*c-i*s,e[5]=i*a-n*u,e[6]=a*l-o*s,e[7]=r*s-n*l,e[8]=n*o-r*a,e},determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],u=e[6],s=e[7],l=e[8];return t*(l*a-o*s)+n*(-l*i+o*u)+r*(s*i-a*u)},multiply:l,translate:c,rotate:h,scale:f,scaleByVec2:p,fromTranslation:d,fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:v,normalFromMat4Legacy:y,normalFromMat4:m,projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},subtract:g,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],l=e[6],c=e[7],h=e[8],f=t[0],p=t[1],d=t[2],v=t[3],y=t[4],m=t[5],g=t[6],b=t[7],w=t[8];return Math.abs(n-f)<=r.t*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-p)<=r.t*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=r.t*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-v)<=r.t*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-y)<=r.t*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-m)<=r.t*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-g)<=r.t*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-b)<=r.t*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-w)<=r.t*Math.max(1,Math.abs(h),Math.abs(w))},isOrthoNormal:b,mul:w,sub:M},Symbol.toStringTag,{value:"Module"}))},78880:function(e,t,n){n.d(t,{c:function(){return u},d:function(){return d},e:function(){return a},i:function(){return s},l:function(){return p},o:function(){return o},p:function(){return f},s:function(){return l},u:function(){return i},x:function(){return c},y:function(){return h}});var r=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function i(e){return e?e/72*96:0}function a(e){return e?72*e/96:0}function o(e){if("string"==typeof e){var t=e.match(r);if(t){var n=Number(t[1]),i=t[3]&&t[3].toLowerCase(),o="-"===e.charAt(0),u="px"===i?a(n):n;return o?-u:u}return console.warn("screenUtils.toPt: input not recognized!"),null}return e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x:e,y:t}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e,t]}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e,t]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[e,t,n]}function h(e){return e}function f(e){return e}function p(e){return e}function d(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}},64747:function(e,t,n){n.d(t,{$:function(){return B},B:function(){return P},C:function(){return A},E:function(){return L},G:function(){return E},L:function(){return O},O:function(){return Z},Q:function(){return D},T:function(){return I},U:function(){return R},X:function(){return V},_:function(){return _},a:function(){return g},b:function(){return T},d:function(){return s},f:function(){return m},h:function(){return d},i:function(){return b},j:function(){return c},k:function(){return p},l:function(){return h},m:function(){return l},n:function(){return v},p:function(){return f},q:function(){return S},t:function(){return G},w:function(){return x}});var r=n(50165),i=n(2760),a=n(61340),o=n(3969),u=n(40438);function s(e){return e?{origin:(0,i.h)(e.origin),direction:(0,i.h)(e.direction)}:{origin:(0,i.n)(),direction:(0,i.n)()}}function l(e,t){return(0,r.a9)(e.origin,t.origin)&&(0,r.a9)(e.direction,t.direction)}function c(e,t){var n=y.get();return n.origin=e,n.direction=t,n}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return p(e.origin,e.direction,t)}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s();return(0,i.a)(n.origin,e),(0,i.e)(n.direction,t,e),n}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s();return(0,i.a)(n.origin,e),(0,i.a)(n.direction,t),n}function d(e,t){var n=(0,i._)(u.c.get(),(0,i.z)(u.c.get(),e.direction),(0,i.e)(u.c.get(),t,e.origin));return(0,i.P)(n,n)}var v,y=new u.s((function(){return{origin:null,direction:null}}));function m(e,t){return(0,i.P)(e,t)/(0,i.s)(e)}function g(e,t){var n=(0,i.P)(e,t)/((0,i.s)(e)*(0,i.s)(t));return-(0,i.g)(n)}function b(e,t,n){(0,i.z)(w,e),(0,i.z)(M,t);var r=(0,i.P)(w,M),a=(0,i.g)(r),o=(0,i._)(w,w,M);return(0,i.P)(o,n)<0?2*Math.PI-a:a}!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(v||(v={}));var w=(0,i.n)(),M=(0,i.n)(),k=r.s.getLogger("esri.geometry.support.sphere");function _(){return(0,o.n)()}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_();return(0,i.B)(t,e)}function x(e,t){return(0,o.r)(e[0],e[1],e[2],t)}function A(e){return e}function Z(e){e[0]=e[1]=e[2]=e[3]=0}function I(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e}function T(e){return e[3]}function L(e){return e}function O(e,t,n,r){return(0,o.r)(e,t,n,r)}function R(e,t,n){if((0,r.t)(t))return!1;var i=t.origin,a=t.direction,o=U;o[0]=i[0]-e[0],o[1]=i[1]-e[1],o[2]=i[2]-e[2];var u=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],s=2*(a[0]*o[0]+a[1]*o[1]+a[2]*o[2]),l=s*s-4*u*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(l<0)return!1;var c=Math.sqrt(l),h=(-s-c)/(2*u),f=(-s+c)/(2*u);return(h<0||f<h&&f>0)&&(h=f),!(h<0)&&(n&&(n[0]=i[0]+a[0]*h,n[1]=i[1]+a[1]*h,n[2]=i[2]+a[2]*h),!0)}var U=(0,i.n)();function V(e,t){return R(e,t,null)}function P(e,t,n){var r=u.c.get(),o=u.f.get();(0,i._)(r,t.origin,t.direction);var s=T(e);(0,i._)(n,r,t.origin),(0,i.q)(n,n,1/(0,i.s)(n)*s);var l=C(e,t.origin),c=g(t.origin,n);return(0,a.p)(o,c+l,r),(0,i.L)(n,n,o),n}function j(e,t,n){var r=(0,i.e)(u.c.get(),t,e),a=(0,i.q)(u.c.get(),r,e[3]/(0,i.s)(r));return(0,i.u)(n,a,e)}function E(e,t){var n=(0,i.e)(u.c.get(),t,e),r=(0,i.v)(n),a=e[3]*e[3];return Math.sqrt(Math.abs(r-a))}function C(e,t){var n=(0,i.e)(u.c.get(),t,e),r=(0,i.s)(n),a=T(e),o=a+Math.abs(a-r);return(0,i.g)(a/o)}var N=(0,i.n)();function F(e,t,n,r){var a=(0,i.e)(N,t,e);switch(n){case v.X:var o=(0,i.C)(a,N)[2];return(0,i.f)(r,-Math.sin(o),Math.cos(o),0);case v.Y:var u=(0,i.C)(a,N),s=u[1],l=u[2],c=Math.sin(s);return(0,i.f)(r,-c*Math.cos(l),-c*Math.sin(l),Math.cos(s));case v.Z:return(0,i.z)(r,a);default:return}}function q(e,t){var n=(0,i.e)(z,t,e);return(0,i.s)(n)-e[3]}function D(e,t){var n=(0,i.p)(e,t),r=T(e);return n<=r*r}var z=(0,i.n)(),B=_(),G=Object.freeze(Object.defineProperty({__proto__:null,create:_,copy:S,fromCenterAndRadius:x,wrap:A,clear:Z,fromRadius:I,getRadius:T,getCenter:L,fromValues:O,elevate:function(e,t,n){return e!==n&&(0,i.a)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return k.error("sphere.setExtent is not yet supported"),e===n?n:S(e,n)},intersectRay:R,intersectsRay:V,intersectRayClosestSilhouette:function(e,t,n){if(R(e,t,n))return n;var r=P(e,t,u.c.get());return(0,i.u)(n,t.origin,(0,i.q)(u.c.get(),t.direction,(0,i.x)(t.origin,r)/(0,i.s)(t.direction))),n},closestPointOnSilhouette:P,closestPoint:function(e,t,n){return R(e,t,n)?n:(function(e,t,n){var r=(0,i.P)(e.direction,(0,i.e)(n,t,e.origin));(0,i.u)(n,e.origin,(0,i.q)(n,e.direction,r))}(t,e,n),j(e,n,n))},projectPoint:j,distanceToSilhouette:E,angleToSilhouette:C,axisAt:F,altitudeAt:q,setAltitudeAt:function(e,t,n,r){var a=q(e,t),o=F(e,t,v.Z,z),u=(0,i.q)(z,o,n-a);return(0,i.u)(r,t,u)},containsPoint:D,tmpSphere:B},Symbol.toStringTag,{value:"Module"}))},20838:function(e,t,n){n.d(t,{L:function(){return T},V:function(){return Z},a:function(){return V},c:function(){return R},f:function(){return U},j:function(){return L},l:function(){return P},p:function(){return j},u:function(){return y},y:function(){return x}});var r=n(15671),i=n(43144),a=n(50165),o=n(96401),u=n(71573),s=n(61340),l=n(57952),c=n(6243),h=n(2760),f=n(37783),p=n(64747),d=n(74021),v=n(56864),y=function(){function e(){(0,r.Z)(this,e),this._transform=(0,l.e)(),this._transformInverse=new m({value:this._transform},s.h,l.e),this._transformInverseTranspose=new m(this._transformInverse,s.o,l.e),this._transformTranspose=new m({value:this._transform},s.o,l.e),this._transformInverseRotation=new m({value:this._transform},o.y,u.e)}return(0,i.Z)(e,[{key:"_invalidateLazyTransforms",value:function(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}},{key:"transform",get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}},{key:"setTransformMatrix",value:function(e){(0,s.n)(this._transform,e)}},{key:"multiplyTransform",value:function(e){(0,s.u)(this._transform,this._transform,e)}},{key:"set",value:function(e){(0,s.n)(this._transform,e),this._invalidateLazyTransforms()}},{key:"setAndInvalidateLazyTransforms",value:function(e,t){this.setTransformMatrix(e),this.multiplyTransform(t),this._invalidateLazyTransforms()}}]),e}(),m=function(){function e(t,n,i){(0,r.Z)(this,e),this.original=t,this.update=n,this.dirty=!0,this.transform=i()}return(0,i.Z)(e,[{key:"invalidate",value:function(){this.dirty=!0}},{key:"value",get:function(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,r.Z)(this,e),this.offset=t,this.tmpVertex=(0,h.n)()}return(0,i.Z)(e,[{key:"applyToVertex",value:function(e,t,n){var r=e+this.localOrigin[0],i=t+this.localOrigin[1],a=n+this.localOrigin[2],o=this.offset/Math.sqrt(r*r+i*i+a*a);return this.tmpVertex[0]=e+r*o,this.tmpVertex[1]=t+i*o,this.tmpVertex[2]=n+a*o,this.tmpVertex}},{key:"applyToAabb",value:function(e){for(var t=this,n=0;n<3;++n)b[n]=e[0+n]+this.localOrigin[n],w[n]=e[3+n]+this.localOrigin[n],M[n]=b[n];for(var r=this.applyToVertex(b[0],b[1],b[2]),i=0;i<3;++i)e[i]=r[i],e[i+3]=r[i];for(var a=function(n){for(var r=t.applyToVertex(n[0],n[1],n[2]),i=0;i<3;++i)e[i+0]=Math.min(e[i+0],r[i]),e[i+3]=Math.max(e[i+3],r[i])},o=1;o<8;++o){for(var u=0;u<3;++u)M[u]=0==(o&1<<u)?b[u]:w[u];a(M)}for(var s=0,l=0;l<3;++l)b[l]*w[l]<0&&(s|=1<<l);if(0!==s&&7!==s)for(var c=0;c<8;++c)if(0==(s&c)){for(var h=0;h<3;++h)s[h]?M[h]=0:M[h]=0!=(c&1<<h)?b[h]:w[h];a(M)}for(var f=0;f<3;++f)e[f+0]-=this.localOrigin[f],e[f+3]-=this.localOrigin[f];return e}}]),e}(),b=(0,h.n)(),w=(0,h.n)(),M=(0,h.n)(),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,r.Z)(this,e),this.componentLocalOriginLength=0,this._tmpVertex=(0,h.n)(),this._mbs=(0,p._)(),this._obb={center:(0,h.n)(),halfSize:(0,f.n)(),quaternion:null},this._totalOffset=0,this._offset=0,this._resetOffset(t)}return(0,i.Z)(e,[{key:"_resetOffset",value:function(e){this._offset=e,this._totalOffset=e}},{key:"offset",get:function(){return this._offset},set:function(e){this._resetOffset(e)}},{key:"componentOffset",set:function(e){this._totalOffset=this._offset+e}},{key:"localOrigin",set:function(e){this.componentLocalOriginLength=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}},{key:"applyToVertex",value:function(e,t,n){var r=e,i=t,a=n+this.componentLocalOriginLength,o=this._totalOffset/Math.sqrt(r*r+i*i+a*a);return this._tmpVertex[0]=e+r*o,this._tmpVertex[1]=t+i*o,this._tmpVertex[2]=n+a*o,this._tmpVertex}},{key:"applyToAabb",value:function(e){var t=e[0],n=e[1],r=e[2]+this.componentLocalOriginLength,i=e[3],a=e[4],o=e[5]+this.componentLocalOriginLength,u=t*i<0?0:Math.min(Math.abs(t),Math.abs(i)),s=n*a<0?0:Math.min(Math.abs(n),Math.abs(a)),l=r*o<0?0:Math.min(Math.abs(r),Math.abs(o)),c=Math.sqrt(u*u+s*s+l*l);if(c<this._totalOffset)return e[0]-=t<0?this._totalOffset:0,e[1]-=n<0?this._totalOffset:0,e[2]-=r<0?this._totalOffset:0,e[3]+=i>0?this._totalOffset:0,e[4]+=a>0?this._totalOffset:0,e[5]+=o>0?this._totalOffset:0,e;var h=Math.max(Math.abs(t),Math.abs(i)),f=Math.max(Math.abs(n),Math.abs(a)),p=Math.max(Math.abs(r),Math.abs(o)),d=Math.sqrt(h*h+f*f+p*p),v=this._totalOffset/d,y=this._totalOffset/c;return e[0]+=t*(t>0?v:y),e[1]+=n*(n>0?v:y),e[2]+=r*(r>0?v:y),e[3]+=i*(i<0?v:y),e[4]+=a*(a<0?v:y),e[5]+=o*(o<0?v:y),e}},{key:"applyToMbs",value:function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),n=this._totalOffset/t;return this._mbs[0]=e[0]+e[0]*n,this._mbs[1]=e[1]+e[1]*n,this._mbs[2]=e[2]+e[2]*n,this._mbs[3]=e[3]+e[3]*this._totalOffset/t,this._mbs}},{key:"applyToObb",value:function(e){var t=e.center,n=this._totalOffset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);this._obb.center[0]=t[0]+t[0]*n,this._obb.center[1]=t[1]+t[1]*n,this._obb.center[2]=t[2]+t[2]*n,(0,h.S)(this._obb.halfSize,e.halfSize,e.quaternion),(0,h.u)(this._obb.halfSize,this._obb.halfSize,e.center);var r=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);return this._obb.halfSize[0]+=this._obb.halfSize[0]*r,this._obb.halfSize[1]+=this._obb.halfSize[1]*r,this._obb.halfSize[2]+=this._obb.halfSize[2]*r,(0,h.e)(this._obb.halfSize,this._obb.halfSize,e.center),(0,c.S)(O,e.quaternion),(0,h.S)(this._obb.halfSize,this._obb.halfSize,O),this._obb.halfSize[0]*=this._obb.halfSize[0]<0?-1:1,this._obb.halfSize[1]*=this._obb.halfSize[1]<0?-1:1,this._obb.halfSize[2]*=this._obb.halfSize[2]<0?-1:1,this._obb.quaternion=e.quaternion,this._obb}}]),e}(),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,r.Z)(this,e),this.offset=t,this.sphere=(0,p._)(),this.tmpVertex=(0,h.n)()}return(0,i.Z)(e,[{key:"applyToVertex",value:function(e,t,n){var r=this.objectTransform.transform,i=r[0]*e+r[4]*t+r[8]*n+r[12],a=r[1]*e+r[5]*t+r[9]*n+r[13],o=r[2]*e+r[6]*t+r[10]*n+r[14],u=this.offset/Math.sqrt(i*i+a*a+o*o);i+=i*u,a+=a*u,o+=o*u;var s=this.objectTransform.inverse;return this.tmpVertex[0]=s[0]*i+s[4]*a+s[8]*o+s[12],this.tmpVertex[1]=s[1]*i+s[5]*a+s[9]*o+s[13],this.tmpVertex[2]=s[2]*i+s[6]*a+s[10]*o+s[14],this.tmpVertex}},{key:"applyToMinMax",value:function(e,t){var n=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*n,e[1]+=e[1]*n,e[2]+=e[2]*n;var r=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*r,t[1]+=t[1]*r,t[2]+=t[2]*r}},{key:"applyToAabb",value:function(e){var t=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*t,e[1]+=e[1]*t,e[2]+=e[2]*t;var n=this.offset/Math.sqrt(e[3]*e[3]+e[4]*e[4]+e[5]*e[5]);return e[3]+=e[3]*n,e[4]+=e[4]*n,e[5]+=e[5]*n,e}},{key:"applyToBoundingSphere",value:function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),n=this.offset/t;return this.sphere[0]=e[0]+e[0]*n,this.sphere[1]=e[1]+e[1]*n,this.sphere[2]=e[2]+e[2]*n,this.sphere[3]=e[3]+e[3]*this.offset/t,this.sphere}}]),e}(),S=new _;function x(e){return(0,a.r)(e)?(S.offset=e,S):null}var A=new k;function Z(e){return(0,a.r)(e)?(A.offset=e,A):null}var I=new g;function T(e){return(0,a.r)(e)?(I.offset=e,I):null}var L="terrain",O=(0,u.b)();function R(e,t){return(0,a.t)(e)&&(e=[]),e.push(t),e}function U(e,t){if((0,a.t)(e))return null;var n=e.filter((function(e){return e!==t}));return 0===n.length?null:n}function V(e){return!!(0,a.r)(e)&&!e.visible}function P(e,t,n){var r=e.origin.vec3;(0,d.h)(N,-r[0],-r[1],-r[2]),(0,a.r)(e.transformation)?(0,s.u)(t,N,e.transformation):(0,s.n)(t,N),n&&((0,s.h)(n,t),(0,s.o)(n,n))}function j(e,t,n,r,i){E[0]=e.get(t,0),E[1]=e.get(t,1),E[2]=e.get(t,2),(0,v.t)(E,C,3),n.set(i,0,C[0]),r.set(i,0,C[1]),n.set(i,1,C[2]),r.set(i,1,C[3]),n.set(i,2,C[4]),r.set(i,2,C[5])}var E=new Float64Array(3),C=new Float32Array(6),N=(0,l.e)()},84192:function(e,t,n){function r(){return[0,0]}function i(e){return[e[0],e[1]]}function a(e,t){return[e,t]}function o(e){for(var t=[0,0],n=Math.min(2,e.length),r=0;r<n;++r)t[r]=e[r];return t}function u(e,t){return new Float64Array(e,t,2)}function s(){return[0,0]}function l(){return a(1,1)}function c(){return a(1,0)}function h(){return a(0,1)}n.d(t,{e:function(){return o},f:function(){return f},i:function(){return p},n:function(){return r},o:function(){return u},r:function(){return a},t:function(){return i}});var f=[0,0],p=l(),d=c(),v=h();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:u,zeros:s,ones:l,unitX:c,unitY:h,ZEROS:f,ONES:p,UNIT_X:d,UNIT_Y:v},Symbol.toStringTag,{value:"Module"}))},37783:function(e,t,n){function r(){return new Float32Array(3)}function i(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}function o(e,t){return new Float32Array(e,t,3)}function u(){return r()}function s(){return a(1,1,1)}function l(){return a(1,0,0)}function c(){return a(0,1,0)}function h(){return a(0,0,1)}n.d(t,{a:function(){return u},e:function(){return o},n:function(){return r},r:function(){return a},t:function(){return i}});var f=u(),p=s(),d=l(),v=c(),y=h();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:a,createView:o,zeros:u,ones:s,unitX:l,unitY:c,unitZ:h,ZEROS:f,ONES:p,UNIT_X:d,UNIT_Y:v,UNIT_Z:y},Symbol.toStringTag,{value:"Module"}))},3969:function(e,t,n){function r(){return[0,0,0,0]}function i(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,n,r){return[e,t,n,r]}function o(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),r=0;r<n;++r)t[r]=e[r];return t}function u(e,t){return new Float64Array(e,t,4)}function s(){return[0,0,0,0]}function l(){return a(1,1,1,1)}function c(){return a(1,0,0,0)}function h(){return a(0,1,0,0)}function f(){return a(0,0,1,0)}function p(){return a(0,0,0,1)}n.d(t,{_:function(){return v},e:function(){return o},l:function(){return d},n:function(){return r},r:function(){return a},t:function(){return i},u:function(){return u}});var d=[0,0,0,0],v=l(),y=c(),m=h(),g=f(),b=p();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:a,fromArray:o,createView:u,zeros:s,ones:l,unitX:c,unitY:h,unitZ:f,unitW:p,ZEROS:d,ONES:v,UNIT_X:y,UNIT_Y:m,UNIT_Z:g,UNIT_W:b},Symbol.toStringTag,{value:"Module"}))},40438:function(e,t,n){n.d(t,{c:function(){return m},f:function(){return b},o:function(){return w},r:function(){return g},s:function(){return f},t:function(){return y}});var r=n(15671),i=n(43144),a=n(50165),o=n(48561),u=n(71573),s=n(57952),l=n(84192),c=n(2760),h=n(3969),f=function(){function e(t){(0,r.Z)(this,e),this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}return(0,i.Z)(e,[{key:"get",value:function(){var e=this;return 0===this._itemsPtr&&(0,a.ax)((function(){return e._reset()})),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}},{key:"_reset",value:function(){var e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*p);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}},{key:"_grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this._items.length,p));e++)this._items.push(this.allocator())}}]),e}(),p=1024,d=function(){function e(t,n,i){(0,r.Z)(this,e),this.itemByteSize=t,this.itemCreate=n,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this.itemByteSize)}return(0,i.Z)(e,[{key:"get",value:function(){var e=this;0===this._itemsPtr&&(0,a.ax)((function(){return e._reset()}));for(var t=Math.floor(this._itemsPtr/this._itemsPerBuffer);this._buffers.length<=t;){for(var n=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize),r=0;r<this._itemsPerBuffer;++r)this._items.push(this.itemCreate(n,r*this.itemByteSize));this._buffers.push(n)}return this._items[this._itemsPtr++]}},{key:"_reset",value:function(){for(var e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}},{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(16,l.o,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(24,c.y,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(32,h.u,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(72,u.n,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(128,s.n,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return new e(32,u.a,t)}}]),e}(),v=4*o.o.KILOBYTES,y=d.createVec2f64(),m=d.createVec3f64(),g=d.createVec4f64();d.createMat3f64();var b=d.createMat4f64(),w=d.createQuatf64()}}]);
//# sourceMappingURL=7549.e28c5911.chunk.js.map