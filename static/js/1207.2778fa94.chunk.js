"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[1207],{81216:function(e,t,n){n.d(t,{r:function(){return p}});var r=n(93433),i=n(37762),a=n(15671),o=n(43144),l=n(60136),s=n(29388),u=n(37856),c=n(93314),d=n(48848),p=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments))._set=new Set,e}return(0,o.Z)(n,[{key:"clear",value:function(){if(this._set.size>0){var e=this.toArray();this._set.clear(),this.emit("after-changes",{type:c.E.REMOVE}),this.emit("change",{added:[],removed:e})}}},{key:"length",get:function(){return this._set.size}},{key:"addMany",value:function(e){if(0!==e.length){var t,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._set.add(r)}}catch(a){n.e(a)}finally{n.f()}this.emit("after-changes",{type:c.E.ADD}),this.emit("change",{added:e,removed:[]})}}},{key:"remove",value:function(e){this._set.delete(e)&&(this.emit("after-changes",{type:c.E.REMOVE}),this.emit("change",{added:[],removed:[e]}))}},{key:"removeMany",value:function(e){var t,n=[],r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;this._set.delete(a)&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}n.length>0&&(this.emit("after-changes",{type:c.E.REMOVE}),this.emit("change",{added:[],removed:n}))}},{key:"toArray",value:function(){return(0,r.Z)(this._set)}},{key:"find",value:function(e){var t;return(0,d.at)(this._set,(function(n){return!!e(n)&&(t=n,!0)})),t}},{key:"forEach",value:function(e){this._set.forEach((function(t){return e(t)}))}}]),n}(u.n)},52195:function(e,t,n){n.d(t,{u:function(){return v}});var r=n(15671),i=n(43144),a=n(60136),o=n(29388),l=n(48848),s=n(37856),u=n(630),c=n(92072),d=n(93661),p=n(65094),h=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).layer=null,i.parent=null,i}return(0,i.Z)(n,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var n=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";l.a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(r,"', id: '").concat(n,"')"),t)}}))}},{key:"fullOpacity",get:function(){return(0,d.v)(this.get("layer.opacity"),1)*(0,d.v)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"canResume",value:function(){var e,t,n;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(n=this.view)||void 0===n?void 0:n.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),n}((0,u.a)((0,c.s)((0,p.m)(s.n.EventedMixin(l.m)))));(0,l.e)([(0,l.y)()],h.prototype,"fullOpacity",null),(0,l.e)([(0,l.y)()],h.prototype,"layer",void 0),(0,l.e)([(0,l.y)()],h.prototype,"parent",void 0),(0,l.e)([(0,l.y)({readOnly:!0})],h.prototype,"suspended",null),(0,l.e)([(0,l.y)({readOnly:!0})],h.prototype,"suspendInfo",null),(0,l.e)([(0,l.y)({readOnly:!0})],h.prototype,"legendEnabled",null),(0,l.e)([(0,l.y)({type:Boolean,readOnly:!0})],h.prototype,"updating",null),(0,l.e)([(0,l.y)({readOnly:!0})],h.prototype,"updatingProgress",null),(0,l.e)([(0,l.y)()],h.prototype,"visible",null),(0,l.e)([(0,l.y)()],h.prototype,"view",void 0);var v=h=(0,l.e)([(0,l.n)("esri.views.layers.LayerView")],h)},72770:function(e,t,n){n.d(t,{n:function(){return v}});var r=n(74165),i=n(15861),a=n(15671),o=n(43144),l=n(11752),s=n(61120),u=n(60136),c=n(29388),d=n(48848),p=n(50690),h=(n(93661),n(70522)),v=function(e){var t=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,o.Z)(n,[{key:"postscript",value:function(e){(0,l.Z)((0,s.Z)(n.prototype),"postscript",this).call(this,e),(0,h.g)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,n=t.signal,this.handles.add((0,d.D)((function(){return t.abort()}))),e.next=4,(0,p.j)((function(){var e;return null===(e=a.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),n);case 4:if((0,d.f)(n),!(i=(0,h.o)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw i;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,l.Z)((0,s.Z)(n.prototype),"canResume",this).call(this)&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}},{key:"getSuspendInfo",value:function(){var e=(0,l.Z)((0,s.Z)(n.prototype),"getSuspendInfo",this).call(this),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}}]),n}(e);return(0,d.e)([(0,d.y)()],t.prototype,"view",void 0),(0,d.e)([(0,d.y)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,d.e)([(0,d.n)("esri.views.3d.layers.LayerView3D")],t)}},81207:function(e,t,n){n.r(t);var r=n(74165),i=n(15861),a=n(37762),o=n(15671),l=n(43144),s=n(11752),u=n(61120),c=n(60136),d=n(29388),p=n(48848),h=n(93314),v=n(90316),y=n(93661),f=n(50690),g=n(50647),m=n(72770),b=n(25431),k=n(3393),w=n(81216),Z=n(57791),_=n(52195);n(37856),n(15751),n(64998),n(74384),n(46817),n(82474),n(40114),n(40558),n(25577),n(62610),n(59984),n(20302),n(53586),n(65094),n(60369),n(92072),n(37944),n(86086),n(21385),n(89794),n(48200),n(71802),n(85253),n(93209),n(25456),n(46337),n(81556),n(93116),n(56162),n(70522),n(82396),n(47855),n(1685),n(630),n(33794),n(45999),n(28390),n(17455),n(1500),n(42467),n(46737),n(52113),n(75255),n(42667),n(61118),n(85113),n(23585),n(95249),n(79557),n(65415),n(25747),n(59389),n(26313),n(37077),n(49228),n(41723),n(64772),n(91681),n(43955),n(76291),n(13239),n(24093),n(6189),n(17332),n(87750),n(20846),n(67430),n(87424),n(10464),n(32043),n(98598),n(19941),n(39994),n(49871),n(63212),n(69717),n(53409),n(35182),n(62466),n(51816),n(68781),n(69641),n(15436),n(35237),n(89181),n(69768),n(35865),n(51219),n(66577),n(95643),n(33795),n(43976),n(6762),n(2959),n(2821),n(71147),n(84186),n(15529),n(70449),n(22603),n(56546),n(39926),n(8141),n(26151),n(90429),n(52559),n(95399),n(98987),n(99795),n(87753),n(29130),n(12953),n(74797),n(72973),n(62710),n(52721),n(61903),n(23444),n(40811),n(51920),n(63393),n(90442),n(64854),n(24623),n(64264),n(6379),n(21015),n(23341),n(41820),n(20086),n(92982),n(61416),n(77880),n(74494),n(77755),n(71645),n(89311),n(67066),n(39769),n(70607),n(85700),n(3719),n(32161),n(37686),n(16641),n(62642),n(19891),n(47748),n(43066),n(29048),n(68136),n(50253),n(27205),n(16263),n(3356),n(70381),n(20675),n(85026),n(33973),n(42233),n(93122),n(70288),n(95414),n(43345),n(75833),n(31698),n(94777),n(4937),n(87440),n(21744),n(18936),n(4397),n(25217),n(43406),n(45184),n(72361),n(22159),n(73911),n(87917),n(46018),n(70863),n(62312),n(24648),n(63999),n(1797),n(5526),n(2473),n(59929),n(2467),n(75257),n(26789),n(64095),n(51732),n(2851),n(70285),n(76419),n(25874),n(44581),n(44513),n(90325),n(53921);var S=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).type="route-3d",e.loadedGraphics=new w.r,e._byObjectID=new Map,e.slicePlaneEnabled=!1,e.fullExtentInLocalViewSpatialReference=null,e}return(0,l.Z)(n,[{key:"initialize",value:function(){var e=this;this._set("processor",new b.A({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.updatingHandles.addOnCollectionChange((function(){return e._routeItems}),(function(t){return e._routeItemsChanged(t)}),f.h),this.addResolvingPromise((0,k.l)(this).then((function(t){return e.fullExtentInLocalViewSpatialReference=t}))),this.handles.add((0,f.f)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.basemapTerrain)||void 0===n?void 0:n.ready}),(function(){return function(){return e.notifyChange("updating")}}),{once:!0}))}},{key:"destroy",value:function(){var e;this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,y.g)(this.processor)),null===(e=this._get("_routeItems"))||void 0===e||e.destroy()}},{key:"_routeItems",get:function(){var e=this;return new v.l({getCollections:function(){return[e.layer.pointBarriers,e.layer.polygonBarriers,e.layer.polylineBarriers,e.layer.stops,e.layer.directionLines,e.layer.directionPoints,(0,y.r)(e.layer.routeInfo)?new h.j([e.layer.routeInfo]):null]}})}},{key:"_routeItemsChanged",value:function(e){var t=this;if(e.removed.length){this.loadedGraphics.removeMany(e.removed.map((function(e){var n=t._byObjectID.get(e);return t._byObjectID.delete(e),n})));var n,r=(0,a.Z)(e.removed);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.handles.remove(i)}}catch(u){r.e(u)}finally{r.f()}}if(e.added.length){this.loadedGraphics.addMany(e.added.map((function(e){var n=e.toGraphic();return t._byObjectID.set(e,n),n})));var o,l=(0,a.Z)(e.added);try{var s=function(){var e=o.value;t.handles.add([(0,f.l)((function(){return e.geometry}),(function(n,r){t._updateGraphic(e,"geometry",n,r)})),(0,f.l)((function(){return e.symbol}),(function(n,r){t._updateGraphic(e,"symbol",n,r)}))],e)};for(l.s();!(o=l.n()).done;)s()}catch(u){l.e(u)}finally{l.f()}}}},{key:"legendEnabled",get:function(){var e;return this.canResume()&&!(null!==(e=this.processor)&&void 0!==e&&e.frustumVisibilitySuspended)}},{key:"getSuspendInfo",value:function(){var e,t,r,i,a=(0,s.Z)((0,u.Z)(n.prototype),"getSuspendInfo",this).call(this);return a.outsideScaleRange=null!==(e=null===(t=this.processor)||void 0===t?void 0:t.scaleVisibilitySuspended)&&void 0!==e&&e,a.outsideOfView=null!==(r=null===(i=this.processor)||void 0===i?void 0:i.frustumVisibilitySuspended)&&void 0!==r&&r,a}},{key:"fetchPopupFeatures",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.r)(n)?n.clientGraphics:null);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getHit",value:function(e){return this.processor.getHit(e)}},{key:"whenGraphicBounds",value:function(e,t){return this.processor.whenGraphicBounds(e,t)}},{key:"computeAttachmentOrigin",value:function(e,t){var n;return null===(n=this.processor)||void 0===n?void 0:n.computeAttachmentOrigin(e,t)}},{key:"getSymbolLayerSize",value:function(e,t){return this.processor.getSymbolLayerSize(e,t)}},{key:"queryGraphics",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new h.j(this.loadedGraphics.toArray()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maskOccludee",value:function(e){return this.processor.maskOccludee(e)}},{key:"highlight",value:function(e){if(function(e){return e instanceof g.b||e instanceof g.h||e instanceof g.O||e instanceof g.g||e instanceof g.f||e instanceof g.a||e instanceof g.D}(e)){var t=this._byObjectID.get(e);return this.processor.highlight(t)}return this.processor.highlight(e)}},{key:"updatePolicy",get:function(){var e;return(null===(e=this.processor)||void 0===e?void 0:e.graphicsCore.effectiveUpdatePolicy)||Z.i.SYNC}},{key:"canResume",value:function(){var e;return(0,s.Z)((0,u.Z)(n.prototype),"canResume",this).call(this)&&!(null!==(e=this.processor)&&void 0!==e&&e.scaleVisibilitySuspended)}},{key:"isUpdating",value:function(){var e,t,n;return!((null===(e=this.processor)||void 0===e||!e.updating)&&null!==(t=this.view)&&void 0!==t&&null!==(n=t.basemapTerrain)&&void 0!==n&&n.ready)}},{key:"performanceInfo",get:function(){var e,t,n;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!==(e=null===(t=this.processor)||void 0===t?void 0:t.elevationAlignment.updating)&&void 0!==e&&e,visibilityFrustum:!(null!==(n=this.processor)&&void 0!==n&&n.frustumVisibilitySuspended)}}},{key:"_updateGraphic",value:function(e,t,n,r){var i,a=this._byObjectID.get(e);a[t]=n,I.graphic=a,I.property=t,I.oldValue=r,I.newValue=n,null===(i=this.processor)||void 0===i||i.graphicsCore.graphicUpdateHandler(I)}}]),n}((0,m.n)(_.u));(0,p.e)([(0,p.y)()],S.prototype,"_routeItems",null),(0,p.e)([(0,p.y)()],S.prototype,"loadedGraphics",void 0),(0,p.e)([(0,p.y)({readOnly:!0})],S.prototype,"legendEnabled",null),(0,p.e)([(0,p.y)()],S.prototype,"layer",void 0),(0,p.e)([(0,p.y)({readOnly:!0})],S.prototype,"processor",void 0),(0,p.e)([(0,p.y)({type:Boolean})],S.prototype,"slicePlaneEnabled",void 0),S=(0,p.e)([(0,p.n)("esri.views.3d.layers.RouteLayerView3D")],S);var I={graphic:null,property:null,oldValue:null,newValue:null},O=S;t.default=O},3393:function(e,t,n){n.d(t,{l:function(){return o}});var r=n(93661),i=n(82474),a=n(5526);function o(e){var t=e.view.spatialReference,n=e.layer.fullExtent,o=(0,r.r)(n)&&n.spatialReference;if((0,r.t)(n)||!o)return Promise.resolve(null);if(o.equals(t))return Promise.resolve(n.clone());var l=(0,i.M)(n,t);return(0,r.r)(l)?Promise.resolve(l):e.view.state.isLocal?(0,a.projectGeometry)(n,t,e.layer.portalItem).then((function(t){return!e.destroyed&&t?t:void 0})).catch((function(){return null})):Promise.resolve(null)}}}]);
//# sourceMappingURL=1207.2778fa94.chunk.js.map