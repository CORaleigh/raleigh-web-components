"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[9514],{49514:function(e,t,r){r.r(t);var n=r(74165),i=r(15861),a=r(15671),o=r(43144),u=r(60136),s=r(29388),c=r(48848),p=(r(93661),r(68146)),h=r(91502),l=r(75618),d=r(52195),f=r(35264),v=(r(6994),r(43066),r(7131),r(71802),r(1797),r(13239),r(27205),r(93122),r(75833),r(18144),r(1206),r(31698),r(92739),r(68136),r(74337),r(26313),r(44954),r(40114),r(64095),r(37856),r(54233),r(4679),r(62312),r(5650),r(35602),r(84234),r(18030),r(33795),r(48200),r(79557),r(26151),r(91681),r(89794),r(60491),r(50690),r(87917),r(29048),r(52559),r(56162),r(46817),r(82474),r(74384),r(40558),r(62466),r(93314),r(15751),r(81556),r(25456),r(3356),r(47855),r(37677),r(65703),r(51732),r(630),r(92072),r(65094),function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,o.Z)(r,[{key:"update",value:function(e){var t=this;this._strategy.update(e).catch((function(e){(0,c.j)(e)||c.a.getLogger(t.declaredClass).error(e)})),this.notifyChange("updating")}},{key:"attach",value:function(){this._bitmapContainer=new p.a,this.container.addChild(this._bitmapContainer),this._strategy=new l.v({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})}},{key:"detach",value:function(){this._strategy.destroy(),this._strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"fetchBitmapData",value:function(e,t,r){return this.layer.fetchImage(e,t,r)}},{key:"doRefresh",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this._strategy.updating||this.updateRequested}}]),r}((0,f.i)((0,h.y)(d.u))));(0,c.e)([(0,c.y)()],v.prototype,"_strategy",void 0),(0,c.e)([(0,c.y)()],v.prototype,"updating",void 0);var y=v=(0,c.e)([(0,c.n)("esri.views.2d.layers.BaseDynamicLayerView2D")],v);t.default=y},75618:function(e,t,r){r.d(t,{v:function(){return E}});var n=r(74165),i=r(37762),a=r(15861),o=r(15671),u=r(43144),s=r(60136),c=r(29388),p=r(29439),h=r(48848),l=(r(93661),r(25456)),d=r(82474),f=r(3356),v=r(37677),y=r(65703),m=r(51732),g=Math.PI/180;function x(e){return e*g}function b(e,t){var r=x(t.rotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),a=(0,p.Z)(t.size,2),o=a[0],u=a[1];return e[0]=Math.round(u*i+o*n),e[1]=Math.round(u*n+o*i),e}function _(e,t,r,n){var i=(0,p.Z)(t,2),a=i[0],o=i[1],u=(0,p.Z)(n,2),s=u[0],c=u[1],h=.5*r;return e[0]=a-h*s,e[1]=o-h*c,e[2]=a+h*s,e[3]=o+h*c,e}var w=(0,l.u)(),Z=[0,0],k=new m.e(0,0,0,0),M=2048,R=2048,S=!1,C=!1,P=!1,z=function(e){(0,s.Z)(r,e);var t=(0,c.Z)(r);function r(e){var u;return(0,o.Z)(this,r),(u=t.call(this,e))._imagePromise=null,u.bitmaps=[],u.hidpi=P,u.imageMaxWidth=M,u.imageMaxHeight=R,u.imageRotationSupported=S,u.imageNormalizationSupported=C,u.update=(0,h.a1)(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,o,s,c,p,l,f,v,y,m,g,x,_,w,k,M,R,S,C,P;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.f)(r),t.stationary&&!u.destroyed){e.next=2;break}return e.abrupt("return");case 2:return a=t.state,o=(0,d.a)(a.spatialReference),s=u.hidpi?t.pixelRatio:1,(c=u.imageNormalizationSupported&&a.worldScreenWidth&&a.worldScreenWidth<a.size[0])?(Z[0]=a.worldScreenWidth,Z[1]=a.size[1]):u.imageRotationSupported?(Z[0]=a.size[0],Z[1]=a.size[1]):b(Z,a),p=Math.floor(Z[0]*s)>u.imageMaxWidth||Math.floor(Z[1]*s)>u.imageMaxHeight,l=o&&(a.extent.xmin<o.valid[0]||a.extent.xmax>o.valid[1]),f=!u.imageNormalizationSupported&&l,v=!p&&!f,y=u.imageRotationSupported?a.rotation:0,m=u.container.children.slice(),v?(g=c?a.paddedViewState.center:a.center,u._imagePromise&&console.error("Image promise was not defined!"),u._imagePromise=u._singleExport(a,Z,g,a.resolution,y,s,r)):(x=Math.min(u.imageMaxWidth,u.imageMaxHeight),f&&(x=Math.min(a.worldScreenWidth,x)),u._imagePromise=u._tiledExport(a,x,s,r)),e.prev=6,e.next=9,u._imagePromise;case 9:if(_=e.sent,(0,h.f)(r),w=[],u._imagePromise=null,!u.destroyed){e.next=14;break}return e.abrupt("return");case 14:u.bitmaps=null!==_&&void 0!==_?_:[],k=(0,i.Z)(m);try{for(R=function(){var e=M.value;_.includes(e)||w.push(e.fadeOut().then((function(){e.remove(),e.destroy()})))},k.s();!(M=k.n()).done;)R()}catch(n){k.e(n)}finally{k.f()}S=(0,i.Z)(_);try{for(S.s();!(C=S.n()).done;)P=C.value,w.push(P.fadeIn())}catch(n){S.e(n)}finally{S.f()}return e.next=21,Promise.all(w);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(6),u._imagePromise=null,(0,h.w)(e.t0);case 26:case"end":return e.stop()}}),e,null,[[6,23]])})));return function(t,r){return e.apply(this,arguments)}}(),5e3),u.updateExports=(0,h.a1)(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=(0,i.Z)(u.container.children),e.prev=2,s=function(){var e=o.value;if(!e.visible||!e.stage)return{v:void 0};r.push(t(e).then((function(){e.invalidateTexture(),e.requestRender()})))},a.s();case 5:if((o=a.n()).done){e.next=11;break}if("object"!==typeof(c=s())){e.next=9;break}return e.abrupt("return",c.v);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:return u._imagePromise=(0,h.E)(r).then((function(){return u._imagePromise=null})),e.next=22,u._imagePromise;case 22:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),u}return(0,u.Z)(r,[{key:"destroy",value:function(){this.bitmaps.forEach((function(e){return e.destroy()})),this.bitmaps=[]}},{key:"updating",get:function(){return!this.destroyed&&null!==this._imagePromise}},{key:"_export",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,i,a,o,u){var s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchSource(t,Math.floor(r*o),Math.floor(i*o),{rotation:a,pixelRatio:o,signal:u});case 2:return s=e.sent,(0,h.f)(u),(c=new v.R(null,{immutable:!0,requestRenderOnSourceChangedEnabled:!0})).x=t.xmin,c.y=t.ymax,c.resolution=t.width/r,c.rotation=a,c.pixelRatio=o,c.opacity=0,this.container.addChild(c),e.next=14,c.setSourceAsync(s,u);case 14:return(0,h.f)(u),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,a,o){return e.apply(this,arguments)}}()},{key:"_singleExport",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,i,a,o,u,s){var c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(w,i,a,r),c=(0,l.f)(w,t.spatialReference),e.next=4,this._export(c,r[0],r[1],o,u,s);case 4:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,a,o,u){return e.apply(this,arguments)}}()},{key:"_tiledExport",value:function(e,t,r,n){var i=this,a=f.j.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),o=new y.h(a),u=o.getTileCoverage(e);if(!u)return null;var s=[];return u.forEach((function(a,u,c,p){k.set(a,u,c,0),o.getTileBounds(w,k);var h=(0,l.f)(w,e.spatialReference);s.push(i._export(h,t,t,0,r,n).then((function(e){return 0!==p&&(k.set(a,u,c,p),o.getTileBounds(w,k),e.x=w[0],e.y=w[3]),e})))})),Promise.all(s)}}]),r}(h.m);(0,h.e)([(0,h.y)()],z.prototype,"_imagePromise",void 0),(0,h.e)([(0,h.y)()],z.prototype,"bitmaps",void 0),(0,h.e)([(0,h.y)()],z.prototype,"container",void 0),(0,h.e)([(0,h.y)()],z.prototype,"fetchSource",void 0),(0,h.e)([(0,h.y)()],z.prototype,"hidpi",void 0),(0,h.e)([(0,h.y)()],z.prototype,"imageMaxWidth",void 0),(0,h.e)([(0,h.y)()],z.prototype,"imageMaxHeight",void 0),(0,h.e)([(0,h.y)()],z.prototype,"imageRotationSupported",void 0),(0,h.e)([(0,h.y)()],z.prototype,"imageNormalizationSupported",void 0),(0,h.e)([(0,h.y)()],z.prototype,"requestUpdate",void 0),(0,h.e)([(0,h.y)()],z.prototype,"updating",null);var E=z=(0,h.e)([(0,h.n)("esri.views.2d.layers.support.ExportStrategy")],z)},35264:function(e,t,r){r.d(t,{i:function(){return c}});var n=r(15671),i=r(43144),a=r(60136),o=r(29388),u=r(48848),s=r(50690),c=(r(93661),function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"initialize",value:function(){var e=this;this.handles.add((0,s.a)((function(){return e.layer}),"refresh",(function(t){e.doRefresh(t.dataChanged).catch((function(t){(0,u.j)(t)||u.a.getLogger(e.declaredClass).error(t)}))})),"RefreshableLayerView")}}]),r}(e);return(0,u.e)([(0,u.y)()],t.prototype,"layer",void 0),t=(0,u.e)([(0,u.n)("esri.layers.mixins.RefreshableLayerView")],t)})}}]);
//# sourceMappingURL=9514.93c17a3a.chunk.js.map