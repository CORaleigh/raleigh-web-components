"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[2431,2857],{62710:function(e,r,t){t.d(r,{i:function(){return s}});var n=t(15671),i=t(43144),o=t(60136),a=t(29388),l=t(48848);t(93661);var s=function(e){var r=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,i.Z)(t,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),t}(e);return(0,l.e)([(0,l.y)({type:String})],r.prototype,"apiKey",null),r=(0,l.e)([(0,l.n)("esri.layers.mixins.APIKeyMixin")],r)}},52721:function(e,r,t){t.d(r,{p:function(){return y}});var n=t(15671),i=t(43144),o=t(60136),a=t(29388),l=t(48848),s=t(93661),u=t(1685),y=function(e){var r=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(){return(0,n.Z)(this,t),r.apply(this,arguments)}return(0,i.Z)(t,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=(0,u.m)(this.url);if((0,s.r)(e)&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",(0,u.S)(e,l.a.getLogger(this.declaredClass)))}}]),t}(e);return(0,l.e)([(0,l.y)()],r.prototype,"title",null),(0,l.e)([(0,l.y)({type:String})],r.prototype,"url",null),r=(0,l.e)([(0,l.n)("esri.layers.mixins.ArcGISService")],r)}},90316:function(e,r,t){t.d(r,{l:function(){return c}});var n=t(37762),i=t(15671),o=t(43144),a=t(60136),l=t(29388),s=t(48848),u=t(93314),y=t(93661),d=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).getCollections=null,n}return(0,o.Z)(t,[{key:"initialize",value:function(){var e=this;this.own((0,s.U)((function(){return e._refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"_refresh",value:function(){var e=(0,y.r)(this.getCollections)?this.getCollections():null;if((0,y.t)(e))this.removeAll();else{var r,t=0,i=(0,n.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;(0,y.r)(o)&&(t=this._processCollection(t,o))}}catch(a){i.e(a)}finally{i.f()}this.splice(t,this.length)}}},{key:"_createNewInstance",value:function(e){return new u.j(e)}},{key:"_processCollection",value:function(e,r){if(!r)return e;var t,i=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},o=(0,n.Z)(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a){if(i(a)){var l=this.indexOf(a,e);l>=0?l!==e&&this.reorder(a,e):this.add(a,e),++e}if(this.getChildrenFunction){var s=this.getChildrenFunction(a);if(Array.isArray(s)){var u,y=(0,n.Z)(s);try{for(y.s();!(u=y.n()).done;){var d=u.value;e=this._processCollection(e,d)}}catch(c){y.e(c)}finally{y.f()}}else e=this._processCollection(e,s)}}}}catch(c){o.e(c)}finally{o.f()}return e}}]),t}(u.j);(0,s.e)([(0,s.y)()],d.prototype,"getCollections",void 0),(0,s.e)([(0,s.y)()],d.prototype,"getChildrenFunction",void 0),(0,s.e)([(0,s.y)()],d.prototype,"itemFilterFunction",void 0);var c=d=(0,s.e)([(0,s.n)("esri.core.CollectionFlattener")],d)},61416:function(e,r,t){t.d(r,{p:function(){return p}});var n=t(43144),i=t(15671),o=t(60136),a=t(29388),l=t(48848),s=t(62610),u=t(40558),y=t(40114),d=(t(93661),new u.s({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"})),c=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).name=null,n.description=null,n.drawingTool=null,n.prototype=null,n.thumbnail=null,n}return(0,n.Z)(t)}((0,s.i)(y.l));(0,l.e)([(0,l.y)({json:{write:!0}})],c.prototype,"name",void 0),(0,l.e)([(0,l.y)({json:{write:!0}})],c.prototype,"description",void 0),(0,l.e)([(0,l.y)({json:{read:d.read,write:d.write}})],c.prototype,"drawingTool",void 0),(0,l.e)([(0,l.y)({json:{write:!0}})],c.prototype,"prototype",void 0),(0,l.e)([(0,l.y)({json:{write:!0}})],c.prototype,"thumbnail",void 0);var p=c=(0,l.e)([(0,l.n)("esri.layers.support.FeatureTemplate")],c)},77880:function(e,r,t){t.d(r,{n:function(){return f}});var n=t(15671),i=t(43144),o=t(60136),a=t(29388),l=t(48848),s=t(62610),u=t(40114),y=(t(93661),t(82474)),d=t(69641),c=t(61416),p=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(e){var i;return(0,n.Z)(this,t),(i=r.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return(0,i.Z)(t,[{key:"readDomains",value:function(e){for(var r={},t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];r[i]=(0,d.t)(e[i])}return r}},{key:"writeDomains",value:function(e,r){for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var o,a=i[n];e[a]&&(t[a]=null===(o=e[a])||void 0===o?void 0:o.toJSON())}r.domains=t}}]),t}((0,s.i)(u.l));(0,l.e)([(0,l.y)({json:{write:!0}})],p.prototype,"id",void 0),(0,l.e)([(0,l.y)({json:{write:!0}})],p.prototype,"name",void 0),(0,l.e)([(0,l.y)({json:{write:!0}})],p.prototype,"domains",void 0),(0,l.e)([(0,y.o)("domains")],p.prototype,"readDomains",null),(0,l.e)([(0,y.r)("domains")],p.prototype,"writeDomains",null),(0,l.e)([(0,l.y)({type:[c.p],json:{write:!0}})],p.prototype,"templates",void 0);var f=p=(0,l.e)([(0,l.n)("esri.layers.support.FeatureType")],p)},69641:function(e,r,t){t.d(r,{n:function(){return D},p:function(){return h},t:function(){return O},u:function(){return I},y:function(){return V}});var n,i=t(15671),o=t(43144),a=t(60136),l=t(29388),s=t(48848),u=t(40558),y=t(40114),d=t(93661),c=t(20302),p=t(82474),f=t(15436),h=n=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).name=null,n.code=null,n}return(0,o.Z)(t,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),t}(y.l);(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,s.e)([(0,s.y)({type:[String,Number],json:{write:!0}})],h.prototype,"code",void 0),h=n=(0,s.e)([(0,s.n)("esri.layers.support.CodedValue")],h);var v=new u.s({inherited:"inherited",codedValue:"coded-value",range:"range"}),m=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).name=null,n.type=null,n}return(0,o.Z)(t)}(y.l);(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,s.e)([(0,c.r)(v)],m.prototype,"type",void 0);var g,b=m=(0,s.e)([(0,s.n)("esri.layers.support.Domain")],m),S=g=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).codedValues=null,n.type="coded-value",n}return(0,o.Z)(t,[{key:"getName",value:function(e){var r=null;if(this.codedValues){var t=String(e);this.codedValues.some((function(e){return String(e.code)===t&&(r=e.name),!!r}))}return r}},{key:"clone",value:function(){return new g({codedValues:(0,d.y)(this.codedValues),name:this.name})}}]),t}(b);(0,s.e)([(0,s.y)({type:[h],json:{write:!0}})],S.prototype,"codedValues",void 0),(0,s.e)([(0,c.r)({codedValue:"coded-value"})],S.prototype,"type",void 0);var w,I=S=g=(0,s.e)([(0,s.n)("esri.layers.support.CodedValueDomain")],S),Z=w=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).type="inherited",n}return(0,o.Z)(t,[{key:"clone",value:function(){return new w}}]),t}(b);(0,s.e)([(0,c.r)({inherited:"inherited"})],Z.prototype,"type",void 0);var E,x=Z=w=(0,s.e)([(0,s.n)("esri.layers.support.InheritedDomain")],Z),T=E=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return(0,o.Z)(t,[{key:"clone",value:function(){return new E({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),t}(b);(0,s.e)([(0,s.y)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,r){return r.range&&r.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,r,t){r[t]=[this.minValue||0,e]}}}})],T.prototype,"maxValue",void 0),(0,s.e)([(0,s.y)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,r){return r.range&&r.range[0]}},write:{target:"range",writer:function(e,r,t){r[t]=[e,this.maxValue||0]}}}})],T.prototype,"minValue",void 0),(0,s.e)([(0,c.r)({range:"range"})],T.prototype,"type",void 0);var k,L=T=E=(0,s.e)([(0,s.n)("esri.layers.support.RangeDomain")],T),D={key:"type",base:b,typeMap:{range:L,"coded-value":I,inherited:x}};function O(e){if(!e||!e.type)return null;switch(e.type){case"range":return L.fromJSON(e);case"codedValue":return I.fromJSON(e);case"inherited":return x.fromJSON(e)}return null}var F=new u.s({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),j=k=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n.visible=!0,n}return(0,o.Z)(t,[{key:"readDescription",value:function(e,r){var t,n,i=r.description,o=null;try{o=i?JSON.parse(i):null}catch(a){}return null!==(t=null===(n=o)||void 0===n?void 0:n.value)&&void 0!==t?t:null}},{key:"readValueType",value:function(e,r){var t=r.description,n=null;try{n=t?JSON.parse(t):null}catch(i){}return n?F.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new k({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),t}(y.l);(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],j.prototype,"alias",void 0),(0,s.e)([(0,s.y)({type:[String,Number],json:{write:{allowNull:!0}}})],j.prototype,"defaultValue",void 0),(0,s.e)([(0,s.y)()],j.prototype,"description",void 0),(0,s.e)([(0,p.o)("description")],j.prototype,"readDescription",null),(0,s.e)([(0,s.y)({types:D,json:{read:{reader:O},write:!0}})],j.prototype,"domain",void 0),(0,s.e)([(0,s.y)({type:Boolean,json:{write:!0}})],j.prototype,"editable",void 0),(0,s.e)([(0,s.y)({type:s.T,json:{write:!0}})],j.prototype,"length",void 0),(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],j.prototype,"name",void 0),(0,s.e)([(0,s.y)({type:Boolean,json:{write:!0}})],j.prototype,"nullable",void 0),(0,s.e)([(0,c.r)(f.i)],j.prototype,"type",void 0),(0,s.e)([(0,s.y)()],j.prototype,"valueType",void 0),(0,s.e)([(0,p.o)("valueType",["description"])],j.prototype,"readValueType",null),(0,s.e)([(0,s.y)({type:Boolean,json:{read:!1}})],j.prototype,"visible",void 0);var V=j=k=(0,s.e)([(0,s.n)("esri.layers.support.Field")],j)},74797:function(e,r,t){t.d(r,{p:function(){return c}});var n,i=t(15671),o=t(43144),a=t(60136),l=t(29388),s=t(48848),u=t(93314),y=t(40114),d=(t(93661),n=function(e){(0,a.Z)(t,e);var r=(0,l.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).floorField=null,n.viewAllMode=!1,n.viewAllLevelIds=new u.j,n}return(0,o.Z)(t,[{key:"clone",value:function(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),t}(y.l));(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),(0,s.e)([(0,s.y)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),(0,s.e)([(0,s.y)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0);var c=d=n=(0,s.e)([(0,s.n)("esri.layers.support.LayerFloorInfo")],d)},45846:function(e,r,t){t.d(r,{E:function(){return ne},y:function(){return z},z:function(){return H}});var n,i=t(4942),o=t(11752),a=t(61120),l=t(29439),s=t(37762),u=t(1413),y=t(74165),d=t(15861),c=t(15671),p=t(43144),f=t(60136),h=t(29388),v=t(48848),m=t(40558),g=t(70288),b=t(93661),S=t(82474),w=t(46817),I=t(12953),Z=t(93314),E=t(90316),x=t(50690),T=t(74384),k=t(25577),L=(t(2821),t(2959)),D=t(37944),O=t(630),F=t(92072),j=t(93116),V=t(99795),_=t(87753),P=t(1685),C=t(77880),M=t(69641),A=t(77755),N=t(63393),R=t(74797),J=t(35237),U=t(67066),G=t(78666),z=function(e){var r=function(e){(0,f.Z)(t,e);var r=(0,h.Z)(t);function t(){var e;return(0,c.Z)(this,t),(e=r.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=void 0,e._allLayersAndTablesPromise=null,e._allLayersAndTablesMap=null,e}return(0,p.Z)(t,[{key:"readCapabilities",value:function(e,r){var t,n,i=r.capabilities&&r.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!i)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var o=this.type,a=i.includes("data"),l=i.includes("query"),s=i.includes("map"),u=!!r.exportTilesAllowed,y=i.includes("tilemap"),d="tile"!==o&&!!r.supportsDynamicLayers,c="tile"!==o&&(!r.tileInfo||d),p="tile"!==o&&(!r.tileInfo||d),f="tile"!==o,h=r.cimVersion&&g.r.parse(r.cimVersion),v=null!==(t=null===h||void 0===h?void 0:h.since(1,4))&&void 0!==t&&t,m=null!==(n=null===h||void 0===h?void 0:h.since(2,0))&&void 0!==n&&n;return{operations:{supportsExportMap:s,supportsExportTiles:u,supportsIdentify:l,supportsQuery:a,supportsTileMap:y},exportMap:s?{supportsArcadeExpressionForLabeling:v,supportsSublayersChanges:f,supportsDynamicLayers:d,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:p,supportsCIMSymbols:m}:null,exportTiles:u?{maxExportTilesCount:+r.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,r){var t=r.currentVersion;return t||(t=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),t}},{key:"fetchSublayerInfo",value:function(){var e=(0,d.Z)((0,y.Z)().mark((function e(r,t){var n;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(t);case 2:return e.abrupt("return",null===(n=this._allLayersAndTablesMap)||void 0===n?void 0:n.get(r));case 3:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=(0,d.Z)((0,y.Z)().mark((function e(r){var t,n=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=(0,m.U)((0,m.j)(this.url).path+"/layers",{responseType:"json",query:(0,u.Z)((0,u.Z)({f:"json"},this.customParameters),{},{token:this.apiKey})}).then((function(e){n._allLayersAndTablesMap=new Map;var r,t=(0,s.Z)(e.data.layers);try{for(t.s();!(r=t.n()).done;){var i=r.value;n._allLayersAndTablesMap.set(i.id,i)}}catch(o){t.e(o)}finally{t.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(t=e.sent,(0,v.f)(r),!("result"in t)){e.next=8;break}return e.abrupt("return",t.result);case 8:throw t.error;case 9:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),t}(e);return(0,v.e)([(0,v.y)({readOnly:!0})],r.prototype,"capabilities",void 0),(0,v.e)([(0,S.o)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],r.prototype,"readCapabilities",null),(0,v.e)([(0,v.y)({json:{read:{source:"copyrightText"}}})],r.prototype,"copyright",void 0),(0,v.e)([(0,v.y)({type:w.w})],r.prototype,"fullExtent",void 0),(0,v.e)([(0,v.y)(I.j)],r.prototype,"id",void 0),(0,v.e)([(0,v.y)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],r.prototype,"legendEnabled",void 0),(0,v.e)([(0,v.y)(I.p)],r.prototype,"popupEnabled",void 0),(0,v.e)([(0,v.y)({type:S.k})],r.prototype,"spatialReference",void 0),(0,v.e)([(0,v.y)({readOnly:!0})],r.prototype,"version",void 0),(0,v.e)([(0,S.o)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],r.prototype,"readVersion",null),r=(0,v.e)([(0,v.n)("esri.layers.mixins.ArcGISMapService")],r)};function B(e){return e&&"esriSMS"===e.type}function q(e,r,t){var n,i=this.originIdOf(r)>=(0,v.z)(t.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!t&&"map-image"===(null===(n=t.layer)||void 0===n?void 0:n.type)&&(t.writeSublayerStructure||i)}}function W(e,r,t){var n;return{enabled:!!t&&"tile"===(null===(n=t.layer)||void 0===n?void 0:n.type)&&this._isOverridden(r)}}function K(e,r,t){return{ignoreOrigin:!0,enabled:t&&t.writeSublayerStructure||!1}}function Y(e,r,t){return{ignoreOrigin:!0,enabled:!!t&&(t.writeSublayerStructure||this.originIdOf(r)>=(0,v.z)(t.origin))}}var Q=0,$=new Set;$.add("layer"),$.add("parent"),$.add("loaded"),$.add("loadStatus"),$.add("loadError"),$.add("loadWarnings");var X=n=function(e){(0,f.Z)(i,e);var r=(0,h.Z)(i);function i(e){var t;return(0,c.Z)(this,i),(t=r.call(this,e)).capabilities=void 0,t.fields=null,t.fullExtent=null,t.geometryType=null,t.globalIdField=null,t.legendEnabled=!0,t.objectIdField=null,t.popupEnabled=!0,t.popupTemplate=null,t.sourceJSON=null,t.title=null,t.typeIdField=null,t.types=null,t}return(0,p.Z)(i,[{key:"load",value:function(){var e=(0,d.Z)((0,y.Z)().mark((function e(r){var t=this;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise((0,d.Z)((0,y.Z)().mark((function e(){var n,i,o,a;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.layer||t.url){e.next=2;break}throw new v.s("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:t});case 2:if(i=null,t.layer&&!(t.originIdOf("url")>v.r.SERVICE)&&"data-layer"!==(null===(n=t.source)||void 0===n?void 0:n.type)){e.next=9;break}return e.next=6,(0,m.U)(t.url,(0,u.Z)({responseType:"json",query:{f:"json"}},r));case 6:i=e.sent.data,e.next=14;break;case 9:return a=t.id,"map-layer"===(null===(o=t.source)||void 0===o?void 0:o.type)&&(a=t.source.mapLayerId),e.next=13,t.layer.fetchSublayerInfo(a,r);case 13:i=e.sent;case 14:i&&(t.sourceJSON=i,t.read({layerDefinition:i},{origin:"service"}));case 15:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,r){var t=(e=(r=r.layerDefinition||r).capabilities||e)?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],n=this.url?(0,P.m)(this.url):null,i=t.includes((0,b.r)(n)&&"MapServer"===n.serverType?"data":"query");return{exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:i}}}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new A.r(this.fields||[])}},{key:"floorInfo",set:function(e){this._setAndNotifyLayer("floorInfo",e)}},{key:"readGlobalIdFieldFromService",value:function(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields){var t,n=(0,s.Z)(r.fields);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("esriFieldTypeGlobalID"===i.type)return i.name}}catch(o){n.e(o)}finally{n.f()}}}},{key:"id",get:function(){var e=this._get("id");return null!==e&&void 0!==e?e:Q++},set:function(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,r,t,n){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},n)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(r){return r.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,r){return r.minScale||r.layerDefinition&&r.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,r){return r.maxScale||r.layerDefinition&&r.layerDefinition.maxScale||0}},{key:"effectiveScaleRange",get:function(){return{minScale:this.minScale,maxScale:this.maxScale}}},{key:"readObjectIdFieldFromService",value:function(e,r){if((r=r.layerDefinition||r).objectIdField)return r.objectIdField;if(r.fields){var t,n=(0,s.Z)(r.fields);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("esriFieldTypeOID"===i.type)return i.name}}catch(o){n.e(o)}finally{n.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,r){var t=r.layerDefinition;return 1-.01*(null!=t.transparency?t.transparency:t.drawingInfo.transparency)}},{key:"writeOpacity",value:function(e,r,t,n){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=(0,v.$)(this.parent.id):r.parentLayerId=-1}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){if(e){var r,t=(0,s.Z)(e.getSymbols());try{for(t.s();!(r=t.n()).done;){var n=r.value;if((0,D.c)(n)){v.a.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}}}catch(i){t.e(i)}finally{t.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new J.c({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return(0,v.b)(Z.j.ofType(n),e)}},{key:"writeSublayers",value:function(e,r,t){this.get("sublayers.length")&&(r[t]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,r){var t=(r=r.layerDefinition||r).typeIdField;if(t&&r.fields){t=t.toLowerCase();var n=r.fields.find((function(e){return e.name.toLowerCase()===t}));n&&(t=n.name)}return t}},{key:"url",get:function(){var e,r,t=null!==(e=null===(r=this.layer)||void 0===r?void 0:r.parsedUrl)&&void 0!==e?e:this._lastParsedUrl,n=this.source;if(!t)return null;if(this._lastParsedUrl=t,"map-layer"===(null===n||void 0===n?void 0:n.type))return"".concat(t.path,"/").concat(n.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(t.path,"/dynamicLayer?").concat((0,m.i)(i))},set:function(e){this._overrideIfSome("url",e)}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,r,t,n){r[t]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=(0,v.x)(this).store,r=new n;return(0,v.x)(r).store=e.clone($),this.commitProperty("url"),r._lastParsedUrl=this._lastParsedUrl,r}},{key:"createPopupTemplate",value:function(e){return(0,U.p)(this,e)}},{key:"createQuery",value:function(){return new J.x({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=(0,d.Z)((0,y.Z)().mark((function e(){var r,n,i,o;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return i=null===(r=this.layer)||void 0===r?void 0:r.parsedUrl,e.next=5,Promise.all([t.e(5113),t.e(4581),t.e(1517),t.e(727),t.e(8987),t.e(1816)]).then(t.bind(t,98987));case 5:return e.t0=e.sent.default,e.t1={url:i.path},o=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?o.layerId=this.source.mapLayerId:o.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(o.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(o.definitionExpression=this.definitionExpression),this.floorInfo&&(o.floorInfo=(0,b.y)(this.floorInfo)),this.originIdOf("labelingInfo")>v.r.SERVICE&&(o.labelingInfo=(0,b.y)(this.labelingInfo)),this.originIdOf("labelsVisible")>v.r.DEFAULTS&&(o.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>v.r.DEFAULTS&&(o.legendEnabled=this.legendEnabled),this.originIdOf("visible")>v.r.DEFAULTS&&(o.visible=this.visible),this.originIdOf("minScale")>v.r.DEFAULTS&&(o.minScale=this.minScale),this.originIdOf("maxScale")>v.r.DEFAULTS&&(o.maxScale=this.maxScale),this.originIdOf("opacity")>v.r.DEFAULTS&&(o.opacity=this.opacity),this.originIdOf("popupTemplate")>v.r.DEFAULTS&&(o.popupTemplate=(0,b.y)(this.popupTemplate)),this.originIdOf("renderer")>v.r.SERVICE&&(o.renderer=(0,b.y)(this.renderer)),"data-layer"===(null===(n=this.source)||void 0===n?void 0:n.type)&&(o.dynamicDataSource=this.source.clone()),this.originIdOf("title")>v.r.DEFAULTS&&(o.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>v.r.DEFAULTS&&(o.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>v.r.DEFAULTS&&(o.customParameters=this.layer.customParameters),o));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFeatureType",value:function(e){var r=this.typeIdField,t=this.types;if(!r||!e)return null;var n=e.attributes?e.attributes[r]:void 0;if(null==n)return null;var i=null;return t.some((function(e){var r=e.id;return null!=r&&(r.toString()===n.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,r){var t=r&&r.feature,n=this.getFeatureType(t);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"queryFeatures",value:function(){var e=(0,d.Z)((0,y.Z)().mark((function e(){var r,n,i,o,a,d,c,p,f,h,m,g,b,S,w,I,Z=arguments;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Z.length>0&&void 0!==Z[0]?Z[0]:this.createQuery(),p=Z.length>1?Z[1]:void 0,e.next=4,this.load();case 4:if(null!==(r=this.capabilities)&&void 0!==r&&null!==(n=r.operations)&&void 0!==n&&n.supportsQuery){e.next=6;break}throw new v.s("Sublayer.queryFeatures","this layer doesn't support queries.");case 6:return e.next=8,Promise.all([Promise.all([t.e(9871),t.e(2049)]).then(t.bind(t,49871)).then((function(e){return e.q})),t.e(8781).then(t.bind(t,68781))]);case 8:return f=e.sent,h=(0,l.Z)(f,2),m=h[0].executeQuery,g=h[1].default,e.next=14,m(this.url,J.x.from(c),null!==(i=null===(o=this.layer)||void 0===o?void 0:o.spatialReference)&&void 0!==i?i:null,(0,u.Z)((0,u.Z)({},p),{},{query:(0,u.Z)((0,u.Z)({},null===(a=this.layer)||void 0===a?void 0:a.customParameters),{},{token:null===(d=this.layer)||void 0===d?void 0:d.apiKey})}));case 14:if(b=e.sent,null!==(S=g.fromJSON(b.data))&&void 0!==S&&S.features){w=(0,s.Z)(S.features);try{for(w.s();!(I=w.n()).done;)I.value.sourceLayer=this}catch(y){w.e(y)}finally{w.f()}}return e.abrupt("return",S);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toExportImageJSON",value:function(e){var r,t=this,n={id:this.id,source:(null===(r=this.source)||void 0===r?void 0:r.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=(0,_.t)(e,this.definitionExpression);(0,b.r)(i)&&(n.definitionExpression=i);var o=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,r){return e[r]=t.originIdOf(r),e}),{}),a=Object.keys(o).some((function(e){return o[e]>v.r.SERVICE}));if(a){var l=n.drawingInfo={};if(o.renderer>v.r.SERVICE&&(l.renderer=this.renderer?this.renderer.toJSON():null),o.labelsVisible>v.r.SERVICE&&(l.showLabels=this.labelsVisible),this.labelsVisible&&o.labelingInfo>v.r.SERVICE){!this.loaded&&this.labelingInfo.some((function(e){return!e.labelPlacement}))&&v.a.getLogger(this.declaredClass).warnOnce("A Sublayer (title: ".concat(this.title,", id: ").concat(this.id,") has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type."),{sublayer:this});var s=this.labelingInfo;(0,b.r)(this.geometryType)&&(s=(0,N.c)(this.labelingInfo,T.a.toJSON(this.geometryType))),l.labelingInfo=s.filter((function(e){return e.labelPlacement})).map((function(e){return e.toJSON({origin:"service",layer:t.layer})})),l.showLabels=!0}o.opacity>v.r.SERVICE&&(l.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(l.renderer)}return n}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,r){if(e){var t,n="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[],i=(0,s.Z)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;B(o.symbol)&&r(o.symbol)}}catch(a){i.e(a)}finally{i.f()}"symbol"in e&&B(e.symbol)&&r(e.symbol),"defaultSymbol"in e&&B(e.defaultSymbol)&&r(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,r){var t,n,i=this.layer,o=this._get(e);switch(e){case"definitionExpression":case"floorInfo":t="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":t="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":t="supportsDynamicLayers",n="supportsModification"}var a=(0,v.x)(this).getDefaultOrigin();if("service"!==a){if(t&&!1===this.get("layer.capabilities.exportMap.".concat(t)))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(t,"'"));if(n&&!1===this.get("capabilities.exportMap.".concat(n)))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(n,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,r),"service"!==a&&o!==r&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,r){var t=this;r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this.handles.add([e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var r=e.item;r.parent=null,r.layer=null})),e.on("before-changes",(function(e){var r=t.get("layer.capabilities.exportMap.supportsSublayersChanges");null==r||r||(v.a.getLogger(t.declaredClass).error(new v.s("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:t,layer:t.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,r){v.a.getLogger(this.declaredClass).error(new v.s("sublayer:locked","Property '".concat(String(e),"' can't be changed on Sublayer from the layer '").concat(this.layer.id,"'"),{reason:r,sublayer:this,layer:this.layer}))}},{key:"_getLayerDomain",value:function(e){var r=this.fieldsIndex.get(e);return r?r.domain:null}}]),i}((0,O.a)((0,V.O)((0,F.s)(j.m))));X.test={isMapImageLayerOverridePolicy:function(e){return e===K||e===q},isTileImageLayerOverridePolicy:function(e){return e===W}},(0,v.e)([(0,v.y)({readOnly:!0})],X.prototype,"capabilities",void 0),(0,v.e)([(0,S.o)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],X.prototype,"readCapabilities",null),(0,v.e)([(0,v.y)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:q}}})],X.prototype,"definitionExpression",null),(0,v.e)([(0,v.y)({type:[M.y],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],X.prototype,"fields",void 0),(0,v.e)([(0,v.y)({readOnly:!0})],X.prototype,"fieldsIndex",null),(0,v.e)([(0,v.y)({type:R.p,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:q},origins:{"web-scene":{read:!1,write:!1}}}})],X.prototype,"floorInfo",null),(0,v.e)([(0,v.y)({type:w.w,json:{read:{source:"layerDefinition.extent"}}})],X.prototype,"fullExtent",void 0),(0,v.e)([(0,v.y)({type:T.a.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:T.a.read}}}}})],X.prototype,"geometryType",void 0),(0,v.e)([(0,v.y)({type:String})],X.prototype,"globalIdField",void 0),(0,v.e)([(0,S.o)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],X.prototype,"readGlobalIdFieldFromService",null),(0,v.e)([(0,v.y)({type:v.T,json:{write:{ignoreOrigin:!0}}})],X.prototype,"id",null),(0,v.e)([(0,v.y)({value:null,type:[N.j],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:K}}})],X.prototype,"labelingInfo",null),(0,v.e)([(0,S.r)("labelingInfo")],X.prototype,"writeLabelingInfo",null),(0,v.e)([(0,v.y)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:K}}})],X.prototype,"labelsVisible",null),(0,v.e)([(0,v.y)({value:null})],X.prototype,"layer",null),(0,v.e)([(0,v.y)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Y}}})],X.prototype,"legendEnabled",void 0),(0,v.e)([(0,v.y)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],X.prototype,"listMode",null),(0,v.e)([(0,v.y)({type:Number,value:0,json:{write:{overridePolicy:K}}})],X.prototype,"minScale",null),(0,v.e)([(0,S.o)("minScale",["minScale","layerDefinition.minScale"])],X.prototype,"readMinScale",null),(0,v.e)([(0,v.y)({type:Number,value:0,json:{write:{overridePolicy:K}}})],X.prototype,"maxScale",null),(0,v.e)([(0,S.o)("maxScale",["maxScale","layerDefinition.maxScale"])],X.prototype,"readMaxScale",null),(0,v.e)([(0,v.y)({readOnly:!0})],X.prototype,"effectiveScaleRange",null),(0,v.e)([(0,v.y)({type:String})],X.prototype,"objectIdField",void 0),(0,v.e)([(0,S.o)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],X.prototype,"readObjectIdFieldFromService",null),(0,v.e)([(0,v.y)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:K}}})],X.prototype,"opacity",null),(0,v.e)([(0,S.o)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],X.prototype,"readOpacity",null),(0,v.e)([(0,S.r)("opacity")],X.prototype,"writeOpacity",null),(0,v.e)([(0,v.y)({json:{type:v.T,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:K}}})],X.prototype,"parent",void 0),(0,v.e)([(0,S.r)("parent")],X.prototype,"writeParent",null),(0,v.e)([(0,v.y)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,r){return!r.disablePopup}},write:{target:"disablePopup",overridePolicy:Y,writer:function(e,r,t){r[t]=!e}}}})],X.prototype,"popupEnabled",void 0),(0,v.e)([(0,v.y)({type:k.k,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Y}}})],X.prototype,"popupTemplate",void 0),(0,v.e)([(0,v.y)({readOnly:!0})],X.prototype,"defaultPopupTemplate",null),(0,v.e)([(0,v.y)({types:L.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:K},origins:{"web-scene":{types:L.n,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:K}}}}})],X.prototype,"renderer",null),(0,v.e)([(0,v.y)({types:{key:"type",base:null,typeMap:{"data-layer":J.K,"map-layer":J.c}},cast:function(e){if(e){if("mapLayerId"in e)return(0,v.Q)(J.c,e);if("dataSource"in e)return(0,v.Q)(J.K,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:K}}})],X.prototype,"source",null),(0,v.e)([(0,v.y)()],X.prototype,"sourceJSON",void 0),(0,v.e)([(0,v.y)({value:null,json:{type:[v.T],write:{target:"subLayerIds",allowNull:!0,overridePolicy:K}}})],X.prototype,"sublayers",null),(0,v.e)([(0,v.c)("sublayers")],X.prototype,"castSublayers",null),(0,v.e)([(0,S.r)("sublayers")],X.prototype,"writeSublayers",null),(0,v.e)([(0,v.y)({type:String,json:{name:"name",write:{overridePolicy:Y}}})],X.prototype,"title",void 0),(0,v.e)([(0,v.y)({type:String})],X.prototype,"typeIdField",void 0),(0,v.e)([(0,S.o)("typeIdField",["layerDefinition.typeIdField"])],X.prototype,"readTypeIdField",null),(0,v.e)([(0,v.y)({type:[C.n],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],X.prototype,"types",void 0),(0,v.e)([(0,v.y)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:W}}})],X.prototype,"url",null),(0,v.e)([(0,v.y)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:K}}})],X.prototype,"visible",null),(0,v.e)([(0,S.r)("visible")],X.prototype,"writeVisible",null);var H=X=n=(0,v.e)([(0,v.n)("esri.layers.support.Sublayer")],X),ee=v.a.getLogger("esri.layers.TileLayer");var re=Z.j.ofType(H);function te(e,r){e&&e.forEach((function(e){r(e),e.sublayers&&e.sublayers.length&&te(e.sublayers,r)}))}var ne=function(e){var r=function(e){(0,f.Z)(t,e);var r=(0,h.Z)(t);function t(){var e,n;(0,c.Z)(this,t);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(n=r.call.apply(r,[this].concat(a))).allSublayers=new E.l({getCollections:function(){return[n.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),n.sublayersSourceJSON=(e={},(0,i.Z)(e,v.r.SERVICE,{}),(0,i.Z)(e,v.r.PORTAL_ITEM,{}),(0,i.Z)(e,v.r.WEB_SCENE,{}),(0,i.Z)(e,v.r.WEB_MAP,{}),e),n.addHandles((0,x.l)((function(){return n.sublayers}),(function(e,r){return n._handleSublayersChange(e,r)}),x.U)),n}return(0,p.Z)(t,[{key:"readSublayers",value:function(e,r){if(r&&e){var t=this.sublayersSourceJSON,n=(0,v.z)(r.origin);if(!(n<v.r.SERVICE)&&(t[n]={context:r,visibleLayers:e.visibleLayers||t[n].visibleLayers,layers:e.layers||t[n].layers},!(n>v.r.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),o=i.sublayers,a=i.origin,l=(0,v.x)(this);l.setDefaultOrigin(a),this._set("sublayers",new re(o)),l.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(r){return r.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var r,t=(0,v.z)("web-document"===e?"web-map":e),n=v.r.SERVICE,i=this.sublayersSourceJSON[v.r.SERVICE].layers,o=this.sublayersSourceJSON[v.r.SERVICE].context,a=null,l=[v.r.PORTAL_ITEM,v.r.WEB_SCENE,v.r.WEB_MAP].filter((function(e){return e<=t})),u=(0,s.Z)(l);try{for(u.s();!(r=u.n()).done;){var y=r.value,d=this.sublayersSourceJSON[y];(0,G.t)(d.layers)&&(n=y,i=d.layers,o=d.context,d.visibleLayers&&(a={visibleLayers:d.visibleLayers,context:d.context}))}}catch(F){u.e(F)}finally{u.f()}var c,p=[v.r.PORTAL_ITEM,v.r.WEB_SCENE,v.r.WEB_MAP].filter((function(e){return e>n&&e<=t})),f=null,h=(0,s.Z)(p);try{for(h.s();!(c=h.n()).done;){var m=c.value,g=this.sublayersSourceJSON[m],b=g.layers,S=g.visibleLayers,w=g.context;b&&(f={layers:b,context:w}),S&&(a={visibleLayers:S,context:w})}}catch(F){h.e(F)}finally{h.f()}var I=function(e,r){var t=[],n={};return e?(e.forEach((function(e){var i=new H;if(i.read(e,r),n[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var o=n[e.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(i)}else t.unshift(i)})),t):t}(i,o),Z=new Map,E=new Set;if(f){var x,T=(0,s.Z)(f.layers);try{for(T.s();!(x=T.n()).done;){var k=x.value;Z.set(k.id,k)}}catch(F){T.e(F)}finally{T.f()}}if(a){var L,D=(0,s.Z)(a.visibleLayers);try{for(D.s();!(L=D.n()).done;){var O=L.value;E.add(O)}}catch(F){D.e(F)}finally{D.f()}}return te(I,(function(e){f&&e.read(Z.get(e.id),f.context),a&&e.read({defaultVisibility:E.has(e.id)},a.context)})),{origin:(0,v.u)(n),sublayers:new re({items:I})}}},{key:"read",value:function(e,r){(0,o.Z)((0,a.Z)(t.prototype),"read",this).call(this,e,r),this.readSublayers(e,r)}},{key:"_handleSublayersChange",value:function(e,r){var t=this;r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=t,e.layer=t})),this.handles.add([e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t})),e.on("after-remove",(function(e){var r=e.item;r.parent=null,r.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){ee.error(new v.s("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:t})),e.preventDefault()})),"sublayers-owner"))}}]),t}(e);return(0,v.e)([(0,v.y)({readOnly:!0})],r.prototype,"allSublayers",void 0),(0,v.e)([(0,v.y)({readOnly:!0,type:Z.j.ofType(H)})],r.prototype,"serviceSublayers",void 0),(0,v.e)([(0,v.y)({value:null,type:re,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],r.prototype,"sublayers",void 0),(0,v.e)([(0,v.y)({readOnly:!0})],r.prototype,"sublayersSourceJSON",void 0),r=(0,v.e)([(0,v.n)("esri.layers.mixins.SublayersOwner")],r),r}},70288:function(e,r,t){t.d(r,{r:function(){return l}});var n=t(29439),i=t(15671),o=t(43144),a=t(48848),l=function(){function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(0,i.Z)(this,e),this.major=r,this.minor=t,this._context=n}return(0,o.Z)(e,[{key:"lessThan",value:function(e,r){return this.major<e||e===this.major&&this.minor<r}},{key:"since",value:function(e,r){return!this.lessThan(e,r)}},{key:"validate",value:function(e){if(this.major!==e.major){var r=this._context&&this._context+":",t=this._context&&this._context+" ";throw new a.s(r+"unsupported-version","Required major ".concat(t,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=r.split("."),o=(0,n.Z)(i,2),l=o[0],s=o[1],u=/^\s*\d+\s*$/;if(!l||!l.match||!l.match(u))throw new a.s((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:r});if(!s||!s.match||!s.match(u))throw new a.s((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:r});var y=parseInt(l,10),d=parseInt(s,10);return new e(y,d,t)}}]),e}()},64854:function(e,r,t){t.d(r,{S:function(){return l},e:function(){return n},i:function(){return i},l:function(){return o},o:function(){return a},r:function(){return u},s:function(){return y},t:function(){return s},y:function(){return d}});var n=[252,146,31,255],i=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},y={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},20302:function(e,r,t){t.d(r,{r:function(){return o}});var n=t(40558),i=t(48848);function o(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e instanceof n.s?e:new n.s(e,t),a={type:null===(r=null===t||void 0===t?void 0:t.ignoreUnknown)||void 0===r||r?o.apiValues:String,json:{type:o.jsonValues,read:!(null!==t&&void 0!==t&&t.readOnly)&&{reader:o.read},write:{writer:o.write}}};return void 0!==(null===t||void 0===t?void 0:t.readOnly)&&(a.readOnly=!!t.readOnly),void 0!==(null===t||void 0===t?void 0:t.default)&&(a.json.default=t.default),void 0!==(null===t||void 0===t?void 0:t.name)&&(a.json.name=t.name),(0,i.y)(a)}},15436:function(e,r,t){t.d(r,{i:function(){return n}});var n=new(t(40558).s)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},56162:function(e,r,t){t.d(r,{c:function(){return p},d:function(){return h},f:function(){return y},l:function(){return s},s:function(){return u},u:function(){return l},v:function(){return c},y:function(){return d}});var n=t(93661),i=t(46817),o=t(82474),a=t(74384);function l(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function s(e){return void 0!==e.points}function u(e){return void 0!==e.x&&void 0!==e.y}function y(e){return void 0!==e.paths}function d(e){return void 0!==e.rings}function c(e){return(0,n.t)(e)?null:e instanceof o.p?e:u(e)?o.w.fromJSON(e):y(e)?a.m.fromJSON(e):d(e)?a.v.fromJSON(e):s(e)?a.u.fromJSON(e):l(e)?i.w.fromJSON(e):null}function p(e){return e?u(e)?"esriGeometryPoint":y(e)?"esriGeometryPolyline":d(e)?"esriGeometryPolygon":l(e)?"esriGeometryEnvelope":s(e)?"esriGeometryMultipoint":null:null}var f={esriGeometryPoint:o.w,esriGeometryPolyline:a.m,esriGeometryPolygon:a.v,esriGeometryEnvelope:i.w,esriGeometryMultipoint:a.u};function h(e){return e&&f[e]||null}},53586:function(e,r,t){t.d(r,{L:function(){return b},S:function(){return g},m:function(){return E},u:function(){return Z}});var n=t(1413),i=t(40558),o=t(65094),a=t(93661),l={year:"numeric",month:"numeric",day:"numeric"},s={year:"numeric",month:"long",day:"numeric"},u={year:"numeric",month:"short",day:"numeric"},y={year:"numeric",month:"long",weekday:"long",day:"numeric"},d={hour:"numeric",minute:"numeric"},c=(0,n.Z)((0,n.Z)({},d),{},{second:"numeric"}),p={"short-date":l,"short-date-short-time":(0,n.Z)((0,n.Z)({},l),d),"short-date-short-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},l),d),{},{hour12:!1}),"short-date-long-time":(0,n.Z)((0,n.Z)({},l),c),"short-date-long-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},l),c),{},{hour12:!1}),"short-date-le":l,"short-date-le-short-time":(0,n.Z)((0,n.Z)({},l),d),"short-date-le-short-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},l),d),{},{hour12:!1}),"short-date-le-long-time":(0,n.Z)((0,n.Z)({},l),c),"short-date-le-long-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},l),c),{},{hour12:!1}),"long-month-day-year":s,"long-month-day-year-short-time":(0,n.Z)((0,n.Z)({},s),d),"long-month-day-year-short-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},s),d),{},{hour12:!1}),"long-month-day-year-long-time":(0,n.Z)((0,n.Z)({},s),c),"long-month-day-year-long-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},s),c),{},{hour12:!1}),"day-short-month-year":u,"day-short-month-year-short-time":(0,n.Z)((0,n.Z)({},u),d),"day-short-month-year-short-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},u),d),{},{hour12:!1}),"day-short-month-year-long-time":(0,n.Z)((0,n.Z)({},u),c),"day-short-month-year-long-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},u),c),{},{hour12:!1}),"long-date":y,"long-date-short-time":(0,n.Z)((0,n.Z)({},y),d),"long-date-short-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},y),d),{},{hour12:!1}),"long-date-long-time":(0,n.Z)((0,n.Z)({},y),c),"long-date-long-time-24":(0,n.Z)((0,n.Z)((0,n.Z)({},y),c),{},{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":d,"long-time":c},f=(0,i.o)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});f.toJSON.bind(f),f.fromJSON.bind(f);var h={ar:"ar-u-nu-latn-ca-gregory"},v=new WeakMap,m=p["short-date-short-time"];function g(e){return e?p[e]:null}function b(e,r){return function(e){var r=e||m,t=v.get(r);if(!t){var n=(0,o.l)(),i=h[(0,o.l)()]||n;t=new Intl.DateTimeFormat(i,r),v.set(r,t)}return t}(r).format(e)}(0,o.g)((function(){v=new WeakMap,m=p["short-date-short-time"]}));var S={ar:"ar-u-nu-latn"},w=new WeakMap,I={};function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return null!=e.digitSeparator&&(r.useGrouping=e.digitSeparator),null!=e.places&&(r.minimumFractionDigits=r.maximumFractionDigits=e.places),r}function E(e,r){return-0===e&&(e=0),function(e){var r=e||I;if(!w.has(r)){var t=(0,o.l)(),n=S[(0,o.l)()]||t;w.set(r,new Intl.NumberFormat(n,e))}return(0,a.x)(w.get(r))}(r).format(e)}(0,o.g)((function(){w=new WeakMap,I={}}))},84186:function(e,r,t){var n,i;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function l(e){return e.valueExpression?n.Expression:e.field&&"string"==typeof e.field?n.Field:n.Unknown}function s(e,r){var t=r||l(e),o=e.valueUnit||"unknown";return t===n.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}t.d(r,{a:function(){return s},e:function(){return o},i:function(){return i},l:function(){return a},n:function(){return n},t:function(){return l}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(n||(n={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(i||(i={}))},87753:function(e,r,t){t.d(r,{r:function(){return a},t:function(){return s}});var n=t(74165),i=t(15861),o=t(93661);function a(e,r){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((0,n.Z)().mark((function e(r,i){var o,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(2470).then(t.bind(t,62470));case 2:return o=e.sent,a=o.WhereClause,e.abrupt("return",a.create(r,i));case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(e,r){return(0,o.r)(e)?(0,o.r)(r)?"(".concat(e,") AND (").concat(r,")"):e:r}},78666:function(e,r,t){t.d(r,{i:function(){return l},n:function(){return a},t:function(){return u}});var n=t(37762),i=t(93661),o=t(48848);function a(e,r,t){return r.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>t||e.originIdOf("maxScale")>t||e.originIdOf("renderer")>t||e.originIdOf("labelingInfo")>t||e.originIdOf("opacity")>t||e.originIdOf("labelsVisible")>t||e.originIdOf("source")>t}))||!s(e,r))}function l(e,r,t){return!!e.some((function(e){var r=e.source;return!(!r||"map-layer"===r.type&&r.mapLayerId===e.id&&((0,i.t)(r.gdbVersion)||r.gdbVersion===t))||e.originIdOf("renderer")>o.r.SERVICE||e.originIdOf("labelingInfo")>o.r.SERVICE||e.originIdOf("opacity")>o.r.SERVICE||e.originIdOf("labelsVisible")>o.r.SERVICE}))||!s(e,r)}function s(e,r){if(!e||!e.length||(0,i.t)(r))return!0;var t=r.slice().reverse().flatten((function(e){var r=e.sublayers;return r&&r.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>t.length)return!1;var o,a=0,l=t.length,s=(0,n.Z)(e);try{for(s.s();!(o=s.n()).done;){for(var u=o.value.id;a<l&&t[a]!==u;)a++;if(a>=l)return!1}}catch(y){s.e(y)}finally{s.f()}return!0}function u(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}}}]);
//# sourceMappingURL=2431.396d74ff.chunk.js.map