{"version":3,"file":"static/js/9754.8b3cea87.chunk.js","mappings":"uRAsLMA,G,45CAAEC,EAAAA,EAAAA,UAAY,gDAAmDC,EAAC,0IAAwB,SAAOC,GAAGC,KAAKC,SAASC,OAAOH,GAAGI,OAAO,SAAAJ,IAAIK,EAAAA,EAAAA,GAAEL,IAAIH,EAAES,MAAMN,EAAI,IAAGC,KAAKM,aAAa,WAAa,GAAzH,oBAAyH,WAASN,KAAKO,iBAAiB,IAAIR,EAAAA,EAAEC,KAAKQ,UAAUC,SAAST,KAAKO,kBAAkBP,KAAKC,SAAS,IAAIS,EAAAA,EAAE,CAACF,UAAUR,KAAKO,iBAAiBI,YAAYX,KAAKY,gBAAgBC,KAAKb,MAAMc,cAAcd,KAAKc,cAAcD,KAAKb,OAAS,GAA7V,oBAA6V,WAASA,KAAKC,SAASc,UAAUf,KAAKC,SAAS,KAAKD,KAAKQ,UAAUQ,YAAYhB,KAAKO,kBAAkBP,KAAKO,iBAAiBU,mBAAqB,GAA9e,uBAA8e,WAAa,GAA3f,wBAA2f,WAAc,GAAzgB,qBAAygB,WAAUjB,KAAKc,eAAiB,GAAziB,6BAAyiB,SAAgBf,EAAEmB,EAAEC,GAAG,OAAOnB,KAAKoB,MAAMC,WAAWtB,EAAEmB,EAAEC,EAAG,GAApmB,gEAAomB,mFAAkBnB,KAAKc,gBAAvB,gDAApmB,8EAA4oB,WAAa,OAAOd,KAAKC,SAASqB,UAAUtB,KAAKuB,eAAgB,KAA7sB,IAAeC,EAAAA,EAAAA,IAAEC,EAAAA,EAAAA,GAAEC,EAAAA,MAA4rBR,EAAAA,EAAAA,GAAE,EAACS,EAAAA,EAAAA,MAAO7B,EAAE8B,UAAU,gBAAW,IAAQV,EAAAA,EAAAA,GAAE,EAACS,EAAAA,EAAAA,MAAO7B,EAAE8B,UAAU,gBAAW,GAAkE,IAAMC,EAAhE/B,GAAEoB,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,GAAE,gDAAgDhC,GAEh6B,W,4OC3KMC,EAAEgC,KAAKC,GAAG,IAAI,SAASF,EAAEA,GAAG,OAAOA,EAAE/B,CAAE,UAASoB,EAAEpB,EAAEkC,GAAS,IAAAd,EAAEW,EAAEG,EAAEC,UAAUR,EAAEK,KAAKI,IAAIJ,KAAKK,IAAIjB,IAAIkB,EAAEN,KAAKI,IAAIJ,KAAKO,IAAInB,IAA5D,UAAsEc,EAAEM,KAAxE,GAAiE1C,EAAjE,KAAmEC,EAAnE,KAA6E,OAAOC,EAAE,GAAGgC,KAAKS,MAAM1C,EAAEuC,EAAExC,EAAE6B,GAAG3B,EAAE,GAAGgC,KAAKS,MAAM1C,EAAE4B,EAAE7B,EAAEwC,GAAGtC,CAAE,UAAS0C,EAAI1C,EAAE+B,EAAEG,EAAEd,GAAG,cAAWW,EAAX,GAAMJ,EAAN,KAAQW,EAAR,eAAmBlB,EAAnB,GAActB,EAAd,KAAgBC,EAAhB,KAAqB0B,EAAE,GAAGS,EAAE,OAAOlC,EAAE,GAAG2B,EAAEF,EAAE3B,EAAEE,EAAE,GAAGsC,EAAEb,EAAE1B,EAAEC,EAAE,GAAG2B,EAAEF,EAAE3B,EAAEE,EAAE,GAAGsC,EAAEb,EAAE1B,EAAEC,CAAE,CAMlT,IAAM2B,GAAEgB,EAAAA,EAAAA,KAAMtC,EAAE,CAAC,EAAE,GAAGqB,EAAE,IAAIP,EAAAA,EAAE,EAAE,EAAE,EAAE,GAAGyB,EAAoE,KAApEA,EAAwF,KAAxFA,GAAoH,EAApHA,GAAmJ,EAAnJA,GAA4J,EAAQC,EAAC,0CAAmB,WAAY7C,GAAE,6BAAC,cAAMA,IAAQ8C,cAAc,KAAK,EAAKC,QAAQ,GAAG,EAAKC,MAAMJ,EAAQ,EAAKK,cAAcL,EAAgB,EAAKM,eAAeN,EAAiB,EAAKO,uBAAuBP,EAAyB,EAAKQ,4BAA4BR,EAA8B,EAAKzC,QAAOkD,EAAAA,EAAAA,GAAG,yCAAE,WAAMrD,EAAEmB,GAAR,YAAAmB,EAAA,qFAAiBtC,EAAEsD,aAAY,EAAKC,UAApC,yCAAqD,MAArD,cAAgE9B,EAAEzB,EAAEwD,MAAMtB,GAAEuB,EAAAA,EAAAA,GAAEhC,EAAEiC,kBAAkBC,EAAI,EAAKX,MAAMhD,EAAE4D,WAAW,GAAE9D,EAAE,EAAKsD,6BAA6B3B,EAAEoC,kBAAkBpC,EAAEoC,iBAAiBpC,EAAEe,KAAK,KAAMnC,EAAE,GAAGoB,EAAEoC,iBAAiBxD,EAAE,GAAGoB,EAAEe,KAAK,IAAI,EAAKW,wBAAwB9C,EAAE,GAAGoB,EAAEe,KAAK,GAAGnC,EAAE,GAAGoB,EAAEe,KAAK,IAAIpB,EAAEf,EAAEoB,GAASa,EAAEN,KAAK8B,MAAMzD,EAAE,GAAGsD,GAAK,EAAKV,eAAejB,KAAK8B,MAAMzD,EAAE,GAAGsD,GAAK,EAAKT,eAAenB,EAAEG,IAAIT,EAAEsC,OAAOC,KAAK9B,EAAE+B,MAAM,IAAIxC,EAAEsC,OAAOG,KAAKhC,EAAE+B,MAAM,IAAIE,GAAG,EAAKf,6BAA6BrB,EAAED,GAAGQ,IAAI6B,EAAEtE,EAAE,EAAKsD,uBAAuB1B,EAAEU,SAAS,EAAKL,GAAS9B,EAAEF,EAAE2B,EAAE2C,gBAAgBC,OAAO5C,EAAE4C,OAAO,EAAKvB,cAAc,EAAKwB,cAAc7C,EAAEpB,EAAEL,EAAEyB,EAAE8C,WAAW1E,EAAE8D,EAAIxC,KAAcnB,EAAEgC,KAAKwC,IAAI,EAAKvB,cAAc,EAAKC,gBAAgBiB,IAAInE,EAAEgC,KAAKwC,IAAI/C,EAAEoC,iBAAiB7D,IAAI,EAAK8C,cAAc,EAAK2B,aAAahD,EAAEzB,EAAE2D,EAAIxC,IAAvzB,kBAAk0B,EAAK2B,cAAc4B,KAAnB,yCAAyB,WAAM1E,GAAN,sFAAU,GAAG,EAAK8C,cAAc,MAAM,EAAKS,UAAU,CAAC,EAAKR,QAAL,OAAa/C,QAAb,IAAaA,EAAAA,EAAG,GAAjB,UAAmC,EAAKS,UAAUkE,UAAlD,IAAoB,IAApB,iBAA8BxD,EAA9B,QAA2DnB,EAAE4E,SAASzD,IAAIA,EAAE0D,UAAUH,MAAM,WAAKvD,EAAE2D,QAAU,GAA7G,EAAoB,uBAAuC,GAA3D,yCAA+H9E,GAA/H,IAAgH,2BAAUmB,EAAO,UAAKV,UAAUC,SAASS,GAAGA,EAAE4D,QAA9J,+BAAwK,CAA7N,2CAAzB,kCAAA9E,KAAA,gBAA0PG,OAAO,SAAAJ,GAAI,MAAM,EAAK8C,cAAc,KAAK9C,CAAE,KAAvmC,2CAAF,wDAA8mC,KAA93C,CAAo4C,CAAr6C,sCAAq6C,WAAUC,KAAK8C,QAAQ,EAAI,GAAh8C,oBAAg8C,WAAe,OAAQ9C,KAAKsD,WAAW,OAAOtD,KAAK6C,aAAc,GAAjgD,2BAAigD,SAAc9C,GAAE,gBAAgBC,KAAKQ,UAAUkE,UAA/B,IAAC,2BAAuC,KAA7BxD,EAA6B,QAAC,IAAIA,EAAE6D,UAAU7D,EAAE8D,MAAM,OAAOjF,EAAEmB,GAAGA,EAAE+D,oBAAoB/D,EAAEgE,eAAiB,CAAtH,+BAAuH,GAAxoD,8DAAwoD,WAAcnF,EAAEmB,EAAEM,EAAES,EAAEd,EAAEtB,GAAxB,IAAAwC,EAAA,wFAAyCrC,KAAKW,YAAYZ,EAAEgC,KAAK8B,MAAM3C,EAAEC,GAAGY,KAAK8B,MAAMrC,EAAEL,GAAG,CAACe,SAASD,EAAE0B,WAAWxC,EAAEgE,OAAOtF,IAA5H,cAAiCwC,EAAjC,OAAgI+C,EAAE,IAAIC,EAAAA,EAAEhD,EAAE,YAA1I,mBAA6J+C,EAAEzC,EAAE5C,EAAEgE,KAAKqB,EAAExC,EAAE7C,EAAEuF,KAAKF,EAAEd,WAAWvE,EAAEwF,MAAMrE,EAAEkE,EAAElD,SAASD,EAAEmD,EAAEzB,WAAWxC,EAAEiE,IAAtO,gDAAxoD,qIAAg3D,WAAoBrF,EAAEmB,EAAEM,EAAES,EAAEd,EAAEkB,EAAE+C,GAAhC,mFAAmC3C,EAAIf,EAAEF,EAAES,EAAEf,GAASY,EAAE,IAAI0D,EAAAA,EAAE9D,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG3B,EAAE0D,kBAApF,SAAoHzD,KAAKyF,QAAQ3D,EAAEZ,EAAE,GAAGA,EAAE,GAAGC,EAAEkB,EAAE+C,GAAjJ,oGAAh3D,6FAAqgE,SAAarF,EAAEmB,EAAEM,EAAES,GAAE,WAAOd,EAAEuE,EAAAA,EAAAA,OAAW,CAACnD,KAAKrB,EAAEuC,iBAAiB1D,EAAE0D,iBAAiBkC,OAAO,CAAC5F,EAAE6F,SAASvD,EAAE,IAAIzC,EAAAA,EAAEuB,GAAGiE,EAAE/C,EAAEwD,gBAAgB9F,GAAG,IAAIqF,EAAE,OAAO,KAAK,IAAMU,EAAE,GAAG,OAAOV,EAAEW,SAAS,SAAC5E,EAAEiE,EAAEtD,EAAEoC,GAAKzC,EAAEuE,IAAI7E,EAAEiE,EAAEtD,EAAEoC,GAAG7B,EAAE4D,cAAcvE,EAAED,GAAG,IAAMI,EAAE,IAAI2D,EAAAA,EAAE9D,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG3B,EAAE0D,kBAAkBqC,EAAEI,KAAK,EAAKT,QAAQ5D,EAAEX,EAAEA,EAAE,EAAEM,EAAES,GAAK,IAAGkE,QAAQC,IAAIN,EAAG,KAAz1E,GAAeO,EAAAA,IAA40EC,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,qBAAgB,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,eAAU,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,iBAAY,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,mBAAc,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,aAAQ,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,qBAAgB,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,sBAAiB,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,8BAAyB,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,mCAA8B,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,qBAAgB,IAAQ0E,EAAAA,EAAAA,GAAI,EAACzE,EAAAA,EAAAA,MAAKe,EAAEhB,UAAU,WAAW,MAAoE,IAAMlB,EAApEkC,GAAE0D,EAAAA,EAAAA,GAAI,EAACC,EAAAA,EAAAA,GAAI,gDAAgD3D,E,6HCZnlGpB,EAAE,SAAAA,GAAI,IAAI1B,EAAC,8IAAiB,WAAY,WAACE,KAAKwG,QAAQC,KAAIpE,EAAAA,EAAAA,IAAG,kBAAI,EAAKjB,KAAT,GAAgB,WAAW,SAAAD,GAAI,EAAKuF,UAAUvF,EAAEwF,aAAaxG,OAAO,SAAAgB,IAAIf,EAAAA,EAAAA,GAAEe,IAAItB,EAAAA,EAAAA,UAAY,EAAK+G,eAAevG,MAAMc,EAAI,GAAI,IAAG,uBAAyB,KAA1M,GAAeK,GAA6L,OAAON,EAAAA,EAAAA,GAAE,EAACW,EAAAA,EAAAA,MAAK/B,EAAE8B,UAAU,aAAQ,GAAQ9B,GAAEoB,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,GAAE,4CAA4ChC,EAAK,C","sources":["../node_modules/raleigh-stencil-components/dist/esm/BaseDynamicLayerView2D-57730378.js","../node_modules/raleigh-stencil-components/dist/esm/ExportStrategy-fdfc0a90.js","../node_modules/raleigh-stencil-components/dist/esm/RefreshableLayerView-2bdb0853.js"],"sourcesContent":["import { s, I as g, e, d as d$1, n } from './cast-5c4dc32a.js';\nimport { t } from './BitmapContainer-3c7eb02d.js';\nimport { f } from './LayerView2D-6801cf1e.js';\nimport { S } from './ExportStrategy-fdfc0a90.js';\nimport { u } from './LayerView-05b605fb.js';\nimport { i } from './RefreshableLayerView-2bdb0853.js';\nimport './brushes-7edb0f53.js';\nimport './DefaultUI-e731035a.js';\nimport './Handles-916df655.js';\nimport './Collection-9c69dda8.js';\nimport './reactiveUtils-b4e19c57.js';\nimport './jsxFactory-1db8a89a.js';\nimport './intl-3347e9da.js';\nimport './number-0c1d1e16.js';\nimport './request-0b2553bd.js';\nimport './Promise-c8dd3e85.js';\nimport './messages-cec0ed10.js';\nimport './assets-7d20656b.js';\nimport './uuid-ac104993.js';\nimport './index-b63e1abd.js';\nimport './HandleOwner-e9955714.js';\nimport './Feature-11e215c8.js';\nimport './aliasOf-cd28033d.js';\nimport './byteSizeEstimations-5d50d6ff.js';\nimport './Cyclical-355b3d8d.js';\nimport './mathUtils-a0f2962e.js';\nimport './unitUtils-d29b64c6.js';\nimport './Point-609b2fcb.js';\nimport './JSONSupport-e9486b0b.js';\nimport './Graphic-dccff3a2.js';\nimport './geometry-7b96f9c2.js';\nimport './Extent-85e2b0df.js';\nimport './Polyline-6901b5b4.js';\nimport './PopupTemplate-e692171e.js';\nimport './fieldUtils-d71929fa.js';\nimport './enumeration-09b9d1a0.js';\nimport './ActionToggle-76850746.js';\nimport './Identifiable-8c58c648.js';\nimport './symbols-aed6f1f4.js';\nimport './CIMSymbol-0fa8b6ff.js';\nimport './Symbol-a5078383.js';\nimport './Color-51239bbb.js';\nimport './colorUtils-5009883d.js';\nimport './screenUtils-d18b35cd.js';\nimport './opacityUtils-2e4233d7.js';\nimport './aaBoundingBox-9e99b37e.js';\nimport './aaBoundingRect-143dc222.js';\nimport './persistableUrlUtils-241b36f6.js';\nimport './collectionUtils-bbd01921.js';\nimport './Portal-78e11fd2.js';\nimport './Clonable-685c1b5c.js';\nimport './jsonUtils-82eea64f.js';\nimport './executeQueryJSON-a023d344.js';\nimport './utils-fc36d930.js';\nimport './query-5a84e50d.js';\nimport './normalizeUtils-0a0bbfdb.js';\nimport './pbfQueryUtils-77b7de86.js';\nimport './pbf-4f1b6bc1.js';\nimport './OptimizedFeature-72ae1367.js';\nimport './OptimizedFeatureSet-261a115b.js';\nimport './queryZScale-6d1e064d.js';\nimport './zscale-aa6c4132.js';\nimport './FeatureSet-b7a83259.js';\nimport './Field-eef910a2.js';\nimport './fieldType-5b190ae1.js';\nimport './Query-e8542b5b.js';\nimport './TimeExtent-3b6d904b.js';\nimport './TopFeaturesQuery-83e0e209.js';\nimport './utils-18bdec59.js';\nimport './ColorStop-4fd116ae.js';\nimport './utils-40a61fa3.js';\nimport './asyncUtils-16976cc8.js';\nimport './jsonUtils-2b51ee23.js';\nimport './mat4-9dc802e1.js';\nimport './ItemCache-b3fa4ac2.js';\nimport './MemCache-c8c2d2fd.js';\nimport './utils-8dafedba.js';\nimport './jsonUtils-81614f88.js';\nimport './UniqueValueRenderer-4196d89c.js';\nimport './diffUtils-f58fad3d.js';\nimport './colorRamps-64f4ed07.js';\nimport './sizeVariableUtils-5330814d.js';\nimport './commonProperties-78d2d31f.js';\nimport './jsonUtils-a7194aa8.js';\nimport './styleUtils-4d73a71a.js';\nimport './DictionaryLoader-4632b8ed.js';\nimport './LRUCache-058058b5.js';\nimport './deprecate-5ff2cf59.js';\nimport './heatmapUtils-feafb65d.js';\nimport './vec4f64-d5206b79.js';\nimport './widget-1fc43cfe.js';\nimport './featureConversionUtils-6dd9f204.js';\nimport './languageUtils-a51af2e6.js';\nimport './number-20c09710.js';\nimport './FeatureLayer-dcb37ef4.js';\nimport './MultiOriginJSONSupport-7806f3bc.js';\nimport './sql-7fe33b18.js';\nimport './HeightModelInfo-6bba9906.js';\nimport './Layer-89e1b673.js';\nimport './workers-08a642ea.js';\nimport './APIKeyMixin-cf5a426b.js';\nimport './ArcGISService-aec8d6ac.js';\nimport './arcgisLayerUrl-e2014d9b.js';\nimport './BlendLayer-a0426f7b.js';\nimport './CustomParametersMixin-dc703b61.js';\nimport './labelingInfo-9c1b84b4.js';\nimport './LabelClass-737f496d.js';\nimport './labelUtils-c36f2429.js';\nimport './defaultsJSON-5fb6161d.js';\nimport './OperationalLayer-12430cfc.js';\nimport './OrderedLayer-e1878360.js';\nimport './PortalLayer-f7555bd1.js';\nimport './PortalItem-d05d4fc6.js';\nimport './RefreshableLayer-3c77bc7e.js';\nimport './ScaleRangeLayer-0c77d7dd.js';\nimport './TemporalLayer-23f9f7cc.js';\nimport './TimeInfo-200ec8d3.js';\nimport './FeatureType-f5f3bdb7.js';\nimport './fieldProperties-737c1eda.js';\nimport './FieldsIndex-82267908.js';\nimport './LayerFloorInfo-5d1e4df1.js';\nimport './versionUtils-1d5e025e.js';\nimport './styleUtils-bd1977ef.js';\nimport './popupUtils-98afec86.js';\nimport './symbolUtils-181d29ca.js';\nimport './colorUtils-712c89c6.js';\nimport './mat2d-9e4f9cbc.js';\nimport './GoTo-dcada3ff.js';\nimport './accessibleHandler-ea6834b5.js';\nimport './vmEvent-c54a9366.js';\nimport './Map-8a5a2a3d.js';\nimport './Basemap-c3ced1bc.js';\nimport './loadAll-228e57f2.js';\nimport './writeUtils-230e73af.js';\nimport './layerUtils-60cbbb3d.js';\nimport './compilerUtils-d8f13ef2.js';\nimport './CollectionFlattener-5ae5bf4a.js';\nimport './TablesMixin-854acacf.js';\nimport './GraphicsCollection-cc740044.js';\nimport './Scheduler-e92f77c0.js';\nimport './heightModelInfoUtils-3873ff03.js';\nimport './ViewingMode-4a1cffad.js';\nimport './projection-e655c5ce.js';\nimport './Viewpoint-005c3313.js';\nimport './mat3-02e39436.js';\nimport './vec2-0a4143d2.js';\nimport './vec2f32-cef742ee.js';\nimport './vec2f64-ccb73ed3.js';\nimport './capabilities-aeecbf3b.js';\nimport './context-util-3e0f33ce.js';\nimport './enums-4770f29d.js';\nimport './pixelUtils-1ee1c48b.js';\nimport './DisplayObject-50e36412.js';\nimport './DefaultVertexAttributeLayouts-20e980d9.js';\nimport './FramebufferObject-cced63a5.js';\nimport './Texture-5e3be37c.js';\nimport './VertexElementDescriptor-3b53aa99.js';\nimport './enums-6ac2a162.js';\nimport './Utils-4e99bdd6.js';\nimport './number-0cb95514.js';\nimport './ProgramTemplate-80cebc67.js';\nimport './Program-925e7953.js';\nimport './MaterialKey-c0f3a08a.js';\nimport './alignmentUtils-4bbd02ca.js';\nimport './utils-ef6c73c5.js';\nimport './StyleDefinition-b27f779b.js';\nimport './config-5446e136.js';\nimport './GeometryUtils-544c258a.js';\nimport './WGLContainer-542f53e0.js';\nimport './Container-d6d1f133.js';\nimport './EffectView-584e1c8d.js';\nimport './earcut-4e6b97b1.js';\nimport './TileInfo-7daef155.js';\nimport './Bitmap-20869960.js';\nimport './TileStore-21e1b2fc.js';\nimport './TileKey-9fe5c894.js';\nimport './quickselect-d6c9284c.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst h=s.getLogger(\"esri.views.2d.layers.BaseDynamicLayerView2D\");let c=class extends(i(f(u))){update(t){this.strategy.update(t).catch((t=>{g(t)||h.error(t);})),this.notifyChange(\"updating\");}attach(){this._bitmapContainer=new t,this.container.addChild(this._bitmapContainer),this.strategy=new S({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)});}detach(){this.strategy.destroy(),this.strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren();}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate();}fetchBitmapData(t,e,r){return this.layer.fetchImage(t,e,r)}async doRefresh(){this.requestUpdate();}isUpdating(){return this.strategy.updating||this.updateRequested}};e([d$1()],c.prototype,\"strategy\",void 0),e([d$1()],c.prototype,\"updating\",void 0),c=e([n(\"esri.views.2d.layers.BaseDynamicLayerView2D\")],c);const d=c;\n\nexport default d;\n","import { e as e$1, d, n as n$1, y as y$1, B as x$1 } from './cast-5c4dc32a.js';\nimport { M } from './Extent-85e2b0df.js';\nimport { u as u$2 } from './aaBoundingRect-143dc222.js';\nimport { b as R } from './Point-609b2fcb.js';\nimport { S as S$1 } from './TileInfo-7daef155.js';\nimport { v } from './Bitmap-20869960.js';\nimport { h } from './TileStore-21e1b2fc.js';\nimport { e } from './TileKey-9fe5c894.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function r(t,o){const r=n(o.rotation),u=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),[s,c]=o.size;return t[0]=Math.round(c*a+s*u),t[1]=Math.round(c*u+s*a),t}function u$1(t,n,o,r){const[u,a]=n,[s,c]=r,i=.5*o;return t[0]=u-i*s,t[1]=a-i*c,t[2]=u+i*s,t[3]=a+i*c,t}\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst u=u$2(),g=[0,0],f=new e(0,0,0,0),x={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let y=class extends y$1{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=x.hidpi,this.imageMaxWidth=x.imageMaxWidth,this.imageMaxHeight=x.imageMaxHeight,this.imageRotationSupported=x.imageRotationSupported,this.imageNormalizationSupported=x.imageNormalizationSupported,this.update=x$1((async(t,e)=>{if(!t.stationary||this.destroyed)return null;const i=t.state,o=R(i.spatialReference),r$1=this.hidpi?t.pixelRatio:1,s=this.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0];s?(g[0]=i.worldScreenWidth,g[1]=i.size[1]):this.imageRotationSupported?(g[0]=i.size[0],g[1]=i.size[1]):r(g,i);const a=Math.floor(g[0]*r$1)>this.imageMaxWidth||Math.floor(g[1]*r$1)>this.imageMaxHeight,n=o&&(i.extent.xmin<o.valid[0]||i.extent.xmax>o.valid[1]),l=!this.imageNormalizationSupported&&n,d=!a&&!l,h=this.imageRotationSupported?i.rotation:0;if(d){const t=s?i.paddedViewState.center:i.center;this._imagePromise=this._singleExport(i,g,t,i.resolution,h,r$1,e);}else {let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);l&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,r$1,e);}return this._imagePromise.then((async t=>{if(this._imagePromise=null,!this.destroyed){this.bitmaps=t??[];for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{e.remove();}));for(const e of t)this.container.addChild(e),e.fadeIn();}})).catch((t=>{throw this._imagePromise=null,t}))}),5e3);}destroy(){this.bitmaps=[];}get updating(){return !this.destroyed&&null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e),e.invalidateTexture(),e.requestRender();}}async _export(t,e,i,o,r,s){const a=await this.fetchSource(t,Math.floor(e*r),Math.floor(i*r),{rotation:o,pixelRatio:r,signal:s}),p=new v(a,\"additive\");return p.x=t.xmin,p.y=t.ymax,p.resolution=t.width/e,p.rotation=o,p.pixelRatio=r,p}async _singleExport(t,e,i,o,r,a,p){u$1(u,i,o,e);const n=new M(u[0],u[1],u[2],u[3],t.spatialReference);return [await this._export(n,e[0],e[1],r,a,p)]}_tiledExport(t,e,i,o){const r=S$1.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),a=new h(r),p=a.getTileCoverage(t);if(!p)return null;const m=[];return p.forEach(((r,p,n,l)=>{f.set(r,p,n,l),a.getTileBounds(u,f);const d=new M(u[0],u[1],u[2],u[3],t.spatialReference);m.push(this._export(d,e,e,0,i,o));})),Promise.all(m)}};e$1([d()],y.prototype,\"_imagePromise\",void 0),e$1([d()],y.prototype,\"bitmaps\",void 0),e$1([d()],y.prototype,\"container\",void 0),e$1([d()],y.prototype,\"fetchSource\",void 0),e$1([d()],y.prototype,\"hidpi\",void 0),e$1([d()],y.prototype,\"imageMaxWidth\",void 0),e$1([d()],y.prototype,\"imageMaxHeight\",void 0),e$1([d()],y.prototype,\"imageRotationSupported\",void 0),e$1([d()],y.prototype,\"imageNormalizationSupported\",void 0),e$1([d()],y.prototype,\"requestUpdate\",void 0),e$1([d()],y.prototype,\"updating\",null),y=e$1([n$1(\"esri.views.2d.layers.support.ExportStrategy\")],y);const S=y;\n\nexport { S };\n","import { e, d, n, I as g, s } from './cast-5c4dc32a.js';\nimport { a } from './reactiveUtils-b4e19c57.js';\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst i=i=>{let c=class extends i{initialize(){this.handles.add(a((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{g(r)||s.getLogger(this.declaredClass).error(r);}));})),\"RefreshableLayerView\");}};return e([d()],c.prototype,\"layer\",void 0),c=e([n(\"esri.layers.mixins.RefreshableLayerView\")],c),c};\n\nexport { i };\n"],"names":["h","s","c","t","this","strategy","update","catch","g","error","notifyChange","_bitmapContainer","container","addChild","S","fetchSource","fetchBitmapData","bind","requestUpdate","destroy","removeChild","removeAllChildren","e","r","layer","fetchImage","updating","updateRequested","i","f","u","d$1","prototype","d","n","Math","PI","o","rotation","abs","cos","a","sin","size","round","u$1","u$2","x","y","_imagePromise","bitmaps","hidpi","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","x$1","stationary","destroyed","state","R","spatialReference","r$1","pixelRatio","worldScreenWidth","floor","extent","xmin","valid","xmax","l","paddedViewState","center","_singleExport","resolution","min","_tiledExport","then","children","includes","fadeOut","remove","fadeIn","visible","stage","invalidateTexture","requestRender","signal","p","v","ymax","width","M","_export","S$1","scales","scale","getTileCoverage","m","forEach","set","getTileBounds","push","Promise","all","y$1","e$1","n$1","handles","add","doRefresh","dataChanged","declaredClass"],"sourceRoot":""}