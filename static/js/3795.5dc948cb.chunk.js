"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[3795],{1685:function(e,r,t){t.d(r,{I:function(){return w},L:function(){return I},S:function(){return b},b:function(){return S},d:function(){return v},g:function(){return h},h:function(){return y},j:function(){return x},m:function(){return p},w:function(){return d},y:function(){return m}});var n=t(29439),a=t(93661),u=t(40558),l=t(46337),s={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},o=Object.values(s),i=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(o.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),f=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function v(e){return!!i.test(e)}function p(e){if((0,a.t)(e))return null;var r=(0,u.j)(e),t=r.path.match(i)||r.path.match(c);if(!t)return null;var l=(0,n.Z)(t,5),o=l[1],f=l[2],v=l[3],p=l[4],d=f.indexOf("/");return{title:y(-1!==d?f.slice(d+1):f),serverType:s[v.toLowerCase()],sublayer:null!=p&&""!==p?parseInt(p,10):null,url:{path:o}}}function d(e){var r=(0,u.j)(e).path.match(f);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function y(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function m(e,r){var t=[];if(e){var n=p(e);(0,a.r)(n)&&n.title&&t.push(n.title)}if(r){var u=y(r);t.push(u)}if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function h(e){if(!e)return!1;var r=(e=e.toLowerCase()).includes(".arcgis.com/"),t=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return r&&t}function b(e,r){return e?(0,u.C)((0,u.A)(e,r)):e}function I(e){var r=e.url;if(!r)return{url:r};r=(0,u.A)(r,e.logger);var t,n=(0,u.j)(r),l=p(n.path);if((0,a.r)(l))null!=l.sublayer&&null==e.layer.layerId&&(t=l.sublayer),r=l.url.path;else if(e.nonStandardUrlAllowed){var s=d(n.path);(0,a.r)(s)&&(r=s.serviceUrl,t=s.sublayerId)}return{url:(0,u.C)(r),layerId:t}}function S(e,r,t,n,a){(0,l.f)(r,n,"url",a),n.url&&null!=e.layerId&&(n.url=(0,u.G)(n.url,t,e.layerId.toString()))}function w(e){if(!e)return!1;var r=e.toLowerCase(),t=r.includes("/services/"),n=r.includes("/mapserver/wmsserver"),a=r.includes("/imageserver/wmsserver"),u=r.includes("/wmsserver");return t&&(n||a||u)}function x(e){var r;if(!e)return!1;var t=null===(r=new u.y((0,u.Q)(e)).authority)||void 0===r?void 0:r.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},3795:function(e,r,t){t.r(r),t.d(r,{fromUrl:function(){return v}});var n=t(74165),a=t(1413),u=t(15861),l=t(48848),s=t(93661),o=t(40558),i=t(1685),c=t(89664),f=t(25224);t(46337);function v(e){return p.apply(this,arguments)}function p(){return(p=(0,u.Z)((0,n.Z)().mark((function e(r){var u,l,s,o,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=null===(u=r.properties)||void 0===u?void 0:u.customParameters,e.next=3,m(r.url,l);case 3:if(s=e.sent,o=(0,a.Z)((0,a.Z)({},r.properties),{},{url:r.url}),s.sublayerIds){e.next=7;break}return e.abrupt("return",(null!=s.layerOrTableId&&(o.layerId=s.layerOrTableId,o.sourceJSON=s.sourceJSON),new s.Constructor(o)));case 7:return e.next=9,Promise.all([t.e(9557),t.e(3314),t.e(4662),t.e(630),t.e(3103),t.e(2353)]).then(t.bind(t,21490));case 9:return e.t0=e.sent.default,e.t1={title:s.parsedUrl.title},i=new e.t0(e.t1),e.abrupt("return",(y(i,s,o),i));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,r){return e?e.find((function(e){return e.id===r})):null}function y(e,r,t){function n(e,n){var u=(0,a.Z)((0,a.Z)({},t),{},{layerId:e,sublayerTitleMode:"service-name"});return(0,s.r)(n)&&(u.sourceJSON=n),new r.Constructor(u)}r.sublayerIds.forEach((function(t){var a=n(t,d(r.sublayerInfos,t));e.add(a)})),r.tableIds.forEach((function(t){var a=n(t,d(r.tableInfos,t));e.tables.add(a)}))}function m(e,r){return h.apply(this,arguments)}function h(){return h=(0,u.Z)((0,n.Z)().mark((function e(r,t){var a,u,o,f,v,p,d,y,m,h,I,S,x;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,i.m)(r),e.t0=(0,s.t)(a),!e.t0){e.next=6;break}return e.next=5,b(r,t);case 5:a=e.sent;case 6:if(!(0,s.t)(a)){e.next=8;break}throw new l.s("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:r});case 8:o=(u=a).serverType,f=u.sublayer,p={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},e.t1=o,e.next="MapServer"===e.t1?13:"ImageServer"===e.t1?15:"SceneServer"===e.t1?17:19;break;case 13:return v=null!=f?"FeatureLayer":O(r,t).then((function(e){return e?"TileLayer":"MapImageLayer"})),e.abrupt("break",20);case 15:return v=(0,c.a)(r,{customParameters:t}).then((function(e){var r=e.tileInfo&&e.tileInfo.format;return e.tileInfo?"LERC"!==(null===r||void 0===r?void 0:r.toUpperCase())||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"})),e.abrupt("break",20);case 17:return v=(0,c.a)(a.url.path,{customParameters:t}).then((function(e){if(e){if("Voxel"===(null===e||void 0===e?void 0:e.layerType))return"VoxelLayer";if(null!==e&&void 0!==e&&e.layers&&Array.isArray(e.layers)&&e.layers.length>0){var r,t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},n=null===(r=e.layers[0])||void 0===r?void 0:r.layerType;if(null!=t[n])return t[n]}}return"SceneLayer"})),e.abrupt("break",20);case 19:v=p[o];case 20:return d={FeatureLayer:!0,SceneLayer:!0},m={parsedUrl:a,Constructor:null,layerOrTableId:(y="FeatureServer"===o)?f:null,sublayerIds:null,tableIds:null},e.next=25,v;case 25:if(h=e.sent,!d[h]||null!=f){e.next=32;break}return e.next=29,w(r,o,t);case 29:x=e.sent,y&&(m.sublayerInfos=x.layerInfos,m.tableInfos=x.tableInfos),1!==x.layerIds.length+x.tableIds.length?(m.sublayerIds=x.layerIds,m.tableIds=x.tableIds):y&&(m.layerOrTableId=null!==(I=x.layerIds[0])&&void 0!==I?I:x.tableIds[0],m.sourceJSON=null!==(S=x.layerInfos[0])&&void 0!==S?S:x.tableInfos[0]);case 32:return e.next=34,g(h);case 34:return m.Constructor=e.sent,e.abrupt("return",m);case 36:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function b(e,r){return I.apply(this,arguments)}function I(){return I=(0,u.Z)((0,n.Z)().mark((function e(r,t){var a,u,l,f,v,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.a)(r,{customParameters:t});case 2:if(u=e.sent,l=null,f=null,"Feature Layer"===(v=u.type)||"Table"===v?(l="FeatureServer",f=u.id):"indexedVector"===v?l="VectorTileServer":u.hasOwnProperty("mapName")?l="MapServer":u.hasOwnProperty("bandCount")&&u.hasOwnProperty("pixelSizeX")?l="ImageServer":u.hasOwnProperty("maxRecordCount")&&u.hasOwnProperty("allowGeometryUpdates")?l="FeatureServer":u.hasOwnProperty("streamUrls")?l="StreamServer":S(u)?(l="SceneServer",f=u.id):u.hasOwnProperty("layers")&&S(null===(a=u.layers)||void 0===a?void 0:a[0])&&(l="SceneServer"),l){e.next=7;break}return e.abrupt("return",null);case 7:return p=null!=f?(0,i.w)(r):null,e.abrupt("return",{title:(0,s.r)(p)&&u.name||(0,o.q)(r),serverType:l,sublayer:f,url:{path:(0,s.r)(p)?p.serviceUrl:(0,o.j)(r).path}});case 9:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function S(e){return(null===e||void 0===e?void 0:e.hasOwnProperty("store"))&&e.hasOwnProperty("id")&&"number"==typeof e.id}function w(e,r,t){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)((0,n.Z)().mark((function e(r,t,a){var u,l,s,o,i,f,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,"FeatureServer"!==t){e.next=8;break}return e.next=4,(0,c.r)(r,{customParameters:a});case 4:i=e.sent,o=!!i.layersJSON,s=i.layersJSON||i.serviceJSON,e.next=11;break;case 8:return e.next=10,(0,c.a)(r,{customParameters:a});case 10:s=e.sent;case 11:return f=null===(u=s)||void 0===u?void 0:u.layers,v=null===(l=s)||void 0===l?void 0:l.tables,e.abrupt("return",{layerIds:(null===f||void 0===f?void 0:f.map((function(e){return e.id})).reverse())||[],tableIds:(null===v||void 0===v?void 0:v.map((function(e){return e.id})).reverse())||[],layerInfos:o?f:[],tableInfos:o?v:[]});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return L.apply(this,arguments)}function L(){return(L=(0,u.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.a[r])());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,r){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)((0,n.Z)().mark((function e(r,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.a)(r,{customParameters:t});case 2:return e.abrupt("return",e.sent.tileInfo);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89664:function(e,r,t){t.d(r,{a:function(){return c},r:function(){return s}});var n=t(1413),a=t(74165),u=t(15861),l=t(40558);function s(e,r){return o.apply(this,arguments)}function o(){return o=(0,u.Z)((0,a.Z)().mark((function e(r,t){var n,u,l,s,o,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(r,t);case 2:if((s=(s=e.sent)||{}).layers=(null===(n=s.layers)||void 0===n?void 0:n.filter(i))||[],o={serviceJSON:s},!((null!==(u=s.currentVersion)&&void 0!==u?u:0)<10.5)){e.next=7;break}return e.abrupt("return",o);case 7:return e.next=9,c(r+"/layers",t);case 9:return f=e.sent,e.abrupt("return",(o.layersJSON={layers:(null===f||void 0===f||null===(l=f.layers)||void 0===l?void 0:l.filter(i))||[],tables:(null===f||void 0===f?void 0:f.tables)||[]},o));case 11:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function i(e){return!e.type||"Feature Layer"===e.type}function c(e,r){return f.apply(this,arguments)}function f(){return f=(0,u.Z)((0,a.Z)().mark((function e(r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.U)(r,{responseType:"json",query:(0,n.Z)((0,n.Z)({f:"json"},null===t||void 0===t?void 0:t.customParameters),{},{token:null===t||void 0===t?void 0:t.apiKey})});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}},46337:function(e,r,t){t.d(r,{R:function(){return i},U:function(){return p},c:function(){return u},d:function(){return d},f:function(){return o},m:function(){return l},p:function(){return s},x:function(){return h},y:function(){return y}});var n=t(93661),a=t(40558);function u(e,r){var t=r&&r.url&&r.url.path;if(e&&t&&(e=(0,a.Q)(e,t,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){var n=(0,a._)(e,r.portalItem.itemUrl);null!=n&&v.test(n)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(n).path)}return m(e,r&&r.portal)}function l(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.YES;if(null==e)return e;!(0,a.K)(e)&&r&&r.blockedRelativeUrls&&r.blockedRelativeUrls.push(e);var n=(0,a.Q)(e);if(r){var u=r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.rootPath||r.url&&r.url.path;if(u){var l=m(u,r.portal);null!=(n=(0,a._)(m(n,r.portal),l,l))&&n!==e&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=y(n,null===r||void 0===r?void 0:r.portal),(0,a.K)(n)&&(n=(0,a.F)(n)),null!==r&&void 0!==r&&r.resources&&null!==r&&void 0!==r&&r.portalItem&&!(0,a.K)(n)&&!(0,a.X)(n)&&t===i.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(n),compress:!1}),n}function s(e,r,t){return u(e,t)}function o(e,r,t,n){var a=l(e,n);void 0!==a&&(r[t]=a)}var i,c,f=/\/items\/([^\/]+)\/resources\/(.*)/,v=/^\.\/resources\//;function p(e){var r,t,n;return null!==(r=null===(t=null!==(n=null===e||void 0===e?void 0:e.match(f))&&void 0!==n?n:null)||void 0===t?void 0:t[1])&&void 0!==r?r:null}function d(e){var r,t=null!==(r=null===e||void 0===e?void 0:e.match(f))&&void 0!==r?r:null;if(null==t)return null;var u=t[2],l=u.lastIndexOf("/");if(-1===l){var s=(0,a.E)(u),o=s.path,i=s.extension;return{prefix:null,filename:o,extension:(0,n.e)(i)}}var c=(0,a.E)(u.slice(l+1)),v=c.path,p=c.extension;return{prefix:u.slice(0,l),filename:v,extension:(0,n.e)(p)}}function y(e,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?(0,a.L)(e,"".concat(r.urlKey,".").concat(r.customBaseUrl),r.portalHostname):e}function m(e,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return e;var t="".concat(r.urlKey,".").concat(r.customBaseUrl),n=(0,a.c)();return(0,a.z)(n,"".concat(n.scheme,"://").concat(t))?(0,a.L)(e,r.portalHostname,t):(0,a.L)(e,t,r.portalHostname)}(c=i||(i={}))[c.YES=0]="YES",c[c.NO=1]="NO";var h=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:u,toJSON:l,read:s,write:o,itemIdFromResourceUrl:p,prefixAndFilenameFromResourceUrl:d,ensureMainOnlineDomain:y,get MarkKeep(){return i}},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=3795.5dc948cb.chunk.js.map