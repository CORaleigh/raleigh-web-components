"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[5527],{65527:function(e,n,r){r.r(n),r.d(n,{registerFunctions:function(){return k}});var t=r(74165),a=r(37762),i=r(15861),s=r(28969),l=r(7206),c=r(16485),u=r(37116),o=r(23132),f=r(81019),d=r(74575),p=r(43124);r(91204),r(80262),r(75610),r(21583),r(30709),r(70441),r(36460),r(57714),r(30604),r(61495),r(33642),r(43920),r(44455),r(92029),r(47642),r(83822),r(51451),r(80175),r(50526),r(50448),r(41742),r(1773),r(77196),r(24980),r(3114),r(22144),r(78674),r(66307),r(2760),r(88370),r(72820),r(78311),r(96349),r(9055),r(79611),r(2157),r(40100),r(55827),r(34860),r(36638),r(32568),r(69202),r(27597),r(1241),r(67417),r(15181),r(28999),r(69953),r(15612),r(69797),r(10590),r(23190),r(50905),r(61099),r(33703),r(46248),r(6794),r(49580),r(54841),r(67154),r(96636),r(79054),r(29709),r(18411),r(43782),r(33976),r(407),r(28210),r(17436),r(25316),r(77389),r(53373),r(94872),r(3969),r(77470),r(9575),r(53249),r(83996),r(72763),r(97033),r(36551),r(28681),r(38929),r(97866),r(68890),r(83024),r(61340),r(31513),r(25838),r(54539),r(19967),r(50338),r(28623),r(10312),r(95254),r(38304),r(12158),r(93874),r(62446),r(27264),r(78945),r(70516),r(25279),r(22268),r(40452);function b(e,n,r,t){if(1===t.length){if((0,c.L)(t[0]))return(0,s.n)(e,t[0],-1);if((0,c.E)(t[0]))return(0,s.n)(e,t[0].toArray(),-1)}return(0,s.n)(e,t,-1)}function y(e,n,r){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)((0,t.Z)().mark((function e(n,r,a){var i,s,l,c,u,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=n.getVariables()).length>0)){e.next=17;break}s=[],l=0;case 4:if(!(l<i.length)){e.next=14;break}return c={name:i[l]},e.t0=s,e.next=9,r.evaluateIdentifier(a,c);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:l++,e.next=4;break;case 14:for(u={},o=0;o<i.length;o++)u[i[o]]=s[o];return e.abrupt("return",(n.parameters=u,n));case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var t in e)if(t.toLowerCase()===n.toLowerCase())return e[t];return r}function x(e){if(null===e)return null;var n={type:h(e,"type",""),name:h(e,"name","")};if("range"===n.type)n.range=h(e,"range",[]);else{n.codedValues=[];var r,t=(0,a.Z)(h(e,"codedValues",[]));try{for(t.s();!(r=t.n()).done;){var i=r.value;n.codedValues.push({name:h(i,"name",""),code:h(i,"code",null)})}}catch(s){t.e(s)}finally{t.f()}}return n}function g(e){if(null===e)return null;var n={},r=h(e,"wkt",null);null!==r&&(n.wkt=r);var t=h(e,"wkid",null);return null!==t&&(n.wkid=t),n}function v(e){if(null===e)return null;var n={hasZ:h(e,"hasz",!1),hasM:h(e,"hasm",!1)},r=h(e,"spatialreference",null);r&&(n.spatialReference=g(r));var t=h(e,"x",null);if(null!==t)return n.x=t,n.y=h(e,"y",null),n;var a=h(e,"rings",null);if(null!==a)return n.rings=a,n;var i=h(e,"paths",null);if(null!==i)return n.paths=i,n;var s=h(e,"points",null);if(null!==s)return n.points=s,n;for(var l=0,c=["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"];l<c.length;l++){var u=c[l],o=h(e,u,null);null!==o&&(n[u]=o)}return n}function w(e){return!!e.layerDefinition&&!!e.featureSet&&!1!==function(e,n){var r,t=(0,a.Z)(n);try{for(t.s();!(r=t.n()).done;)if(r.value===e)return!0}catch(i){t.e(i)}finally{t.f()}return!1}(e.layerDefinition.geometryType,["","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&null!==e.layerDefinition.objectIdField&&""!==e.layerDefinition.objectIdField&&!1!==(0,c.L)(e.layerDefinition.fields)&&!1!==(0,c.L)(e.featureSet.features)}function k(e){"async"===e.mode&&(e.functions.getuser=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r,a,i){var u,o,f,d,p,b,y,m,h,x,g,v,w,k,E,I,F;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(i,1,2),u=(0,c.I)(i[1],""),o=!0===u,u=!0===u||!1===u?"":(0,c.X)(u),!(i[0]instanceof s.s)){e.next=13;break}return f=null,n.services&&n.services.portal&&(f=n.services.portal),f=(0,l.E)(i[0],f),e.next=7,(0,l.b)(f,u,o);case 7:if(!(d=e.sent)){e.next=12;break}for(p=JSON.parse(JSON.stringify(d)),b=0,y=["lastLogin","created","modified"];b<y.length;b++)void 0!==p[m=y[b]]&&null!==p[m]&&(p[m]=new Date(p[m]));return e.abrupt("return",s.d.convertObjectToArcadeDictionary(p));case 12:case 28:case 38:return e.abrupt("return",null);case 13:if(h=null,(0,c.J)(i[0])&&(h=i[0]),!h){e.next=39;break}if(o=!1,!u){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,h.load();case 19:return e.next=21,h.getOwningSystemUrl();case 21:if(x=e.sent){e.next=29;break}if(u){e.next=28;break}return e.next=26,h.getIdentityUser();case 26:return g=e.sent,e.abrupt("return",g?s.d.convertObjectToArcadeDictionary({username:g}):null);case 29:return v=null,n.services&&n.services.portal&&(v=n.services.portal),v=(0,l.E)(new s.s(x),v),e.next=33,(0,l.b)(v,u,o);case 33:if(!(w=e.sent)){e.next=38;break}for(k=JSON.parse(JSON.stringify(w)),E=0,I=["lastLogin","created","modified"];E<I.length;E++)void 0!==k[F=I[E]]&&null!==k[F]&&(k[F]=new Date(k[F]));return e.abrupt("return",s.d.convertObjectToArcadeDictionary(k));case 39:throw new Error("Invalid Parameter");case 40:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"getuser",min:"1",max:"2"}),e.functions.featuresetbyid=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if((0,c.G)(r,2,4),r[0]instanceof l.e){var t=(0,c.X)(r[1]),a=(0,c.I)(r[2],null),i=(0,c.o)((0,c.I)(r[3],!0));if(null===a&&(a=["*"]),!1===(0,c.L)(a))throw new Error("Invalid Parameter");return r[0].featureSetById(t,i,a)}throw new Error("Invalid Parameter")}))},e.signatures.push({name:"featuresetbyid",min:"2",max:"4"}),e.functions.getfeatureset=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,t){if((0,c.G)(t,1,2),(0,c.Y)(t[0])){var a=(0,c.I)(t[1],"datasource");return null===a&&(a="datasource"),a=(0,c.X)(a).toLowerCase(),(0,l.D)(t[0].fullSchema(),a,n.lrucache,n.interceptor,n.spatialReference)}throw new Error("Invalid Parameter")}))},e.signatures.push({name:"getfeatureset",min:"1",max:"2"}),e.functions.featuresetbyportalitem=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,t){if((0,c.G)(t,2,5),null===t[0])throw new Error("Portal is required");if(t[0]instanceof s.s){var a=(0,c.X)(t[1]),i=(0,c.X)(t[2]),u=(0,c.I)(t[3],null),o=(0,c.o)((0,c.I)(t[4],!0));if(null===u&&(u=["*"]),!1===(0,c.L)(u))throw new Error("Invalid Parameter");var f=null;return n.services&&n.services.portal&&(f=n.services.portal),f=(0,l.E)(t[0],f),(0,l.q)(a,i,n.spatialReference,u,o,f,n.lrucache,n.interceptor)}if(!1===(0,c.w)(t[0]))throw new Error("Portal is required");var d=(0,c.X)(t[0]),p=(0,c.X)(t[1]),b=(0,c.I)(t[2],null),y=(0,c.o)((0,c.I)(t[3],!0));if(null===b&&(b=["*"]),!1===(0,c.L)(b))throw new Error("Invalid Parameter");if(n.services&&n.services.portal)return(0,l.q)(d,p,n.spatialReference,b,y,n.services.portal,n.lrucache,n.interceptor);throw new Error("Portal is required")}))},e.signatures.push({name:"featuresetbyportalitem",min:"2",max:"5"}),e.functions.featuresetbyname=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if((0,c.G)(r,2,4),r[0]instanceof l.e){var t=(0,c.X)(r[1]),a=(0,c.I)(r[2],null),i=(0,c.o)((0,c.I)(r[3],!0));if(null===a&&(a=["*"]),!1===(0,c.L)(a))throw new Error("Invalid Parameter");return r[0].featureSetByName(t,i,a)}throw new Error("Invalid Parameter")}))},e.signatures.push({name:"featuresetbyname",min:"2",max:"4"}),e.functions.featureset=function(n,r){return e.standardFunction(n,r,(function(e,r,t){(0,c.G)(t,1,1);var i=t[0],u={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,c.w)(i))void 0!==(i=JSON.parse(i)).layerDefinition?(u.layerDefinition=i.layerDefinition,u.featureSet=i.featureSet,i.layerDefinition.spatialReference&&(u.layerDefinition.spatialReference=i.layerDefinition.spatialReference)):(u.featureSet.features=i.features,u.featureSet.geometryType=i.geometryType,u.layerDefinition.geometryType=u.featureSet.geometryType,u.layerDefinition.objectIdField=i.objectIdFieldName,u.layerDefinition.typeIdField=i.typeIdFieldName,u.layerDefinition.globalIdField=i.globalIdFieldName,u.layerDefinition.fields=i.fields,i.spatialReference&&(u.layerDefinition.spatialReference=i.spatialReference));else{if(!(t[0]instanceof s.d))throw new Error("Invalid Parameter");var o=h(i=JSON.parse(t[0].castToText()),"layerdefinition");if(null!==o){u.layerDefinition.geometryType=h(o,"geometrytype",""),u.featureSet.geometryType=u.layerDefinition.geometryType,u.layerDefinition.globalIdField=h(o,"globalidfield",""),u.layerDefinition.objectIdField=h(o,"objectidfield",""),u.layerDefinition.typeIdField=h(o,"typeidfield","");var f=h(o,"spatialreference",null);f&&(u.layerDefinition.spatialReference=g(f));var d,p=(0,a.Z)(h(o,"fields",[]));try{for(p.s();!(d=p.n()).done;){var b=d.value,y={name:h(b,"name",""),alias:h(b,"alias",""),type:h(b,"type",""),nullable:h(b,"nullable",!0),editable:h(b,"editable",!0),length:h(b,"length",null),domain:x(h(b,"domain"))};u.layerDefinition.fields.push(y)}}catch(z){p.e(z)}finally{p.f()}var m=h(i,"featureset",null);if(m){var k,E={},I=(0,a.Z)(u.layerDefinition.fields);try{for(I.s();!(k=I.n()).done;){var F=k.value;E[F.name.toLowerCase()]=F.name}}catch(z){I.e(z)}finally{I.f()}var D,A=(0,a.Z)(h(m,"features",[]));try{for(A.s();!(D=A.n()).done;){var N=D.value,C={},L=h(N,"attributes",{});for(var S in L)C[E[S.toLowerCase()]]=L[S];u.featureSet.features.push({attributes:C,geometry:v(h(N,"geometry",null))})}}catch(z){A.e(z)}finally{A.f()}}}else{u.layerDefinition.geometryType=h(i,"geometrytype",""),u.featureSet.geometryType=u.layerDefinition.geometryType,u.layerDefinition.objectIdField=h(i,"objectidfieldname",""),u.layerDefinition.typeIdField=h(i,"typeidfieldname","");var Z=h(i,"spatialreference",null);Z&&(u.layerDefinition.spatialReference=g(Z));var T,G=(0,a.Z)(h(i,"fields",[]));try{for(G.s();!(T=G.n()).done;){var O=T.value,R={name:h(O,"name",""),alias:h(O,"alias",""),type:h(O,"type",""),nullable:h(O,"nullable",!0),editable:h(O,"editable",!0),length:h(O,"length",null),domain:x(h(O,"domain"))};u.layerDefinition.fields.push(R)}}catch(z){G.e(z)}finally{G.f()}var W,M={},P=(0,a.Z)(u.layerDefinition.fields);try{for(P.s();!(W=P.n()).done;){var j=W.value;M[j.name.toLowerCase()]=j.name}}catch(z){P.e(z)}finally{P.f()}var B,J=(0,a.Z)(h(i,"features",[]));try{for(J.s();!(B=J.n()).done;){var V=B.value,H={},X=h(V,"attributes",{});for(var _ in X)H[M[_.toLowerCase()]]=X[_];u.featureSet.features.push({attributes:H,geometry:v(h(V,"geometry",null))})}}catch(z){J.e(z)}finally{J.f()}}}if(!1===w(u))throw new Error("Invalid Parameter");return l.y.create(u,n.spatialReference)}))},e.signatures.push({name:"featureset",min:"1",max:"1"}),e.functions.filter=function(n,r){return e.standardFunctionAsync(n,r,function(){var r=(0,i.Z)((0,t.Z)().mark((function r(i,s,u){var d,p,b,y,m,h,x,g,v,w,k,E,I,F,D;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,c.G)(u,2,2),!(0,c.L)(u[0])&&!(0,c.E)(u[0])){r.next=44;break}if(d=[],(p=u[0])instanceof c.t&&(p=p.toArray()),b=null,!(u[1]instanceof c.a)){r.next=9;break}b=e.arcadeCustomFunctionHandler(u[1]),r.next=16;break;case 9:if(!(u[1]instanceof c.N)){r.next=13;break}b=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return u[1].fn(n,{preparsed:!0,arguments:r})},r.next=16;break;case 13:if(u[1]instanceof c.b){r.next=15;break}throw new Error("Invalid Parameter");case 15:b=function(){var e;if(arguments.length!==u[1].paramCount)throw new Error("Invalid parameters");return(e=u[1]).fn.apply(e,arguments)};case 16:y=(0,a.Z)(p),r.prev=17,y.s();case 19:if((m=y.n()).done){r.next=35;break}if(h=m.value,x=b(h),!(0,o.D)(x)){r.next=32;break}return r.t0=!0,r.next=26,x;case 26:if(r.t1=r.sent,r.t2=r.t0===r.t1,!r.t2){r.next=30;break}d.push(h);case 30:r.next=33;break;case 32:!0===x&&d.push(h);case 33:r.next=19;break;case 35:r.next=40;break;case 37:r.prev=37,r.t3=r.catch(17),y.e(r.t3);case 40:return r.prev=40,y.f(),r.finish(40);case 43:return r.abrupt("return",d);case 44:if(!(0,c.J)(u[0])){r.next=67;break}return r.next=47,u[0].load();case 47:if(g=r.sent,v=f.WhereClause.create(u[1],g.getFieldsIndex()),!((w=v.getVariables()).length>0)){r.next=66;break}k=[],E=0;case 53:if(!(E<w.length)){r.next=63;break}return I={name:w[E]},r.t4=k,r.next=58,e.evaluateIdentifier(n,I);case 58:r.t5=r.sent,r.t4.push.call(r.t4,r.t5);case 60:E++,r.next=53;break;case 63:for(F={},D=0;D<w.length;D++)F[w[D]]=k[D];return r.abrupt("return",(v.parameters=F,new l.h({parentfeatureset:u[0],whereclause:v})));case 66:return r.abrupt("return",new l.h({parentfeatureset:u[0],whereclause:v}));case 67:throw new Error("Filter cannot accept this parameter type");case 68:case"end":return r.stop()}}),r,null,[[17,37,40,43]])})));return function(e,n,t){return r.apply(this,arguments)}}())},e.signatures.push({name:"filter",min:"2",max:"2"}),e.functions.orderby=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r,a){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(a,2,2),!(0,c.J)(a[0])){e.next=3;break}return i=new l.a(a[1]),e.abrupt("return",new l.s({parentfeatureset:a[0],orderbyclause:i}));case 3:throw new Error("Order cannot accept this parameter type");case 4:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"orderby",min:"2",max:"2"}),e.functions.top=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r,a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(a,2,2),!(0,c.J)(a[0])){e.next=2;break}return e.abrupt("return",new l.c({parentfeatureset:a[0],topnum:a[1]}));case 2:if(!(0,c.L)(a[0])){e.next=4;break}return e.abrupt("return",(0,c.n)(a[1])>=a[0].length?a[0].slice(0):a[0].slice(0,(0,c.n)(a[1])));case 4:if(!(0,c.E)(a[0])){e.next=6;break}return e.abrupt("return",(0,c.n)(a[1])>=a[0].length()?a[0].slice(0):a[0].slice(0,(0,c.n)(a[1])));case 6:throw new Error("Top cannot accept this parameter type");case 7:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"top",min:"2",max:"2"}),e.functions.first=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n,r,a){var i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(a,1,1),!(0,c.J)(a[0])){e.next=8;break}return e.next=3,a[0].first(n.abortSignal);case 3:if(null===(i=e.sent)){e.next=7;break}return l=s.a.createFromGraphicLikeObject(i.geometry,i.attributes,a[0]),e.abrupt("return",(l._underlyingGraphic=i,l));case 7:return e.abrupt("return",i);case 8:return e.abrupt("return",(0,c.L)(a[0])?0===a[0].length?null:a[0][0]:(0,c.E)(a[0])?0===a[0].length()?null:a[0].get(0):null);case 9:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"first",min:"1",max:"1"}),e.functions.attachments=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r,a,i){var u,o,f;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(i,1,2),u={minsize:-1,maxsize:-1,types:null,returnMetadata:!1},!(i.length>1)){e.next=9;break}if(!(i[1]instanceof s.d)){e.next=7;break}i[1].hasField("minsize")&&(u.minsize=(0,c.n)(i[1].field("minsize"))),i[1].hasField("metadata")&&(u.returnMetadata=(0,c.o)(i[1].field("metadata"))),i[1].hasField("maxsize")&&(u.maxsize=(0,c.n)(i[1].field("maxsize"))),i[1].hasField("types")&&(o=(0,c.ah)(i[1].field("types"),!1)).length>0&&(u.types=o),e.next=9;break;case 7:if(null===i[1]){e.next=9;break}throw new Error("Invalid Parameter");case 9:if(!(0,c.Y)(i[0])){e.next=25;break}if((f=i[0]._layer)instanceof d.K&&(f=(0,l.S)(f,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==f){e.next=16;break}e.t0=[],e.next=24;break;case 16:if(!1!==(0,c.J)(f)){e.next=20;break}e.t1=[],e.next=23;break;case 20:return e.next=22,f.load();case 22:e.t1=f.queryAttachments(i[0].field(f.objectIdField),u.minsize,u.maxsize,u.types,u.returnMetadata);case 23:e.t0=e.t1;case 24:return e.abrupt("return",e.t0);case 25:if(null!==i[0]){e.next=27;break}return e.abrupt("return",[]);case 27:throw new Error("Invalid Parameter");case 28:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"attachments",min:"1",max:"2"}),e.functions.featuresetbyrelationshipname=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r,a,i){var s,o,p,b,y,m,h,x,g,v,w,k;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(i,2,4),s=i[0],o=(0,c.X)(i[1]),p=(0,c.I)(i[2],null),b=(0,c.o)((0,c.I)(i[3],!0)),null===p&&(p=["*"]),!1!==(0,c.L)(p)){e.next=6;break}throw new Error("Invalid Parameter");case 6:if(null!==i[0]){e.next=8;break}return e.abrupt("return",null);case 8:if((0,c.Y)(i[0])){e.next=10;break}throw new Error("Invalid Parameter");case 10:if((y=s._layer)instanceof d.K&&(y=(0,l.S)(y,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==y){e.next=13;break}return e.abrupt("return",null);case 13:if(!1!==(0,c.J)(y)){e.next=15;break}return e.abrupt("return",null);case 15:return e.next=17,y.load();case 17:if(y=e.sent,m=y.relationshipMetaData().filter((function(e){return e.name===o})),0!==m.length){e.next=21;break}return e.abrupt("return",null);case 21:if(!(void 0!==m[0].relationshipTableId&&null!==m[0].relationshipTableId&&m[0].relationshipTableId>-1)){e.next=23;break}return e.abrupt("return",(0,l.A)(y,m[0],s.field(y.objectIdField),y.spatialReference,p,b,n.lrucache,n.interceptor));case 23:if(h=y.serviceUrl()){e.next=26;break}return e.abrupt("return",null);case 26:return h="/"===h.charAt(h.length-1)?h+m[0].relatedTableId.toString():h+"/"+m[0].relatedTableId.toString(),e.next=29,(0,l.I)(h,y.spatialReference,p,b,n.lrucache,n.interceptor);case 29:return x=e.sent,e.next=32,x.load();case 32:if(g=(g=x.relationshipMetaData()).filter((function(e){return e.id===m[0].id})),!1!==s.hasField(m[0].keyField)&&null!==s.field(m[0].keyField)){e.next=41;break}return e.next=36,y.getFeatureByObjectId(s.field(y.objectIdField),[m[0].keyField]);case 36:if(!(v=e.sent)){e.next=40;break}return w=f.WhereClause.create(g[0].keyField+"= @id",x.getFieldsIndex()),e.abrupt("return",(w.parameters={id:v.attributes[m[0].keyField]},x.filter(w)));case 40:return e.abrupt("return",new u.g({parentfeatureset:x}));case 41:return k=f.WhereClause.create(g[0].keyField+"= @id",x.getFieldsIndex()),e.abrupt("return",(k.parameters={id:s.field(m[0].keyField)},x.filter(k)));case 43:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"featuresetbyrelationshipname",min:"2",max:"4"}),e.functions.featuresetbyassociation=function(n,r){return e.standardFunctionAsync(n,r,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r,i,s){var u,o,b,y,m,h,x,g,v,w,k,E,I,F,D,A,N,C,L,S,Z,T,G,O,R,W,M,P,j,B,J,V,H,X,_,z,q,U,K;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.G)(s,2,3),u=s[0],o=(0,c.X)((0,c.I)(s[1],"")).toLowerCase(),b=(0,c.w)(s[2])?(0,c.X)(s[2]):null,null!==s[0]){e.next=4;break}return e.abrupt("return",null);case 4:if((0,c.Y)(s[0])){e.next=6;break}throw new Error("Invalid Parameter");case 6:if((y=u._layer)instanceof d.K&&(y=(0,l.S)(y,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==y){e.next=9;break}return e.abrupt("return",null);case 9:if(!1!==(0,c.J)(y)){e.next=11;break}return e.abrupt("return",null);case 11:return e.next=13,y.load();case 13:return m=y.serviceUrl(),e.next=16,(0,l.g)(m,n.spatialReference);case 16:if(h=e.sent,x=null,g=null,v=!1,null!==b&&""!==b&&void 0!==b){w=(0,a.Z)(h.terminals);try{for(w.s();!(k=w.n()).done;)(E=k.value).terminalName===b&&(g=E.terminalId)}catch(r){w.e(r)}finally{w.f()}null===g&&(v=!0)}I=h.associations.getFieldsIndex(),F=I.get("TOGLOBALID").name,D=I.get("FROMGLOBALID").name,A=I.get("TOTERMINALID").name,N=I.get("FROMTERMINALID").name,C=I.get("FROMNETWORKSOURCEID").name,L=I.get("TONETWORKSOURCEID").name,S=I.get("ASSOCIATIONTYPE").name,Z=I.get("ISCONTENTVISIBLE").name,T=I.get("OBJECTID").name,G=(0,a.Z)(y.fields),e.prev=21,G.s();case 23:if((O=G.n()).done){e.next=30;break}if("global-id"!==(R=O.value).type){e.next=28;break}return x=u.field(R.name),e.abrupt("break",30);case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),G.e(e.t0);case 35:return e.prev=35,G.f(),e.finish(35);case 38:for(V in W=null,M=new l.v(new p.y({name:"percentalong",alias:"percentalong",type:"double"}),f.WhereClause.create("0",h.associations.getFieldsIndex())),P=new l.v(new p.y({name:"side",alias:"side",type:"string"}),f.WhereClause.create("''",h.associations.getFieldsIndex())),j="globalid",B="globalId",J={},h.lkp)J[V]=h.lkp[V].sourceId;H=new l.m(new p.y({name:"classname",alias:"classname",type:"string"}),null,J),X="",e.t1=o,e.next="midspan"===e.t1?46:"junctionedge"===e.t1?50:"connected"===e.t1?54:"container"===e.t1?59:"content"===e.t1?60:"structure"===e.t1?62:"attached"===e.t1?64:66;break;case 46:return X="((".concat(F,"='").concat(x,"') OR ( ").concat(D,"='").concat(x,"')) AND (").concat(S," IN (5))"),H.codefield=f.WhereClause.create("CASE WHEN (".concat(F,"='").concat(x,"') THEN ").concat(C," ELSE ").concat(L," END"),h.associations.getFieldsIndex()),(_=(0,c.a3)(l.C.findField(h.associations.fields,D))).name=j,_.alias=j,W=new l.v(_,f.WhereClause.create("CASE WHEN (".concat(D,"='").concat(x,"') THEN ").concat(F," ELSE ").concat(D," END"),h.associations.getFieldsIndex())),M=h.unVersion>=4?new l.d(l.C.findField(h.associations.fields,I.get("PERCENTALONG").name)):new l.v(new p.y({name:"percentalong",alias:"percentalong",type:"double"}),f.WhereClause.create("0",h.associations.getFieldsIndex())),e.abrupt("break",67);case 50:return X="((".concat(F,"='").concat(x,"') OR ( ").concat(D,"='").concat(x,"')) AND (").concat(S," IN (4,6))"),H.codefield=f.WhereClause.create("CASE WHEN (".concat(F,"='").concat(x,"') THEN ").concat(C," ELSE ").concat(L," END"),h.associations.getFieldsIndex()),(z=(0,c.a3)(l.C.findField(h.associations.fields,D))).name=j,z.alias=j,W=new l.v(z,f.WhereClause.create("CASE WHEN (".concat(D,"='").concat(x,"') THEN ").concat(F," ELSE ").concat(D," END"),h.associations.getFieldsIndex())),P=new l.v(new p.y({name:"side",alias:"side",type:"string"}),f.WhereClause.create("CASE WHEN (".concat(S,"=4) THEN 'from' ELSE 'to' END"),h.associations.getFieldsIndex())),e.abrupt("break",67);case 54:return q="".concat(F,"='@T'"),U="".concat(D,"='@T'"),null!==g&&(q+=" AND ".concat(A,"=@A"),U+=" AND ".concat(N,"=@A")),X="(("+q+") OR ("+U+"))",X=(0,c.F)(X,"@T",x),q=(0,c.F)(q,"@T",x),null!==g&&(q=(0,c.F)(q,"@A",g.toString()),X=(0,c.F)(X,"@A",g.toString())),H.codefield=f.WhereClause.create("CASE WHEN "+q+" THEN ".concat(C," ELSE ").concat(L," END"),h.associations.getFieldsIndex()),(K=(0,c.a3)(l.C.findField(h.associations.fields,D))).name=j,K.alias=j,W=new l.v(K,f.WhereClause.create("CASE WHEN "+q+" THEN ".concat(D," ELSE ").concat(F," END"),h.associations.getFieldsIndex())),e.abrupt("break",67);case 59:X="".concat(F,"='").concat(x,"' AND ").concat(S," = 2"),null!==g&&(X+=" AND ".concat(A," = ")+g.toString()),H.codefield=C,X="( "+X+" )",W=new l.w(l.C.findField(h.associations.fields,D),j,j);case 60:return X="(".concat(D,"='").concat(x,"' AND ").concat(S," = 2)"),null!==g&&(X+=" AND ".concat(N," = ")+g.toString()),H.codefield=L,X="( "+X+" )",W=new l.w(l.C.findField(h.associations.fields,F),j,j),e.abrupt("break",67);case 62:return X="(".concat(F,"='").concat(x,"' AND ").concat(S," = 3)"),null!==g&&(X+=" AND ".concat(A," = ")+g.toString()),H.codefield=C,X="( "+X+" )",W=new l.w(l.C.findField(h.associations.fields,D),j,B),e.abrupt("break",67);case 64:return X="(".concat(D,"='").concat(x,"' AND ").concat(S," = 3)"),null!==g&&(X+=" AND ".concat(N," = ")+g.toString()),H.codefield=L,X="( "+X+" )",W=new l.w(l.C.findField(h.associations.fields,F),j,B),e.abrupt("break",67);case 66:throw new Error("Invalid Parameter");case 67:return v&&(X="1 <> 1"),e.abrupt("return",new l.C({parentfeatureset:h.associations,adaptedFields:[new l.d(l.C.findField(h.associations.fields,T)),new l.d(l.C.findField(h.associations.fields,Z)),W,P,H,M],extraFilter:X?f.WhereClause.create(X,h.associations.getFieldsIndex()):null}));case 69:case"end":return e.stop()}}),e,null,[[21,32,35,38]])})));return function(n,r,t){return e.apply(this,arguments)}}())},e.signatures.push({name:"featuresetbyassociation",min:"2",max:"6"}),e.functions.groupby=function(n,r){return e.standardFunctionAsync(n,r,function(){var r=(0,i.Z)((0,t.Z)().mark((function r(i,l,o){var d,p,b,m,h,x,g,v,w,k,E,I,F,D,A,N,C,L,S,Z,T,G,O,R,W,M,P,j,B,J,V,H,X,_,z,q,U,K;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,c.G)(o,3,3),(0,c.J)(o[0])){r.next=2;break}throw new Error("Illegal Value: GroupBy");case 2:return r.next=4,o[0].load();case 4:if(d=r.sent,p=[],b=[],m=!1,h=[],!(0,c.w)(o[1])){r.next=12;break}h.push(o[1]),r.next=23;break;case 12:if(!(o[1]instanceof s.d)){r.next=16;break}h.push(o[1]),r.next=23;break;case 16:if(!(0,c.L)(o[1])){r.next=20;break}h=o[1],r.next=23;break;case 20:if((0,c.E)(o[1])){r.next=22;break}throw new Error("Illegal Value: GroupBy");case 22:h=o[1].toArray();case 23:x=(0,a.Z)(h),r.prev=24,x.s();case 26:if((g=x.n()).done){r.next=41;break}if(v=g.value,!(0,c.w)(v)){r.next=33;break}w=f.WhereClause.create((0,c.X)(v),d.getFieldsIndex()),k=!0===(0,u.E)(w)?(0,c.X)(v):"%%%%FIELDNAME",p.push({name:k,expression:w}),"%%%%FIELDNAME"===k&&(m=!0),r.next=39;break;case 33:if(v instanceof s.d){r.next=35;break}throw new Error("Illegal Value: GroupBy");case 35:if(E=v.hasField("name")?v.field("name"):"%%%%FIELDNAME",I=v.hasField("expression")?v.field("expression"):"","%%%%FIELDNAME"===E&&(m=!0),E){r.next=38;break}throw new Error("Illegal Value: GroupBy");case 38:p.push({name:E,expression:f.WhereClause.create(I||E,d.getFieldsIndex())});case 39:r.next=26;break;case 41:r.next=46;break;case 43:r.prev=43,r.t0=r.catch(24),x.e(r.t0);case 46:return r.prev=46,x.f(),r.finish(46);case 49:if(h=[],!(0,c.w)(o[2])){r.next=53;break}h.push(o[2]),r.next=64;break;case 53:if(!(0,c.L)(o[2])){r.next=57;break}h=o[2],r.next=64;break;case 57:if(!(0,c.E)(o[2])){r.next=61;break}h=o[2].toArray(),r.next=64;break;case 61:if(o[2]instanceof s.d){r.next=63;break}throw new Error("Illegal Value: GroupBy");case 63:h.push(o[2]);case 64:F=(0,a.Z)(h),r.prev=65,F.s();case 67:if((D=F.n()).done){r.next=77;break}if((A=D.value)instanceof s.d){r.next=71;break}throw new Error("Illegal Value: GroupBy");case 71:if(N=A.hasField("name")?A.field("name"):"",C=A.hasField("statistic")?A.field("statistic"):"",L=A.hasField("expression")?A.field("expression"):"",N&&C&&L){r.next=74;break}throw new Error("Illegal Value: GroupBy");case 74:b.push({name:N,statistic:C.toLowerCase(),expression:f.WhereClause.create(L,d.getFieldsIndex())});case 75:r.next=67;break;case 77:r.next=82;break;case 79:r.prev=79,r.t1=r.catch(65),F.e(r.t1);case 82:return r.prev=82,F.f(),r.finish(82);case 85:if(m){S={},Z=(0,a.Z)(d.fields);try{for(Z.s();!(T=Z.n()).done;)G=T.value,S[G.name.toLowerCase()]=1}catch(t){Z.e(t)}finally{Z.f()}O=(0,a.Z)(p);try{for(O.s();!(R=O.n()).done;)"%%%%FIELDNAME"!==(W=R.value).name&&(S[W.name.toLowerCase()]=1)}catch(t){O.e(t)}finally{O.f()}M=(0,a.Z)(b);try{for(M.s();!(P=M.n()).done;)"%%%%FIELDNAME"!==(j=P.value).name&&(S[j.name.toLowerCase()]=1)}catch(t){M.e(t)}finally{M.f()}B=0,J=(0,a.Z)(p);try{for(J.s();!(V=J.n()).done;)if("%%%%FIELDNAME"===(H=V.value).name){for(;1===S["field_"+B.toString()];)B++;S["field_"+B.toString()]=1,H.name="FIELD_"+B.toString()}}catch(t){J.e(t)}finally{J.f()}}X=0,_=p;case 87:if(!(X<_.length)){r.next=94;break}return z=_[X],r.next=91,y(z.expression,e,n);case 91:X++,r.next=87;break;case 94:q=0,U=b;case 95:if(!(q<U.length)){r.next=102;break}return K=U[q],r.next=99,y(K.expression,e,n);case 99:q++,r.next=95;break;case 102:return r.abrupt("return",o[0].groupby(p,b));case 103:case"end":return r.stop()}}),r,null,[[24,43,46,49],[65,79,82,85]])})));return function(e,n,t){return r.apply(this,arguments)}}())},e.signatures.push({name:"groupby",min:"3",max:"3"}),e.functions.distinct=function(n,r){return e.standardFunctionAsync(n,r,function(){var r=(0,i.Z)((0,t.Z)().mark((function r(i,l,o){var d,p,m,h,x,g,v,w,k,E,I,F,D,A,N,C,L,S,Z,T,G,O,R,W,M;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,c.J)(o[0])){r.next=59;break}return(0,c.G)(o,2,2),r.next=4,o[0].load();case 4:if(d=r.sent,p=[],m=[],!(0,c.w)(o[1])){r.next=11;break}m.push(o[1]),r.next=22;break;case 11:if(!(o[1]instanceof s.d)){r.next=15;break}m.push(o[1]),r.next=22;break;case 15:if(!(0,c.L)(o[1])){r.next=19;break}m=o[1],r.next=22;break;case 19:if((0,c.E)(o[1])){r.next=21;break}throw new Error("Illegal Value: GroupBy");case 21:m=o[1].toArray();case 22:h=!1,x=(0,a.Z)(m),r.prev=24,x.s();case 26:if((g=x.n()).done){r.next=41;break}if(v=g.value,!(0,c.w)(v)){r.next=33;break}w=f.WhereClause.create((0,c.X)(v),d.getFieldsIndex()),k=!0===(0,u.E)(w)?(0,c.X)(v):"%%%%FIELDNAME",p.push({name:k,expression:w}),"%%%%FIELDNAME"===k&&(h=!0),r.next=39;break;case 33:if(v instanceof s.d){r.next=35;break}throw new Error("Illegal Value: GroupBy");case 35:if(E=v.hasField("name")?v.field("name"):"%%%%FIELDNAME",I=v.hasField("expression")?v.field("expression"):"","%%%%FIELDNAME"===E&&(h=!0),E){r.next=38;break}throw new Error("Illegal Value: GroupBy");case 38:p.push({name:E,expression:f.WhereClause.create(I||E,d.getFieldsIndex())});case 39:r.next=26;break;case 41:r.next=46;break;case 43:r.prev=43,r.t0=r.catch(24),x.e(r.t0);case 46:return r.prev=46,x.f(),r.finish(46);case 49:if(h){F={},D=(0,a.Z)(d.fields);try{for(D.s();!(A=D.n()).done;)N=A.value,F[N.name.toLowerCase()]=1}catch(t){D.e(t)}finally{D.f()}C=(0,a.Z)(p);try{for(C.s();!(L=C.n()).done;)"%%%%FIELDNAME"!==(S=L.value).name&&(F[S.name.toLowerCase()]=1)}catch(t){C.e(t)}finally{C.f()}Z=0,T=(0,a.Z)(p);try{for(T.s();!(G=T.n()).done;)if("%%%%FIELDNAME"===(O=G.value).name){for(;1===F["field_"+Z.toString()];)Z++;F["field_"+Z.toString()]=1,O.name="FIELD_"+Z.toString()}}catch(t){T.e(t)}finally{T.f()}}R=0,W=p;case 51:if(!(R<W.length)){r.next=58;break}return M=W[R],r.next=55,y(M.expression,e,n);case 55:R++,r.next=51;break;case 58:return r.abrupt("return",o[0].groupby(p,[]));case 59:return r.abrupt("return",b("distinct",0,0,o));case 60:case"end":return r.stop()}}),r,null,[[24,43,46,49]])})));return function(e,n,t){return r.apply(this,arguments)}}())})}}}]);
//# sourceMappingURL=5527.45742dfd.chunk.js.map