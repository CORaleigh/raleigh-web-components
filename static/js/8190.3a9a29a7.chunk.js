"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[8190],{28190:function(e,t,n){n.r(t),n.d(t,{FeatureCollectionSnappingSource:function(){return g}});var r=n(93433),a=n(74165),i=n(15861),o=n(15671),u=n(43144),c=n(60136),s=n(29388),l=n(48848),f=n(93661),p=n(50690),h=n(52638),d=n(21078),y=n(53731),v=n(52752),g=(n(15529),n(40558),n(40114),n(82474),n(59984),n(74384),n(46817),n(47855),n(93314),n(37856),n(15751),n(75016),n(65094),n(95249),n(71802),n(79557),n(75255),n(25456),n(65415),n(25747),n(20302),n(89794),n(48200),n(37944),n(86086),n(21385),n(85253),n(93209),n(46337),n(81556),n(93116),n(62610),n(17455),n(1500),n(56162),n(64998),n(25577),n(53586),n(60369),n(92072),n(59389),n(26313),n(37077),n(49228),n(41723),n(64772),n(91681),n(43955),n(76291),n(13239),n(24093),n(6189),n(17332),n(87750),n(20846),n(67430),n(87424),n(10464),n(1797),n(27205),n(93122),n(75833),n(57791),n(28390),n(42467),n(46737),n(52113),n(42667),n(61118),n(85113),n(23585),n(630),n(82396),n(32043),n(98598),n(19941),n(39994),n(49871),n(63212),n(69717),n(53409),n(35182),n(62466),n(51816),n(68781),n(69641),n(15436),n(35237),n(89181),n(69768),n(35865),n(51219),n(66577),n(95643),n(33795),n(43976),n(6762),n(2959),n(2821),n(33794),n(71147),n(84186),n(70449),n(22603),n(56546),n(39926),n(8141),n(26151),n(90429),n(52559),n(95399),n(98987),n(99795),n(87753),n(29130),n(1685),n(12953),n(74797),n(45999),n(72973),n(62710),n(52721),n(61903),n(23444),n(40811),n(51920),n(63393),n(90442),n(64854),n(24623),n(64264),n(6379),n(21015),n(23341),n(41820),n(20086),n(92982),n(61416),n(77880),n(74494),n(77755),n(71645),n(89311),n(67066),n(39769),n(70607),n(85700),n(3719),n(32161),n(37686),n(16641),n(62642),n(90316),n(19891),n(47748),n(70522),n(43066),n(29048),n(68136),n(50253),n(16263),n(3356),n(70381),n(20675),n(85026),n(33973),n(42233),n(70288),n(95414),n(43345),n(31698),n(94777),n(4937),n(87440),n(21744),n(18936),n(4397),n(25217),n(43406),n(45184),n(72361),n(22159),n(73911),n(87917),n(46018),n(70863),n(62312),n(24648),n(63999),n(5526),n(2473),n(59929),n(2467),n(75257),n(26789),n(64095),n(51732),n(2851),n(70285),n(52102),n(8586),n(82509),n(42947),n(92251),n(91386),n(18668),n(15132),n(2352),n(62470),n(54622),n(73679),n(62753),n(83948),n(94663),n(40345),n(66633),n(43486),function(e){(0,c.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).view=null,r._layerView3D=null,r}return(0,u.Z)(n,[{key:"availability",get:function(){return 1}},{key:"updating",get:function(){return this.layerSource.updating}},{key:"_snappingElevationAligner",get:function(){var e=this.view,t=this.layerSource.layer,n=(0,f.r)(e)&&"3d"===e.type;if(!n||"subtype-group"===t.type)return(0,v.r)();var r=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(r,i){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.Y)(e.whenLayerView(t),i);case 2:return n.abrupt("return",n.sent.elevationAlignPointsInFeatures(r,i));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,v.r)(n,{elevationInfo:t.elevationInfo,alignPointsInFeatures:r,spatialReference:e.spatialReference})}},{key:"_snappingElevationFilter",get:function(){var e=this.view,t=(0,f.r)(e)&&"3d"===e.type&&"subtype-group"!==this.layerSource.layer.type;return(0,v.a)(t)}},{key:"_symbologySnappingFetcher",get:function(){var e=this.view,t=this.layerSource.layer;return(0,f.r)(e)&&"3d"===e.type&&"subtype-group"!==t.type?(0,v.n)(this._symbologySnappingSupported,function(){var n=(0,i.Z)((0,a.Z)().mark((function n(r,i){var o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.whenLayerView(t);case 2:return o=n.sent,n.abrupt("return",((0,l.f)(i),o.queryForSymbologySnapping({candidates:r,spatialReference:e.spatialReference},i)));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()):(0,v.n)()}},{key:"_symbologySnappingSupported",get:function(){return(0,f.r)(this._layerView3D)&&this._layerView3D.symbologySnappingSupported}},{key:"initialize",value:function(){var e=this,t=this.view,n=this.layerSource.layer;(0,f.r)(t)&&"3d"===t.type&&"subtype-group"!==n.type&&(t.whenLayerView(n).then((function(t){return e._layerView3D=t})),this.addHandles([t.elevationProvider.on("elevation-change",(function(t){var r=t.context,a=n.elevationInfo;(0,h.y)(r,a)&&e._snappingElevationAligner.notifyElevationSourceChange()})),(0,p.l)((function(){return n.elevationInfo}),(function(){return e._snappingElevationAligner.notifyElevationSourceChange()}),p.h),(0,p.l)((function(){var t;return(0,f.r)(e._layerView3D)?null===(t=e._layerView3D.processor)||void 0===t?void 0:t.renderer:null}),(function(){return e._symbologySnappingFetcher.notifySymbologyChange()}),p.h)]))}},{key:"refresh",value:function(){}},{key:"fetchCandidates",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n){var i,o,u,c,s,f,p,v,g,Z,_,w,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.layerSource.layer,o=t.coordinateHelper,u=t.elevationInfo,(c=i.source).querySnapping){e.next=3;break}return e.abrupt("return",[]);case 3:return s=(0,d.m)(i),f=(0,d.h)(t,s),e.next=7,c.querySnapping(f,{signal:n});case 7:return p=e.sent,(0,l.f)(n),e.next=11,this._snappingElevationAligner.alignCandidates(p.candidates,n);case 11:return v=e.sent,(0,l.f)(n),e.next=15,this._symbologySnappingFetcher.fetch(v,n);case 15:return g=e.sent,(0,l.f)(n),Z=0===g.length?v:[].concat((0,r.Z)(v),(0,r.Z)(g)),_=this._snappingElevationFilter.filter(f,Z),w=o.hasZ()?h.E:u,b=this._getGroundElevation,e.abrupt("return",_.map((function(e){return(0,y.r)(e,o,w,b)})));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getGroundElevation",get:function(){return(0,y.a)(this.view)}}]),n}(l.m));(0,l.e)([(0,l.y)({constructOnly:!0})],g.prototype,"layerSource",void 0),(0,l.e)([(0,l.y)({constructOnly:!0})],g.prototype,"view",void 0),(0,l.e)([(0,l.y)()],g.prototype,"_snappingElevationAligner",null),(0,l.e)([(0,l.y)()],g.prototype,"_snappingElevationFilter",null),(0,l.e)([(0,l.y)()],g.prototype,"_symbologySnappingFetcher",null),(0,l.e)([(0,l.y)()],g.prototype,"_layerView3D",void 0),(0,l.e)([(0,l.y)()],g.prototype,"_symbologySnappingSupported",null),(0,l.e)([(0,l.y)()],g.prototype,"_getGroundElevation",null),g=(0,l.e)([(0,l.n)("esri.views.interactive.snapping.featureSources.FeatureCollectionSnappingSource")],g)},43486:function(e,t,n){n.d(t,{o:function(){return s}});var r=n(1413),a=n(15671),i=n(43144),o=n(60136),u=n(29388),c=n(21078),s=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){return(0,a.Z)(this,n),t.call(this,(0,r.Z)((0,r.Z)({},e),{},{constraint:new c.j(e.coordinateHelper,e.targetPoint)}))}return(0,i.Z)(n,[{key:"hints",get:function(){return[new c.a(this.targetPoint,this.elevationInfo,this.domain)]}}]),n}(c.n)},53731:function(e,t,n){n.d(t,{a:function(){return h},r:function(){return p}});var r=n(1413),a=n(15671),i=n(43144),o=n(60136),u=n(29388),c=n(93661),s=n(21078),l=n(43486),f=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){return(0,a.Z)(this,n),t.call(this,(0,r.Z)((0,r.Z)({},e),{},{constraint:new s.N(e.coordinateHelper,e.edgeStart,e.edgeEnd,e.getGroundElevation)}))}return(0,i.Z)(n,[{key:"hints",get:function(){return[new s.s(s.l.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo,this.domain)]}}]),n}(s.n);function p(e,t,n,r){switch(e.type){case"edge":return e.draped?new f({coordinateHelper:t,edgeStart:t.pointToVector(e.start),edgeEnd:t.pointToVector(e.end),targetPoint:t.pointToVector(e.target),objectId:e.objectId,getGroundElevation:r,elevationInfo:n}):new s.e({coordinateHelper:t,edgeStart:t.pointToVector(e.start),edgeEnd:t.pointToVector(e.end),targetPoint:t.pointToVector(e.target),objectId:e.objectId,elevationInfo:n});case"vertex":return new l.o({coordinateHelper:t,targetPoint:t.pointToVector(e.target),objectId:e.objectId,elevationInfo:n})}}function h(e){return(0,c.r)(e)&&"3d"===e.type?function(t,n,r){return e.elevationProvider.getElevation(t,n,r,e.spatialReference,"ground")}:function(){return null}}},52752:function(e,t,n){n.d(t,{a:function(){return x},n:function(){return I},r:function(){return d}});var r=n(29439),a=n(37762),i=n(74165),o=n(15861),u=n(15671),c=n(43144),s=n(93661),l=n(39926),f=n(48848),p=n(47855),h=n(15529);function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(e){var n=t.elevationInfo,r=t.alignPointsInFeatures,a=t.spatialReference;return new v(n,r,a)}return new y}var y=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"alignCandidates",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"notifyElevationSourceChange",value:function(){}}]),e}(),v=function(){function e(t,n,r){(0,u.Z)(this,e),this._elevationInfo=t,this._alignPointsInFeatures=n,this.spatialReference=r,this._alignmentsCache=new l.e(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,p.L)(r)}return(0,c.Z)(e,[{key:"alignCandidates",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._elevationInfo,e.abrupt("return",(0,s.r)(r)&&"absolute-height"===r.mode&&!r.featureExpressionInfo?(this._alignAbsoluteElevationCandidates(t,r),t):this._alignComputedElevationCandidates(t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"notifyElevationSourceChange",value:function(){this._alignmentsCache.clear(),this._cacheVersion++}},{key:"_alignAbsoluteElevationCandidates",value:function(e,t){var n=t.offset,r=t.unit;if(!(0,s.t)(n)){var i,o=n*((0,h.r)(null!==r&&void 0!==r?r:"meters")/this._metersPerVerticalUnit),u=(0,a.Z)(e);try{for(u.s();!(i=u.n()).done;){var c=i.value;switch(c.type){case"edge":c.start.z+=o,c.end.z+=o;continue;case"vertex":c.target.z+=o;continue}}}catch(l){u.e(l)}finally{u.f()}}}},{key:"_alignComputedElevationCandidates",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var o,u,c,s,l,p,h,d,y,v,g,Z,w,b,k,x,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Map,u=(0,a.Z)(t);try{for(u.s();!(c=u.n()).done;)s=c.value,(0,f.am)(o,s.objectId,_).push(s)}catch(i){u.e(i)}finally{u.f()}return l=this._prepareQuery(o),p=(0,r.Z)(l,3),h=p[0],d=p[1],y=p[2],e.next=10,this._alignPointsInFeatures(h,n);case 10:if(v=e.sent,(0,f.f)(n),y===this._cacheVersion){e.next=14;break}return e.abrupt("return",this._alignComputedElevationCandidates(t,n));case 14:this._applyCacheAndResponse(h,v,d),g=v.drapedObjectIds,Z=v.failedObjectIds,w=[],b=(0,a.Z)(t);try{for(b.s();!(k=b.n()).done;)x=k.value,m=x.objectId,g.has(m)&&"edge"===x.type&&(x.draped=!0),Z.has(m)||w.push(x)}catch(i){b.e(i)}finally{b.f()}return e.abrupt("return",w);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_prepareQuery",value:function(e){var t,n=[],i=[],o=(0,a.Z)(e);try{for(o.s();!(t=o.n()).done;){var u,c=(0,r.Z)(t.value,2),s=c[0],l=c[1],f=[],p=(0,a.Z)(l);try{for(p.s();!(u=p.n()).done;){var h=u.value;this._addToQueriesOrCachedResult(s,h.target,f,i),"edge"===h.type&&(this._addToQueriesOrCachedResult(s,h.start,f,i),this._addToQueriesOrCachedResult(s,h.end,f,i))}}catch(d){p.e(d)}finally{p.f()}0!==f.length&&n.push({objectId:s,points:f})}}catch(d){o.e(d)}finally{o.f()}return[n,i,this._cacheVersion]}},{key:"_addToQueriesOrCachedResult",value:function(e,t,n,r){var a=Z(e,t),i=this._alignmentsCache.get(a);(0,s.r)(i)?r.push(new g(t,i)):n.push(t)}},{key:"_applyCacheAndResponse",value:function(e,t,n){var r,i=t.elevations,o=t.drapedObjectIds,u=t.failedObjectIds,c=(0,a.Z)(n);try{for(c.s();!(r=c.n()).done;){r.value.apply()}}catch(x){c.e(x)}finally{c.f()}var s,l=0,f=this._alignmentsCache,p=(0,a.Z)(e);try{for(p.s();!(s=p.n()).done;){var h=s.value,d=h.objectId,y=h.points;if(u.has(d))l+=y.length;else{var v,g=!o.has(d),_=(0,a.Z)(y);try{for(_.s();!(v=_.n()).done;){var w=v.value,b=Z(d,w),k=i[l++];w.z=k,g&&f.put(b,k,1)}}catch(x){_.e(x)}finally{_.f()}}}}catch(x){p.e(x)}finally{p.f()}}}]),e}(),g=function(){function e(t,n){(0,u.Z)(this,e),this.point=t,this.z=n}return(0,c.Z)(e,[{key:"apply",value:function(){this.point.z=this.z}}]),e}();function Z(e,t){var n=t.x,r=t.y,a=t.z;return"".concat(e,"-").concat(n,"-").concat(r,"-").concat(null!==a&&void 0!==a?a:0,"}")}function _(){return[]}var w=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"filter",value:function(e,t){return t}},{key:"notifyElevationSourceChange",value:function(){}}]),e}(),b=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"filter",value:function(e,t){var n=e.point,r=e.distance;if(null==n.z)return t;if(0===t.length)return t;var a=function(e){return"number"==typeof e?{x:e,y:e,z:e}:e}(r),i=this._updateCandidatesTo3D(t,n,a).filter(k);return i.sort(S),i}},{key:"_updateCandidatesTo3D",value:function(e,t,n){var r,i=(0,a.Z)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;switch(o.type){case"edge":m(o,t,n);continue;case"vertex":C(o,t,n);continue}}}catch(u){i.e(u)}finally{i.f()}return e}}]),e}();function k(e){return e.distance<=1}function x(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?new b:new w}function m(e,t,n){var r=n.x,a=n.y,i=n.z,o=e.start,u=e.end,c=e.target;e.draped||function(e,t,n,r){var a=r.x-n.x,i=r.y-n.y,o=r.z-n.z,u=a*a+i*i+o*o,c=(t.x-n.x)*a+(t.y-n.y)*i+o*(t.z-n.z),s=Math.min(1,Math.max(0,c/u)),l=n.x+a*s,f=n.y+i*s,p=n.z+o*s;e.x=l,e.y=f,e.z=p}(c,t,o,u);var s=(t.x-c.x)/r,l=(t.y-c.y)/a,f=(t.z-c.z)/i;e.distance=Math.sqrt(s*s+l*l+f*f)}function C(e,t,n){var r=n.x,a=n.y,i=n.z,o=e.target,u=(t.x-o.x)/r,c=(t.y-o.y)/a,s=(t.z-o.z)/i,l=Math.sqrt(u*u+c*c+s*s);e.distance=l}function S(e,t){return e.distance-t.distance}function I(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e?new V(t):new E}var E=function(){function e(){(0,u.Z)(this,e)}return(0,c.Z)(e,[{key:"fetch",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"notifySymbologyChange",value:function(){}}]),e}(),V=function(){function e(t){(0,u.Z)(this,e),this._getSymbologyCandidates=t,this._candidatesCache=new l.e(1024),this._cacheVersion=0}return(0,c.Z)(e,[{key:"fetch",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o,u,c,l,p,h,d,y,v,g,Z,_,w,b,k,x,m,C,S,I;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:r=[],o=[],u=this._candidatesCache,c=(0,a.Z)(t);try{for(c.s();!(l=c.n()).done;)if(p=l.value,h=z(p),d=u.get(h)){y=(0,a.Z)(d);try{for(y.s();!(v=y.n()).done;)g=v.value,o.push((0,s.y)(g))}catch(i){y.e(i)}finally{y.f()}}else r.push(p),u.put(h,[],1)}catch(i){c.e(i)}finally{c.f()}if(0!==r.length){e.next=7;break}return e.abrupt("return",o);case 7:return Z=this._cacheVersion,e.next=10,this._getSymbologyCandidates(r,n);case 10:if(_=e.sent,w=_.candidates,b=_.sourceCandidateIndices,(0,f.f)(n),Z===this._cacheVersion){e.next=16;break}return e.abrupt("return",this.fetch(t,n));case 16:for(k=[],x=w.length,m=0;m<x;++m)C=w[m],S=z(r[b[m]]),(I=u.get(S)).push(C),u.put(S,I,I.length),k.push((0,s.y)(C));return e.abrupt("return",o.concat(k));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"notifySymbologyChange",value:function(){this._candidatesCache.clear(),this._cacheVersion++}}]),e}();function z(e){switch(e.type){case"vertex":var t,n=e.objectId,r=e.target,a="".concat(n,"-vertex-").concat(r.x,"-").concat(r.y,"-").concat(null!==(t=r.z)&&void 0!==t?t:0);return(0,f.a3)(a).toString();case"edge":var i,o,u=e.objectId,c=e.start,s=e.end,l="".concat(u,"-edge-").concat(c.x,"-").concat(c.y,"-").concat(null!==(i=c.z)&&void 0!==i?i:0,"-to-").concat(s.x,"-").concat(s.y,"-").concat(null!==(o=s.z)&&void 0!==o?o:0);return(0,f.a3)(l).toString();default:return""}}}}]);
//# sourceMappingURL=8190.3a9a29a7.chunk.js.map