"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[8987],{98987:function(e,t,r){r.r(t);var n=r(1413),i=r(11752),a=r(61120),o=r(74165),u=r(37762),s=r(15861),l=r(15671),c=r(43144),p=r(60136),d=r(29388),y=r(48848),f=r(25577),h=r(2821),v=r(2959),m=r(40558),b=r(37944),g=r(62610),w=r(93314),k=r(93661),Z=r(99795),F=r(87753),_=r(82474),S=r(29130),x=r(45999),T=r(74384),I=r(64998),E=r(630),D=r(93116),j=r(65094),O=r(85113),q=r(72973),C=r(51816),M=r(68781),L=r(46817),P=r(62710),R=r(52721),G=r(61903),N=r(23444),J=r(40811),A=r(51920),V=r(24623),Q=r(64264),W=r(6379),z=r(23341),B=r(41820),U=r(20086),K=r(1685),H=r(12953),X=r(61416),Y=r(77880),$=r(74494),ee=r(59984),te=r(63393),re=r(92982),ne=r(71645),ie=r(35237),ae=r(89311),oe=r(95399),ue=r(67066),se=r(85253),le=(r(40114),r(20302),r(53586),r(60369),r(92072),r(66577),r(89794),r(48200),r(71802),r(50690),r(33794),r(71147),r(84186),r(15529),r(47855),r(70449),r(21385),r(46337),r(22603),r(56546),r(39926),r(6762),r(86086),r(8141),r(26151),r(91681),r(93209),r(25456),r(81556),r(37856),r(15751),r(69641),r(15436),r(82396),r(35865),r(74797),r(56162),r(75255),r(46737),r(52113),r(65415),r(33795),r(79557),r(89181),r(59389),r(21015),r(77755),r(90442),r(64854),r(69768),0),ce="esri.layers.graphics.sources.MemorySource",pe=y.a.getLogger(ce),de=function(e){(0,p.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,l.Z)(this,r),(n=t.call(this,e))._idToClientGraphic=null,n.type="memory",n}return(0,c.Z)(r,[{key:"load",value:function(e){var t=(0,k.r)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null!==(e=this._connection)&&void 0!==e&&e.close(),this._connection=null}},{key:"_workerGeometryType",get:function(){var e,t=null===(e=this.layer)||void 0===e?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r,n,i,a,s,l,c,p,d,y=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(n=e.sent,(0,C.r)(t,this.layer.spatialReference,n),i=M.default.fromJSON(n),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",i);case 10:a=this.layer.objectIdField,s=(0,u.Z)(i.features);try{for(s.s();!(l=s.n()).done;)c=l.value,p=c.attributes[a],(d=this._idToClientGraphic.get(p))&&(c.geometry=d.geometry)}catch(o){s.e(o)}finally{s.f()}return e.abrupt("return",(i.geometryType=this.layer.geometryType,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r,n,i=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new y.s("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return n=e.sent,e.abrupt("return",((0,C.r)(t,this.layer.spatialReference,n),n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:L.w.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("querySnapping",e,r)}))}},{key:"_applyEdits",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r,n,i,a,s,l,c,p,d,f,h,v,m,b,g,w,k;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connection){e.next=2;break}throw new y.s("feature-layer-source:edit-failure","Memory source not loaded");case 2:return r=this.layer.objectIdField,n=null,i=[],a=[],e.next=7,Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);case 7:if(s=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null},t.addFeatures&&(n=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures){l=(0,u.Z)(t.deleteFeatures);try{for(l.s();!(c=l.n()).done;)p=c.value,null!=(d=s(p))&&i.push(d)}catch(o){l.e(o)}finally{l.f()}}if(f=t.updateFeatures&&this._idToClientGraphic?new Map:null,t.updateFeatures){h=(0,u.Z)(t.updateFeatures);try{for(h.s();!(v=h.n()).done;)m=v.value,a.push(this._serializeFeature(m)),f&&null!=(b=s(m))&&f.set(b,m)}catch(o){h.e(o)}finally{h.f()}}return(0,q.i)(n?n.features:null,a,this.layer.spatialReference),e.next=14,this._connection.invoke("applyEdits",{adds:n?n.features:[],updates:a,deletes:i});case 14:return g=e.sent,w=g.fullExtent,k=g.featureEditResults,e.abrupt("return",(this.fullExtent=w,n&&n.finish(k.uidToObjectId),this._updateClientGraphicIds(f,k),this._createEditsResult(k)));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareClientMapping",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mesh"===this._layerOrSourceGeometryType&&!(0,k.t)(t)){e.next=2;break}return e.abrupt("return");case 2:n=[],i=(0,u.Z)(t);try{for(i.s();!(a=i.n()).done;)s=a.value.geometry,!(0,k.r)(s)||"mesh"!==s.type||s.hasExtent||s.loaded||n.push(s.load({signal:r}))}catch(o){i.e(o)}finally{i.f()}if(e.t0=n.length,!e.t0){e.next=9;break}return e.next=9,Promise.all(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateClientGraphicIds",value:function(e,t){if(this._idToClientGraphic){if(e){var r,n=(0,u.Z)(t.updateResults);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(i.success){var a=e.get(i.objectId);null!=a&&this._addIdToClientGraphic(a)}}}catch(c){n.e(c)}finally{n.f()}}var o,s=(0,u.Z)(t.deleteResults);try{for(s.s();!(o=s.n()).done;){var l=o.value;l.success&&this._idToClientGraphic.delete(l.objectId)}}catch(c){s.e(c)}finally{s.f()}}}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new y.s("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),n=null,i=0;i<e.length;i++){var a=e[i],o=this._serializeFeature(a);!n&&(0,k.r)(a.geometry)&&(n=a.geometry.type),r[i]=o,t.set("".concat(o.uid),a)}var u=this;return{features:r,inferredGeometryType:n,finish:function(e){var r=u.sourceJSON.objectIdField;for(var n in e){var i=e[n],a=t.get(n);a&&(a.attributes||(a.attributes={}),-1===i?delete a.attributes[r]:a.attributes[r]=i,u._addIdToClientGraphic(a))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"_layerOrSourceGeometryType",get:function(){var e,t,r;return null!==(e=null===(t=this.layer)||void 0===t?void 0:t.geometryType)&&void 0!==e?e:null===(r=this.sourceJSON)||void 0===r?void 0:r.geometryType}},{key:"_requiresClientGraphicMapping",value:function(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),n=(le++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:t}:{uid:n,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return(0,k.t)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?T.v.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r,n,i,a,s,l,c,p,d,y,f,h,v,m,b;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.u)("MemorySourceWorker",{strategy:(0,k.h)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,n=r.fields,i=r.spatialReference,a=r.objectIdField,s=r.hasM,l=r.hasZ,c=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),e.next=6,this._prepareClientMapping(this.items,t);case 6:return d=this._prepareAddFeatures(this.items),this.handles.add(this.on("before-changes",(function(e){pe.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()}))),y={features:d.features,fields:n&&n.map((function(e){return e.toJSON()})),geometryType:T.t.toJSON(this._workerGeometryType),hasM:"mesh"!==this._layerOrSourceGeometryType&&s,hasZ:"mesh"===this._layerOrSourceGeometryType||l,objectIdField:a,spatialReference:p?null:i&&i.toJSON(),timeInfo:c?c.toJSON():null},e.next=11,this._connection.invoke("load",y,{signal:t});case 11:f=e.sent,h=(0,u.Z)(f.warnings);try{for(h.s();!(v=h.n()).done;)m=v.value,pe.warn(m.message,{layer:this.layer,warning:m})}catch(o){h.e(o)}finally{h.f()}f.featureErrors.length&&pe.warn("Encountered ".concat(f.featureErrors.length," validation errors while loading features"),f.featureErrors),b=f.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(b.geometryType=T.t.toJSON(d.inferredGeometryType)),this.sourceJSON=b,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),d.finish(f.assignedObjectIds);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(D.m.LoadableMixin((0,j.m)((0,E.a)(w.j))));(0,y.e)([(0,w.n)({Type:I.g,ensureType:(0,y.b)(I.g)})],de.prototype,"itemType",void 0),(0,y.e)([(0,y.y)()],de.prototype,"type",void 0),(0,y.e)([(0,y.y)({constructOnly:!0})],de.prototype,"layer",void 0),(0,y.e)([(0,y.y)({readOnly:!0})],de.prototype,"_workerGeometryType",null),(0,y.e)([(0,y.y)()],de.prototype,"sourceJSON",void 0),de=(0,y.e)([(0,y.n)(ce)],de);var ye=function(e){(0,p.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,l.Z)(this,r),(e=t.apply(this,arguments)).updating=!1,e.status="unknown",e}return(0,c.Z)(r)}(y.m);(0,y.e)([(0,y.y)()],ye.prototype,"updating",void 0),(0,y.e)([(0,y.y)()],ye.prototype,"status",void 0);var fe=ye=(0,y.e)([(0,y.n)("esri.layers.support.PublishingInfo")],ye),he="FeatureLayer",ve="esri.layers.FeatureLayer",me=y.a.getLogger(ve);function be(e,t){return new y.s("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}function ge(e){return e&&e instanceof w.j}var we=(0,$.s)();function ke(e,t,r){var n=!(null===r||void 0===r||!r.writeLayerSchema);return{enabled:n,ignoreOrigin:n}}var Ze=function(e){(0,p.Z)(f,e);var t=(0,d.Z)(f);function f(){var e;(0,l.Z)(this,f);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n)))._handles=new y.X,e.charts=null,e.copyright=null,e.displayField=null,e.dynamicDataSource=null,e.fields=null,e.fieldsIndex=null,e.formTemplate=null,e.fullExtent=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.infoFor3D=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.screenSizePerspectiveEnabled=!0,e.spatialReference=_.k.WGS84,e.subtypeCode=null,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.type="feature",e.typeIdField=null,e.types=null,e.visible=!0,e}return(0,c.Z)(f,[{key:"destroy",value:function(){var e;null!==(e=this.source)&&void 0!==e&&e.destroy(),this._handles=(0,k.g)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,n.Z)({url:e},t):e}},{key:"load",value:function(e){var t,r=this,n=(0,k.r)(e)?e.signal:null;if(null!==(t=this.portalItem)&&void 0!==t&&t.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(n).then((function(e){return r.initLayerProperties(e)}))),Promise.resolve(this);var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(y.w).then((0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.url||null!=r.layerId||!/FeatureServer|MapServer\/*$/i.test(r.url)){e.next=5;break}return e.next=3,r._fetchFirstLayerId(n);case 3:null!=(t=e.sent)&&(r.layerId=t);case 5:if(r.url||r._hasMemorySource()){e.next=7;break}throw new y.s("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=r,e.next=10,r.createGraphicsSource(n);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)})))).then((function(){return r.finishLoadEditablePortalLayer(e)}));return this.addResolvingPromise(i),Promise.resolve(this)}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,(0,S.h)(e,t,this.url)}},{key:"createQueryVersion",get:function(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}},{key:"editingEnabled",get:function(){var e;return!(this.loaded&&(null===(e=this.capabilities)||void 0===e||!e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)},set:function(e){this._overrideIfSome("editingEnabled",e)}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,n){this._writeEditingEnabled(e,t,!0,n)}},{key:"readIsTable",value:function(e,t){var r,n;return"Table"===(t=null!==(r=null===(n=t)||void 0===n?void 0:n.layerDefinition)&&void 0!==r?r:t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,n){(null===n||void 0===n?void 0:n.writeLayerSchema)&&(0,k.o)(r,e?"Table":"Feature Layer",t)}},{key:"readGlobalIdField",value:function(e,t){return(0,S.z)(t.layerDefinition||t)}},{key:"readObjectIdField",value:function(e,t){return(0,S.U)(t.layerDefinition||t)}},{key:"parsedUrl",get:function(){var e=(0,m.j)(this.url);return null!=e&&(null!=this.dynamicDataSource?e.path=(0,m.G)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=(0,m.G)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){(0,ee.F)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n,i=null===(n=(t=t.layerDefinition||t).drawingInfo)||void 0===n?void 0:n.renderer;if(i){var a,o=null!==(a=(0,v.o)(i,t,r))&&void 0!==a?a:void 0;return o||me.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),o}if(t.defaultSymbol)return t.types&&t.types.length?new h.C({defaultSymbol:Fe(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:Fe(e.symbol,e,r)}}))}):new v.p({symbol:Fe(t.defaultSymbol,t,r)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(ge(t)&&this._resetMemorySource(t),ge(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof w.j?new de({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r,n=M.default.fromJSON(t.featureSet);return new de({layer:this,items:null!==(r=null===n||void 0===n?void 0:n.features)&&void 0!==r?r:[]})}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,n=r&&r.creatorField,i=r&&r.editorField;return e=e&&e.map((function(e){return X.p.fromJSON(e)})),this._fixTemplates(e,n),this._fixTemplates(e,i),e}},{key:"readTitle",value:function(e,t){var r,n,i=null!==(r=null===(n=t.layerDefinition)||void 0===n?void 0:n.name)&&void 0!==r?r:t.name,a=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){var o=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,K.y)(this.url,i):i;var u=i;if(!u&&this.url){var s=(0,K.m)(this.url);(0,k.r)(s)&&(u=s.title)}if(!u)return;return"item-title-and-service-name"===this.sublayerTitleMode&&o&&o!==u&&(u=o+" - "+u),(0,K.h)(u)}if("item-title"===this.sublayerTitleMode&&a)return a}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var n=t.fields.find((function(e){return e.name.toLowerCase()===r}));n&&(r=n.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var n=t.editFieldsInfo,i=n&&n.creatorField,a=n&&n.editorField;return e&&e.map((function(e){return e=Y.n.fromJSON(e),r._fixTemplates(e.templates,i),r._fixTemplates(e.templates,a),e}))}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.F)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.x)(this,t,r,n,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.P)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,i.Z)((0,a.Z)(f.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return(0,ue.p)(this,e)}},{key:"createGraphicsSource",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()||!this.source){e.next=2;break}return e.abrupt("return",this.source.load({signal:t}));case 2:return e.next=4,(0,y.Y)(Promise.all([r.e(2559),r.e(9871),r.e(9142)]).then(r.bind(r,29142)),t);case 4:return n=e.sent,i=n.default,e.abrupt("return",new i({layer:this}).load({signal:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=(0,S.L)(this);e.dynamicDataSource=this.dynamicDataSource;var t=(0,k.r)(this.subtypeCode)?"".concat(this.subtypeField," = ").concat(this.subtypeCode):null,r=(0,F.t)(this.definitionExpression,t);return e.where=r||"1=1",e}},{key:"deleteAttachments",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.O)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.v)(this,t,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var i=null;return null!==r&&void 0!==r&&r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.E)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,s,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return i=e.sent,e.next=5,i.source.queryFeatures(null!==(n=ie.x.from(t))&&void 0!==n?n:i.createQuery(),r);case 5:if(null!==(a=e.sent)&&void 0!==a&&a.features){s=(0,u.Z)(a.features);try{for(s.s();!(l=s.n()).done;)(c=l.value).layer=c.sourceLayer=i}catch(o){s.e(o)}finally{s.f()}}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.I)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.T)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.j)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.a)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.D)(this,t,r,he));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeatures",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,s,l,c,p,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(i=e.sent,a=i.source,s=i.capabilities,a.queryTopFeatures&&null!==s&&void 0!==s&&null!==(n=s.query)&&void 0!==n&&n.supportsTopFeaturesQuery){e.next=7;break}throw new y.s(he,"Layer source does not support queryTopFeatures capability");case 7:return e.next=9,a.queryTopFeatures(oe.v.from(t),r);case 9:if(null!==(l=e.sent)&&void 0!==l&&l.features){c=(0,u.Z)(l.features);try{for(c.s();!(p=c.n()).done;)(d=p.value).layer=d.sourceLayer=this}catch(o){c.e(o)}finally{c.f()}}return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopObjectIds",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){var n,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(n=e.sent,i=n.source,a=n.capabilities,i.queryTopObjectIds&&null!==a&&void 0!==a&&a.query.supportsTopFeaturesQuery){e.next=7;break}throw new y.s(he,"Layer source does not support queryTopObjectIds capability");case 7:return e.abrupt("return",i.queryTopObjectIds(oe.v.from(t),r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeaturesExtent",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(i=e.sent,a=i.source,u=i.capabilities,a.queryTopExtents&&null!==u&&void 0!==u&&null!==(n=u.query)&&void 0!==n&&n.supportsTopFeaturesQuery){e.next=7;break}throw new y.s(he,"Layer source does not support queryTopExtents capability");case 7:return e.abrupt("return",a.queryTopExtents(oe.v.from(t),r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeatureCount",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(i=e.sent,a=i.source,u=i.capabilities,a.queryTopCount&&null!==u&&void 0!==u&&null!==(n=u.query)&&void 0!==n&&n.supportsTopFeaturesQuery){e.next=7;break}throw new y.s(he,"Layer source does not support queryFeatureCount capability");case 7:return e.abrupt("return",a.queryTopCount(oe.v.from(t),r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var n=r.layers;n&&1===n.length&&((0,i.Z)((0,a.Z)(f.prototype),"read",this).call(this,n[0],t),null!=r.showLegend&&(0,i.Z)((0,a.Z)(f.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}(0,i.Z)((0,a.Z)(f.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var r,o,u,s,l=t=(0,n.Z)((0,n.Z)({},t),{},{origin:null!==(r=null===(o=t)||void 0===o?void 0:o.origin)&&void 0!==r?r:void 0,writeLayerSchema:null!==(u=null===(s=t)||void 0===s?void 0:s.writeLayerSchema)&&void 0!==u?u:this._hasMemorySource()}),c=l.origin,p=l.layerContainerType,d=l.messages;if(this.dynamicDataSource)return null!==d&&void 0!==d&&d.push(be(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if("web-scene"===c||"web-map"===c&&"tables"!==p)return null!==d&&void 0!==d&&d.push(be(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return null!==d&&void 0!==d&&d.push(be(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===c&&"tables"===p)return null!==d&&void 0!==d&&d.push(be(this,"using a non-table source cannot be written to tables in web maps")),null;return(0,i.Z)((0,a.Z)(f.prototype),"write",this).call(this,e,t)}},{key:"clone",value:function(){if(this._hasMemorySource())throw new y.s(he,"FeatureLayer (title: ".concat(this.title,", id: ").concat(this.id,") created using in-memory source cannot be cloned"));return(0,i.Z)((0,a.Z)(f.prototype),"clone",this).call(this)}},{key:"serviceSupportsSpatialReference",value:function(e){var t;return!!this.loaded&&("memory"===(null===(t=this.source)||void 0===t?void 0:t.type)||(0,ne.e)(this,e))}},{key:"save",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(5249),r.e(6555)]).then(r.bind(r,76555));case 2:return e.abrupt("return",e.sent.save(this,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(5249),r.e(6555)]).then(r.bind(r,76555));case 2:return e.abrupt("return",e.sent.saveAs(this,t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_readEditingEnabled",value:function(e,t,r){var n,i=null===(n=e.layerDefinition)||void 0===n?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&"web-map"===(null===r||void 0===r?void 0:r.origin)&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,n){if(!e){var i,a,o=null!==(i=this.capabilities)&&void 0!==i&&null!==(a=i.operations)&&void 0!==a&&a.supportsSync?"Query,Sync":"Query";(0,k.o)("layerDefinition.capabilities",o,t),r&&(null===n||void 0===n||!n.writeLayerSchema)&&(t.capabilities=o)}}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return(0,m.U)(this.url,{query:(0,n.Z)((0,n.Z)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"initLayerProperties",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),(0,ee.F)(this.renderer,this.fieldsIndex),(0,ee.x)(this.timeInfo,this.fieldsIndex),(0,ae.t)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.G)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPublishingStatus",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.source,e.abrupt("return",null!==t&&void 0!==t&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e,t,r,n=null!==(e=null===(t=this.parsedUrl)||void 0===t?void 0:t.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+n+")"),this.isTable||this._hasMemorySource()||-1!==n.search(/\/FeatureServer\//i)||(null===(r=this.fields)||void 0===r?void 0:r.some((function(e){return"geometry"===e.type})))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+n+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new y.s("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new y.s("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}}]),f}((0,S.M)((0,A.n)((0,A.p)(function(e){var t=function(e){(0,p.Z)(r,e);var t=(0,d.Z)(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,c.Z)(r,[{key:"publishingInfo",get:function(){if(this.destroyed)return null;var e=this._get("publishingInfo");if(e)return e;var t=new fe;return this._checkPublishingStatus(t),t}},{key:"_checkPublishingStatus",value:function(e){var t=this,r=0,n=function(){var a=(0,s.Z)((0,o.Z)().mark((function a(u){var s;return(0,o.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.updating=!0,a.prev=1,a.next=4,t.fetchPublishingStatus();case 4:s=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),s="unavailable";case 10:"published"!==s&&"unavailable"!==s||("publishing"===e.status&&t.refresh(),i.remove()),e.status=s,e.updating=!1,i.removed||(r=setTimeout(n,u,u+125));case 11:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}(),i={removed:!1,remove:function(){this.removed=!0,clearTimeout(r)}};this.when().catch((function(){return i.remove()})),n(250),this.own(i)}}]),r}(e);return(0,y.e)([(0,y.y)({readOnly:!0,clonable:!1})],t.prototype,"publishingInfo",null),t=(0,y.e)([(0,y.n)("esri.layers.mixins.PublishableLayer")],t)}((0,J.a)((0,G.n)((0,Q.c)((0,U.a)((0,B.t)((0,z.p)((0,R.p)((0,V.c)((0,W.v)((0,Z.O)((0,N.o)((0,P.i)((0,g.i)(x.b))))))))))))))))));(0,y.e)([(0,_.o)("service","capabilities")],Ze.prototype,"readCapabilities",null),(0,y.e)([(0,y.y)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ze.prototype,"charts",void 0),(0,y.e)([(0,y.y)({readOnly:!0})],Ze.prototype,"createQueryVersion",null),(0,y.e)([(0,y.y)({json:{read:{source:"layerDefinition.copyrightText"}}})],Ze.prototype,"copyright",void 0),(0,y.e)([(0,y.y)({json:{read:{source:"layerDefinition.displayField"}}})],Ze.prototype,"displayField",void 0),(0,y.e)([(0,y.y)({types:b.j,readOnly:!0})],Ze.prototype,"defaultSymbol",void 0),(0,y.e)([(0,y.y)({type:ie.K})],Ze.prototype,"dynamicDataSource",void 0),(0,y.e)([(0,y.y)({type:Boolean})],Ze.prototype,"editingEnabled",null),(0,y.e)([(0,_.o)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ze.prototype,"readEditingEnabled",null),(0,y.e)([(0,_.o)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ze.prototype,"readEditingEnabledFromWebMap",null),(0,y.e)([(0,_.r)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ze.prototype,"writeEditingEnabled",null),(0,y.e)([(0,_.r)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ze.prototype,"writeEditingEnabledToWebMap",null),(0,y.e)([(0,y.y)((0,n.Z)((0,n.Z)({},we.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:ke}}}}}))],Ze.prototype,"fields",void 0),(0,y.e)([(0,y.y)(we.fieldsIndex)],Ze.prototype,"fieldsIndex",void 0),(0,y.e)([(0,y.y)({type:S.y,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ze.prototype,"formTemplate",void 0),(0,y.e)([(0,y.y)({json:{read:{source:"layerDefinition.extent"}}})],Ze.prototype,"fullExtent",void 0),(0,y.e)([(0,y.y)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:ke,writer:function(e,t,r){var n=e?S.i.toJSON(e):null;n&&(0,k.o)(r,n,t)}}}},read:{source:"layerDefinition.geometryType",reader:S.i.read}}})],Ze.prototype,"geometryType",void 0),(0,y.e)([(0,y.y)({json:{read:{source:"layerDefinition.hasM"}}})],Ze.prototype,"hasM",void 0),(0,y.e)([(0,y.y)({json:{read:{source:"layerDefinition.hasZ"}}})],Ze.prototype,"hasZ",void 0),(0,y.e)([(0,y.y)(H.j)],Ze.prototype,"id",void 0),(0,y.e)([(0,y.y)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ze.prototype,"infoFor3D",void 0),(0,y.e)([(0,y.y)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ze.prototype,"isTable",void 0),(0,y.e)([(0,_.o)("service","isTable",["type","geometryType"]),(0,_.o)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ze.prototype,"readIsTable",null),(0,y.e)([(0,_.r)("web-map","isTable")],Ze.prototype,"writeIsTable",null),(0,y.e)([(0,y.y)(H.m)],Ze.prototype,"labelsVisible",void 0),(0,y.e)([(0,y.y)({type:[te.j],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:te.i},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:te.i},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ze.prototype,"labelingInfo",void 0),(0,y.e)([(0,y.y)(function(){var e=(0,k.y)(H.u);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer:function(e,t,r){(0,k.o)(r,(0,se.n)(e),t)}}},e}())],Ze.prototype,"opacity",void 0),(0,y.e)([(0,y.y)(H.c)],Ze.prototype,"legendEnabled",void 0),(0,y.e)([(0,y.y)({type:["show","hide"],json:function(){var e=(0,k.y)(H.D.json);return e.origins["portal-item"]={read:!1,write:!1},e}()})],Ze.prototype,"listMode",void 0),(0,y.e)([(0,_.o)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ze.prototype,"readGlobalIdField",null),(0,y.e)([(0,y.y)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:ke}}}}})],Ze.prototype,"objectIdField",void 0),(0,y.e)([(0,_.o)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ze.prototype,"readObjectIdField",null),(0,y.e)([(0,y.y)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ze.prototype,"operationalLayerType",void 0),(0,y.e)([(0,y.y)(we.outFields)],Ze.prototype,"outFields",void 0),(0,y.e)([(0,y.y)({readOnly:!0})],Ze.prototype,"parsedUrl",null),(0,y.e)([(0,y.y)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ze.prototype,"path",void 0),(0,y.e)([(0,y.y)(H.p)],Ze.prototype,"popupEnabled",void 0),(0,y.e)([(0,y.y)({type:f.k,json:{name:"popupInfo",write:!0}})],Ze.prototype,"popupTemplate",void 0),(0,y.e)([(0,y.y)({readOnly:!0})],Ze.prototype,"defaultPopupTemplate",null),(0,y.e)([(0,y.y)({types:v.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:v.n,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e,t,r){return{ignoreOrigin:null===r||void 0===r?void 0:r.writeLayerSchema}}}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null===r||void 0===r?void 0:r.writeLayerSchema}}}}})],Ze.prototype,"renderer",null),(0,y.e)([(0,_.o)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,_.o)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ze.prototype,"readRenderer",null),(0,y.e)([(0,y.y)(function(){var e=(0,k.y)(H.l);return e.json.origins["portal-item"]={read:!1,write:!1},e}())],Ze.prototype,"screenSizePerspectiveEnabled",void 0),(0,y.e)([(0,y.y)({clonable:!1})],Ze.prototype,"source",null),(0,y.e)([(0,y.c)("source")],Ze.prototype,"castSource",null),(0,y.e)([(0,_.o)("portal-item","source",["featureSet"]),(0,_.o)("web-map","source",["featureSet"])],Ze.prototype,"readSource",null),(0,y.e)([(0,y.y)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ze.prototype,"spatialReference",void 0),(0,y.e)([(0,y.y)({type:Number})],Ze.prototype,"subtypeCode",void 0),(0,y.e)([(0,y.y)({type:[X.p]})],Ze.prototype,"templates",void 0),(0,y.e)([(0,_.o)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ze.prototype,"readTemplates",null),(0,y.e)([(0,y.y)({type:re.v})],Ze.prototype,"timeInfo",void 0),(0,y.e)([(0,y.y)()],Ze.prototype,"title",void 0),(0,y.e)([(0,_.o)("service","title",["name"]),(0,_.o)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ze.prototype,"readTitle",null),(0,y.e)([(0,_.o)("web-map","title",["layerDefinition.name","title"])],Ze.prototype,"readTitleFromWebMap",null),(0,y.e)([(0,y.y)({type:String})],Ze.prototype,"sublayerTitleMode",void 0),(0,y.e)([(0,y.y)({json:{read:!1}})],Ze.prototype,"type",void 0),(0,y.e)([(0,y.y)({type:String})],Ze.prototype,"typeIdField",void 0),(0,y.e)([(0,_.o)("service","typeIdField"),(0,_.o)("typeIdField",["layerDefinition.typeIdField"])],Ze.prototype,"readTypeIdField",null),(0,y.e)([(0,y.y)({type:[Y.n]})],Ze.prototype,"types",void 0),(0,y.e)([(0,_.o)("service","types",["types"]),(0,_.o)("types",["layerDefinition.types"])],Ze.prototype,"readTypes",null),(0,y.e)([(0,y.y)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ze.prototype,"visible",void 0),(0,y.e)([(0,_.o)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ze.prototype,"readVisible",null),Ze=(0,y.e)([(0,y.n)(ve)],Ze);var Fe=(0,y.Z)({types:b.M}),_e=Ze;t.default=_e},64264:function(e,t,r){r.d(t,{c:function(){return m}});var n,i=r(15671),a=r(43144),o=r(60136),u=r(29388),s=r(48848),l=r(93661),c=r(40558),p=r(40114),d=new c.s({asc:"ascending",desc:"descending"}),y=n=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).field=null,n.valueExpression=null,n.order="ascending",n}return(0,a.Z)(r,[{key:"clone",value:function(){return new n({field:this.field,valueExpression:this.valueExpression,order:this.order})}}]),r}(p.l);(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],y.prototype,"field",void 0),(0,s.e)([(0,s.y)({type:String,json:{write:!0}})],y.prototype,"valueExpression",void 0),(0,s.e)([(0,s.y)({type:d.apiValues,json:{read:d.read,write:d.write}})],y.prototype,"order",void 0);var f=y=n=(0,s.e)([(0,s.n)("esri.layers.support.OrderByInfo")],y);function h(e,t,r){if(!e)return null;var n=e.find((function(e){return!!e.field}));if(!n)return null;var i=new f;return i.read(n,r),[i]}function v(e,t,r,n){var i=e.find((function(e){return!!e.field}));i&&(0,l.o)(r,[i.toJSON()],t)}var m=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).orderBy=null,e}return(0,a.Z)(r)}(e);return(0,s.e)([(0,s.y)({type:[f],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:h},write:{target:"layerDefinition.orderBy",writer:v}}})],t.prototype,"orderBy",void 0),t=(0,s.e)([(0,s.n)("esri.layers.mixins.OrderedLayer")],t),t}},89311:function(e,t,r){r.d(t,{t:function(){return u}});var n=r(74165),i=r(15861),a=r(59389),o=r(48848);function u(e,t,r){return s.apply(this,arguments)}function s(){return s=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var u,s,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin))||"unique-value"!==u.type||!u.styleOrigin){e.next=6;break}return e.next=4,(0,a.b)(u.populateFromStyle());case 4:s=e.sent,(0,o.f)(i),!1===s.ok&&(l=s.error,r&&r.messages&&r.messages.push(new o.l("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(l.message),{error:l,context:r})),t.clear("renderer",null===r||void 0===r?void 0:r.origin));case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}}}]);
//# sourceMappingURL=8987.6308a315.chunk.js.map