"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[2821],{66577:function(e,t,i){i.d(t,{a:function(){return v},p:function(){return f}});var n,r,a=i(15671),s=i(43144),l=i(60136),o=i(29388),u=i(48848),c=i(40114),p=(i(93661),i(89794)),y=i(82474),f=n=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).title=null,e}return(0,s.Z)(i,[{key:"clone",value:function(){return new n({title:this.title})}}]),i}(c.l);(0,u.e)([(0,u.y)({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=n=(0,u.e)([(0,u.n)("esri.renderers.support.LegendOptions")],f);var d=r=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).color=null,n.label=null,n.value=null,n}return(0,s.Z)(i,[{key:"writeValue",value:function(e,t,i){t[i]=null!==e&&void 0!==e?e:0}},{key:"clone",value:function(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}}]),i}(c.l);(0,u.e)([(0,u.y)({type:p.l,json:{type:[u.T],write:!0}})],d.prototype,"color",void 0),(0,u.e)([(0,u.y)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,u.e)([(0,u.y)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],d.prototype,"value",void 0),(0,u.e)([(0,y.r)("value")],d.prototype,"writeValue",null);var v=d=r=(0,u.e)([(0,u.n)("esri.renderers.visualVariables.support.ColorStop")],d)},64998:function(e,t,i){i.d(t,{g:function(){return w}});var n=i(1413),r=i(4942),a=i(15671),s=i(43144),l=i(97326),o=i(60136),u=i(29388),c=i(48848),p=i(74384),y=i(25577),f=i(37944),d=i(62610),v=i(40114),h=i(93661),m=i(56162);function b(e){if(!(0,h.r)(e))return null;var t={};for(var i in e){var n=e[i];n&&(t[i]=n.toJSON())}return 0!==Object.keys(t).length?t:null}var g=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).isAggregate=!1,e.layer=null,e.popupTemplate=null,e.sourceLayer=null,Object.defineProperty((0,l.Z)(e),"uid",{value:(0,c.a4)(),configurable:!0}),e}return(0,s.Z)(i,[{key:"normalizeCtorArgs",value:function(e,t,i,n){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:n}}},{key:"aggregateGeometries",set:function(e){var t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}},{key:"attributes",set:function(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}},{key:"geometry",set:function(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}},{key:"symbol",set:function(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}},{key:"visible",set:function(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}},{key:"getEffectivePopupTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.popupTemplate)return this.popupTemplate;for(var t=0,i=[this.sourceLayer,this.layer];t<i.length;t++){var n=i[t];if(n){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&(0,h.r)(n.defaultPopupTemplate))return n.defaultPopupTemplate}}return null}},{key:"getAttribute",value:function(e){var t;return null===(t=this.attributes)||void 0===t?void 0:t[e]}},{key:"setAttribute",value:function(e,t){if(this.attributes){var i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes=(0,r.Z)({},e,t),this._notifyLayer("attributes",void 0,t,e)}},{key:"getObjectId",value:function(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}},{key:"toJSON",value:function(){return{aggregateGeometries:b(this.aggregateGeometries),geometry:(0,h.r)(this.geometry)?this.geometry.toJSON():null,symbol:(0,h.r)(this.symbol)?this.symbol.toJSON():null,attributes:(0,n.Z)({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}},{key:"notifyGeometryChanged",value:function(){this._notifyLayer("geometry",this.geometry,this.geometry)}},{key:"notifyMeshTransformChanged",value:function(){(0,h.r)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}},{key:"_notifyLayer",value:function(e,t,i,n){if(this.layer&&"graphicChanged"in this.layer){var r={graphic:this,property:e,oldValue:t,newValue:i};"attributes"===e&&(r.attributeName=n),this.layer.graphicChanged(r)}}}]),i}((0,d.i)(v.l));(0,c.e)([(0,c.y)({value:null,json:{read:function(e){if(!e)return null;var t={};for(var i in e){var n=(0,m.v)(e[i]);n&&(t[i]=n)}return 0!==Object.keys(t).length?t:null}}})],g.prototype,"aggregateGeometries",null),(0,c.e)([(0,c.y)({value:null})],g.prototype,"attributes",null),(0,c.e)([(0,c.y)({value:null,types:p.i,json:{read:m.v}})],g.prototype,"geometry",null),(0,c.e)([(0,c.y)({type:Boolean})],g.prototype,"isAggregate",void 0),(0,c.e)([(0,c.y)({clonable:"reference"})],g.prototype,"layer",void 0),(0,c.e)([(0,c.y)({type:y.k})],g.prototype,"popupTemplate",void 0),(0,c.e)([(0,c.y)({clonable:"reference"})],g.prototype,"sourceLayer",void 0),(0,c.e)([(0,c.y)({value:null,types:f.j})],g.prototype,"symbol",null),(0,c.e)([(0,c.y)({type:Boolean,value:!0})],g.prototype,"visible",null),g=(0,c.e)([(0,c.n)("esri.Graphic")],g),(g||(g={})).generateUID=c.a4;var w=g},2821:function(e,t,i){i.r(t),i.d(t,{C:function(){return Mt},N:function(){return Pe},T:function(){return Je},_:function(){return St},a:function(){return tt},b:function(){return Ee},c:function(){return Te},d:function(){return Ne},e:function(){return oe},f:function(){return ht},g:function(){return qt},h:function(){return Me},j:function(){return re},l:function(){return pt},m:function(){return Re},n:function(){return Ze},p:function(){return le},v:function(){return $e},y:function(){return ot}});var n,r,a=i(1413),s=i(37762),l=i(29439),o=i(11752),u=i(61120),c=i(74165),p=i(15861),y=i(93433),f=i(15671),d=i(43144),v=i(60136),h=i(29388),m=i(48848),b=i(37944),g=i(40558),w=i(93661),V=i(20302),S=i(82474),x=i(59984),k=i(40114),I=i(66577),_=i(50690),z=i(33794),Z=i(93116),j=i(71147),F=i(85253),E=i(77956),q=i(84186),T=i(89794),O=i(64998),U=i(15529),C=i(70449),D=i(21385),N=i(62610),M=i(46337),R=i(22603),B=n=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).minValue=0,n.maxValue=0,n}return(0,d.Z)(i,[{key:"clone",value:function(){return new n({minValue:this.minValue,maxValue:this.maxValue})}}]),i}(k.l);(0,m.e)([(0,m.y)({type:Number,json:{write:!0}})],B.prototype,"minValue",void 0),(0,m.e)([(0,m.y)({type:Number,json:{write:!0}})],B.prototype,"maxValue",void 0),B=n=(0,m.e)([(0,m.n)("esri.renderer.support.AuthoringInfoClassBreakInfo")],B);var L,A=r=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).field="",n.normalizationField="",n.label="",n.classBreakInfos=[],n}return(0,d.Z)(i,[{key:"clone",value:function(){return new r({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,w.y)(this.classBreakInfos)})}}]),i}(k.l);(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],A.prototype,"field",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],A.prototype,"normalizationField",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],A.prototype,"label",void 0),(0,m.e)([(0,m.y)({type:[B],json:{write:!0}})],A.prototype,"classBreakInfos",void 0),A=r=(0,m.e)([(0,m.n)("esri.renderers.support.AuthoringInfoFieldInfo")],A);var G=new g.s({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),P=new g.s({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),H={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},J=["high-to-low","above-and-below","centered-on","extremes"],W=(0,y.Z)(new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"].concat(["high-to-low","above-and-below","90-10","above","below"]))),$=["seconds","minutes","hours","days","months","years"],Q=L=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).endTime=null,n.field=null,n.maxSliderValue=null,n.minSliderValue=null,n.startTime=null,n.type=null,n.units=null,n}return(0,d.Z)(i,[{key:"castEndTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"castStartTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)}},{key:"clone",value:function(){return new L({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}}]),i}(k.l);(0,m.e)([(0,m.y)({types:H,json:{write:!0}})],Q.prototype,"endTime",void 0),(0,m.e)([(0,m.c)("endTime")],Q.prototype,"castEndTime",null),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Q.prototype,"field",void 0),(0,m.e)([(0,m.y)({type:Number,json:{write:!0}})],Q.prototype,"maxSliderValue",void 0),(0,m.e)([(0,m.y)({type:Number,json:{write:!0}})],Q.prototype,"minSliderValue",void 0),(0,m.e)([(0,m.y)({types:H,json:{write:!0}})],Q.prototype,"startTime",void 0),(0,m.e)([(0,m.c)("startTime")],Q.prototype,"castStartTime",null),(0,m.e)([(0,m.y)({type:G.apiValues,value:null,json:{type:G.jsonValues,read:G.read,write:G.write}})],Q.prototype,"style",null),(0,m.e)([(0,m.y)({type:W,value:null,json:{type:W,origins:{"web-scene":{type:J,write:{writer:function(e,t){J.includes(e)&&(t.theme=e)}}}},write:!0}})],Q.prototype,"theme",null),(0,m.e)([(0,m.y)({type:P.apiValues,json:{type:P.jsonValues,read:P.read,write:P.write}})],Q.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:$,json:{type:$,write:!0}})],Q.prototype,"units",void 0);var K,X=Q=L=(0,m.e)([(0,m.n)("esri.renderers.support.AuthoringInfoVisualVariable")],Q),Y=new g.s({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ee=new g.s({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),te=new g.s({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),ie=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],ne=K=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).colorRamp=null,n.fadeRatio=null,n.isAutoGenerated=!1,n.lengthUnit=null,n.maxSliderValue=null,n.minSliderValue=null,n.visualVariables=null,n}return(0,d.Z)(i,[{key:"classificationMethod",get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)}},{key:"readColorRamp",value:function(e){return e?(0,j.p)(e):void 0}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)}},{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)}},{key:"flowTheme",get:function(){return"flow"===this.type?this._get("flowTheme"):null},set:function(e){this._set("flowTheme",e)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(e){this._set("statistics",e)}},{key:"standardDeviationInterval",get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)}},{key:"type",get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(e){this._set("univariateSymbolStyle",e)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(e){this._set("univariateTheme",e)}},{key:"clone",value:function(){return new K({classificationMethod:this.classificationMethod,colorRamp:(0,w.y)(this.colorRamp),fadeRatio:(0,w.y)(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:(0,w.y)(this.field1),field2:(0,w.y)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((function(e){return e.clone()})),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}}]),i}(k.l);(0,m.e)([(0,m.y)({type:Y.apiValues,value:null,json:{type:Y.jsonValues,read:Y.read,write:Y.write,origins:{"web-document":{default:"manual",type:Y.jsonValues,read:Y.read,write:Y.write}}}})],ne.prototype,"classificationMethod",null),(0,m.e)([(0,m.y)({types:j.m,json:{write:!0}})],ne.prototype,"colorRamp",void 0),(0,m.e)([(0,S.o)("colorRamp")],ne.prototype,"readColorRamp",null),(0,m.e)([(0,m.y)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ne.prototype,"fadeRatio",void 0),(0,m.e)([(0,m.y)({type:[String],value:null,json:{write:!0}})],ne.prototype,"fields",null),(0,m.e)([(0,m.y)({type:A,value:null,json:{write:!0}})],ne.prototype,"field1",null),(0,m.e)([(0,m.y)({type:A,value:null,json:{write:!0}})],ne.prototype,"field2",null),(0,m.e)([(0,m.y)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ne.prototype,"flowTheme",null),(0,m.e)([(0,m.y)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ne.prototype,"focus",null),(0,m.e)([(0,m.y)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ne.prototype,"isAutoGenerated",void 0),(0,m.e)([(0,m.y)({type:Number,value:null,json:{type:m.T,write:!0}})],ne.prototype,"numClasses",null),(0,m.e)([(0,m.y)({type:ie,json:{type:ie,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ne.prototype,"lengthUnit",void 0),(0,m.e)([(0,m.y)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ne.prototype,"maxSliderValue",void 0),(0,m.e)([(0,m.y)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ne.prototype,"minSliderValue",void 0),(0,m.e)([(0,m.y)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ne.prototype,"statistics",null),(0,m.e)([(0,m.y)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ne.prototype,"standardDeviationInterval",null),(0,m.e)([(0,m.y)({type:ee.apiValues,value:null,json:{type:ee.jsonValues,read:ee.read,write:ee.write,origins:{"web-scene":{type:te.jsonValues,write:{writer:te.write,overridePolicy:function(e){return{enabled:"flow"!==e}}}}}}})],ne.prototype,"type",null),(0,m.e)([(0,m.y)({type:[X],json:{write:!0}})],ne.prototype,"visualVariables",void 0),(0,m.e)([(0,m.y)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ne.prototype,"univariateSymbolStyle",null),(0,m.e)([(0,m.y)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ne.prototype,"univariateTheme",null);var re=ne=K=(0,m.e)([(0,m.n)("esri.renderers.support.AuthoringInfo")],ne),ae=new g.s({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0}),se=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).authoringInfo=null,n.type=null,n}return(0,d.Z)(i,[{key:"getRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t){var i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.collectRequiredFields){e.next=2;break}return e.abrupt("return",[]);case 2:return i=new Set,e.next=5,this.collectRequiredFields(i,t);case 5:return e.abrupt("return",Array.from(i).sort());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return JSON.stringify(this)}},{key:"getMeshHash",value:function(){return JSON.stringify(this)}}]),i}(k.l);(0,m.e)([(0,m.y)({type:re,json:{write:!0}})],se.prototype,"authoringInfo",void 0),(0,m.e)([(0,m.y)({type:ae.apiValues,readOnly:!0,json:{type:ae.jsonValues,read:!1,write:{writer:ae.write,ignoreOrigin:!0}}})],se.prototype,"type",void 0);var le=se=(0,m.e)([(0,m.n)("esri.renderers.Renderer")],se);function oe(e){var t,i,n;return null!==(t=null===(i=e.match(ce))||void 0===i||null===(n=i[1])||void 0===n?void 0:n.replace(/\\'/g,"'"))&&void 0!==t?t:null}var ue,ce=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/,pe=ue=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,f.Z)(this,i),(e=t.apply(this,arguments)).showLegend=null,e}return(0,d.Z)(i,[{key:"clone",value:function(){return new ue({title:this.title,showLegend:this.showLegend})}}]),i}(I.p);(0,m.e)([(0,m.y)({type:Boolean,json:{write:!0}})],pe.prototype,"showLegend",void 0);var ye=pe=ue=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],pe),fe=new g.s({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),de=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).index=null,n.type=null,n.field=null,n.valueExpression=null,n.valueExpressionTitle=null,n.legendOptions=null,n}return(0,d.Z)(i,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(m.a.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,m.a0)(e)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression}},{key:"clone",value:function(){}},{key:"getAttributeHash",value:function(){return"".concat(this.type,"-").concat(this.field,"-").concat(this.valueExpression)}}]),i}(k.l);(0,m.e)([(0,m.y)()],de.prototype,"index",void 0),(0,m.e)([(0,m.y)({type:fe.apiValues,readOnly:!0,json:{read:fe.read,write:fe.write}})],de.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],de.prototype,"field",void 0),(0,m.e)([(0,m.c)("field")],de.prototype,"castField",null),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],de.prototype,"valueExpression",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],de.prototype,"valueExpressionTitle",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],de.prototype,"arcadeRequired",null),(0,m.e)([(0,m.y)({type:ye,json:{write:!0}})],de.prototype,"legendOptions",void 0);var ve,he=de=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.VisualVariable")],de),me=ve=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).type="color",n.normalizationField=null,n}return(0,d.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new ve({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,o.Z)((0,u.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(he);(0,m.e)([(0,m.y)({readOnly:!0})],me.prototype,"cache",null),(0,m.e)([(0,m.y)({type:["color"],json:{type:["colorInfo"]}})],me.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],me.prototype,"normalizationField",void 0),(0,m.e)([(0,m.y)({type:[I.a],json:{write:!0}})],me.prototype,"stops",null);var be,ge=me=ve=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.ColorVariable")],me),we=be=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).label=null,n.opacity=null,n.value=null,n}return(0,d.Z)(i,[{key:"readOpacity",value:function(e,t){return(0,F.r)(t.transparency)}},{key:"writeOpacity",value:function(e,t,i){t[i]=(0,F.n)(e)}},{key:"clone",value:function(){return new be({label:this.label,opacity:this.opacity,value:this.value})}}]),i}(k.l);(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],we.prototype,"label",void 0),(0,m.e)([(0,m.y)({type:Number,json:{type:m.T,write:{target:"transparency"}}})],we.prototype,"opacity",void 0),(0,m.e)([(0,S.o)("opacity",["transparency"])],we.prototype,"readOpacity",null),(0,m.e)([(0,S.r)("opacity")],we.prototype,"writeOpacity",null),(0,m.e)([(0,m.y)({type:Number,json:{write:!0}})],we.prototype,"value",void 0);var Ve,Se=we=be=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.OpacityStop")],we),xe=Ve=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).type="opacity",n.normalizationField=null,n}return(0,d.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new Ve({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,o.Z)((0,u.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(he);(0,m.e)([(0,m.y)({readOnly:!0})],xe.prototype,"cache",null),(0,m.e)([(0,m.y)({type:["opacity"],json:{type:["transparencyInfo"]}})],xe.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],xe.prototype,"normalizationField",void 0),(0,m.e)([(0,m.y)({type:[Se],json:{write:!0}})],xe.prototype,"stops",null);var ke,Ie=xe=Ve=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.OpacityVariable")],xe),_e=ke=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).axis=null,n.type="rotation",n.rotationType="geographic",n.valueExpressionTitle=null,n}return(0,d.Z)(i,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"writeValueExpressionTitleWebScene",value:function(e,t,i,n){if(n&&n.messages){var r="visualVariables[".concat(this.index,"]");n.messages.push(new m.s("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:n}))}}},{key:"clone",value:function(){return new ke({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}}]),i}(he);(0,m.e)([(0,m.y)({readOnly:!0})],_e.prototype,"cache",null),(0,m.e)([(0,m.y)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],_e.prototype,"axis",void 0),(0,m.e)([(0,m.y)({type:["rotation"],json:{type:["rotationInfo"]}})],_e.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],_e.prototype,"rotationType",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],_e.prototype,"valueExpressionTitle",void 0),(0,m.e)([(0,S.r)("web-scene","valueExpressionTitle")],_e.prototype,"writeValueExpressionTitleWebScene",null);var ze,Ze=_e=ke=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.RotationVariable")],_e),je=ze=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).label=null,n.size=null,n.value=null,n}return(0,d.Z)(i,[{key:"clone",value:function(){return new ze({label:this.label,size:this.size,value:this.value})}}]),i}(k.l);(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],je.prototype,"label",void 0),(0,m.e)([(0,m.y)({type:Number,cast:E.o,json:{write:!0}})],je.prototype,"size",void 0),(0,m.e)([(0,m.y)({type:Number,json:{write:!0}})],je.prototype,"value",void 0);var Fe,Ee=je=ze=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.SizeStop")],je),qe=Fe=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,f.Z)(this,i),(e=t.apply(this,arguments)).customValues=null,e}return(0,d.Z)(i,[{key:"clone",value:function(){return new Fe({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}}]),i}(ye);(0,m.e)([(0,m.y)({type:[Number],json:{write:!0}})],qe.prototype,"customValues",void 0);var Te=qe=Fe=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],qe),Oe=m.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Ue=new O.g,Ce=Math.PI,De=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Ne(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"color"===e.type})):e;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var r="number"==typeof t,a=r?null:t,s=a&&a.attributes,l=r?t:null,o=n.field,u=n.cache,c=u.ipData,p=u.hasExpression,y=n.cache.compiledFunc;if(!o&&!p){var f=n.stops;return f&&f[0]&&f[0].color}if("number"!=typeof l)if(p){if((0,w.t)(i)||(0,w.t)(i.arcade))return void Oe.error("Use of arcade expressions requires an arcade context");var d={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,h=v.getViewInfo(d),m=v.createExecContext(a,h);if(!y){var b=v.createSyntaxTree(n.valueExpression);y=v.createFunction(b),n.cache.compiledFunc=y}l=v.executeFunction(y,m)}else s&&(l=s[o]);var g=n.normalizationField,V=null!=s&&null!=g?parseFloat(s[g]):void 0;if(null!=l&&(!g||r||!isNaN(V)&&0!==V)){isNaN(V)||r||(l/=V);var S=He(l,c);if(S){var x=S[0],k=S[1],I=x===k?n.stops[x].color:T.l.blendColors(n.stops[x].color,n.stops[k].color,S[2],(0,w.r)(i)?i.color:void 0);return new T.l(I)}}}else Oe.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function Me(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"opacity"===e.type})):e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var r="number"==typeof t,a=r?null:t,s=a&&a.attributes,l=r?t:null,o=n.field,u=n.cache,c=u.ipData,p=u.hasExpression,y=n.cache.compiledFunc;if(!o&&!p){var f=n.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof l)if(p){if((0,w.t)(i)||(0,w.t)(i.arcade))return void Oe.error("Use of arcade expressions requires an arcade context");var d={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,h=v.getViewInfo(d),m=v.createExecContext(a,h);if(!y){var b=v.createSyntaxTree(n.valueExpression);y=v.createFunction(b),n.cache.compiledFunc=y}l=v.executeFunction(y,m)}else s&&(l=s[o]);var g=n.normalizationField,V=null!=s&&null!=g?parseFloat(s[g]):void 0;if(null!=l&&(!g||r||!isNaN(V)&&0!==V)){isNaN(V)||r||(l/=V);var S=He(l,c);if(S){var x=S[0],k=S[1];if(x===k)return n.stops[x].opacity;var I=n.stops[x].opacity;return I+(n.stops[k].opacity-I)*S[2]}}}else Oe.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function Re(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"rotation"===e.type})):e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var r=n.axis||"heading",a="heading"===r&&"arithmetic"===n.rotationType?90:0,s="heading"===r&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,o=l&&l.attributes,u=n.field,c=n.cache.hasExpression,p=n.cache.compiledFunc,y=0;if(!u&&!c)return y;if(c){if((0,w.t)(i)||(0,w.t)(i.arcade))return void Oe.error("Use of arcade expressions requires an arcade context");var f={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},d=i.arcade.arcadeUtils,v=d.getViewInfo(f),h=d.createExecContext(l,v);if(!p){var m=d.createSyntaxTree(n.valueExpression);p=d.createFunction(m),n.cache.compiledFunc=p}y=d.executeFunction(p,h)}else o&&(y=o[u]||0);return y="number"!=typeof y||isNaN(y)?null:a+s*y}Oe.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function Be(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"size"===e.type})):e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var r=Ge(function(e,t,i){var n="number"==typeof t,r=n?null:t,a=r&&r.attributes,s=n?t:null,l=e.cache.isScaleDriven,o=e.cache.compiledFunc;if(l){var u=(0,w.r)(i)?i.scale:void 0,c=(0,w.r)(i)?i.view:void 0;s=null==u||"3d"===c?function(e){var t=null,i=null,n=e.stops;return n?(t=n[0].value,i=n[n.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):u}else if(!n)switch(e.inputValueType){case q.n.Expression:if((0,w.t)(i)||(0,w.t)(i.arcade))return void Oe.error("Use of arcade expressions requires an arcade context");var p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},y=i.arcade.arcadeUtils,f=y.getViewInfo(p),d=y.createExecContext(r,f);if(!o){var v=y.createSyntaxTree(e.valueExpression);o=y.createFunction(v),e.cache.compiledFunc=o}s=y.executeFunction(o,d);break;case q.n.Field:a&&(s=a[e.field]);break;case q.n.Unknown:s=null}if(!(0,q.l)(s))return null;if(n||!e.normalizationField)return s;var h=a?parseFloat(a[e.normalizationField]):null;return(0,q.l)(h)&&0!==h?s/h:null}(n,t,i),n,t,i,n.cache.ipData);return null==r||isNaN(r)?0:r}Oe.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function Le(e,t,i){return null==e?null:(0,q.e)(e)?Be(e,t,i):(0,q.l)(e)?e:null}function Ae(e,t,i){return(0,q.l)(i)&&e>i?i:(0,q.l)(t)&&e<t?t:e}function Ge(e,t,i,n,r){switch(t.transformationType){case q.i.Additive:return function(e,t,i,n){var r;return e+(null!==(r=Le(t.minSize,i,n)||t.minDataValue)&&void 0!==r?r:0)}(e,t,i,n);case q.i.Constant:return function(e,t,i){var n=e.stops,r=n&&n.length&&n[0].size;return null==r&&(r=e.minSize),Le(r,t,i)}(t,i,n);case q.i.ClampedLinear:return function(e,t,i,n){var r=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=Le(t.minSize,i,n),s=Le(t.maxSize,i,n),l=(0,w.r)(n)?n.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return s;if(null==a||null==s)return null;if("area"===t.scaleBy&&l){var o="circle"===l,u=o?Ce*Math.pow(a/2,2):a*a,c=u+r*((o?Ce*Math.pow(s/2,2):s*s)-u);return o?2*Math.sqrt(c/Ce):Math.sqrt(c)}return a+r*(s-a)}(e,t,i,n);case q.i.Proportional:return function(e,t,i,n){var r=(0,w.r)(n)?n.shape:void 0,a=e/t.minDataValue,s=Le(t.minSize,i,n),l=Le(t.maxSize,i,n);return Ae("circle"===r?2*Math.sqrt(a*Math.pow(s/2,2)):"square"===r||"diamond"===r||"image"===r?Math.sqrt(a*Math.pow(s,2)):a*s,s,l)}(e,t,i,n);case q.i.Stops:return function(e,t,i,n,r){var a,s=He(e,r),o=(0,l.Z)(s,3),u=o[0],c=o[1],p=o[2];if(u===c)return Le(null===(a=t.stops)||void 0===a?void 0:a[u].size,i,n);var y,f,d=Le(null===(y=t.stops)||void 0===y?void 0:y[u].size,i,n);return d+(Le(null===(f=t.stops)||void 0===f?void 0:f[c].size,i,n)-d)*p}(e,t,i,n,r);case q.i.RealWorldSize:return function(e,t,i,n){var r=((0,w.r)(n)&&n.resolution?n.resolution:1)*U.m[t.valueUnit],a=Le(t.minSize,i,n),s=Le(t.maxSize,i,n),l=t.valueRepresentation;return Ae("area"===l?2*Math.sqrt(e/Ce)/r:"radius"===l||"distance"===l?2*e/r:e/r,a,s)}(e,t,i,n);case q.i.Identity:return e;case q.i.Unknown:return null}}function Pe(e,t,i){if(e.visualVariables){var n,r=[],a=[],l=[],o=[],u=[],c=(0,s.Z)(e.visualVariables);try{for(c.s();!(n=c.n()).done;){var p=n.value;switch(p.type){case"color":a.push(p);break;case"opacity":l.push(p);break;case"rotation":u.push(p);break;case"size":o.push(p)}}}catch(y){c.e(y)}finally{c.f()}return a.forEach((function(e){var n=Ne(e,t,i);r.push({variable:e,value:n})})),l.forEach((function(e){var n=Me(e,t,i);r.push({variable:e,value:n})})),u.forEach((function(e){var n=Re(e,t,i);r.push({variable:e,value:n})})),o.forEach((function(e){var n=Be(e,t,i);r.push({variable:e,value:n})})),r.filter((function(e){return null!=e.value}))}}function He(e,t){if(t){var i=0,n=t.length-1;return t.some((function(t,r){return e<t?(n=r,!0):(i=r,!1)})),[i,n,(e-t[i])/(t[n]-t[i])]}}function Je(e,t,i){var n,r=["proportional","proportional","proportional"],a=(0,s.Z)(e);try{for(a.s();!(n=a.n()).done;){var l=n.value,o=l.useSymbolValue?"symbol-value":Be(l,t,i);switch(l.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o}}}catch(u){a.e(u)}finally{a.f()}return r}var We,$e=Object.freeze({__proto__:null,getAllSizes:Je,getColor:Ne,getOpacity:Me,getRotationAngle:Re,getSize:Be,getSizeForValue:Ge,getSizeFromNumberOrVariable:Le,getSizeRangeAtScale:function(e,t,i){if(!(e.cache.isScaleDriven&&"3d"===i||t))return null;var n={scale:t,view:i},r=Le(e.minSize,Ue,n),a=Le(e.maxSize,Ue,n);if(null!=r||null!=a){if(r>a){var s=a;a=r,r=s}return{minSize:r,maxSize:a}}},getVisualVariableValues:Pe,viewScaleRE:De}),Qe=new g.s({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Ke=new g.s({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function Xe(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,E.o)(e):"size"===e.type?(0,q.e)(e)?e:(delete(e=(0,a.Z)({},e)).type,new et(e)):void 0}function Ye(e,t,i){if("object"!=typeof e)return e;var n=new et;return n.read(e,i),n}var et=We=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).axis=null,n.legendOptions=null,n.normalizationField=null,n.scaleBy=null,n.target=null,n.type="size",n.useSymbolValue=null,n.valueExpression=null,n.valueRepresentation=null,n.valueUnit=null,n}return(0,d.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&De.test(this.valueExpression)}}},{key:"expression",set:function(e){m.a.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}},{key:"index",set:function(e){(0,q.e)(this.maxSize)&&(this.maxSize.index="visualVariables[".concat(e,"].maxSize")),(0,q.e)(this.minSize)&&(this.minSize.index="visualVariables[".concat(e,"].minSize")),this._set("index",e)}},{key:"inputValueType",get:function(){return(0,q.t)(this)}},{key:"maxDataValue",set:function(e){e&&this.stops&&(m.a.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}},{key:"maxSize",set:function(e){e&&this.stops&&(m.a.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}},{key:"castMaxSize",value:function(e){return Xe(e)}},{key:"readMaxSize",value:function(e,t,i){return Ye(e,0,i)}},{key:"minDataValue",set:function(e){e&&this.stops&&(m.a.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}},{key:"minSize",set:function(e){e&&this.stops&&(m.a.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}},{key:"castMinSize",value:function(e){return Xe(e)}},{key:"readMinSize",value:function(e,t,i){return Ye(e,0,i)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})):e&&(m.a.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}},{key:"transformationType",get:function(){return(0,q.a)(this,this.inputValueType)}},{key:"readValueExpression",value:function(e,t){return e||t.expression&&"$view.scale"}},{key:"writeValueExpressionWebScene",value:function(e,t,i,n){if("$view.scale"===e){if(n&&n.messages){var r=this.index,a="string"==typeof r?r:"visualVariables[".concat(r,"]");n.messages.push(new m.s("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpression",context:n}))}}else t[i]=e}},{key:"readValueUnit",value:function(e){return e?Ke.read(e):null}},{key:"clone",value:function(){return new We({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,q.e)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,q.e)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(e){return e.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"flipSizes",value:function(){if(this.transformationType===q.i.ClampedLinear){var e=this.minSize,t=this.maxSize;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===q.i.Stops){var i=this.stops;if(!i)return this;for(var n=i.map((function(e){return e.size})).reverse(),r=i.length,a=0;a<r;a++)i[a].size=n[a];return this}return this}},{key:"getAttributeHash",value:function(){return"".concat((0,o.Z)((0,u.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.target,"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(he);(0,m.e)([(0,m.y)({readOnly:!0})],et.prototype,"cache",null),(0,m.e)([(0,m.y)({type:Qe.apiValues,json:{type:Qe.jsonValues,origins:{"web-map":{read:!1}},read:Qe.read,write:Qe.write}})],et.prototype,"axis",void 0),(0,m.e)([(0,m.y)({type:String,value:null,json:{read:!1}})],et.prototype,"expression",null),(0,m.e)([(0,m.y)()],et.prototype,"index",null),(0,m.e)([(0,m.y)({type:String,readOnly:!0})],et.prototype,"inputValueType",null),(0,m.e)([(0,m.y)({type:Te,json:{write:!0}})],et.prototype,"legendOptions",void 0),(0,m.e)([(0,m.y)({type:Number,value:null,json:{write:!0}})],et.prototype,"maxDataValue",null),(0,m.e)([(0,m.y)({type:Number,value:null,json:{write:!0}})],et.prototype,"maxSize",null),(0,m.e)([(0,m.c)("maxSize")],et.prototype,"castMaxSize",null),(0,m.e)([(0,S.o)("maxSize")],et.prototype,"readMaxSize",null),(0,m.e)([(0,m.y)({type:Number,value:null,json:{write:!0}})],et.prototype,"minDataValue",null),(0,m.e)([(0,m.y)({type:Number,value:null,json:{write:!0}})],et.prototype,"minSize",null),(0,m.e)([(0,m.c)("minSize")],et.prototype,"castMinSize",null),(0,m.e)([(0,S.o)("minSize")],et.prototype,"readMinSize",null),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],et.prototype,"normalizationField",void 0),(0,m.e)([(0,m.y)({readOnly:!0})],et.prototype,"arcadeRequired",null),(0,m.e)([(0,m.y)({type:String})],et.prototype,"scaleBy",void 0),(0,m.e)([(0,m.y)({type:[Ee],value:null,json:{write:!0}})],et.prototype,"stops",null),(0,m.e)([(0,m.y)({type:["outline"],json:{write:!0}})],et.prototype,"target",void 0),(0,m.e)([(0,m.y)({type:String,readOnly:!0})],et.prototype,"transformationType",null),(0,m.e)([(0,m.y)({type:["size"],json:{type:["sizeInfo"]}})],et.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],et.prototype,"useSymbolValue",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],et.prototype,"valueExpression",void 0),(0,m.e)([(0,S.o)("valueExpression",["valueExpression","expression"])],et.prototype,"readValueExpression",null),(0,m.e)([(0,S.r)("web-scene","valueExpression")],et.prototype,"writeValueExpressionWebScene",null),(0,m.e)([(0,m.y)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],et.prototype,"valueRepresentation",void 0),(0,m.e)([(0,m.y)({type:Ke.apiValues,json:{write:Ke.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],et.prototype,"valueUnit",void 0),(0,m.e)([(0,S.o)("valueUnit")],et.prototype,"readValueUnit",null);var tt=et=We=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.SizeVariable")],et),it={color:ge,size:tt,opacity:Ie,rotation:Ze},nt=new g.s({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),rt=/^\[([^\]]+)\]$/i,at=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,f.Z)(this,i),(e=t.apply(this,arguments)).colorVariables=null,e.opacityVariables=null,e.rotationVariables=null,e.sizeVariables=null,e}return(0,d.Z)(i,[{key:"visualVariables",set:function(e){if(this._resetVariables(),(e=e&&e.filter((function(e){return!!e})))&&e.length){var t,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;switch(n.type){case"color":this.colorVariables.push(n);break;case"opacity":this.opacityVariables.push(n);break;case"rotation":this.rotationVariables.push(n);break;case"size":this.sizeVariables.push(n)}}}catch(a){i.e(a)}finally{i.f()}this.sizeVariables.length&&this.sizeVariables.some((function(e){return!!e.target}))&&e.sort((function(e,t){return e.target===t.target?0:e.target?1:-1}));for(var r=0;r<e.length;r++)e[r].index=r;this._set("visualVariables",e)}else this._set("visualVariables",e)}},{key:"readVariables",value:function(e,t,i){var n=this,r=t.rotationExpression,a=t.rotationType,s=r&&r.match(rt),l=s&&s[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:a,field:l})),e)return e.map((function(e){var t=nt.read(e.type),r=it[t];r||(m.a.getLogger(n.declaredClass).warn("Unknown variable type: ".concat(t)),i&&i.messages&&i.messages.push(new m.l("visual-variable:unsupported","visualVariable of type '".concat(t,"' is not supported"),{definition:e,context:i})));var a=new r;return a.read(e,i),a}))}},{key:"writeVariables",value:function(e,t){var i,n=[],r=(0,s.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value.toJSON(t);a&&n.push(a)}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_resetVariables",value:function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}}]),i}(m.m);(0,m.e)([(0,m.y)()],at.prototype,"visualVariables",null);var st=at=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.VisualVariableFactory")],at),lt={base:he,key:"type",typeMap:{opacity:Ie,color:ge,rotation:Ze,size:tt}},ot=function(e){var t=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,f.Z)(this,i),(e=t.apply(this,arguments))._vvFactory=new st,e}return(0,d.Z)(i,[{key:"visualVariables",set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"readVisualVariables",value:function(e,t,i){return this._vvFactory.readVariables(e,t,i)}},{key:"writeVisualVariables",value:function(e,t,i,n){t[i]=this._vvFactory.writeVariables(e,n)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;var e,t=(0,s.Z)(this.visualVariables);try{for(t.s();!(e=t.n()).done;){if(e.value.arcadeRequired)return!0}}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"hasVisualVariables",value:function(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}},{key:"getVisualVariablesForType",value:function(e,t){var i=this.visualVariables;return i?i.filter((function(i){return i.type===e&&("string"==typeof t?i.target===t:!1!==t||!i.target)})):[]}},{key:"collectVVRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r,a,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],this.visualVariables&&(n=n.concat(this.visualVariables)),r=(0,s.Z)(n),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=19;break}if(l=a.value,e.t0=l,!e.t0){e.next=17;break}if(l.field&&(0,x.w)(t,i,l.field),l.normalizationField&&(0,x.w)(t,i,l.normalizationField),e.t1=l.valueExpression,!e.t1){e.next=17;break}if(e.t2=ut(l.valueExpression,t,i),e.t2){e.next=17;break}return e.next=17,(0,x.S)(t,i,l.valueExpression);case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t3=e.catch(3),r.e(e.t3);case 24:return e.prev=24,r.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[3,21,24,27]])})));return function(t,i){return e.apply(this,arguments)}}()}]),i}(e);return(0,m.e)([(0,m.y)({types:[lt],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,m.e)([(0,S.o)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,m.e)([(0,S.r)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,m.e)([(0,m.n)("esri.renderers.mixins.VisualVariablesMixin")],t)};function ut(e,t,i){var n=oe(e);return!!(0,w.r)(n)&&((0,x.w)(t,i,n),!0)}var ct,pt={types:b.M,json:{write:{writer:C.m},origins:{"web-scene":{types:b.h,write:{writer:C.m},read:{reader:(0,m.Z)({types:b.h})}}}}},yt={types:{base:D.a,key:"type",typeMap:{"simple-fill":b.j.typeMap["simple-fill"],"picture-fill":b.j.typeMap["picture-fill"],"polygon-3d":b.j.typeMap["polygon-3d"]}},json:{write:{writer:C.m},origins:{"web-scene":{type:b.S,write:{writer:C.m}}}}},ft={cast:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:"".concat(e)},json:{type:String,write:{writer:function(e,t){t.value=null===e||void 0===e?void 0:e.toString()}}}},dt=ct=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.minValue=null,n.maxValue=0,n.symbol=null,n}return(0,d.Z)(i,[{key:"clone",value:function(){return new ct({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}}]),i}(k.l);(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],dt.prototype,"description",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],dt.prototype,"label",void 0),(0,m.e)([(0,m.y)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],dt.prototype,"minValue",void 0),(0,m.e)([(0,m.y)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],dt.prototype,"maxValue",void 0),(0,m.e)([(0,m.y)(pt)],dt.prototype,"symbol",void 0);var vt,ht=dt=ct=(0,m.e)([(0,m.n)("esri.renderers.support.ClassBreakInfo")],dt),mt="percent-of-total",bt="field",gt=new g.s({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:mt,esriNormalizeByField:bt}),wt=(0,m.b)(ht),Vt=vt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e))._compiledValueExpression={valueExpression:null,compiledFunction:null},n.backgroundFillSymbol=null,n.classBreakInfos=null,n.defaultLabel=null,n.defaultSymbol=null,n.field=null,n.isMaxInclusive=!0,n.legendOptions=null,n.normalizationField=null,n.normalizationTotal=null,n.type="class-breaks",n.valueExpression=null,n.valueExpressionTitle=null,n._set("classBreakInfos",[]),n}return(0,d.Z)(i,[{key:"readClassBreakInfos",value:function(e,t,i){if(Array.isArray(e)){var n=t.minValue;return e.map((function(e){var t=new ht;return t.read(e,i),null==t.minValue&&(t.minValue=n),null==t.maxValue&&(t.maxValue=t.minValue),n=t.maxValue,t}))}}},{key:"writeClassBreakInfos",value:function(e,t,i,n){var r=e.map((function(e){return e.write({},n)}));this._areClassBreaksConsecutive()&&r.forEach((function(e){return delete e.classMinValue})),t[i]=r}},{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(m.a.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,m.a0)(e)}},{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=(t?bt:i&&mt)||null,t&&i&&m.a.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):e!==bt&&e!==mt||(e=null),e},set:function(e){this._set("normalizationType",e)}},{key:"addClassBreakInfo",value:function(e,t,i){var n;n="number"==typeof e?new ht({minValue:e,maxValue:t,symbol:(0,b.g)(i)}):wt((0,w.y)(e)),this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")}},{key:"removeClassBreakInfo",value:function(e,t){for(var i=this.classBreakInfos.length,n=0;n<i;n++){var r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(n,1);break}}}},{key:"getBreakIndex",value:function(e,t){return this.valueExpression&&((0,w.t)(t)||(0,w.t)(t.arcade))&&m.a.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}},{key:"getClassBreakInfo",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,e.t0=this.valueExpression&&((0,w.t)(i)||(0,w.t)(i.arcade)),!e.t0){e.next=11;break}return e.t1=a.Z,e.t2=(0,a.Z)({},n),e.t3={},e.next=8,(0,x.i)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},n=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return r=this.getBreakIndex(t,n),e.abrupt("return",-1!==r?this.classBreakInfos[r]:null);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!(0,w.t)(t)&&!(0,w.t)(t.arcade)){var i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}m.a.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r,s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,!this.valueExpression||!(0,w.t)(i)&&!(0,w.t)(i.arcade)){e.next=11;break}return e.next=4,(0,x.i)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:n=(0,a.Z)((0,a.Z)({},n),{},{arcade:r});case 11:return l=this.getBreakIndex(t,n),e.abrupt("return",l>-1?this.classBreakInfos[l].symbol:this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e=[];return this.classBreakInfos.forEach((function(t){t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(i,".").concat(this.field,".").concat(this.valueExpression)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"clone",value:function(){return new vt({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,w.y)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,w.y)(this.visualVariables),legendOptions:(0,w.y)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"collectRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.collectVVRequiredFields(t,i),this.collectSymbolFields(t,i)],e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[].concat((0,y.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,i)}))),[(0,x.S)(t,i,this.valueExpression)]),(0,x.w)(t,i,this.field),(0,x.w)(t,i,this.normalizationField),e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getBreakIndexForExpression",value:function(e,t){var i=(0,w.v)(t,{}),n=i.viewingMode,r=i.scale,a=i.spatialReference,s=i.arcade,l=this.valueExpression,o=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null,u=(0,w.e)(s).arcadeUtils;if(!o){var c=u.createSyntaxTree(l);o=u.createFunction(c),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=l;var p=u.executeFunction(o,u.createExecContext(e,u.getViewInfo({viewingMode:n,scale:r,spatialReference:a})));return this._getBreakIndexfromInfos(p)}},{key:"_getBreakIndexForField",value:function(e){var t=this.field,i=e.attributes,n=this.normalizationType,r=parseFloat(i[t]);if(n){var a=this.normalizationTotal,s=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if("log"===n)r=Math.log(r)*Math.LOG10E;else if(n!==mt||null==a||isNaN(a)){if(n===bt&&!isNaN(s)){if(isNaN(r)||isNaN(s))return-1;r/=s}}else r=r/a*100}return this._getBreakIndexfromInfos(r)}},{key:"_getBreakIndexfromInfos",value:function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var i=0;i<this.classBreakInfos.length;i++){var n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return i}return-1}},{key:"_areClassBreaksConsecutive",value:function(){for(var e=this.classBreakInfos,t=e.length,i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}}]),i}(ot(le));(0,m.e)([(0,m.y)(yt)],Vt.prototype,"backgroundFillSymbol",void 0),(0,m.e)([(0,m.y)({type:[ht]})],Vt.prototype,"classBreakInfos",void 0),(0,m.e)([(0,S.o)("classBreakInfos")],Vt.prototype,"readClassBreakInfos",null),(0,m.e)([(0,S.r)("classBreakInfos")],Vt.prototype,"writeClassBreakInfos",null),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Vt.prototype,"defaultLabel",void 0),(0,m.e)([(0,m.y)(pt)],Vt.prototype,"defaultSymbol",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Vt.prototype,"field",void 0),(0,m.e)([(0,m.c)("field")],Vt.prototype,"castField",null),(0,m.e)([(0,m.y)({type:Boolean})],Vt.prototype,"isMaxInclusive",void 0),(0,m.e)([(0,m.y)({type:I.p,json:{write:!0}})],Vt.prototype,"legendOptions",void 0),(0,m.e)([(0,m.y)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Vt.prototype,"minValue",null),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Vt.prototype,"normalizationField",void 0),(0,m.e)([(0,m.y)({type:Number,cast:function(e){return(0,m.g)(e)},json:{write:!0}})],Vt.prototype,"normalizationTotal",void 0),(0,m.e)([(0,m.y)({type:gt.apiValues,value:null,json:{type:gt.jsonValues,read:gt.read,write:gt.write}})],Vt.prototype,"normalizationType",null),(0,m.e)([(0,V.r)({classBreaks:"class-breaks"})],Vt.prototype,"type",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Vt.prototype,"valueExpression",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Vt.prototype,"valueExpressionTitle",void 0);var St=Vt=vt=(0,m.e)([(0,m.n)("esri.renderers.ClassBreaksRenderer")],Vt),xt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).value=null,n.value2=null,n.value3=null,n}return(0,d.Z)(i)}((0,N.i)(k.l));(0,m.e)([(0,m.y)(ft)],xt.prototype,"value",void 0),(0,m.e)([(0,m.y)(ft)],xt.prototype,"value2",void 0),(0,m.e)([(0,m.y)(ft)],xt.prototype,"value3",void 0);var kt=xt=(0,m.e)([(0,m.n)("esri.renderers.support.UniqueValue")],xt),It=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.values=null,n}return(0,d.Z)(i,[{key:"castValues",value:function(e){if(null==e)return null;var t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((function(e){return new kt({value:e})})):"object"===t?e[0]instanceof kt?e:e.map((function(e){return new kt(e)})):null}}]),i}((0,N.i)(k.l));(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],It.prototype,"description",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],It.prototype,"label",void 0),(0,m.e)([(0,m.y)(pt)],It.prototype,"symbol",void 0),(0,m.e)([(0,m.y)({type:[kt],json:{type:[[String]],read:{reader:function(e){return e?e.map((function(e){return new kt({value:e[0],value2:e[1],value3:e[2]})})):null}},write:{writer:function(e,t){var i,n=[],r=(0,s.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value,l=[a.value,a.value2,a.value3].filter(w.r).map((function(e){return e.toString()}));n.push(l)}}catch(o){r.e(o)}finally{r.f()}t.values=n}}}})],It.prototype,"values",void 0),(0,m.e)([(0,m.c)("values")],It.prototype,"castValues",null);var _t=It=(0,m.e)([(0,m.n)("esri.renderers.support.UniqueValueClass")],It),zt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).heading=null,n.classes=null,n}return(0,d.Z)(i)}((0,N.i)(k.l));(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],zt.prototype,"heading",void 0),(0,m.e)([(0,m.y)({type:[_t],json:{write:!0}})],zt.prototype,"classes",void 0);var Zt,jt=zt=(0,m.e)([(0,m.n)("esri.renderers.support.UniqueValueGroup")],zt),Ft=Zt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.value=null,n}return(0,d.Z)(i,[{key:"clone",value:function(){return new Zt({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return"".concat(this.value,".").concat(e)}}]),i}(k.l);(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Ft.prototype,"description",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Ft.prototype,"label",void 0),(0,m.e)([(0,m.y)(pt)],Ft.prototype,"symbol",void 0),(0,m.e)([(0,m.y)(ft)],Ft.prototype,"value",void 0);var Et,qt=Ft=Zt=(0,m.e)([(0,m.n)("esri.renderers.support.UniqueValueInfo")],Ft),Tt="esri.renderers.UniqueValueRenderer",Ot=m.a.getLogger(Tt),Ut="uvInfos-watcher",Ct="uvGroups-watcher",Dt=(0,m.b)(qt);var Nt=Et=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,f.Z)(this,i),(n=t.call(this,e))._valueInfoMap={},n._isDefaultSymbolDerived=!1,n._isInfosSource=null,n.type="unique-value",n.backgroundFillSymbol=null,n.valueExpressionTitle=null,n.legendOptions=null,n.defaultLabel=null,n.portal=null,n.styleOrigin=null,n.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var i=!1,n={type:"collection",added:[],removed:[],changed:[],unchanged:[]},r=function(r){var a=e.find((function(e){return e.value===t[r].value}));a?(0,z.m)(a,t[r])?(n.changed.push({type:"complete",oldValue:a,newValue:t[r]}),i=!0):n.unchanged.push({oldValue:a,newValue:t[r]}):(n.added.push(t[r]),i=!0)},a=0;a<t.length;a++)r(a);for(var s=function(r){t.find((function(t){return t.value===e[r].value}))||(n.removed.push(e[r]),i=!0)},l=0;l<e.length;l++)s(l);return i?n:void 0}}},n._set("uniqueValueInfos",[]),n._set("uniqueValueGroups",[]),n}return(0,d.Z)(i,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"field",set:function(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}},{key:"castField",value:function(e){return null==e||"function"==typeof e?e:(0,m.a0)(e)}},{key:"writeField",value:function(e,t,i,n){"string"==typeof e?t[i]=e:n&&n.messages?n.messages.push(new m.s("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ot.error(".field: cannot write field to JSON since it's not a string value")}},{key:"field2",set:function(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}},{key:"field3",set:function(e){this._set("field3",e),this._updateUniqueValues()}},{key:"valueExpression",set:function(e){this._set("valueExpression",e),this._updateUniqueValues()}},{key:"defaultSymbol",set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}},{key:"fieldDelimiter",set:function(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}},{key:"readPortal",value:function(e,t,i){return i.portal||Z.j.getDefault()}},{key:"readStyleOrigin",value:function(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var n=(0,M.c)(t.styleUrl,i);return Object.freeze({styleUrl:n})}}},{key:"writeStyleOrigin",value:function(e,t,i,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,M.m)(e.styleUrl,n))}},{key:"uniqueValueGroups",set:function(e){this.styleOrigin?Ot.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}},{key:"uniqueValueInfos",set:function(e){this.styleOrigin?Ot.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}},{key:"addUniqueValueInfo",value:function(e,t){var i,n;this.styleOrigin?Ot.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(n="object"==typeof e?Dt(e):new qt({value:e,symbol:(0,b.g)(t)}),null!==(i=this.uniqueValueInfos)&&void 0!==i&&i.push(n),this._valueInfoMap[n.value]=n,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}},{key:"removeUniqueValueInfo",value:function(e){if(this.styleOrigin)Ot.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else{var t=this.uniqueValueInfos;if(t)for(var i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}}},{key:"getUniqueValueInfo",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,e.t0=this.valueExpression&&((0,w.t)(i)||(0,w.t)(i.arcade)),!e.t0){e.next=11;break}return e.t1=a.Z,e.t2=(0,a.Z)({},n),e.t3={},e.next=8,(0,x.i)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},n=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return e.abrupt("return",this._getUniqueValueInfo(t,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!(0,w.t)(t)&&!(0,w.t)(t.arcade)){var i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}Ot.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r,s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,!this.valueExpression||!(0,w.t)(n)&&!(0,w.t)(n.arcade)){e.next=11;break}return e.next=4,(0,x.i)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:n=(0,a.Z)((0,a.Z)({},n),{},{arcade:r});case 11:return l=this._getUniqueValueInfo(t,n),e.abrupt("return",l&&l.symbol||this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e,t,i=[],n=(0,s.Z)(null!==(e=this.uniqueValueInfos)&&void 0!==e?e:[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.symbol&&i.push(r.symbol)}}catch(a){n.e(a)}finally{n.f()}return this.defaultSymbol&&i.push(this.defaultSymbol),i}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e,t=JSON.stringify(this.backgroundFillSymbol),i=JSON.stringify(this.defaultSymbol),n=null===(e=this.uniqueValueInfos)||void 0===e?void 0:e.reduce((function(e,t){return e+t.getMeshHash()}),"");return"".concat(t,".").concat(i,".").concat(n,".","".concat(this.field,".").concat(this.field2,".").concat(this.field3,".").concat(this.fieldDelimiter),".").concat(this.valueExpression)}},{key:"clone",value:function(){var e=new Et({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,w.y)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,w.y)(this.visualVariables),legendOptions:(0,w.y)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,w.y)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=(0,w.y)(this.uniqueValueInfos),i=(0,w.y)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,w.y)(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"collectRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.collectVVRequiredFields(t,i),this.collectSymbolFields(t,i)],e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[].concat((0,y.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,i)}))),[(0,x.S)(t,i,this.valueExpression)]),(0,x.w)(t,i,this.field),(0,x.w)(t,i,this.field2),(0,x.w)(t,i,this.field3),e.next=6,Promise.all(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"populateFromStyle",value:function(){var e=this;return(0,R.c)(this.styleOrigin,{portal:this.portal}).then((function(t){var i,n=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((function(i){var r=new b.f({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:i.name});e.defaultSymbol||i.name!==t.data.defaultItem||(e.defaultSymbol=r,e._isDefaultSymbolDerived=!0);var a=new qt({value:i.name,symbol:r});n.push(a),e._valueInfoMap[i.name]=a})),e._set("uniqueValueInfos",Object.freeze(n)),e._updateGroupsFromInfos(!0),e._isInfosSource=null,e._watchUniqueValueInfos(),!e.defaultSymbol&&null!==(i=e.uniqueValueInfos)&&void 0!==i&&i.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e}))}},{key:"_updateFieldDelimiter",value:function(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}},{key:"_updateUniqueValues",value:function(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}},{key:"_updateValueInfoMap",value:function(){this._valueInfoMap={};var e=this.uniqueValueInfos;if(e){var t,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;this._valueInfoMap[n.value+""]=n}}catch(r){i.e(r)}finally{i.f()}}}},{key:"_watchUniqueValueInfosAndGroups",value:function(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}},{key:"_watchUniqueValueInfos",value:function(){var e=this;this.removeHandles(Ut);var t=this.uniqueValueInfos;if(t){var i,n=[],r=(0,s.Z)(t);try{var a=function(){var t=i.value;n.push((0,_.l)((function(){return{symbol:t.symbol,value:t.value,label:t.label,description:t.description}}),(function(t,i){t!==i&&(e._updateGroupsFromInfos(),e._isInfosSource=!0)}),{sync:!0}))};for(r.s();!(i=r.n()).done;)a()}catch(l){r.e(l)}finally{r.f()}this.addHandles(n,Ut)}}},{key:"_watchUniqueValueGroups",value:function(){var e=this;this.removeHandles(Ct);var t=this.uniqueValueGroups;if(t){var i,n=[],r=(0,s.Z)(t);try{var a=function(){var t=i.value;n.push((0,_.l)((function(){return{classes:t.classes}}),(function(t,i){t!==i&&(e._updateInfosFromGroups(),e._isInfosSource=!1)}),{sync:!0}));var r,a=(0,s.Z)(t.classes);try{var l=function(){var t=r.value;n.push((0,_.l)((function(){return{symbol:t.symbol,values:t.values,label:t.label,description:t.description}}),(function(t,i){t!==i&&(e._updateInfosFromGroups(),e._isInfosSource=!1)}),{sync:!0}))};for(a.s();!(r=a.n()).done;)l()}catch(o){a.e(o)}finally{a.f()}};for(r.s();!(i=r.n()).done;)a()}catch(l){r.e(l)}finally{r.f()}this.addHandles(n,Ct)}}},{key:"_updateInfosFromGroups",value:function(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();var e=[],t=this.field,i=this.field2,n=this.field3,r=this.fieldDelimiter,a=this.uniqueValueGroups,l=this.valueExpression;if(!t&&!l)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();var o,u=!(!t||!i),c=(0,s.Z)(a);try{for(c.s();!(o=c.n()).done;){var p,y,f=o.value,d=(0,s.Z)(null!==(p=f.classes)&&void 0!==p?p:[]);try{for(d.s();!(y=d.n()).done;){var v,h=y.value,m=h.symbol,b=h.label,g=h.values,w=h.description,V=(0,s.Z)(null!==g&&void 0!==g?g:[]);try{for(V.s();!(v=V.n()).done;){var S=v.value,x=S.value,k=S.value2,I=S.value3,_=[x];i&&_.push(k),n&&_.push(I);var z=u?_.join(r||""):_[0];e.push(new qt({symbol:m,label:b,value:z,description:w}))}}catch(Z){V.e(Z)}finally{V.f()}}}catch(Z){d.e(Z)}finally{d.f()}}}catch(Z){c.e(Z)}finally{c.f()}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}},{key:"_updateGroupsFromInfos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();var t=this.field,i=this.field2,n=this.valueExpression,r=this.fieldDelimiter,a=this.uniqueValueInfos;if(!t&&!n||!a.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();var s=!(!t||!i),o=a.map((function(e){var t,i=e.symbol,n=e.label,a=e.value,o=e.description,u=s?(null===a||void 0===a||null===(t=a.toString())||void 0===t?void 0:t.split(r||""))||[]:[a],c=(0,l.Z)(u,3),p=c[0],y=c[1],f=c[2];return new _t({symbol:i,label:n,description:o,values:[new kt({value:p,value2:y,value3:f})]})})),u=[new jt({classes:o})];e&&Object.freeze(u),this._set("uniqueValueGroups",u),this._watchUniqueValueGroups()}},{key:"_getUniqueValueInfo",value:function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}},{key:"_getUnqiueValueInfoForExpression",value:function(e,t){var i=(0,w.v)(t,{}),n=i.viewingMode,r=i.scale,a=i.spatialReference,s=i.arcade,l=this._cache.compiledFunc,o=(0,w.e)(s).arcadeUtils;if(!l){var u=o.createSyntaxTree(this.valueExpression);l=o.createFunction(u),this._cache.compiledFunc=l}var c=o.executeFunction(l,o.createExecContext(e,o.getViewInfo({viewingMode:n,scale:r,spatialReference:a})));return this._valueInfoMap[c+""]}},{key:"_getUnqiueValueInfoForFields",value:function(e){var t,i=this.field,n=e.attributes;if("function"!=typeof i&&this.field2){var r=this.field2,a=this.field3,s=[];i&&s.push(n[i]),r&&s.push(n[r]),a&&s.push(n[a]),t=s.join(this.fieldDelimiter||"")}else"function"==typeof i?t=i(e):i&&(t=n[i]);return this._valueInfoMap[t+""]}}],[{key:"fromPortalStyle",value:function(e,t){var i=new Et(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Z.j.getDefault());var n=i.populateFromStyle();return n.catch((function(t){Ot.error("#fromPortalStyle('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style name",t)})),n}},{key:"fromStyleUrl",value:function(e,t){var i=new Et(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));var n=i.populateFromStyle();return n.catch((function(t){Ot.error("#fromStyleUrl('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style URL",t)})),n}}]),i}(ot(le));(0,m.e)([(0,m.y)({readOnly:!0})],Nt.prototype,"_cache",null),(0,m.e)([(0,V.r)({uniqueValue:"unique-value"})],Nt.prototype,"type",void 0),(0,m.e)([(0,m.y)(yt)],Nt.prototype,"backgroundFillSymbol",void 0),(0,m.e)([(0,m.y)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Nt.prototype,"field",null),(0,m.e)([(0,m.c)("field")],Nt.prototype,"castField",null),(0,m.e)([(0,S.r)("field")],Nt.prototype,"writeField",null),(0,m.e)([(0,m.y)({type:String,value:null,json:{write:!0}})],Nt.prototype,"field2",null),(0,m.e)([(0,m.y)({type:String,value:null,json:{write:!0}})],Nt.prototype,"field3",null),(0,m.e)([(0,m.y)({type:String,value:null,json:{write:!0}})],Nt.prototype,"valueExpression",null),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Nt.prototype,"valueExpressionTitle",void 0),(0,m.e)([(0,m.y)({type:I.p,json:{write:!0}})],Nt.prototype,"legendOptions",void 0),(0,m.e)([(0,m.y)({type:String,json:{write:!0}})],Nt.prototype,"defaultLabel",void 0),(0,m.e)([(0,m.y)((0,w.z)((0,a.Z)({},pt),{json:{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Nt.prototype,"defaultSymbol",null),(0,m.e)([(0,m.y)({type:String,value:null,json:{write:!0}})],Nt.prototype,"fieldDelimiter",null),(0,m.e)([(0,m.y)({type:Z.j,readOnly:!0})],Nt.prototype,"portal",void 0),(0,m.e)([(0,S.o)("portal",["styleName"])],Nt.prototype,"readPortal",null),(0,m.e)([(0,m.y)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],Nt.prototype,"styleOrigin",void 0),(0,m.e)([(0,S.o)("styleOrigin",["styleName","styleUrl"])],Nt.prototype,"readStyleOrigin",null),(0,m.e)([(0,S.r)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Nt.prototype,"writeStyleOrigin",null),(0,m.e)([(0,m.y)({type:[jt],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:function(e,t,i){return(t.uniqueValueGroups||function(e){var t=e.field1,i=e.field2,n=e.field3,r=e.fieldDelimiter,a=e.uniqueValueInfos,s=e.valueExpression,o=!(!t||!i);return[{classes:(null!==a&&void 0!==a?a:[]).map((function(e){var a,u=e.symbol,c=e.label,p=e.value,y=e.description,f=o?(null===p||void 0===p||null===(a=p.toString())||void 0===a?void 0:a.split(r||""))||[]:[p],d=(0,l.Z)(f,3),v=d[0],h=d[1],m=d[2],b=[];return(t||s)&&b.push(v),i&&b.push(h),n&&b.push(m),{symbol:u,label:c,values:[b],description:y}}))}]}(t)).map((function(e){return jt.fromJSON(e,i)}))}},write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nt.prototype,"uniqueValueGroups",null),(0,m.e)([(0,m.y)({type:[qt],json:{read:!1,write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nt.prototype,"uniqueValueInfos",null);var Mt=Nt=Et=(0,m.e)([(0,m.n)(Tt)],Nt)},70449:function(e,t,i){i.d(t,{S:function(){return l},a:function(){return s},c:function(){return c},m:function(){return u},p:function(){return f}});var n=i(37944),r=i(48848),a=i(93661),s={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(!e)return{symbol:null};var i=t.retainId,a=void 0===i?s.retainId:i,l=t.ignoreDrivers,o=void 0===l?s.ignoreDrivers:l,u=t.hasLabelingContext,c=void 0===u?s.hasLabelingContext:u,p=t.retainCIM,y=void 0===p?s.retainCIM:p,f=null;if((0,n.c)(e)||e instanceof n.f)f=e.clone();else if("cim"===e.type){var d,v,h=null===(d=e.data)||void 0===d||null===(v=d.symbol)||void 0===v?void 0:v.type;if("CIMPointSymbol"!==h)return{error:new r.s("symbol-conversion:unsupported-cim-symbol","CIM symbol of type '".concat(h||"unknown","' is unsupported in 3D"),{symbol:e})};f=y?e.clone():n.d.fromCIMSymbol(e)}else if(e instanceof n.m)f=n.e.fromSimpleLineSymbol(e);else if(e instanceof n.y)f=n.d.fromSimpleMarkerSymbol(e);else if(e instanceof n.n)f=n.d.fromPictureMarkerSymbol(e);else if(e instanceof n.a)f=t.geometryType&&"mesh"===t.geometryType?n.i.fromSimpleFillSymbol(e):n.S.fromSimpleFillSymbol(e);else{if(!(e instanceof n.b))return{error:new r.s("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};f=c?n.k.fromTextSymbol(e):n.d.fromTextSymbol(e)}if(a&&f&&"cim"!==f.type&&(f.id=e.id),o&&(0,n.c)(f))for(var m=0;m<f.symbolLayers.length;++m)f.symbolLayers.getItemAt(m)._ignoreDrivers=!0;return{symbol:f}}var o=["building-scene","integrated-mesh","point-cloud","scene"];function u(e,t,i,n){var r=y(e,{},{context:n,isLabelSymbol:!1});(0,a.r)(r)&&(t[i]=r)}function c(e,t,i,n){var r=y(e,{},{context:n,isLabelSymbol:!0});(0,a.r)(r)&&(t[i]=r)}function p(e){return e instanceof n.l||e instanceof n.f}function y(e,t,i){var n;if((0,a.t)(e))return null;var s=i.context,u=i.isLabelSymbol,c=null===s||void 0===s?void 0:s.origin,y=null===s||void 0===s?void 0:s.messages;if("web-scene"===c&&!p(e)){var f=l(e,{retainCIM:!0,hasLabelingContext:u});return(0,a.r)(f.symbol)?f.symbol.write(t,s):(null!==y&&void 0!==y&&y.push(new r.s("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:s,error:f.error})),null)}var d=null===s||void 0===s||null===(n=s.layer)||void 0===n?void 0:n.type;return"web-map"!==c&&("portal-item"!==c||d&&o.includes(d))||!p(e)?e.write(t,s):(null!==y&&void 0!==y&&y.push(new r.s("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView"),{symbol:e,context:s})),null)}function f(e,t){return(0,n.o)(e,null,t)}},22603:function(e,t,i){i.d(t,{a:function(){return p},b:function(){return g},c:function(){return h},d:function(){return b},p:function(){return m},t:function(){return y},w:function(){return S}});var n=i(74165),r=i(1413),a=i(37762),s=i(15861),l=i(40558),o=i(48848),u=i(93661),c=i(93116),p=function(){return!!(0,u.h)("enable-feature:direct-3d-object-feature-layer-display")},y=function(){return!!(0,u.h)("enable-feature:SceneLayer-editing")},f={};function d(){return d=(0,s.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t,i);case 3:return e.t0=e.sent.data,e.t1=(0,l.O)(t),e.t2=t,e.abrupt("return",{data:e.t0,baseUrl:e.t1,styleUrl:e.t2});case 9:return e.prev=9,e.t3=e.catch(0),e.abrupt("return",((0,o.w)(e.t3),null));case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),d.apply(this,arguments)}function v(e,t,i){var n,r=(0,u.r)(t.portal)?t.portal:c.j.getDefault(),s="".concat(r.url," - ").concat(r.user&&r.user.username," - ").concat(e);return f[s]||(f[s]=function(e,t,i){return t.load(i).then((function(){var n=new c.d({disableExtraQuery:!0,query:"owner:".concat(w," AND type:").concat(V,' AND typekeywords:"').concat(e,'"')});return t.queryItems(n,i)})).then((function(t){var n=t.results,r=null,s=e.toLowerCase();if(n&&Array.isArray(n)){var l,u=(0,a.Z)(n);try{for(u.s();!(l=u.n()).done;){var c,p=l.value,y=null===(c=p.typeKeywords)||void 0===c?void 0:c.some((function(e){return e.toLowerCase()===s}));if(y&&p.type===V&&p.owner===w){r=p;break}}}catch(f){u.e(f)}finally{u.f()}}if(!r)throw new o.s("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return r.load(i)}))}(e,r,i).then((function(e){return n=e,e.fetchData()})).then((function(t){var i;return{data:t,baseUrl:null!==(i=n.itemUrl)&&void 0!==i?i:"",styleName:e}}))),f[s]}function h(e,t,i){return e&&(0,u.r)(e.styleUrl)?function(e,t){return d.apply(this,arguments)}(e.styleUrl,i):e&&(0,u.r)(e.styleName)?v(e.styleName,t,i):Promise.reject(new o.s("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function m(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function b(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,u.h)("enable-feature:force-wosr")){var i,n=(0,a.Z)(e.formatInfos);try{for(n.s();!(i=n.n()).done;){var r=i.value;if("gltf"===r.type)return r.href}}catch(s){n.e(s)}finally{n.f()}}return e.webRef}function g(e,t){var i=(0,r.Z)({responseType:"json",query:{f:"json"}},t);return(0,l.U)((0,l.F)(e),i)}var w="esri_en",V="Style",S="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"}}]);
//# sourceMappingURL=2821.57d2b7b5.chunk.js.map