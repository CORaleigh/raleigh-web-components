"use strict";(self.webpackChunkraleighnc_web_component=self.webpackChunkraleighnc_web_component||[]).push([[7154],{96636:function(e,t,i){i.d(t,{a:function(){return v},p:function(){return y}});var n,r,a=i(15671),s=i(43144),l=i(60136),o=i(29388),u=i(23132),c=i(70441),p=(i(75610),i(78674)),d=i(30709),y=n=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).title=null,e}return(0,s.Z)(i,[{key:"clone",value:function(){return new n({title:this.title})}}]),i}(c.l);(0,u.e)([(0,u.d)({type:String,json:{write:!0}})],y.prototype,"title",void 0),y=n=(0,u.e)([(0,u.n)("esri.renderers.support.LegendOptions")],y);var f=r=function(e){(0,l.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).color=null,n.label=null,n.value=null,n}return(0,s.Z)(i,[{key:"writeValue",value:function(e,t,i){t[i]=null==e?0:e}},{key:"clone",value:function(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}}]),i}(c.l);(0,u.e)([(0,u.d)({type:p.l,json:{type:[u.S],write:!0}})],f.prototype,"color",void 0),(0,u.e)([(0,u.d)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,u.e)([(0,u.d)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],f.prototype,"value",void 0),(0,u.e)([(0,d.r)("value")],f.prototype,"writeValue",null);var v=f=r=(0,u.e)([(0,u.n)("esri.renderers.visualVariables.support.ColorStop")],f)},83822:function(e,t,i){i.d(t,{g:function(){return w}});var n=i(1413),r=i(4942),a=i(15671),s=i(43144),l=i(97326),o=i(60136),u=i(29388),c=i(23132),p=i(91204),d=i(51451),y=i(24980),f=i(2157),v=i(70441),h=i(75610),m=i(30604);function b(e){if(!(0,h.r)(e))return null;var t={};for(var i in e){var n=e[i];n&&(t[i]=n.toJSON())}return 0!==Object.keys(t).length?t:null}var g=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).isAggregate=!1,e.layer=null,e.popupTemplate=null,e.sourceLayer=null,Object.defineProperty((0,l.Z)(e),"uid",{value:(0,c.C)(),configurable:!0}),e}return(0,s.Z)(i,[{key:"normalizeCtorArgs",value:function(e,t,i,n){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:n}}},{key:"aggregateGeometries",set:function(e){var t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}},{key:"attributes",set:function(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}},{key:"geometry",set:function(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}},{key:"symbol",set:function(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}},{key:"visible",set:function(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}},{key:"getEffectivePopupTemplate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.popupTemplate)return this.popupTemplate;for(var t=0,i=[this.sourceLayer,this.layer];t<i.length;t++){var n=i[t];if(n){if("popupTemplate"in n&&n.popupTemplate)return n.popupTemplate;if(e&&"defaultPopupTemplate"in n&&(0,h.r)(n.defaultPopupTemplate))return n.defaultPopupTemplate}}return null}},{key:"getAttribute",value:function(e){return this.attributes&&this.attributes[e]}},{key:"setAttribute",value:function(e,t){if(this.attributes){var i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes=(0,r.Z)({},e,t),this._notifyLayer("attributes",void 0,t,e)}},{key:"getObjectId",value:function(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}},{key:"toJSON",value:function(){return{aggregateGeometries:b(this.aggregateGeometries),geometry:(0,h.r)(this.geometry)?this.geometry.toJSON():null,symbol:(0,h.r)(this.symbol)?this.symbol.toJSON():null,attributes:(0,n.Z)({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}},{key:"notifyGeometryChanged",value:function(){this._notifyLayer("geometry",this.geometry,this.geometry)}},{key:"notifyMeshTransformChanged",value:function(){(0,h.r)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}},{key:"_notifyLayer",value:function(e,t,i,n){if(this.layer&&"graphicChanged"in this.layer){var r={graphic:this,property:e,oldValue:t,newValue:i};"attributes"===e&&(r.attributeName=n),this.layer.graphicChanged(r)}}}]),i}((0,f.l)(v.l));(0,c.e)([(0,c.d)({value:null,json:{read:function(e){if(!e)return null;var t={};for(var i in e){var n=(0,m.d)(e[i]);n&&(t[i]=n)}return 0!==Object.keys(t).length?t:null}}})],g.prototype,"aggregateGeometries",null),(0,c.e)([(0,c.d)({value:null})],g.prototype,"attributes",null),(0,c.e)([(0,c.d)({value:null,types:p.i,json:{read:m.d}})],g.prototype,"geometry",null),(0,c.e)([(0,c.d)({type:Boolean})],g.prototype,"isAggregate",void 0),(0,c.e)([(0,c.d)({clonable:"reference"})],g.prototype,"layer",void 0),(0,c.e)([(0,c.d)({type:d.B})],g.prototype,"popupTemplate",void 0),(0,c.e)([(0,c.d)({clonable:"reference"})],g.prototype,"sourceLayer",void 0),(0,c.e)([(0,c.d)({value:null,types:y.j})],g.prototype,"symbol",null),(0,c.e)([(0,c.d)({type:Boolean,value:!0})],g.prototype,"visible",null),g=(0,c.e)([(0,c.n)("esri.Graphic")],g),(g||(g={})).generateUID=c.C;var w=g},67154:function(e,t,i){i.r(t),i.d(t,{N:function(){return Vt},P:function(){return Ft},T:function(){return Pe},a:function(){return Le},b:function(){return Ye},c:function(){return _e},d:function(){return Fe},e:function(){return Ne},f:function(){return yt},g:function(){return St},h:function(){return Me},i:function(){return Je},j:function(){return ie},l:function(){return ut},m:function(){return De},n:function(){return ze},p:function(){return se},v:function(){return ot}});var n,r,a=i(1413),s=i(37762),l=i(29439),o=i(11752),u=i(61120),c=i(74165),p=i(15861),d=i(93433),y=i(15671),f=i(43144),v=i(60136),h=i(29388),m=i(23132),b=i(24980),g=i(57714),w=i(75610),V=i(50448),x=i(30709),k=i(50526),S=i(70441),z=i(96636),I=i(79054),Z=i(79611),F=i(29709),j=i(88370),_=i(78880),E=i(47642),T=i(78674),O=i(83822),q=i(18411),N=i(43782),M=i(22144),D=i(96349),C=i(33976),U=n=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).minValue=0,n.maxValue=0,n}return(0,f.Z)(i,[{key:"clone",value:function(){return new n({minValue:this.minValue,maxValue:this.maxValue})}}]),i}(S.l);(0,m.e)([(0,m.d)({type:Number,json:{write:!0}})],U.prototype,"minValue",void 0),(0,m.e)([(0,m.d)({type:Number,json:{write:!0}})],U.prototype,"maxValue",void 0),U=n=(0,m.e)([(0,m.n)("esri.renderer.support.AuthoringInfoClassBreakInfo")],U);var B,R=r=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).field="",n.normalizationField="",n.label="",n.classBreakInfos=[],n}return(0,f.Z)(i,[{key:"clone",value:function(){return new r({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,w.m)(this.classBreakInfos)})}}]),i}(S.l);(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],R.prototype,"field",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],R.prototype,"normalizationField",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],R.prototype,"label",void 0),(0,m.e)([(0,m.d)({type:[U],json:{write:!0}})],R.prototype,"classBreakInfos",void 0),R=r=(0,m.e)([(0,m.n)("esri.renderers.support.AuthoringInfoFieldInfo")],R);var L=new g.s({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),A=new g.s({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),P={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},H=["high-to-low","above-and-below","centered-on","extremes"],J=(0,d.Z)(new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"].concat(["high-to-low","above-and-below","90-10","above","below"]))),G=["seconds","minutes","hours","days","months","years"],W=B=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).endTime=null,n.field=null,n.maxSliderValue=null,n.minSliderValue=null,n.startTime=null,n.type=null,n.units=null,n}return(0,f.Z)(i,[{key:"castEndTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"castStartTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)}},{key:"clone",value:function(){return new B({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}}]),i}(S.l);(0,m.e)([(0,m.d)({types:P,json:{write:!0}})],W.prototype,"endTime",void 0),(0,m.e)([(0,m.q)("endTime")],W.prototype,"castEndTime",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],W.prototype,"field",void 0),(0,m.e)([(0,m.d)({type:Number,json:{write:!0}})],W.prototype,"maxSliderValue",void 0),(0,m.e)([(0,m.d)({type:Number,json:{write:!0}})],W.prototype,"minSliderValue",void 0),(0,m.e)([(0,m.d)({types:P,json:{write:!0}})],W.prototype,"startTime",void 0),(0,m.e)([(0,m.q)("startTime")],W.prototype,"castStartTime",null),(0,m.e)([(0,m.d)({type:L.apiValues,value:null,json:{type:L.jsonValues,read:L.read,write:L.write}})],W.prototype,"style",null),(0,m.e)([(0,m.d)({type:J,value:null,json:{type:J,origins:{"web-scene":{type:H,write:{writer:function(e,t){H.includes(e)&&(t.theme=e)}}}},write:!0}})],W.prototype,"theme",null),(0,m.e)([(0,m.d)({type:A.apiValues,json:{type:A.jsonValues,read:A.read,write:A.write}})],W.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:G,json:{type:G,write:!0}})],W.prototype,"units",void 0);var $,Q=W=B=(0,m.e)([(0,m.n)("esri.renderers.support.AuthoringInfoVisualVariable")],W),K=new g.s({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),X=new g.s({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),Y=new g.s({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),ee=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],te=$=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).colorRamp=null,n.lengthUnit=null,n.maxSliderValue=null,n.minSliderValue=null,n.visualVariables=null,n}return(0,f.Z)(i,[{key:"classificationMethod",get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)}},{key:"readColorRamp",value:function(e){if(e)return(0,F.p)(e)}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)}},{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)}},{key:"flowTheme",get:function(){return"flow"===this.type?this._get("flowTheme"):null},set:function(e){this._set("flowTheme",e)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(e){this._set("statistics",e)}},{key:"standardDeviationInterval",get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)}},{key:"type",get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(e){this._set("univariateSymbolStyle",e)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(e){this._set("univariateTheme",e)}},{key:"clone",value:function(){return new $({classificationMethod:this.classificationMethod,colorRamp:(0,w.m)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:(0,w.m)(this.field1),field2:(0,w.m)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((function(e){return e.clone()})),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}}]),i}(S.l);(0,m.e)([(0,m.d)({type:K.apiValues,value:null,json:{type:K.jsonValues,read:K.read,write:K.write,origins:{"web-document":{default:"manual",type:K.jsonValues,read:K.read,write:K.write}}}})],te.prototype,"classificationMethod",null),(0,m.e)([(0,m.d)({types:F.m,json:{write:!0}})],te.prototype,"colorRamp",void 0),(0,m.e)([(0,x.o)("colorRamp")],te.prototype,"readColorRamp",null),(0,m.e)([(0,m.d)({type:[String],value:null,json:{write:!0}})],te.prototype,"fields",null),(0,m.e)([(0,m.d)({type:R,value:null,json:{write:!0}})],te.prototype,"field1",null),(0,m.e)([(0,m.d)({type:R,value:null,json:{write:!0}})],te.prototype,"field2",null),(0,m.e)([(0,m.d)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],te.prototype,"flowTheme",null),(0,m.e)([(0,m.d)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],te.prototype,"focus",null),(0,m.e)([(0,m.d)({type:Number,value:null,json:{type:m.S,write:!0}})],te.prototype,"numClasses",null),(0,m.e)([(0,m.d)({type:ee,json:{type:ee,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],te.prototype,"lengthUnit",void 0),(0,m.e)([(0,m.d)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"maxSliderValue",void 0),(0,m.e)([(0,m.d)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"minSliderValue",void 0),(0,m.e)([(0,m.d)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"statistics",null),(0,m.e)([(0,m.d)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],te.prototype,"standardDeviationInterval",null),(0,m.e)([(0,m.d)({type:X.apiValues,value:null,json:{type:X.jsonValues,read:X.read,write:X.write,origins:{"web-scene":{type:Y.jsonValues,write:{writer:Y.write,overridePolicy:function(e){return{enabled:"flow"!==e}}}}}}})],te.prototype,"type",null),(0,m.e)([(0,m.d)({type:[Q],json:{write:!0}})],te.prototype,"visualVariables",void 0),(0,m.e)([(0,m.d)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],te.prototype,"univariateSymbolStyle",null),(0,m.e)([(0,m.d)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],te.prototype,"univariateTheme",null);var ie=te=$=(0,m.e)([(0,m.n)("esri.renderers.support.AuthoringInfo")],te),ne=new g.s({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0}),re=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).authoringInfo=null,n.type=null,n}return(0,f.Z)(i,[{key:"getRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t){var i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.collectRequiredFields){e.next=2;break}return e.abrupt("return",[]);case 2:return i=new Set,e.next=5,this.collectRequiredFields(i,t);case 5:return e.abrupt("return",Array.from(i).sort());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return JSON.stringify(this)}},{key:"getMeshHash",value:function(){return JSON.stringify(this)}}]),i}(S.l);(0,m.e)([(0,m.d)({type:ie,json:{write:!0}})],re.prototype,"authoringInfo",void 0),(0,m.e)([(0,m.d)({type:ne.apiValues,readOnly:!0,json:{type:ne.jsonValues,read:!1,write:{writer:ne.write,ignoreOrigin:!0}}})],re.prototype,"type",void 0);var ae,se=re=(0,m.e)([(0,m.n)("esri.renderers.Renderer")],re),le=ae=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,y.Z)(this,i),(e=t.apply(this,arguments)).showLegend=null,e}return(0,f.Z)(i,[{key:"clone",value:function(){return new ae({title:this.title,showLegend:this.showLegend})}}]),i}(z.p);(0,m.e)([(0,m.d)({type:Boolean,json:{write:!0}})],le.prototype,"showLegend",void 0);var oe=le=ae=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],le),ue=m.s.getLogger("esri.renderers.visualVariables.VisualVariable"),ce=new g.s({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),pe=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).index=null,n.type=null,n.field=null,n.valueExpression=null,n.valueExpressionTitle=null,n.legendOptions=null,n}return(0,f.Z)(i,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(ue.error(".field: field must be a string value"),null):(0,m.a8)(e)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression}},{key:"clone",value:function(){}},{key:"getAttributeHash",value:function(){return"".concat(this.type,"-").concat(this.field,"-").concat(this.valueExpression)}}]),i}(S.l);(0,m.e)([(0,m.d)()],pe.prototype,"index",void 0),(0,m.e)([(0,m.d)({type:ce.apiValues,readOnly:!0,json:{read:ce.read,write:ce.write}})],pe.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],pe.prototype,"field",void 0),(0,m.e)([(0,m.q)("field")],pe.prototype,"castField",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],pe.prototype,"valueExpression",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],pe.prototype,"valueExpressionTitle",void 0),(0,m.e)([(0,m.d)({readOnly:!0})],pe.prototype,"arcadeRequired",null),(0,m.e)([(0,m.d)({type:oe,json:{write:!0}})],pe.prototype,"legendOptions",void 0);var de,ye=pe=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.VisualVariable")],pe),fe=de=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).type="color",n.normalizationField=null,n}return(0,f.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new de({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,o.Z)((0,u.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(ye);(0,m.e)([(0,m.d)({readOnly:!0})],fe.prototype,"cache",null),(0,m.e)([(0,m.d)({type:["color"],json:{type:["colorInfo"]}})],fe.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],fe.prototype,"normalizationField",void 0),(0,m.e)([(0,m.d)({type:[z.a],json:{write:!0}})],fe.prototype,"stops",null);var ve,he=fe=de=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.ColorVariable")],fe),me=ve=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).label=null,n.opacity=null,n.value=null,n}return(0,f.Z)(i,[{key:"readOpacity",value:function(e,t){return(0,j.r)(t.transparency)}},{key:"writeOpacity",value:function(e,t,i){t[i]=(0,j.n)(e)}},{key:"clone",value:function(){return new ve({label:this.label,opacity:this.opacity,value:this.value})}}]),i}(S.l);(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],me.prototype,"label",void 0),(0,m.e)([(0,m.d)({type:Number,json:{type:m.S,write:{target:"transparency"}}})],me.prototype,"opacity",void 0),(0,m.e)([(0,x.o)("opacity",["transparency"])],me.prototype,"readOpacity",null),(0,m.e)([(0,x.r)("opacity")],me.prototype,"writeOpacity",null),(0,m.e)([(0,m.d)({type:Number,json:{write:!0}})],me.prototype,"value",void 0);var be,ge=me=ve=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.OpacityStop")],me),we=be=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).type="opacity",n.normalizationField=null,n}return(0,f.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new be({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,o.Z)((0,u.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(ye);(0,m.e)([(0,m.d)({readOnly:!0})],we.prototype,"cache",null),(0,m.e)([(0,m.d)({type:["opacity"],json:{type:["transparencyInfo"]}})],we.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],we.prototype,"normalizationField",void 0),(0,m.e)([(0,m.d)({type:[ge],json:{write:!0}})],we.prototype,"stops",null);var Ve,xe=we=be=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.OpacityVariable")],we),ke=Ve=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).axis=null,n.type="rotation",n.rotationType="geographic",n.valueExpressionTitle=null,n}return(0,f.Z)(i,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"writeValueExpressionTitleWebScene",value:function(e,t,i,n){if(n&&n.messages){var r="visualVariables[".concat(this.index,"]");n.messages.push(new m.a("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:n}))}}},{key:"clone",value:function(){return new Ve({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}}]),i}(ye);(0,m.e)([(0,m.d)({readOnly:!0})],ke.prototype,"cache",null),(0,m.e)([(0,m.d)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ke.prototype,"axis",void 0),(0,m.e)([(0,m.d)({type:["rotation"],json:{type:["rotationInfo"]}})],ke.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ke.prototype,"rotationType",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],ke.prototype,"valueExpressionTitle",void 0),(0,m.e)([(0,x.r)("web-scene","valueExpressionTitle")],ke.prototype,"writeValueExpressionTitleWebScene",null);var Se,ze=ke=Ve=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.RotationVariable")],ke),Ie=Se=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).label=null,n.size=null,n.value=null,n}return(0,f.Z)(i,[{key:"clone",value:function(){return new Se({label:this.label,size:this.size,value:this.value})}}]),i}(S.l);(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Ie.prototype,"label",void 0),(0,m.e)([(0,m.d)({type:Number,cast:_.o,json:{write:!0}})],Ie.prototype,"size",void 0),(0,m.e)([(0,m.d)({type:Number,json:{write:!0}})],Ie.prototype,"value",void 0);var Ze,Fe=Ie=Se=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.SizeStop")],Ie),je=Ze=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,y.Z)(this,i),(e=t.apply(this,arguments)).customValues=null,e}return(0,f.Z)(i,[{key:"clone",value:function(){return new Ze({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}}]),i}(oe);(0,m.e)([(0,m.d)({type:[Number],json:{write:!0}})],je.prototype,"customValues",void 0);var _e=je=Ze=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],je),Ee=m.s.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Te=new O.g,Oe=Math.PI,qe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Ne(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"color"===e.type})):e;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var r="number"==typeof t,a=r?null:t,s=a&&a.attributes,l=r?t:null,o=n.field,u=n.cache,c=u.ipData,p=u.hasExpression,d=n.cache.compiledFunc;if(!o&&!p){var y=n.stops;return y&&y[0]&&y[0].color}if("number"!=typeof l)if(p){if((0,w.t)(i)||(0,w.t)(i.arcade))return void Ee.error("Use of arcade expressions requires an arcade context");var f={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,h=v.getViewInfo(f),m=v.createExecContext(a,h);if(!d){var b=v.createSyntaxTree(n.valueExpression);d=v.createFunction(b),n.cache.compiledFunc=d}l=v.executeFunction(d,m)}else s&&(l=s[o]);var g=n.normalizationField,V=s?parseFloat(s[g]):void 0;if(null!=l&&(!g||r||!isNaN(V)&&0!==V)){isNaN(V)||r||(l/=V);var x=Ae(l,c);if(x){var k=x[0],S=x[1],z=k===S?n.stops[k].color:T.l.blendColors(n.stops[k].color,n.stops[S].color,x[2],(0,w.r)(i)?i.color:void 0);return new T.l(z)}}}else Ee.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function Me(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"opacity"===e.type})):e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var r="number"==typeof t,a=r?null:t,s=a&&a.attributes,l=r?t:null,o=n.field,u=n.cache,c=u.ipData,p=u.hasExpression,d=n.cache.compiledFunc;if(!o&&!p){var y=n.stops;return y&&y[0]&&y[0].opacity}if("number"!=typeof l)if(p){if((0,w.t)(i)||(0,w.t)(i.arcade))return void Ee.error("Use of arcade expressions requires an arcade context");var f={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,h=v.getViewInfo(f),m=v.createExecContext(a,h);if(!d){var b=v.createSyntaxTree(n.valueExpression);d=v.createFunction(b),n.cache.compiledFunc=d}l=v.executeFunction(d,m)}else s&&(l=s[o]);var g=n.normalizationField,V=s?parseFloat(s[g]):void 0;if(null!=l&&(!g||r||!isNaN(V)&&0!==V)){isNaN(V)||r||(l/=V);var x=Ae(l,c);if(x){var k=x[0],S=x[1];if(k===S)return n.stops[k].opacity;var z=n.stops[k].opacity;return z+(n.stops[S].opacity-z)*x[2]}}}else Ee.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function De(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"rotation"===e.type})):e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var r=n.axis||"heading",a="heading"===r&&"arithmetic"===n.rotationType?90:0,s="heading"===r&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof t?null:t,o=l&&l.attributes,u=n.field,c=n.cache.hasExpression,p=n.cache.compiledFunc,d=0;if(!u&&!c)return d;if(c){if((0,w.t)(i)||(0,w.t)(i.arcade))return void Ee.error("Use of arcade expressions requires an arcade context");var y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},f=i.arcade.arcadeUtils,v=f.getViewInfo(y),h=f.createExecContext(l,v);if(!p){var m=f.createSyntaxTree(n.valueExpression);p=f.createFunction(m),n.cache.compiledFunc=p}d=f.executeFunction(p,h)}else o&&(d=o[u]||0);return d="number"!=typeof d||isNaN(d)?null:a+s*d}Ee.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function Ce(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"size"===e.type})):e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var r=Re(function(e,t,i){var n="number"==typeof t,r=n?null:t,a=r&&r.attributes,s=n?t:null,l=e.cache.isScaleDriven,o=e.cache.compiledFunc;if(l){var u=(0,w.r)(i)?i.scale:void 0,c=(0,w.r)(i)?i.view:void 0;s=null==u||"3d"===c?function(e){var t=null,i=null,n=e.stops;return n?(t=n[0].value,i=n[n.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):u}else if(!n)switch(e.inputValueType){case E.n.Expression:if((0,w.t)(i)||(0,w.t)(i.arcade))return void Ee.error("Use of arcade expressions requires an arcade context");var p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},d=i.arcade.arcadeUtils,y=d.getViewInfo(p),f=d.createExecContext(r,y);if(!o){var v=d.createSyntaxTree(e.valueExpression);o=d.createFunction(v),e.cache.compiledFunc=o}s=d.executeFunction(o,f);break;case E.n.Field:a&&(s=a[e.field]);break;case E.n.Unknown:s=null}if(!(0,E.l)(s))return null;if(n||!e.normalizationField)return s;var h=a?parseFloat(a[e.normalizationField]):null;return(0,E.l)(h)&&0!==h?s/h:null}(n,t,i),n,t,i,n.cache.ipData);return null==r||isNaN(r)?0:r}Ee.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function Ue(e,t,i){return null==e?null:(0,E.e)(e)?Ce(e,t,i):(0,E.l)(e)?e:null}function Be(e,t,i){return(0,E.l)(i)&&e>i?i:(0,E.l)(t)&&e<t?t:e}function Re(e,t,i,n,r){switch(t.transformationType){case E.i.Additive:return function(e,t,i,n){return e+(Ue(t.minSize,i,n)||t.minDataValue)}(e,t,i,n);case E.i.Constant:return function(e,t,i){var n=e.stops,r=n&&n.length&&n[0].size;return null==r&&(r=e.minSize),Ue(r,t,i)}(t,i,n);case E.i.ClampedLinear:return function(e,t,i,n){var r=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=Ue(t.minSize,i,n),s=Ue(t.maxSize,i,n),l=(0,w.r)(n)?n.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&l){var o="circle"===l,u=o?Oe*Math.pow(a/2,2):a*a,c=u+r*((o?Oe*Math.pow(s/2,2):s*s)-u);return o?2*Math.sqrt(c/Oe):Math.sqrt(c)}return a+r*(s-a)}(e,t,i,n);case E.i.Proportional:return function(e,t,i,n){var r=(0,w.r)(n)?n.shape:void 0,a=e/t.minDataValue,s=Ue(t.minSize,i,n),l=Ue(t.maxSize,i,n);return Be("circle"===r?2*Math.sqrt(a*Math.pow(s/2,2)):"square"===r||"diamond"===r||"image"===r?Math.sqrt(a*Math.pow(s,2)):a*s,s,l)}(e,t,i,n);case E.i.Stops:return function(e,t,i,n,r){var a=Ae(e,r),s=(0,l.Z)(a,3),o=s[0],u=s[1],c=s[2];if(o===u)return Ue(t.stops[o].size,i,n);var p=Ue(t.stops[o].size,i,n);return p+(Ue(t.stops[u].size,i,n)-p)*c}(e,t,i,n,r);case E.i.RealWorldSize:return function(e,t,i,n){var r=((0,w.r)(n)&&n.resolution?n.resolution:1)*q.a[t.valueUnit],a=Ue(t.minSize,i,n),s=Ue(t.maxSize,i,n),l=t.valueRepresentation;return Be("area"===l?2*Math.sqrt(e/Oe)/r:"radius"===l||"distance"===l?2*e/r:e/r,a,s)}(e,t,i,n);case E.i.Identity:return e;case E.i.Unknown:return null}}function Le(e,t,i){if(e.visualVariables){var n,r=[],a=[],l=[],o=[],u=[],c=(0,s.Z)(e.visualVariables);try{for(c.s();!(n=c.n()).done;){var p=n.value;switch(p.type){case"color":a.push(p);break;case"opacity":l.push(p);break;case"rotation":u.push(p);break;case"size":o.push(p)}}}catch(d){c.e(d)}finally{c.f()}return a.forEach((function(e){var n=Ne(e,t,i);r.push({variable:e,value:n})})),l.forEach((function(e){var n=Me(e,t,i);r.push({variable:e,value:n})})),u.forEach((function(e){var n=De(e,t,i);r.push({variable:e,value:n})})),o.forEach((function(e){var n=Ce(e,t,i);r.push({variable:e,value:n})})),r.filter((function(e){return null!=e.value}))}}function Ae(e,t){if(t){var i=0,n=t.length-1;return t.some((function(t,r){return e<t?(n=r,!0):(i=r,!1)})),[i,n,(e-t[i])/(t[n]-t[i])]}}function Pe(e,t,i){var n,r=["proportional","proportional","proportional"],a=(0,s.Z)(e);try{for(a.s();!(n=a.n()).done;){var l=n.value,o=l.useSymbolValue?"symbol-value":Ce(l,t,i);switch(l.axis){case"width":r[0]=o;break;case"depth":r[1]=o;break;case"height":r[2]=o;break;case"width-and-depth":r[0]=o,r[1]=o;break;case"all":case void 0:case null:r[0]=o,r[1]=o,r[2]=o}}}catch(u){a.e(u)}finally{a.f()}return r}var He,Je=Object.freeze({__proto__:null,getAllSizes:Pe,getColor:Ne,getOpacity:Me,getRotationAngle:De,getSize:Ce,getSizeForValue:Re,getSizeFromNumberOrVariable:Ue,getSizeRangeAtScale:function(e,t,i){if(!(e.cache.isScaleDriven&&"3d"===i||t))return null;var n={scale:t,view:i},r=Ue(e.minSize,Te,n),a=Ue(e.maxSize,Te,n);if(null!=r||null!=a){if(r>a){var s=a;a=r,r=s}return{minSize:r,maxSize:a}}},getVisualVariableValues:Le,viewScaleRE:qe}),Ge=m.s.getLogger("esri.renderers.visualVariables.SizeVariable"),We=new g.s({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),$e=new g.s({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function Qe(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,_.o)(e):"size"===e.type?(0,E.e)(e)?e:(delete(e=(0,a.Z)({},e)).type,new Xe(e)):void 0}function Ke(e,t,i){if("object"!=typeof e)return e;var n=new Xe;return n.read(e,i),n}var Xe=He=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).axis=null,n.legendOptions=null,n.normalizationField=null,n.scaleBy=null,n.target=null,n.type="size",n.useSymbolValue=null,n.valueExpression=null,n.valueRepresentation=null,n.valueUnit=null,n}return(0,f.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:qe.test(this.valueExpression)}}},{key:"expression",set:function(e){Ge.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}},{key:"index",set:function(e){(0,E.e)(this.maxSize)&&(this.maxSize.index="visualVariables[".concat(e,"].maxSize")),(0,E.e)(this.minSize)&&(this.minSize.index="visualVariables[".concat(e,"].minSize")),this._set("index",e)}},{key:"inputValueType",get:function(){return(0,E.t)(this)}},{key:"maxDataValue",set:function(e){e&&this.stops&&(Ge.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}},{key:"maxSize",set:function(e){e&&this.stops&&(Ge.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}},{key:"castMaxSize",value:function(e){return Qe(e)}},{key:"readMaxSize",value:function(e,t,i){return Ke(e,0,i)}},{key:"minDataValue",set:function(e){e&&this.stops&&(Ge.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}},{key:"minSize",set:function(e){e&&this.stops&&(Ge.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}},{key:"castMinSize",value:function(e){return Qe(e)}},{key:"readMinSize",value:function(e,t,i){return Ke(e,0,i)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})):e&&(Ge.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}},{key:"transformationType",get:function(){return(0,E.a)(this,this.inputValueType)}},{key:"readValueExpression",value:function(e,t){return e||t.expression&&"$view.scale"}},{key:"writeValueExpressionWebScene",value:function(e,t,i,n){if("$view.scale"===e){if(n&&n.messages){var r=this.index,a="string"==typeof r?r:"visualVariables[".concat(r,"]");n.messages.push(new m.a("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpression",context:n}))}}else t[i]=e}},{key:"readValueUnit",value:function(e){return e?$e.read(e):null}},{key:"clone",value:function(){return new He({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,E.e)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,E.e)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(e){return e.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"flipSizes",value:function(){if(this.transformationType===E.i.ClampedLinear){var e=this.minSize,t=this.maxSize;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===E.i.Stops){for(var i=this.stops,n=i.map((function(e){return e.size})).reverse(),r=i.length,a=0;a<r;a++)i[a].size=n[a];return this}return this}},{key:"getAttributeHash",value:function(){return"".concat((0,o.Z)((0,u.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.target,"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(ye);(0,m.e)([(0,m.d)({readOnly:!0})],Xe.prototype,"cache",null),(0,m.e)([(0,m.d)({type:We.apiValues,json:{type:We.jsonValues,origins:{"web-map":{read:!1}},read:We.read,write:We.write}})],Xe.prototype,"axis",void 0),(0,m.e)([(0,m.d)({type:String,value:null,json:{read:!1}})],Xe.prototype,"expression",null),(0,m.e)([(0,m.d)()],Xe.prototype,"index",null),(0,m.e)([(0,m.d)({type:String,readOnly:!0})],Xe.prototype,"inputValueType",null),(0,m.e)([(0,m.d)({type:_e,json:{write:!0}})],Xe.prototype,"legendOptions",void 0),(0,m.e)([(0,m.d)({type:Number,value:null,json:{write:!0}})],Xe.prototype,"maxDataValue",null),(0,m.e)([(0,m.d)({type:Number,value:null,json:{write:!0}})],Xe.prototype,"maxSize",null),(0,m.e)([(0,m.q)("maxSize")],Xe.prototype,"castMaxSize",null),(0,m.e)([(0,x.o)("maxSize")],Xe.prototype,"readMaxSize",null),(0,m.e)([(0,m.d)({type:Number,value:null,json:{write:!0}})],Xe.prototype,"minDataValue",null),(0,m.e)([(0,m.d)({type:Number,value:null,json:{write:!0}})],Xe.prototype,"minSize",null),(0,m.e)([(0,m.q)("minSize")],Xe.prototype,"castMinSize",null),(0,m.e)([(0,x.o)("minSize")],Xe.prototype,"readMinSize",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Xe.prototype,"normalizationField",void 0),(0,m.e)([(0,m.d)({readOnly:!0})],Xe.prototype,"arcadeRequired",null),(0,m.e)([(0,m.d)({type:String})],Xe.prototype,"scaleBy",void 0),(0,m.e)([(0,m.d)({type:[Fe],value:null,json:{write:!0}})],Xe.prototype,"stops",null),(0,m.e)([(0,m.d)({type:["outline"],json:{write:!0}})],Xe.prototype,"target",void 0),(0,m.e)([(0,m.d)({type:String,readOnly:!0})],Xe.prototype,"transformationType",null),(0,m.e)([(0,m.d)({type:["size"],json:{type:["sizeInfo"]}})],Xe.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Xe.prototype,"useSymbolValue",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Xe.prototype,"valueExpression",void 0),(0,m.e)([(0,x.o)("valueExpression",["valueExpression","expression"])],Xe.prototype,"readValueExpression",null),(0,m.e)([(0,x.r)("web-scene","valueExpression")],Xe.prototype,"writeValueExpressionWebScene",null),(0,m.e)([(0,m.d)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Xe.prototype,"valueRepresentation",void 0),(0,m.e)([(0,m.d)({type:$e.apiValues,json:{write:$e.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Xe.prototype,"valueUnit",void 0),(0,m.e)([(0,x.o)("valueUnit")],Xe.prototype,"readValueUnit",null);var Ye=Xe=He=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.SizeVariable")],Xe),et=m.s.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),tt={color:he,size:Ye,opacity:xe,rotation:ze},it=new g.s({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),nt=/^\[([^\]]+)\]$/i,rt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,y.Z)(this,i),(e=t.apply(this,arguments)).colorVariables=null,e.opacityVariables=null,e.rotationVariables=null,e.sizeVariables=null,e}return(0,f.Z)(i,[{key:"visualVariables",set:function(e){if(this._resetVariables(),(e=e&&e.filter((function(e){return!!e})))&&e.length){var t,i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;switch(n.type){case"color":this.colorVariables.push(n);break;case"opacity":this.opacityVariables.push(n);break;case"rotation":this.rotationVariables.push(n);break;case"size":this.sizeVariables.push(n)}}}catch(a){i.e(a)}finally{i.f()}this.sizeVariables.length&&this.sizeVariables.some((function(e){return!!e.target}))&&e.sort((function(e,t){return e.target===t.target?0:e.target?1:-1}));for(var r=0;r<e.length;r++)e[r].index=r;this._set("visualVariables",e)}else this._set("visualVariables",e)}},{key:"readVariables",value:function(e,t,i){var n=t.rotationExpression,r=t.rotationType,a=n&&n.match(nt),s=a&&a[1];if(s&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:r,field:s})),e)return e.map((function(e){var t=it.read(e.type),n=tt[t];n||(et.warn("Unknown variable type: ".concat(t)),i&&i.messages&&i.messages.push(new m.G("visual-variable:unsupported","visualVariable of type '".concat(t,"' is not supported"),{definition:e,context:i})));var r=new n;return r.read(e,i),r}))}},{key:"writeVariables",value:function(e,t){var i,n=[],r=(0,s.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value.toJSON(t);a&&n.push(a)}}catch(l){r.e(l)}finally{r.f()}return n}},{key:"_resetVariables",value:function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}}]),i}(m.y);(0,m.e)([(0,m.d)()],rt.prototype,"visualVariables",null);var at,st=rt=(0,m.e)([(0,m.n)("esri.renderers.visualVariables.VisualVariableFactory")],rt),lt={base:ye,key:"type",typeMap:{opacity:xe,color:he,rotation:ze,size:Ye}},ot=function(e){var t=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,y.Z)(this,i),(e=t.apply(this,arguments))._vvFactory=new st,e}return(0,f.Z)(i,[{key:"visualVariables",set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"readVisualVariables",value:function(e,t,i){return this._vvFactory.readVariables(e,t,i)}},{key:"writeVisualVariables",value:function(e,t,i,n){t[i]=this._vvFactory.writeVariables(e,n)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;var e,t=(0,s.Z)(this.visualVariables);try{for(t.s();!(e=t.n()).done;){if(e.value.arcadeRequired)return!0}}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"hasVisualVariables",value:function(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}},{key:"getVisualVariablesForType",value:function(e,t){var i=this.visualVariables;return i?i.filter((function(i){return i.type===e&&("string"==typeof t?i.target===t:!1!==t||!i.target)})):[]}},{key:"collectVVRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r,a,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],this.visualVariables&&(n=n.concat(this.visualVariables)),r=(0,s.Z)(n),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=17;break}if(l=a.value,e.t0=l,!e.t0){e.next=15;break}if(l.field&&(0,k.F)(t,i,l.field),l.normalizationField&&(0,k.F)(t,i,l.normalizationField),e.t1=l.valueExpression,!e.t1){e.next=15;break}return e.next=15,(0,k.b)(t,i,l.valueExpression);case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(3),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,19,22,25]])})));return function(t,i){return e.apply(this,arguments)}}()}]),i}(e);return(0,m.e)([(0,m.d)({types:[lt],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,m.e)([(0,x.o)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,m.e)([(0,x.r)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,m.e)([(0,m.n)("esri.renderers.mixins.VisualVariablesMixin")],t)},ut={types:b.M,json:{write:{writer:N.m},origins:{"web-scene":{types:b.h,write:{writer:N.m},read:{reader:(0,m.I)({types:b.h})}}}}},ct={types:{base:M.a,key:"type",typeMap:{"simple-fill":b.j.typeMap["simple-fill"],"picture-fill":b.j.typeMap["picture-fill"],"polygon-3d":b.j.typeMap["polygon-3d"]}},json:{write:{writer:N.m},origins:{"web-scene":{type:b.b,write:{writer:N.m}}}}},pt=at=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.minValue=null,n.maxValue=0,n.symbol=null,n}return(0,f.Z)(i,[{key:"clone",value:function(){return new at({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}}]),i}(S.l);(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],pt.prototype,"description",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],pt.prototype,"label",void 0),(0,m.e)([(0,m.d)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],pt.prototype,"minValue",void 0),(0,m.e)([(0,m.d)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],pt.prototype,"maxValue",void 0),(0,m.e)([(0,m.d)(ut)],pt.prototype,"symbol",void 0);var dt,yt=pt=at=(0,m.e)([(0,m.n)("esri.renderers.support.ClassBreakInfo")],pt),ft=m.s.getLogger("esri.renderers.ClassBreaksRenderer"),vt="percent-of-total",ht="field",mt=new g.s({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:vt,esriNormalizeByField:ht}),bt=(0,m.b)(yt),gt=dt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e))._compiledValueExpression={valueExpression:null,compiledFunction:null},n.backgroundFillSymbol=null,n.classBreakInfos=null,n.defaultLabel=null,n.defaultSymbol=null,n.field=null,n.isMaxInclusive=!0,n.legendOptions=null,n.normalizationField=null,n.normalizationTotal=null,n.type="class-breaks",n.valueExpression=null,n.valueExpressionTitle=null,n._set("classBreakInfos",[]),n}return(0,f.Z)(i,[{key:"readClassBreakInfos",value:function(e,t,i){if(Array.isArray(e)){var n=t.minValue;return e.map((function(e){var t=new yt;return t.read(e,i),null==t.minValue&&(t.minValue=n),null==t.maxValue&&(t.maxValue=t.minValue),n=t.maxValue,t}))}}},{key:"writeClassBreakInfos",value:function(e,t,i,n){var r=e.map((function(e){return e.write({},n)}));this._areClassBreaksConsecutive()&&r.forEach((function(e){return delete e.classMinValue})),t[i]=r}},{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(ft.error(".field: field must be a string value"),null):(0,m.a8)(e)}},{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=(t?ht:i&&vt)||null,t&&i&&ft.warn("warning: both normalizationField and normalizationTotal are set!")):e!==ht&&e!==vt||(e=null),e},set:function(e){this._set("normalizationType",e)}},{key:"addClassBreakInfo",value:function(e,t,i){var n;n="number"==typeof e?new yt({minValue:e,maxValue:t,symbol:(0,b.g)(i)}):bt((0,w.m)(e)),this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")}},{key:"removeClassBreakInfo",value:function(e,t){for(var i=this.classBreakInfos.length,n=0;n<i;n++){var r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(n,1);break}}}},{key:"getBreakIndex",value:function(e,t){return this.valueExpression&&((0,w.t)(t)||(0,w.t)(t.arcade))&&ft.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}},{key:"getClassBreakInfo",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,e.t0=this.valueExpression&&((0,w.t)(i)||(0,w.t)(i.arcade)),!e.t0){e.next=11;break}return e.t1=a.Z,e.t2=(0,a.Z)({},n),e.t3={},e.next=8,(0,k.a)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},n=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return r=this.getBreakIndex(t,n),e.abrupt("return",-1!==r?this.classBreakInfos[r]:null);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!(0,w.t)(t)&&!(0,w.t)(t.arcade)){var i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}ft.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r,s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,!this.valueExpression||!(0,w.t)(i)&&!(0,w.t)(i.arcade)){e.next=11;break}return e.next=4,(0,k.a)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:n=(0,a.Z)((0,a.Z)({},n),{},{arcade:r});case 11:return l=this.getBreakIndex(t,n),e.abrupt("return",l>-1?this.classBreakInfos[l].symbol:this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e=[];return this.classBreakInfos.forEach((function(t){t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(i,".").concat(this.field,".").concat(this.valueExpression)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"clone",value:function(){return new dt({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,w.m)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,w.m)(this.visualVariables),legendOptions:(0,w.m)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"collectRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.collectVVRequiredFields(t,i),this.collectSymbolFields(t,i)],e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[].concat((0,d.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,i)}))),[(0,k.b)(t,i,this.valueExpression)]),(0,k.F)(t,i,this.field),(0,k.F)(t,i,this.normalizationField),e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getBreakIndexForExpression",value:function(e,t){var i=(0,w.n)(t,{}),n=i.viewingMode,r=i.scale,a=i.spatialReference,s=i.arcade,l=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null,o=(0,w.e)(s).arcadeUtils;if(!l){var u=o.createSyntaxTree(this.valueExpression);l=o.createFunction(u),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=this.valueExpression;var c=o.executeFunction(l,o.createExecContext(e,o.getViewInfo({viewingMode:n,scale:r,spatialReference:a})));return this._getBreakIndexfromInfos(c)}},{key:"_getBreakIndexForField",value:function(e){var t=this.field,i=e.attributes,n=this.normalizationType,r=parseFloat(i[t]);if(n){var a=this.normalizationTotal,s=parseFloat(i[this.normalizationField]);if("log"===n)r=Math.log(r)*Math.LOG10E;else if(n!==vt||isNaN(a)){if(n===ht&&!isNaN(s)){if(isNaN(r)||isNaN(s))return-1;r/=s}}else r=r/a*100}return this._getBreakIndexfromInfos(r)}},{key:"_getBreakIndexfromInfos",value:function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var i=0;i<this.classBreakInfos.length;i++){var n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return i}return-1}},{key:"_areClassBreaksConsecutive",value:function(){for(var e=this.classBreakInfos,t=e.length,i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}}]),i}(ot(se));(0,m.e)([(0,m.d)(ct)],gt.prototype,"backgroundFillSymbol",void 0),(0,m.e)([(0,m.d)({type:[yt]})],gt.prototype,"classBreakInfos",void 0),(0,m.e)([(0,x.o)("classBreakInfos")],gt.prototype,"readClassBreakInfos",null),(0,m.e)([(0,x.r)("classBreakInfos")],gt.prototype,"writeClassBreakInfos",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],gt.prototype,"defaultLabel",void 0),(0,m.e)([(0,m.d)(ut)],gt.prototype,"defaultSymbol",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],gt.prototype,"field",void 0),(0,m.e)([(0,m.q)("field")],gt.prototype,"castField",null),(0,m.e)([(0,m.d)({type:Boolean})],gt.prototype,"isMaxInclusive",void 0),(0,m.e)([(0,m.d)({type:z.p,json:{write:!0}})],gt.prototype,"legendOptions",void 0),(0,m.e)([(0,m.d)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],gt.prototype,"minValue",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],gt.prototype,"normalizationField",void 0),(0,m.e)([(0,m.d)({type:Number,cast:function(e){return(0,m.F)(e)},json:{write:!0}})],gt.prototype,"normalizationTotal",void 0),(0,m.e)([(0,m.d)({type:mt.apiValues,value:null,json:{type:mt.jsonValues,read:mt.read,write:mt.write}})],gt.prototype,"normalizationType",null),(0,m.e)([(0,V.r)({classBreaks:"class-breaks"})],gt.prototype,"type",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],gt.prototype,"valueExpression",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],gt.prototype,"valueExpressionTitle",void 0);var wt,Vt=gt=dt=(0,m.e)([(0,m.n)("esri.renderers.ClassBreaksRenderer")],gt),xt=wt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.value=null,n}return(0,f.Z)(i,[{key:"castValue",value:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:"".concat(e)}},{key:"clone",value:function(){return new wt({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return"".concat(this.value,".").concat(e)}}]),i}(S.l);(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],xt.prototype,"description",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],xt.prototype,"label",void 0),(0,m.e)([(0,m.d)(ut)],xt.prototype,"symbol",void 0),(0,m.e)([(0,m.d)({json:{type:String,write:{writer:function(e,t){t.value=null===e||void 0===e?void 0:e.toString()}}}})],xt.prototype,"value",void 0),(0,m.e)([(0,m.q)("value")],xt.prototype,"castValue",null);var kt,St=xt=wt=(0,m.e)([(0,m.n)("esri.renderers.support.UniqueValueInfo")],xt),zt=m.s.getLogger("esri.renderers.UniqueValueRenderer"),It=(0,m.b)(St),Zt=kt=function(e){(0,v.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,y.Z)(this,i),(n=t.call(this,e))._valueInfoMap={},n._isDefaultSymbolDerived=!1,n.type="unique-value",n.backgroundFillSymbol=null,n.field=null,n.field2=null,n.field3=null,n.valueExpression=null,n.valueExpressionTitle=null,n.legendOptions=null,n.defaultLabel=null,n.fieldDelimiter=null,n.portal=null,n.styleOrigin=null,n.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var i=!1,n={type:"collection",added:[],removed:[],changed:[],unchanged:[]},r=function(r){var a=e.find((function(e){return e.value===t[r].value}));a?(0,I.m)(a,t[r])?(n.changed.push({type:"complete",oldValue:a,newValue:t[r]}),i=!0):n.unchanged.push({oldValue:a,newValue:t[r]}):(n.added.push(t[r]),i=!0)},a=0;a<t.length;a++)r(a);for(var s=function(r){t.find((function(t){return t.value===e[r].value}))||(n.removed.push(e[r]),i=!0)},l=0;l<e.length;l++)s(l);return i?n:void 0}}},n._set("uniqueValueInfos",[]),n}return(0,f.Z)(i,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"castField",value:function(e){return null==e||"function"==typeof e?e:(0,m.a8)(e)}},{key:"writeField",value:function(e,t,i,n){"string"==typeof e?t[i]=e:n&&n.messages?n.messages.push(new m.a("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):zt.error(".field: cannot write field to JSON since it's not a string value")}},{key:"defaultSymbol",set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}},{key:"readPortal",value:function(e,t,i){return i.portal||Z.B.getDefault()}},{key:"readStyleOrigin",value:function(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var n=(0,D.i)(t.styleUrl,i);return Object.freeze({styleUrl:n})}}},{key:"writeStyleOrigin",value:function(e,t,i,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,D.c)(e.styleUrl,n))}},{key:"uniqueValueInfos",set:function(e){this.styleOrigin?zt.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}},{key:"addUniqueValueInfo",value:function(e,t){var i;this.styleOrigin?zt.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(i="object"==typeof e?It(e):new St({value:e,symbol:(0,b.g)(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i)}},{key:"removeUniqueValueInfo",value:function(e){if(this.styleOrigin)zt.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}},{key:"getUniqueValueInfo",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,e.t0=this.valueExpression&&((0,w.t)(i)||(0,w.t)(i.arcade)),!e.t0){e.next=11;break}return e.t1=a.Z,e.t2=(0,a.Z)({},n),e.t3={},e.next=8,(0,k.a)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},n=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return e.abrupt("return",this._getUniqueValueInfo(t,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!(0,w.t)(t)&&!(0,w.t)(t.arcade)){var i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}zt.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n,r,s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,!this.valueExpression||!(0,w.t)(n)&&!(0,w.t)(n.arcade)){e.next=11;break}return e.next=4,(0,k.a)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:n=(0,a.Z)((0,a.Z)({},n),{},{arcade:r});case 11:return l=this._getUniqueValueInfo(t,n),e.abrupt("return",l&&l.symbol||this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e,t=[],i=(0,s.Z)(this.uniqueValueInfos);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.symbol&&t.push(n.symbol)}}catch(r){i.e(r)}finally{i.f()}return this.defaultSymbol&&t.push(this.defaultSymbol),t}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){return"".concat(JSON.stringify(this.backgroundFillSymbol),".").concat(JSON.stringify(this.defaultSymbol),".").concat(this.uniqueValueInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".","".concat(this.field,".").concat(this.field2,".").concat(this.field3,".").concat(this.fieldDelimiter),".").concat(this.valueExpression)}},{key:"clone",value:function(){var e=new kt({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,w.m)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,w.m)(this.visualVariables),legendOptions:(0,w.m)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,w.m)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=(0,w.m)(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,w.m)(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"collectRequiredFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.collectVVRequiredFields(t,i),this.collectSymbolFields(t,i)],e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,p.Z)((0,c.Z)().mark((function e(t,i){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[].concat((0,d.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,i)}))),[(0,k.b)(t,i,this.valueExpression)]),(0,k.F)(t,i,this.field),(0,k.F)(t,i,this.field2),(0,k.F)(t,i,this.field3),e.next=6,Promise.all(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"populateFromStyle",value:function(){var e=this;return(0,C.c)(this.styleOrigin,{portal:this.portal}).then((function(t){var i=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((function(n){var r=new b.c({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:n.name});e.defaultSymbol||n.name!==t.data.defaultItem||(e.defaultSymbol=r,e._isDefaultSymbolDerived=!0);var a=new St({value:n.name,symbol:r});i.push(a),e._valueInfoMap[n.name]=a})),e._set("uniqueValueInfos",Object.freeze(i)),!e.defaultSymbol&&e.uniqueValueInfos.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e}))}},{key:"_updateValueInfoMap",value:function(){var e=this;this._valueInfoMap={},this.uniqueValueInfos.forEach((function(t){return e._valueInfoMap[t.value+""]=t}))}},{key:"_getUniqueValueInfo",value:function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}},{key:"_getUnqiueValueInfoForExpression",value:function(e,t){var i=(0,w.n)(t,{}),n=i.viewingMode,r=i.scale,a=i.spatialReference,s=i.arcade,l=this._cache.compiledFunc,o=(0,w.e)(s).arcadeUtils;if(!l){var u=o.createSyntaxTree(this.valueExpression);l=o.createFunction(u),this._cache.compiledFunc=l}var c=o.executeFunction(l,o.createExecContext(e,o.getViewInfo({viewingMode:n,scale:r,spatialReference:a})));return this._valueInfoMap[c+""]}},{key:"_getUnqiueValueInfoForFields",value:function(e){var t,i=this.field,n=e.attributes;if("function"!=typeof i&&this.field2){var r=this.field2,a=this.field3,s=[];i&&s.push(n[i]),r&&s.push(n[r]),a&&s.push(n[a]),t=s.join(this.fieldDelimiter||"")}else"function"==typeof i?t=i(e):i&&(t=n[i]);return this._valueInfoMap[t+""]}}],[{key:"fromPortalStyle",value:function(e,t){var i=new kt(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Z.B.getDefault());var n=i.populateFromStyle();return n.catch((function(t){zt.error("#fromPortalStyle('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style name",t)})),n}},{key:"fromStyleUrl",value:function(e,t){var i=new kt(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));var n=i.populateFromStyle();return n.catch((function(t){zt.error("#fromStyleUrl('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style URL",t)})),n}}]),i}(ot(se));(0,m.e)([(0,m.d)({readOnly:!0})],Zt.prototype,"_cache",null),(0,m.e)([(0,V.r)({uniqueValue:"unique-value"})],Zt.prototype,"type",void 0),(0,m.e)([(0,m.d)(ct)],Zt.prototype,"backgroundFillSymbol",void 0),(0,m.e)([(0,m.d)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Zt.prototype,"field",void 0),(0,m.e)([(0,m.q)("field")],Zt.prototype,"castField",null),(0,m.e)([(0,x.r)("field")],Zt.prototype,"writeField",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Zt.prototype,"field2",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Zt.prototype,"field3",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Zt.prototype,"valueExpression",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Zt.prototype,"valueExpressionTitle",void 0),(0,m.e)([(0,m.d)({type:z.p,json:{write:!0}})],Zt.prototype,"legendOptions",void 0),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Zt.prototype,"defaultLabel",void 0),(0,m.e)([(0,m.d)((0,w.u)((0,a.Z)({},ut),{json:{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Zt.prototype,"defaultSymbol",null),(0,m.e)([(0,m.d)({type:String,json:{write:!0}})],Zt.prototype,"fieldDelimiter",void 0),(0,m.e)([(0,m.d)({type:Z.B,readOnly:!0})],Zt.prototype,"portal",void 0),(0,m.e)([(0,x.o)("portal",["styleName"])],Zt.prototype,"readPortal",null),(0,m.e)([(0,m.d)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],Zt.prototype,"styleOrigin",void 0),(0,m.e)([(0,x.o)("styleOrigin",["styleName","styleUrl"])],Zt.prototype,"readStyleOrigin",null),(0,m.e)([(0,x.r)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Zt.prototype,"writeStyleOrigin",null),(0,m.e)([(0,m.d)({type:[St],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Zt.prototype,"uniqueValueInfos",null);var Ft=Zt=kt=(0,m.e)([(0,m.n)("esri.renderers.UniqueValueRenderer")],Zt)},43782:function(e,t,i){i.d(t,{a:function(){return l},b:function(){return c},m:function(){return u},p:function(){return y}});var n=i(24980),r=i(23132),a=i(75610),s={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(!e)return{symbol:null};var i,a=t.retainId,l=void 0===a?s.retainId:a,o=t.ignoreDrivers,u=void 0===o?s.ignoreDrivers:o,c=t.hasLabelingContext,p=void 0===c?s.hasLabelingContext:c,d=t.retainCIM,y=void 0===d?s.retainCIM:d;if((0,n.d)(e)||e instanceof n.c)i=e.clone();else if("cim"===e.type){var f,v,h=null===(f=e.data)||void 0===f||null===(v=f.symbol)||void 0===v?void 0:v.type;if("CIMPointSymbol"!==h)return{error:new r.a("symbol-conversion:unsupported-cim-symbol","CIM symbol of type '".concat(h||"unknown","' is unsupported in 3D"),{symbol:e})};i=y?e.clone():n.e.fromCIMSymbol(e)}else if(e instanceof n.m)i=n.f.fromSimpleLineSymbol(e);else if(e instanceof n.y)i=n.e.fromSimpleMarkerSymbol(e);else if(e instanceof n.n)i=n.e.fromPictureMarkerSymbol(e);else if(e instanceof n.S)i=n.b.fromSimpleFillSymbol(e);else{if(!(e instanceof n.a))return{error:new r.a("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};i=p?n.i.fromTextSymbol(e):n.e.fromTextSymbol(e)}if(l&&"cim"!==i.type&&(i.id=e.id),u&&(0,n.d)(i))for(var m=0;m<i.symbolLayers.length;++m)i.symbolLayers.getItemAt(m)._ignoreDrivers=!0;return{symbol:i}}var o=["building-scene","integrated-mesh","point-cloud","scene"];function u(e,t,i,n){var r=d(e,{},{context:n,isLabelSymbol:!1});(0,a.r)(r)&&(t[i]=r)}function c(e,t,i,n){var r=d(e,{},{context:n,isLabelSymbol:!0});(0,a.r)(r)&&(t[i]=r)}function p(e){return e instanceof n.A||e instanceof n.c}function d(e,t,i){var n;if((0,a.t)(e))return null;var s=i.context,u=i.isLabelSymbol,c=null===s||void 0===s?void 0:s.origin,d=null===s||void 0===s?void 0:s.messages;if("web-scene"===c&&!p(e)){var y=l(e,{retainCIM:!0,hasLabelingContext:u});return(0,a.r)(y.symbol)?y.symbol.write(t,s):(null!==d&&void 0!==d&&d.push(new r.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:s,error:y.error})),null)}return("web-map"===c||"portal-item"===c&&!o.includes(null===s||void 0===s||null===(n=s.layer)||void 0===n?void 0:n.type))&&p(e)?(null!==d&&void 0!==d&&d.push(new r.a("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView"),{symbol:e,context:s})),null):e.write(t,s)}function y(e,t){return(0,n.k)(e,null,t)}},33976:function(e,t,i){i.d(t,{U:function(){return V},a:function(){return p},c:function(){return v},d:function(){return m},j:function(){return b},p:function(){return h}});var n=i(74165),r=i(1413),a=i(37762),s=i(15861),l=i(57714),o=i(23132),u=i(75610),c=i(79611),p=function(){return!!(0,u.a)("enable-feature:direct-3d-object-feature-layer-display")},d={};function y(){return y=(0,s.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t,i);case 3:return e.t0=e.sent.data,e.t1=(0,l.O)(t),e.t2=t,e.abrupt("return",{data:e.t0,baseUrl:e.t1,styleUrl:e.t2});case 9:return e.prev=9,e.t3=e.catch(0),e.abrupt("return",((0,o.M)(e.t3),null));case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),y.apply(this,arguments)}function f(e,t,i){var n,r=(0,u.r)(t.portal)?t.portal:c.B.getDefault(),s="".concat(r.url," - ").concat(r.user&&r.user.username," - ").concat(e);return d[s]||(d[s]=function(e,t,i){return t.load(i).then((function(){var n=new c.d({disableExtraQuery:!0,query:"owner:".concat(g," AND type:").concat(w,' AND typekeywords:"').concat(e,'"')});return t.queryItems(n,i)})).then((function(t){var n=t.results,r=null,s=e.toLowerCase();if(n&&Array.isArray(n)){var l,u=(0,a.Z)(n);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(c.typeKeywords.some((function(e){return e.toLowerCase()===s}))&&c.type===w&&c.owner===g){r=c;break}}}catch(p){u.e(p)}finally{u.f()}}if(!r)throw new o.a("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return r.load(i)}))}(e,r,i).then((function(e){return n=e,e.fetchData()})).then((function(t){return{data:t,baseUrl:n.itemUrl,styleName:e}}))),d[s]}function v(e,t,i){return e.styleUrl?function(e,t){return y.apply(this,arguments)}(e.styleUrl,i):e.styleName?f(e.styleName,t,i):Promise.reject(new o.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function h(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function m(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,u.a)("enable-feature:force-wosr")){var i,n=(0,a.Z)(e.formatInfos);try{for(n.s();!(i=n.n()).done;){var r=i.value;if("gltf"===r.type)return r.href}}catch(s){n.e(s)}finally{n.f()}}return e.webRef}function b(e,t){var i=(0,r.Z)({responseType:"json",query:{f:"json"}},t);return(0,l.U)((0,l.F)(e),i)}var g="esri_en",w="Style",V="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"}}]);
//# sourceMappingURL=7154.5f083d9f.chunk.js.map